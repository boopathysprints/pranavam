"use strict";var t8=Object.defineProperty,n8=Object.defineProperties,r8=Object.getOwnPropertyDescriptors,WV=Object.getOwnPropertySymbols,s8=Object.prototype.hasOwnProperty,o8=Object.prototype.propertyIsEnumerable,qV=(Qe,Ce,N)=>Ce in Qe?t8(Qe,Ce,{enumerable:!0,configurable:!0,writable:!0,value:N}):Qe[Ce]=N,KV=(Qe,Ce)=>{for(var N in Ce||(Ce={}))s8.call(Ce,N)&&qV(Qe,N,Ce[N]);if(WV)for(var N of WV(Ce))o8.call(Ce,N)&&qV(Qe,N,Ce[N]);return Qe},ZV=(Qe,Ce)=>n8(Qe,r8(Ce));(self.webpackChunkpranavam=self.webpackChunkpranavam||[]).push([[179],{2011:(Qe,Ce,N)=>{N.d(Ce,{Dh:()=>le,GT:()=>_e,cc:()=>Re,hO:()=>$e,on:()=>$,pX:()=>re,xv:()=>pe});var o=N(5e3),ee=N(127),L=N(5813);Qe=N.hmd(Qe);const ce=["ngOnDestroy"],re=(De,We,Ye,Me={})=>new Proxy(De,{get:(Te,Se)=>Ye.runOutsideAngular(()=>{var He;if(De[Se])return(null===(He=null==Me?void 0:Me.spy)||void 0===He?void 0:He.get)&&Me.spy.get(Se,De[Se]),De[Se];if(ce.indexOf(Se)>-1)return()=>{};const je=We.toPromise().then(G=>{const Ee=G&&G[Se];return"function"==typeof Ee?Ee.bind(G):Ee&&Ee.then?Ee.then(Y=>Ye.run(()=>Y)):Ye.run(()=>Ee)});return new Proxy(()=>{},{get:(G,Ee)=>je[Ee],apply:(G,Ee,Y)=>je.then(se=>{var ne;const ve=se&&se(...Y);return(null===(ne=null==Me?void 0:Me.spy)||void 0===ne?void 0:ne.apply)&&Me.spy.apply(Se,Y,ve),ve})})})}),_e=(De,We)=>{We.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Me=>{Object.defineProperty(De.prototype,Me,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Me))})})};class de{constructor(We){return We}}const le=new o.OlP("angularfire2.app.options"),pe=new o.OlP("angularfire2.app.name");function $(De,We,Ye){const Te="object"==typeof Ye&&Ye||{};Te.name=Te.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const He=ee.Z.apps.filter(je=>je&&je.name===Te.name)[0]||We.runOutsideAngular(()=>ee.Z.initializeApp(De,Te));try{JSON.stringify(De)!==JSON.stringify(He.options)&&z("error",`${He.name} Firebase App already initialized with different options${Qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new de(He)}const z=(De,...We)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[De](...We)},ie={provide:de,useFactory:$,deps:[le,o.R0b,[new o.FiY,pe]]};let $e=(()=>{class De{constructor(Ye){ee.Z.registerVersion("angularfire",L.q4.full,"core"),ee.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ee.Z.registerVersion("angular",o.q4F.full,Ye.toString())}static initializeApp(Ye,Me){return{ngModule:De,providers:[{provide:le,useValue:Ye},{provide:pe,useValue:Me}]}}}return De.\u0275fac=function(Ye){return new(Ye||De)(o.LFG(o.Lbi))},De.\u0275mod=o.oAB({type:De}),De.\u0275inj=o.cJS({providers:[ie]}),De})();function Re(De,We,Ye,Me,Te){const[,Se,He]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===De)||[];if(Se)return function Fe(De,We){try{return De.toString()===We.toString()}catch(Ye){return De===We}}(Te,He)||(ge("error",`${We} was already initialized on the ${Ye} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Te,was:He})),Se;{const je=Me();return globalThis.\u0275AngularfireInstanceCache.push([De,je,Te]),je}}const Ue=!!Qe.hot,ge=(De,...We)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[De](...We)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Qe,Ce,N)=>{N.d(Ce,{q4:()=>yi,iC:()=>pu,HU:()=>Dc,vb:()=>Lf,JM:()=>Sa});var o=N(5e3),ee=N(5867),L=N(5861),ce=N(9681),re=N(2090),_e=N(4859),de=N(1877),le=N(8766);const pe="@firebase/installations",$="0.5.9",ie=`w:${$}`,$e="FIS_v2",We=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(S){return S instanceof re.ZR&&S.code.includes("request-failed")}function Me({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Te(S){return{token:S.token,requestStatus:2,expiresIn:se(S.expiresIn),creationTime:Date.now()}}function Se(S,D){return He.apply(this,arguments)}function He(){return(He=(0,L.Z)(function*(S,D){const U=(yield D.json()).error;return We.create("request-failed",{requestName:S,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function je({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function G(S,{refreshToken:D}){const R=je(S);return R.append("Authorization",function ne(S){return`${$e} ${S}`}(D)),R}function Ee(S){return Y.apply(this,arguments)}function Y(){return(Y=(0,L.Z)(function*(S){const D=yield S();return D.status>=500&&D.status<600?S():D})).apply(this,arguments)}function se(S){return Number(S.replace("s","000"))}function ve(S,D){return ue.apply(this,arguments)}function ue(){return(ue=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:D},{fid:R}){const U=Me(S),J=je(S),oe=D.getImmediate({optional:!0});if(oe){const dt=yield oe.getHeartbeatsHeader();dt&&J.append("x-firebase-client",dt)}const tt={method:"POST",headers:J,body:JSON.stringify({fid:R,authVersion:$e,appId:S.appId,sdkVersion:ie})},ot=yield Ee(()=>fetch(U,tt));if(ot.ok){const dt=yield ot.json();return{fid:dt.fid||R,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Te(dt.authToken)}}throw yield Se("Create Installation",ot)})).apply(this,arguments)}function Le(S){return new Promise(D=>{setTimeout(D,S)})}const qt=/^[cdef][\w-]{21}$/;function Ke(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const R=function cn(S){return function gt(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return qt.test(R)?R:""}catch(S){return""}}function Fn(S){return`${S.appName}!${S.appId}`}const hn=new Map;function nn(S,D){const R=Fn(S);zt(R,D),function es(S,D){const R=function Ii(){return!wr&&"BroadcastChannel"in self&&(wr=new BroadcastChannel("[Firebase] FID Change"),wr.onmessage=S=>{zt(S.data.key,S.data.fid)}),wr}();R&&R.postMessage({key:S,fid:D}),function Gi(){0===hn.size&&wr&&(wr.close(),wr=null)}()}(R,D)}function zt(S,D){const R=hn.get(S);if(R)for(const U of R)U(D)}let wr=null;const ar="firebase-installations-store";let Hr=null;function vt(){return Hr||(Hr=(0,le.X3)("firebase-installations-database",1,{upgrade:(S,D)=>{0===D&&S.createObjectStore(ar)}})),Hr}function br(S,D){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,L.Z)(function*(S,D){const R=Fn(S),J=(yield vt()).transaction(ar,"readwrite"),oe=J.objectStore(ar),Oe=yield oe.get(R);return yield oe.put(D,R),yield J.done,(!Oe||Oe.fid!==D.fid)&&nn(S,D.fid),D})).apply(this,arguments)}function Ln(S){return Js.apply(this,arguments)}function Js(){return(Js=(0,L.Z)(function*(S){const D=Fn(S),U=(yield vt()).transaction(ar,"readwrite");yield U.objectStore(ar).delete(D),yield U.done})).apply(this,arguments)}function lr(S,D){return ai.apply(this,arguments)}function ai(){return(ai=(0,L.Z)(function*(S,D){const R=Fn(S),J=(yield vt()).transaction(ar,"readwrite"),oe=J.objectStore(ar),Oe=yield oe.get(R),tt=D(Oe);return void 0===tt?yield oe.delete(R):yield oe.put(tt,R),yield J.done,tt&&(!Oe||Oe.fid!==tt.fid)&&nn(S,tt.fid),tt})).apply(this,arguments)}function Vn(S){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,L.Z)(function*(S){let D;const R=yield lr(S.appConfig,U=>{const J=Io(U),oe=Kt(S,J);return D=oe.registrationPromise,oe.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function Io(S){return So(S||{fid:Ke(),registrationStatus:0})}function Kt(S,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(We.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},U=function ut(S,D){return Ct.apply(this,arguments)}(S,R);return{installationEntry:R,registrationPromise:U}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Si(S)}:{installationEntry:D}}function Ct(){return(Ct=(0,L.Z)(function*(S,D){try{const R=yield ve(S,D);return br(S.appConfig,R)}catch(R){throw Ye(R)&&409===R.customData.serverCode?yield Ln(S.appConfig):yield br(S.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Si(S){return Er.apply(this,arguments)}function Er(){return(Er=(0,L.Z)(function*(S){let D=yield $t(S.appConfig);for(;1===D.registrationStatus;)yield Le(100),D=yield $t(S.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Vn(S);return U||R}return D})).apply(this,arguments)}function $t(S){return lr(S,D=>{if(!D)throw We.create("installation-not-found");return So(D)})}function So(S){return function Di(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function xi(S,D){return H.apply(this,arguments)}function H(){return(H=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:D},R){const U=q(S,R),J=G(S,R),oe=D.getImmediate({optional:!0});if(oe){const dt=yield oe.getHeartbeatsHeader();dt&&J.append("x-firebase-client",dt)}const tt={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ie,appId:S.appId}})},ot=yield Ee(()=>fetch(U,tt));if(ot.ok)return Te(yield ot.json());throw yield Se("Generate Auth Token",ot)})).apply(this,arguments)}function q(S,{fid:D}){return`${Me(S)}/${D}/authTokens:generate`}function K(S){return xe.apply(this,arguments)}function xe(){return(xe=(0,L.Z)(function*(S,D=!1){let R;const U=yield lr(S.appConfig,oe=>{if(!xt(oe))throw We.create("not-registered");const Oe=oe.authToken;if(!D&&wn(Oe))return oe;if(1===Oe.requestStatus)return R=W(S,D),oe;{if(!navigator.onLine)throw We.create("app-offline");const tt=Qn(oe);return R=Je(S,tt),tt}});return R?yield R:U.authToken})).apply(this,arguments)}function W(S,D){return te.apply(this,arguments)}function te(){return(te=(0,L.Z)(function*(S,D){let R=yield Pe(S.appConfig);for(;1===R.authToken.requestStatus;)yield Le(100),R=yield Pe(S.appConfig);const U=R.authToken;return 0===U.requestStatus?K(S,D):U})).apply(this,arguments)}function Pe(S){return lr(S,D=>{if(!xt(D))throw We.create("not-registered");return function $i(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Je(S,D){return yt.apply(this,arguments)}function yt(){return(yt=(0,L.Z)(function*(S,D){try{const R=yield xi(S,D),U=Object.assign(Object.assign({},D),{authToken:R});return yield br(S.appConfig,U),R}catch(R){if(!Ye(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield br(S.appConfig,U)}else yield Ln(S.appConfig);throw R}})).apply(this,arguments)}function xt(S){return void 0!==S&&2===S.registrationStatus}function wn(S){return 2===S.requestStatus&&!function It(S){const D=Date.now();return D<S.creationTime||S.creationTime+S.expiresIn<D+36e5}(S)}function Qn(S){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:D})}function Ya(){return(Ya=(0,L.Z)(function*(S){const D=S,{installationEntry:R,registrationPromise:U}=yield Vn(D);return U?U.catch(console.error):K(D).catch(console.error),R.fid})).apply(this,arguments)}function Qa(){return(Qa=(0,L.Z)(function*(S,D=!1){const R=S;return yield Jn(R),(yield K(R,D)).token})).apply(this,arguments)}function Jn(S){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,L.Z)(function*(S){const{registrationPromise:D}=yield Vn(S);D&&(yield D)})).apply(this,arguments)}function ua(S){return We.create("missing-app-config-values",{valueName:S})}const cr="installations",pt=S=>{const D=S.getProvider("app").getImmediate(),R=function fi(S){if(!S||!S.options)throw ua("App Configuration");if(!S.name)throw ua("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!S.options[R])throw ua(R);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,ce._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},fn=S=>{const D=S.getProvider("app").getImmediate(),R=(0,ce._getProvider)(D,cr).getImmediate();return{getId:()=>function Fl(S){return Ya.apply(this,arguments)}(R),getToken:J=>function Ll(S){return Qa.apply(this,arguments)}(R,J)}};(function dr(){(0,ce._registerComponent)(new _e.wA(cr,pt,"PUBLIC")),(0,ce._registerComponent)(new _e.wA("installations-internal",fn,"PRIVATE"))})(),(0,ce.registerVersion)(pe,$),(0,ce.registerVersion)(pe,$,"esm2017");const ns="@firebase/remote-config",Bn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ds{constructor(D,R,U,J){this.client=D,this.storage=R,this.storageCache=U,this.logger=J}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,J=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var R=this;return(0,L.Z)(function*(){const[U,J]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(J&&R.isCachedDataFresh(D.cacheMaxAgeMillis,U))return J;D.eTag=J&&J.eTag;const oe=yield R.client.fetch(D),Oe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Oe.push(R.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Oe),oe})()}}function Ed(S=navigator){return S.languages&&S.languages[0]||S.language}class Ai{constructor(D,R,U,J,oe,Oe){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=U,this.projectId=J,this.apiKey=oe,this.appId=Oe}fetch(D){var R=this;return(0,L.Z)(function*(){const[U,J]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ot={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:J,app_id:R.appId,language_code:Ed()},dt={method:"POST",headers:tt,body:JSON.stringify(ot)},Vt=fetch(Oe,dt),Et=new Promise((Dr,Kr)=>{D.signal.addEventListener(()=>{const Aa=new Error("The operation was aborted.");Aa.name="AbortError",Kr(Aa)})});let ni;try{yield Promise.race([Vt,Et]),ni=yield Vt}catch(Dr){let Kr="fetch-client-network";throw"AbortError"===Dr.name&&(Kr="fetch-timeout"),Bn.create(Kr,{originalErrorMessage:Dr.message})}let Wn=ni.status;const qo=ni.headers.get("ETag")||void 0;let Vs,fr;if(200===ni.status){let Dr;try{Dr=yield ni.json()}catch(Kr){throw Bn.create("fetch-client-parse",{originalErrorMessage:Kr.message})}Vs=Dr.entries,fr=Dr.state}if("INSTANCE_STATE_UNSPECIFIED"===fr?Wn=500:"NO_CHANGE"===fr?Wn=304:("NO_TEMPLATE"===fr||"EMPTY_CONFIG"===fr)&&(Vs={}),304!==Wn&&200!==Wn)throw Bn.create("fetch-status",{httpStatus:Wn});return{status:Wn,eTag:qo,config:Vs}})()}}class rm{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,L.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:U}){var J=this;return(0,L.Z)(function*(){yield function no(S,D){return new Promise((R,U)=>{const J=Math.max(D-Date.now(),0),oe=setTimeout(R,J);S.addEventListener(()=>{clearTimeout(oe),U(Bn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const oe=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Td(S){if(!(S instanceof re.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}(oe))throw oe;const Oe={throttleEndTimeMillis:Date.now()+(0,re.$s)(U),backoffCount:U+1};return yield J.storage.setThrottleMetadata(Oe),J.attemptFetch(D,Oe)}})()}}class Id{constructor(D,R,U,J,oe){this.app=D,this._client=R,this._storageCache=U,this._storage=J,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function lc(S,D){const R=S.target.error||void 0;return Bn.create(D,{originalErrorMessage:R&&R.message})}const io="app_namespace_store";class lm{constructor(D,R,U,J=function am(){return new Promise((S,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{D(lc(U,"storage-open"))},R.onsuccess=U=>{S(U.target.result)},R.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(io,{keyPath:"compositeKey"})}}catch(R){D(Bn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=D,this.appName=R,this.namespace=U,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,L.Z)(function*(){const U=yield R.openDbPromise;return new Promise((J,oe)=>{const tt=U.transaction([io],"readonly").objectStore(io),ot=R.createCompositeKey(D);try{const dt=tt.get(ot);dt.onerror=Vt=>{oe(lc(Vt,"storage-get"))},dt.onsuccess=Vt=>{const Et=Vt.target.result;J(Et?Et.value:void 0)}}catch(dt){oe(Bn.create("storage-get",{originalErrorMessage:dt&&dt.message}))}})})()}set(D,R){var U=this;return(0,L.Z)(function*(){const J=yield U.openDbPromise;return new Promise((oe,Oe)=>{const ot=J.transaction([io],"readwrite").objectStore(io),dt=U.createCompositeKey(D);try{const Vt=ot.put({compositeKey:dt,value:R});Vt.onerror=Et=>{Oe(lc(Et,"storage-set"))},Vt.onsuccess=()=>{oe()}}catch(Vt){Oe(Bn.create("storage-set",{originalErrorMessage:Vt&&Vt.message}))}})})()}delete(D){var R=this;return(0,L.Z)(function*(){const U=yield R.openDbPromise;return new Promise((J,oe)=>{const tt=U.transaction([io],"readwrite").objectStore(io),ot=R.createCompositeKey(D);try{const dt=tt.delete(ot);dt.onerror=Vt=>{oe(lc(Vt,"storage-delete"))},dt.onsuccess=()=>{J()}}catch(dt){oe(Bn.create("storage-delete",{originalErrorMessage:dt&&dt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Dd{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,L.Z)(function*(){const R=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),oe=yield R;oe&&(D.lastFetchStatus=oe);const Oe=yield U;Oe&&(D.lastSuccessfulFetchTimestampMillis=Oe);const tt=yield J;tt&&(D.activeConfig=tt)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Hl(){return xd.apply(this,arguments)}function xd(){return(xd=(0,L.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}!function ca(){(0,ce._registerComponent)(new _e.wA("remote-config",function S(D,{instanceIdentifier:R}){const U=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Bn.create("registration-window");if(!(0,re.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Oe,appId:tt}=U.options;if(!oe)throw Bn.create("registration-project-id");if(!Oe)throw Bn.create("registration-api-key");if(!tt)throw Bn.create("registration-app-id");const ot=new lm(tt,U.name,R=R||"firebase"),dt=new Dd(ot),Vt=new de.Yd(ns);Vt.logLevel=de.in.ERROR;const Et=new Ai(J,ce.SDK_VERSION,R,oe,Oe,tt),ni=new rm(Et,ot),Wn=new Ds(ni,ot,dt,Vt),qo=new Id(U,Wn,dt,ot,Vt);return function gn(S){const D=(0,re.m9)(S);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(qo),qo},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(ns,"0.3.8"),(0,ce.registerVersion)(ns,"0.3.8","esm2017")}();const Ad="/firebase-messaging-sw.js",Mi="/firebase-cloud-messaging-push-scope",Ao="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",da="google.c.a.c_id",Md="google.c.a.c_l",Mf="google.c.a.ts",ei="google.c.a.e";var ha=(()=>{return(S=ha||(ha={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",ha;var S})();function Zi(S){const D=new Uint8Array(S);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kd(S){const R=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),J=new Uint8Array(U.length);for(let oe=0;oe<U.length;++oe)J[oe]=U.charCodeAt(oe);return J}const ki="fcm_token_details_db",Tr="fcm_token_object_Store";function uc(S){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,L.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(ki))return null;let D=null;return(yield(0,le.X3)(ki,5,{upgrade:(U=(0,L.Z)(function*(J,oe,Oe,tt){var ot;if(oe<2||!J.objectStoreNames.contains(Tr))return;const dt=tt.objectStore(Tr),Vt=yield dt.index("fcmSenderId").get(S);if(yield dt.clear(),Vt)if(2===oe){const Et=Vt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;D={token:Et.fcmToken,createTime:null!==(ot=Et.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Zi(Et.vapidKey)}}}else if(3===oe){const Et=Vt;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Zi(Et.auth),p256dh:Zi(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Zi(Et.vapidKey)}}}else if(4===oe){const Et=Vt;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Zi(Et.auth),p256dh:Zi(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Zi(Et.vapidKey)}}}}),function(oe,Oe,tt,ot){return U.apply(this,arguments)})})).close(),yield(0,le.Lj)(ki),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),cc(D)?D:null;var U}),Rd.apply(this,arguments)}function cc(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:D}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ls="firebase-messaging-store";let kf=null;function mn(){return kf||(kf=(0,le.X3)("firebase-messaging-database",1,{upgrade:(S,D)=>{0===D&&S.createObjectStore(ls)}})),kf}function nl(S){return ko.apply(this,arguments)}function ko(){return(ko=(0,L.Z)(function*(S){const D=pi(S),U=yield(yield mn()).transaction(ls).objectStore(ls).get(D);if(U)return U;{const J=yield uc(S.appConfig.senderId);if(J)return yield an(S,J),J}})).apply(this,arguments)}function an(S,D){return il.apply(this,arguments)}function il(){return(il=(0,L.Z)(function*(S,D){const R=pi(S),J=(yield mn()).transaction(ls,"readwrite");return yield J.objectStore(ls).put(D,R),yield J.done,D})).apply(this,arguments)}function jl(S){return ro.apply(this,arguments)}function ro(){return(ro=(0,L.Z)(function*(S){const D=pi(S),U=(yield mn()).transaction(ls,"readwrite");yield U.objectStore(ls).delete(D),yield U.done})).apply(this,arguments)}function pi({appConfig:S}){return S.appId}const Sn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function us(S,D){return gi.apply(this,arguments)}function gi(){return(gi=(0,L.Z)(function*(S,D){const R=yield ga(S),U=so(D),J={method:"POST",headers:R,body:JSON.stringify(U)};let oe;try{oe=yield(yield fetch(cs(S.appConfig),J)).json()}catch(Oe){throw Sn.create("token-subscribe-failed",{errorInfo:Oe})}if(oe.error)throw Sn.create("token-subscribe-failed",{errorInfo:oe.error.message});if(!oe.token)throw Sn.create("token-subscribe-no-token");return oe.token})).apply(this,arguments)}function Ro(S,D){return As.apply(this,arguments)}function As(){return(As=(0,L.Z)(function*(S,D){const R=yield ga(S),U=so(D.subscriptionOptions),J={method:"PATCH",headers:R,body:JSON.stringify(U)};let oe;try{oe=yield(yield fetch(`${cs(S.appConfig)}/${D.token}`,J)).json()}catch(Oe){throw Sn.create("token-update-failed",{errorInfo:Oe})}if(oe.error)throw Sn.create("token-update-failed",{errorInfo:oe.error.message});if(!oe.token)throw Sn.create("token-update-no-token");return oe.token})).apply(this,arguments)}function rl(S,D){return zr.apply(this,arguments)}function zr(){return(zr=(0,L.Z)(function*(S,D){const U={method:"DELETE",headers:yield ga(S)};try{const oe=yield(yield fetch(`${cs(S.appConfig)}/${D}`,U)).json();if(oe.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:oe.error.message})}catch(J){throw Sn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function cs({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function ga(S){return wt.apply(this,arguments)}function wt(){return(wt=(0,L.Z)(function*({appConfig:S,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function so({p256dh:S,auth:D,endpoint:R,vapidKey:U}){const J={web:{endpoint:R,auth:D,p256dh:S}};return U!==Ao&&(J.web.applicationPubKey=U),J}const fc=6048e5;function sl(S){return pc.apply(this,arguments)}function pc(){return(pc=(0,L.Z)(function*(S){const D=yield Oo(S.swRegistration,S.vapidKey),R={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:D.endpoint,auth:Zi(D.getKey("auth")),p256dh:Zi(D.getKey("p256dh"))},U=yield nl(S.firebaseDependencies);if(U){if($l(U.subscriptionOptions,R))return Date.now()>=U.createTime+fc?gc(S,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield rl(S.firebaseDependencies,U.token)}catch(J){console.warn(J)}return ke(S.firebaseDependencies,R)}return ke(S.firebaseDependencies,R)})).apply(this,arguments)}function zl(S){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,L.Z)(function*(S){const D=yield nl(S.firebaseDependencies);D&&(yield rl(S.firebaseDependencies,D.token),yield jl(S.firebaseDependencies));const R=yield S.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function gc(S,D){return ma.apply(this,arguments)}function ma(){return(ma=(0,L.Z)(function*(S,D){try{const R=yield Ro(S.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield an(S.firebaseDependencies,U),R}catch(R){throw yield zl(S),R}})).apply(this,arguments)}function ke(S,D){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,L.Z)(function*(S,D){const U={token:yield us(S,D),createTime:Date.now(),subscriptionOptions:D};return yield an(S,U),U.token})).apply(this,arguments)}function Oo(S,D){return In.apply(this,arguments)}function In(){return(In=(0,L.Z)(function*(S,D){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kd(D)})})).apply(this,arguments)}function $l(S,D){return D.vapidKey===S.vapidKey&&D.endpoint===S.endpoint&&D.auth===S.auth&&D.p256dh===S.p256dh}function Po(S){const D={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function Ir(S,D){if(!D.notification)return;S.notification={};const R=D.notification.title;R&&(S.notification.title=R);const U=D.notification.body;U&&(S.notification.body=U);const J=D.notification.image;J&&(S.notification.image=J)}(D,S),function mc(S,D){!D.data||(S.data=D.data)}(D,S),function _c(S,D){if(!D.fcmOptions)return;S.fcmOptions={};const R=D.fcmOptions.link;R&&(S.fcmOptions.link=R);const U=D.fcmOptions.analytics_label;U&&(S.fcmOptions.analyticsLabel=U)}(D,S),D}function yc(S){return"object"==typeof S&&!!S&&da in S}function Od(S,D){const R=[];for(let U=0;U<S.length;U++)R.push(S.charAt(U)),U<D.length&&R.push(D.charAt(U));return R.join("")}function Ms(S){return Sn.create("missing-app-config-values",{valueName:S})}Od("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Od("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ri{constructor(D,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function um(S){if(!S||!S.options)throw Ms("App Configuration Object");if(!S.name)throw Ms("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=S;for(const U of D)if(!R[U])throw Ms(U);return{appName:S.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Sr(S){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,L.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(Ad,{scope:Mi}),S.swRegistration.update().catch(()=>{})}catch(D){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function oo(S,D){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,L.Z)(function*(S,D){if(!D&&!S.swRegistration&&(yield Sr(S)),D||!S.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");S.swRegistration=D}})).apply(this,arguments)}function vc(S,D){return ql.apply(this,arguments)}function ql(){return(ql=(0,L.Z)(function*(S,D){D?S.vapidKey=D:S.vapidKey||(S.vapidKey=Ao)})).apply(this,arguments)}function wc(){return(wc=(0,L.Z)(function*(S,D){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield vc(S,null==D?void 0:D.vapidKey),yield oo(S,null==D?void 0:D.serviceWorkerRegistration),sl(S)})).apply(this,arguments)}function _a(S,D,R){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,L.Z)(function*(S,D,R){const U=Yl(D);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[da],message_name:R[Md],message_time:R[Mf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yl(S){switch(S){case ha.NOTIFICATION_CLICKED:return"notification_open";case ha.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Nd(){return(Nd=(0,L.Z)(function*(S,D){const R=D.data;if(!R.isFirebaseMessaging)return;S.onMessageHandler&&R.messageType===ha.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Po(R)):S.onMessageHandler.next(Po(R)));const U=R.data;yc(U)&&"1"===U[ei]&&(yield _a(S,R.messageType,U))})).apply(this,arguments)}const Ql="@firebase/messaging",Fd=S=>{const D=new Ri(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Pd(S,D){return Nd.apply(this,arguments)}(D,R)),D},ya=S=>{const D=S.getProvider("messaging").getImmediate();return{getToken:U=>function Kl(S,D){return wc.apply(this,arguments)}(D,U)}};function Jl(){return hr.apply(this,arguments)}function hr(){return(hr=(0,L.Z)(function*(){try{yield(0,re.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ld(){(0,ce._registerComponent)(new _e.wA("messaging",Fd,"PUBLIC")),(0,ce._registerComponent)(new _e.wA("messaging-internal",ya,"PRIVATE")),(0,ce.registerVersion)(Ql,"0.9.13"),(0,ce.registerVersion)(Ql,"0.9.13","esm2017")}();const Vd="analytics",cm="firebase_id",ks="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lo="https://www.googletagmanager.com/gtag/js",ti=new de.Yd("@firebase/analytics");function Bd(S){return Promise.all(S.map(D=>D.catch(R=>R)))}function dm(S,D){const R=document.createElement("script");R.src=`${Lo}?l=${S}&id=${D}`,R.async=!0,document.head.appendChild(R)}function va(S,D,R,U,J,oe){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,L.Z)(function*(S,D,R,U,J,oe){const Oe=U[J];try{if(Oe)yield D[Oe];else{const ot=(yield Bd(R)).find(dt=>dt.measurementId===J);ot&&(yield D[ot.appId])}}catch(tt){ti.error(tt)}S("config",J,oe)})).apply(this,arguments)}function hm(S,D,R,U,J){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,L.Z)(function*(S,D,R,U,J){try{let oe=[];if(J&&J.send_to){let Oe=J.send_to;Array.isArray(Oe)||(Oe=[Oe]);const tt=yield Bd(R);for(const ot of Oe){const dt=tt.find(Et=>Et.measurementId===ot),Vt=dt&&D[dt.appId];if(!Vt){oe=[];break}oe.push(Vt)}}0===oe.length&&(oe=Object.values(D)),yield Promise.all(oe),S("event",U,J||{})}catch(oe){ti.error(oe)}})).apply(this,arguments)}function Ud(){const S=window.document.getElementsByTagName("script");for(const D of Object.values(S))if(D.src&&D.src.includes(Lo))return D;return null}const Gn=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),wa=new class Os{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function ui(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Bo(S){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,L.Z)(function*(S){var D;const{appId:R,apiKey:U}=S,J={method:"GET",headers:ui(U)},oe=ks.replace("{app-id}",R),Oe=yield fetch(oe,J);if(200!==Oe.status&&304!==Oe.status){let tt="";try{const ot=yield Oe.json();(null===(D=ot.error)||void 0===D?void 0:D.message)&&(tt=ot.error.message)}catch(ot){}throw Gn.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:tt})}return Oe.json()})).apply(this,arguments)}function ln(S){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,L.Z)(function*(S,D=wa,R){const{appId:U,apiKey:J,measurementId:oe}=S.options;if(!U)throw Gn.create("no-app-id");if(!J){if(oe)return{measurementId:oe,appId:U};throw Gn.create("no-api-key")}const Oe=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new Cc;return setTimeout((0,L.Z)(function*(){tt.abort()}),void 0!==R?R:6e4),ba({appId:U,apiKey:J,measurementId:oe},Oe,tt,D)})).apply(this,arguments)}function ba(S,D,R){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,L.Z)(function*(S,{throttleEndTimeMillis:D,backoffCount:R},U,J=wa){const{appId:oe,measurementId:Oe}=S;try{yield Hd(U,D)}catch(tt){if(Oe)return ti.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:oe,measurementId:Oe};throw tt}try{const tt=yield Bo(S);return J.deleteThrottleMetadata(oe),tt}catch(tt){if(!Pf(tt)){if(J.deleteThrottleMetadata(oe),Oe)return ti.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:oe,measurementId:Oe};throw tt}const ot=503===Number(tt.customData.httpStatus)?(0,re.$s)(R,J.intervalMillis,30):(0,re.$s)(R,J.intervalMillis),dt={throttleEndTimeMillis:Date.now()+ot,backoffCount:R+1};return J.setThrottleMetadata(oe,dt),ti.debug(`Calling attemptFetch again in ${ot} millis`),ba(S,dt,U,J)}})).apply(this,arguments)}function Hd(S,D){return new Promise((R,U)=>{const J=Math.max(D-Date.now(),0),oe=setTimeout(R,J);S.addEventListener(()=>{clearTimeout(oe),U(Gn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Pf(S){if(!(S instanceof re.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Cc{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Ca(){return tu.apply(this,arguments)}function tu(){return(tu=(0,L.Z)(function*(){if(!(0,re.hl)())return ti.warn(Gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(S){return ti.warn(Gn.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function Ft(){return(Ft=(0,L.Z)(function*(S,D,R,U,J,oe,Oe){var tt;const ot=ln(S);ot.then(Wn=>{R[Wn.measurementId]=Wn.appId,S.options.measurementId&&Wn.measurementId!==S.options.measurementId&&ti.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Wn=>ti.error(Wn)),D.push(ot);const dt=Ca().then(Wn=>{if(Wn)return U.getId()}),[Vt,Et]=yield Promise.all([ot,dt]);Ud()||dm(oe,Vt.measurementId),J("js",new Date);const ni=null!==(tt=null==Oe?void 0:Oe.config)&&void 0!==tt?tt:{};return ni.origin="firebase",ni.update=!0,null!=Et&&(ni[cm]=Et),J("config",Vt.measurementId,ni),Vt.measurementId})).apply(this,arguments)}class fs{constructor(D){this.app=D}_delete(){return delete mi[this.app.options.appId],Promise.resolve()}}let mi={},al=[];const nu={};let Ec,ao,Ea="dataLayer",iu=!1;function su(S,D,R){!function ru(){const S=[];if((0,re.ru)()&&S.push("This is a browser extension environment."),(0,re.zI)()||S.push("Cookies are not available."),S.length>0){const D=S.map((U,J)=>`(${J+1}) ${U}`).join(" "),R=Gn.create("invalid-analytics-context",{errorInfo:D});ti.warn(R.message)}}();const U=S.options.appId;if(!U)throw Gn.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Gn.create("no-api-key");ti.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mi[U])throw Gn.create("already-exists",{id:U});if(!iu){!function Vo(S){let D=[];Array.isArray(window[S])?D=window[S]:window[S]=D}(Ea);const{wrappedGtag:oe,gtagCore:Oe}=function fm(S,D,R,U,J){let oe=function(...Oe){window[U].push(arguments)};return window[J]&&"function"==typeof window[J]&&(oe=window[J]),window[J]=function eu(S,D,R,U){function oe(){return(oe=(0,L.Z)(function*(Oe,tt,ot){try{"event"===Oe?yield hm(S,D,R,tt,ot):"config"===Oe?yield va(S,D,R,U,tt,ot):S("set",tt)}catch(dt){ti.error(dt)}})).apply(this,arguments)}return function J(Oe,tt,ot){return oe.apply(this,arguments)}}(oe,S,D,R),{gtagCore:oe,wrappedGtag:window[J]}}(mi,al,nu,Ea,"gtag");ao=oe,Ec=Oe,iu=!0}return mi[U]=function hs(S,D,R,U,J,oe,Oe){return Ft.apply(this,arguments)}(S,al,nu,D,Ec,Ea,R),new fs(S)}function ou(){return(ou=(0,L.Z)(function*(S,D,R,U,J){if(J&&J.global)S("event",R,U);else{const oe=yield D;S("event",R,Object.assign(Object.assign({},U),{send_to:oe}))}})).apply(this,arguments)}function Ia(){return zd.apply(this,arguments)}function zd(){return(zd=(0,L.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}const Nf="@firebase/analytics";!function ym(){(0,ce._registerComponent)(new _e.wA(Vd,(D,{options:R})=>su(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new _e.wA("analytics-internal",function S(D){try{const R=D.getProvider(Vd).getImmediate();return{logEvent:(U,J,oe)=>function _m(S,D,R,U){S=(0,re.m9)(S),function ul(S,D,R,U,J){return ou.apply(this,arguments)}(ao,mi[S.app.options.appId],D,R,U).catch(J=>ti.error(J))}(R,U,J,oe)}}catch(R){throw Gn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(Nf,"0.7.9"),(0,ce.registerVersion)(Nf,"0.7.9","esm2017")}();var vm=N(4408),Wd=N(7565);const jo=new class $n extends Wd.v{}(class cu extends vm.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(D,R,U):D.flush(this)}});var Ic=N(4986),Sc=N(8505),_i=N(9468),Oi=N(5363);const yi=new o.GfV("7.3.0"),zo="__angularfire_symbol__analyticsIsSupportedValue",qr="__angularfire_symbol__analyticsIsSupported",Fs="__angularfire_symbol__remoteConfigIsSupportedValue",ps="__angularfire_symbol__remoteConfigIsSupported",Go="__angularfire_symbol__messagingIsSupportedValue",Ff="__angularfire_symbol__messagingIsSupported";function Sa(S,D,R){if(D){if(1===D.length)return D[0];const oe=D.filter(Oe=>Oe.app===R);if(1===oe.length)return oe[0]}return R.container.getProvider(S).getImmediate({optional:!0})}globalThis[qr]||(globalThis[qr]=Ia().then(S=>globalThis[zo]=S).catch(()=>globalThis[zo]=!1)),globalThis[Ff]||(globalThis[Ff]=Jl().then(S=>globalThis[Go]=S).catch(()=>globalThis[Go]=!1)),globalThis[ps]||(globalThis[ps]=Hl().then(S=>globalThis[Fs]=S).catch(()=>globalThis[Fs]=!1));const Lf=(S,D)=>{const R=D?[D]:(0,ee.C6)(),U=[];return R.forEach(J=>{J.container.getProvider(S).instances.forEach(Oe=>{U.includes(Oe)||U.push(Oe)})}),U};function gs(){}class Vf{constructor(D,R=jo){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,U){const J=this.zone;return this.delegate.schedule(function(Oe){J.runGuarded(()=>{D.apply(this,[Oe])})},R,U)}}class hu{constructor(D){this.zone=D,this.task=null}call(D,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gs,{},gs,gs)),R.pipe((0,Sc.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dc=(()=>{class S{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Vf(Zone.current)),this.insideAngular=R.run(()=>new Vf(Zone.current,Ic.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(R){return new(R||S)(o.LFG(o.R0b))},S.\u0275prov=o.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Ls(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function pu(S){return Ls(),function ms(S){return function(R){return(R=R.lift(new hu(S.ngZone))).pipe((0,_i.R)(S.outsideAngular),(0,Oi.Q)(S.insideAngular))}}(Ls())(S)}},2090:(Qe,Ce,N)=>{N.d(Ce,{$s:()=>$t,BH:()=>$e,DV:()=>Xt,Dv:()=>Js,G6:()=>je,GJ:()=>nn,L:()=>le,LL:()=>ue,Mn:()=>Se,Pz:()=>jt,Sg:()=>Re,UG:()=>ge,UI:()=>es,US:()=>_e,Wj:()=>Vn,Yr:()=>He,ZB:()=>z,ZR:()=>ve,b$:()=>Ye,cI:()=>qt,d:()=>Me,dS:()=>Io,eu:()=>Ee,g5:()=>L,gK:()=>lr,gQ:()=>ar,h$:()=>de,hl:()=>G,hu:()=>ee,jU:()=>De,lb:()=>Cr,m9:()=>xi,ne:()=>Hr,p$:()=>$,pd:()=>Qs,r3:()=>zi,ru:()=>We,tV:()=>pe,uI:()=>Ue,ug:()=>Kt,vZ:()=>wr,w1:()=>Te,w9:()=>hn,xO:()=>Gi,xb:()=>zt,z$:()=>Fe,zI:()=>Y,zd:()=>ts});const ee=function(H,q){if(!H)throw L(q)},L=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},ce=function(H){const q=[];let K=0;for(let xe=0;xe<H.length;xe++){let W=H.charCodeAt(xe);W<128?q[K++]=W:W<2048?(q[K++]=W>>6|192,q[K++]=63&W|128):55296==(64512&W)&&xe+1<H.length&&56320==(64512&H.charCodeAt(xe+1))?(W=65536+((1023&W)<<10)+(1023&H.charCodeAt(++xe)),q[K++]=W>>18|240,q[K++]=W>>12&63|128,q[K++]=W>>6&63|128,q[K++]=63&W|128):(q[K++]=W>>12|224,q[K++]=W>>6&63|128,q[K++]=63&W|128)}return q},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,q){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,xe=[];for(let W=0;W<H.length;W+=3){const te=H[W],Pe=W+1<H.length,Je=Pe?H[W+1]:0,yt=W+2<H.length,xt=yt?H[W+2]:0;let Qn=(15&Je)<<2|xt>>6,$i=63&xt;yt||($i=64,Pe||(Qn=64)),xe.push(K[te>>2],K[(3&te)<<4|Je>>4],K[Qn],K[$i])}return xe.join("")},encodeString(H,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(H):this.encodeByteArray(ce(H),q)},decodeString(H,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(H):function(H){const q=[];let K=0,xe=0;for(;K<H.length;){const W=H[K++];if(W<128)q[xe++]=String.fromCharCode(W);else if(W>191&&W<224){const te=H[K++];q[xe++]=String.fromCharCode((31&W)<<6|63&te)}else if(W>239&&W<365){const yt=((7&W)<<18|(63&H[K++])<<12|(63&H[K++])<<6|63&H[K++])-65536;q[xe++]=String.fromCharCode(55296+(yt>>10)),q[xe++]=String.fromCharCode(56320+(1023&yt))}else{const te=H[K++],Pe=H[K++];q[xe++]=String.fromCharCode((15&W)<<12|(63&te)<<6|63&Pe)}}return q.join("")}(this.decodeStringToByteArray(H,q))},decodeStringToByteArray(H,q){this.init_();const K=q?this.charToByteMapWebSafe_:this.charToByteMap_,xe=[];for(let W=0;W<H.length;){const te=K[H.charAt(W++)],Je=W<H.length?K[H.charAt(W)]:0;++W;const xt=W<H.length?K[H.charAt(W)]:64;++W;const It=W<H.length?K[H.charAt(W)]:64;if(++W,null==te||null==Je||null==xt||null==It)throw Error();xe.push(te<<2|Je>>4),64!==xt&&(xe.push(Je<<4&240|xt>>2),64!==It&&xe.push(xt<<6&192|It))}return xe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},de=function(H){const q=ce(H);return _e.encodeByteArray(q,!0)},le=function(H){return de(H).replace(/\./g,"")},pe=function(H){try{return _e.decodeString(H,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function $(H){return z(void 0,H)}function z(H,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return q}for(const K in q)!q.hasOwnProperty(K)||!ie(K)||(H[K]=z(H[K],q[K]));return H}function ie(H){return"__proto__"!==H}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,K)=>{this.resolve=q,this.reject=K})}wrapCallback(q){return(K,xe)=>{K?this.reject(K):this.resolve(xe),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(K):q(K,xe))}}}function Re(H,q){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const xe=q||"demo-project",W=H.iat||0,te=H.sub||H.user_id;if(!te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${xe}`,aud:xe,iat:W,exp:W+3600,auth_time:W,sub:te,user_id:te,firebase:{sign_in_provider:"custom",identities:{}}},H);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(Pe)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function De(){return"object"==typeof self&&self.self===self}function We(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Fe().indexOf("Electron/")>=0}function Te(){const H=Fe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Se(){return Fe().indexOf("MSAppHost/")>=0}function He(){return!1}function je(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G(){return"object"==typeof indexedDB}function Ee(){return new Promise((H,q)=>{try{let K=!0;const xe="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(xe);W.onsuccess=()=>{W.result.close(),K||self.indexedDB.deleteDatabase(xe),H(!0)},W.onupgradeneeded=()=>{K=!1},W.onerror=()=>{var te;q((null===(te=W.error)||void 0===te?void 0:te.message)||"")}}catch(K){q(K)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ve extends Error{constructor(q,K,xe){super(K),this.code=q,this.customData=xe,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(q,K,xe){this.service=q,this.serviceName=K,this.errors=xe}create(q,...K){const xe=K[0]||{},W=`${this.service}/${q}`,te=this.errors[q],Pe=te?function Le(H,q){return H.replace(gt,(K,xe)=>{const W=q[xe];return null!=W?String(W):`<${xe}?>`})}(te,xe):"Error";return new ve(W,`${this.serviceName}: ${Pe} (${W}).`,xe)}}const gt=/\{\$([^}]+)}/g;function qt(H){return JSON.parse(H)}function jt(H){return JSON.stringify(H)}const Ke=function(H){let q={},K={},xe={},W="";try{const te=H.split(".");q=qt(pe(te[0])||""),K=qt(pe(te[1])||""),W=te[2],xe=K.d||{},delete K.d}catch(te){}return{header:q,claims:K,data:xe,signature:W}},hn=function(H){const K=Ke(H).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},nn=function(H){const q=Ke(H).claims;return"object"==typeof q&&!0===q.admin};function zi(H,q){return Object.prototype.hasOwnProperty.call(H,q)}function Xt(H,q){if(Object.prototype.hasOwnProperty.call(H,q))return H[q]}function zt(H){for(const q in H)if(Object.prototype.hasOwnProperty.call(H,q))return!1;return!0}function es(H,q,K){const xe={};for(const W in H)Object.prototype.hasOwnProperty.call(H,W)&&(xe[W]=q.call(K,H[W],W,H));return xe}function wr(H,q){if(H===q)return!0;const K=Object.keys(H),xe=Object.keys(q);for(const W of K){if(!xe.includes(W))return!1;const te=H[W],Pe=q[W];if(Ii(te)&&Ii(Pe)){if(!wr(te,Pe))return!1}else if(te!==Pe)return!1}for(const W of xe)if(!K.includes(W))return!1;return!0}function Ii(H){return null!==H&&"object"==typeof H}function Gi(H){const q=[];for(const[K,xe]of Object.entries(H))Array.isArray(xe)?xe.forEach(W=>{q.push(encodeURIComponent(K)+"="+encodeURIComponent(W))}):q.push(encodeURIComponent(K)+"="+encodeURIComponent(xe));return q.length?"&"+q.join("&"):""}function ts(H){const q={};return H.replace(/^\?/,"").split("&").forEach(xe=>{if(xe){const[W,te]=xe.split("=");q[decodeURIComponent(W)]=decodeURIComponent(te)}}),q}function Qs(H){const q=H.indexOf("?");if(!q)return"";const K=H.indexOf("#",q);return H.substring(q,K>0?K:void 0)}class ar{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,K){K||(K=0);const xe=this.W_;if("string"==typeof q)for(let It=0;It<16;It++)xe[It]=q.charCodeAt(K)<<24|q.charCodeAt(K+1)<<16|q.charCodeAt(K+2)<<8|q.charCodeAt(K+3),K+=4;else for(let It=0;It<16;It++)xe[It]=q[K]<<24|q[K+1]<<16|q[K+2]<<8|q[K+3],K+=4;for(let It=16;It<80;It++){const Qn=xe[It-3]^xe[It-8]^xe[It-14]^xe[It-16];xe[It]=4294967295&(Qn<<1|Qn>>>31)}let xt,wn,W=this.chain_[0],te=this.chain_[1],Pe=this.chain_[2],Je=this.chain_[3],yt=this.chain_[4];for(let It=0;It<80;It++){It<40?It<20?(xt=Je^te&(Pe^Je),wn=1518500249):(xt=te^Pe^Je,wn=1859775393):It<60?(xt=te&Pe|Je&(te|Pe),wn=2400959708):(xt=te^Pe^Je,wn=3395469782);const Qn=(W<<5|W>>>27)+xt+yt+wn+xe[It]&4294967295;yt=Je,Je=Pe,Pe=4294967295&(te<<30|te>>>2),te=W,W=Qn}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+te&4294967295,this.chain_[2]=this.chain_[2]+Pe&4294967295,this.chain_[3]=this.chain_[3]+Je&4294967295,this.chain_[4]=this.chain_[4]+yt&4294967295}update(q,K){if(null==q)return;void 0===K&&(K=q.length);const xe=K-this.blockSize;let W=0;const te=this.buf_;let Pe=this.inbuf_;for(;W<K;){if(0===Pe)for(;W<=xe;)this.compress_(q,W),W+=this.blockSize;if("string"==typeof q){for(;W<K;)if(te[Pe]=q.charCodeAt(W),++Pe,++W,Pe===this.blockSize){this.compress_(te),Pe=0;break}}else for(;W<K;)if(te[Pe]=q[W],++Pe,++W,Pe===this.blockSize){this.compress_(te),Pe=0;break}}this.inbuf_=Pe,this.total_+=K}digest(){const q=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&K,K/=256;this.compress_(this.buf_);let xe=0;for(let W=0;W<5;W++)for(let te=24;te>=0;te-=8)q[xe]=this.chain_[W]>>te&255,++xe;return q}}function Hr(H,q){const K=new vt(H,q);return K.subscribe.bind(K)}class vt{constructor(q,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{q(this)}).catch(xe=>{this.error(xe)})}next(q){this.forEachObserver(K=>{K.next(q)})}error(q){this.forEachObserver(K=>{K.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,K,xe){let W;if(void 0===q&&void 0===K&&void 0===xe)throw new Error("Missing Observer.");W=function Mn(H,q){if("object"!=typeof H||null===H)return!1;for(const K of q)if(K in H&&"function"==typeof H[K])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:K,complete:xe},void 0===W.next&&(W.next=Ln),void 0===W.error&&(W.error=Ln),void 0===W.complete&&(W.complete=Ln);const te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch(Pe){}}),this.observers.push(W),te}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,q)}sendOne(q,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{K(this.observers[q])}catch(xe){"undefined"!=typeof console&&console.error&&console.error(xe)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ln(){}const Js=function(H,q,K,xe){let W;if(xe<q?W="at least "+q:xe>K&&(W=0===K?"none":"no more than "+K),W)throw new Error(H+" failed: Was called with "+xe+(1===xe?" argument.":" arguments.")+" Expects "+W+".")};function lr(H,q){return`${H} failed: ${q} argument `}function Vn(H,q,K,xe){if((!xe||K)&&"function"!=typeof K)throw new Error(lr(H,q)+"must be a valid function.")}function Cr(H,q,K,xe){if((!xe||K)&&("object"!=typeof K||null===K))throw new Error(lr(H,q)+"must be a valid context object.")}const Io=function(H){const q=[];let K=0;for(let xe=0;xe<H.length;xe++){let W=H.charCodeAt(xe);if(W>=55296&&W<=56319){const te=W-55296;xe++,ee(xe<H.length,"Surrogate pair missing trail surrogate."),W=65536+(te<<10)+(H.charCodeAt(xe)-56320)}W<128?q[K++]=W:W<2048?(q[K++]=W>>6|192,q[K++]=63&W|128):W<65536?(q[K++]=W>>12|224,q[K++]=W>>6&63|128,q[K++]=63&W|128):(q[K++]=W>>18|240,q[K++]=W>>12&63|128,q[K++]=W>>6&63|128,q[K++]=63&W|128)}return q},Kt=function(H){let q=0;for(let K=0;K<H.length;K++){const xe=H.charCodeAt(K);xe<128?q++:xe<2048?q+=2:xe>=55296&&xe<=56319?(q+=4,K++):q+=3}return q};function $t(H,q=1e3,K=2){const xe=q*Math.pow(K,H),W=Math.round(.5*xe*(Math.random()-.5)*2);return Math.min(144e5,xe+W)}function xi(H){return H&&H._delegate?H._delegate:H}},5767:(Qe,Ce,N)=>{var o=N(5e3);let ee=null;function L(){return ee}const de=new o.OlP("DocumentToken");let le=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function pe(){return(0,o.LFG)(z)}()},providedIn:"platform"}),n})();const $=new o.OlP("Location Initialized");let z=(()=>{class n extends le{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(e){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ie()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ie()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function $e(){return new z((0,o.LFG)(de))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function Re(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Fe(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function De(n){const t=(0,o.LFG)(de).location;return new Ye((0,o.LFG)(le),t&&t.origin||"")}()},providedIn:"root"}),n})();const We=new o.OlP("appBaseHref");let Ye=(()=>{class n extends ge{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Re(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Ue(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const u=this.prepareExternalUrl(r+Ue(s));this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,s){const u=this.prepareExternalUrl(r+Ue(s));this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(le),o.LFG(We,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n extends ge{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Re(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let u=this.prepareExternalUrl(r+Ue(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,s){let u=this.prepareExternalUrl(r+Ue(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(le),o.LFG(We,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n{constructor(e,i){this._subject=new o.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Fe(je(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Ue(i))}normalize(e){return n.stripTrailingSlash(function He(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,je(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ue(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ue(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Re,n.stripTrailingSlash=Fe,n.\u0275fac=function(e){return new(e||n)(o.LFG(ge),o.LFG(le))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Se(){return new Te((0,o.LFG)(ge),(0,o.LFG)(le))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}let kn=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,o.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,o.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class eo{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cn=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,u)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new eo(r.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,u),xo(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{xo(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function xo(n,t){n.context.$implicit=t.item}let on=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new gn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Bl("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Bl("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class gn{constructor(){this.$implicit=null,this.ngIf=null}}function Bl(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}let qi=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Ki=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split(".");null!=(i=null!=i&&s?`${i}${s}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),Ds=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[o.TTD]}),n})(),ei=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Mo="browser";function fa(n){return"server"===n}let cc=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new pa((0,o.LFG)(de),window)}),n})();class pa{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function ls(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const u=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=dc(this.window.history)||dc(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function dc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ko extends class nl extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new ko)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function il(){return an=an||document.querySelector("base"),an?an.getAttribute("href"):null}();return null==e?null:function ro(n){jl=jl||document.createElement("a"),jl.setAttribute("href",n);const t=jl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){an=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Xa(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let jl,an=null;const pi=new o.OlP("TRANSITION_ID"),Sn=[{provide:o.ip1,useFactory:function hc(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=L(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[pi,de,o.zs3],multi:!0}];class us{static init(){(0,o.VLi)(new us)}addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,u=!1;const h=function(p){u=u||p,s--,0==s&&i(u)};r.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?L().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let gi=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ro=new o.OlP("EventManagerPlugins");let As=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const u=r[s];if(u.supports(e))return this._eventNameToPlugin.set(e,u),u}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ro),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class rl{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=L().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let zr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),cs=(()=>{class n extends zr{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,r.push(i.appendChild(u))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(ga),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(ga))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function ga(n){L().remove(n)}const wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},so=/%COMP%/g;function ma(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?ma(n,r,e):(r=r.replace(so,n),e.push(r))}return e}function ke(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Oo=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new In(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Ir(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case o.ifc.ShadowDom:return new mc(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=ma(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(As),o.LFG(cs),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class In{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(wt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=wt[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=wt[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ke(i)):this.eventManager.addEventListener(t,e,ke(i))}}class Ir extends In{constructor(t,e,i,r){super(t),this.component=i;const s=ma(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function Gl(n){return"_ngcontent-%COMP%".replace(so,n)}(r+"-"+i.id),this.hostAttr=function gc(n){return"_nghost-%COMP%".replace(so,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class mc extends In{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ma(r.id,r.styles,[]);for(let u=0;u<s.length;u++){const h=document.createElement("style");h.textContent=s[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let _c=(()=>{class n extends rl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const yc=["alt","control","meta","shift"],um={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ms={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ri={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sr=(()=>{class n extends rl{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),u=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(e,s.domEventName,u))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let u="";if(yc.forEach(p=>{const y=i.indexOf(p);y>-1&&(i.splice(y,1),u+=p+".")}),u+=s,0!=i.length||0===s.length)return null;const h={};return h.domEventName=r,h.fullKey=u,h}static getEventFullKey(e){let i="",r=function Wl(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Ms.hasOwnProperty(t)&&(t=Ms[t]))}return um[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),yc.forEach(s=>{s!=r&&Ri[s](e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Kl=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:Mo},{provide:o.g9A,useValue:function oo(){ko.makeCurrent(),us.init()},multi:!0},{provide:de,useFactory:function vc(){return(0,o.RDi)(document),document},deps:[]}]),wc=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function Gr(){return new o.qLn},deps:[]},{provide:Ro,useClass:_c,multi:!0,deps:[de,o.R0b,o.Lbi]},{provide:Ro,useClass:Sr,multi:!0,deps:[de]},{provide:Oo,useClass:Oo,deps:[As,cs,o.AFp]},{provide:o.FYo,useExisting:Oo},{provide:zr,useExisting:cs},{provide:cs,useClass:cs,deps:[de]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b]},{provide:As,useClass:As,deps:[Ro,o.R0b]},{provide:class mn{},useClass:gi,deps:[]}];let _a=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:pi,useExisting:o.AFp},Sn]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(n,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:wc,imports:[ei,o.hGG]}),n})();"undefined"!=typeof window&&window;class Ud{}const Gn="*";function $r(n,t){return{type:7,name:n,definitions:t,options:{}}}function ds(n,t=null){return{type:4,styles:t,timings:n}}function wa(n,t=null){return{type:2,steps:n,options:t}}function ui(n){return{type:6,styles:n,offset:null}}function Bo(n,t,e){return{type:0,name:n,styles:t,options:e}}function ln(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Ps(n,t=null){return{type:8,animation:n,options:t}}function ba(n=null){return{type:9,options:n}}function Ho(n,t=null){return{type:10,animation:n,options:t}}function Hd(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function Cc(n){Promise.resolve(null).then(n)}class Ca{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Cc(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class tu{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?Cc(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++e==s&&this._onFinish()}),u.onDestroy(()=>{++i==s&&this._onDestroy()}),u.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const Ft=!1;function mi(n){return new o.vHH(3e3,Ft)}function $n(){return"undefined"!=typeof window&&void 0!==window.document}function jo(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Wr(n){switch(n.length){case 0:return new Ca;case 1:return n[0];default:return new tu(n)}}function Ic(n,t,e,i,r={},s={}){const u=[],h=[];let p=-1,y=null;if(i.forEach(E=>{const I=E.offset,M=I==p,P=M&&y||{};Object.keys(E).forEach(B=>{let Q=B,be=E[B];if("offset"!==B)switch(Q=t.normalizePropertyName(Q,u),be){case"!":be=r[B];break;case Gn:be=s[B];break;default:be=t.normalizeStyleValue(B,Q,be,u)}P[Q]=be}),M||h.push(P),y=P,p=I}),u.length)throw function zd(n){return new o.vHH(3502,Ft)}();return h}function Sc(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&_i(e,"start",n)));break;case"done":n.onDone(()=>i(e&&_i(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&_i(e,"destroy",n)))}}function _i(n,t,e){const i=e.totalTime,s=Oi(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),u=n._data;return null!=u&&(s._data=u),s}function Oi(n,t,e,i,r="",s=0,u){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!u}}function yi(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function zo(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let qr=(n,t)=>!1,Fs=(n,t,e)=>[],ps=null;function Go(n){const t=n.parentNode||n.host;return t===ps?null:t}(jo()||"undefined"!=typeof Element)&&($n()?(ps=(()=>document.documentElement)(),qr=(n,t)=>{for(;t;){if(t===n)return!0;t=Go(t)}return!1}):qr=(n,t)=>n.contains(t),Fs=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let $o=null,Pi=!1;function du(n){$o||($o=function Sa(){return"undefined"!=typeof document?document.body:null}()||{},Pi=!!$o.style&&"WebkitAppearance"in $o.style);let t=!0;return $o.style&&!function qd(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in $o.style,!t&&Pi&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in $o.style)),t}const Lf=qr,gs=Fs;let hu=(()=>{class n{validateStyleProperty(e){return du(e)}matchesElement(e,i){return!1}containsElement(e,i){return Lf(e,i)}getParentElement(e){return Go(e)}query(e,i,r){return gs(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,u,h=[],p){return new Ca(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Dc=(()=>{class n{}return n.NOOP=new hu,n})();const ho="ng-enter",Da="ng-leave",pu="ng-trigger",ms=".ng-trigger",xa="ng-animating",Wo=".ng-animating";function S(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:D(parseFloat(t[1]),t[2])}function D(n,t){return"s"===t?1e3*n:n}function R(n,t,e){return n.hasOwnProperty("duration")?n:function U(n,t,e){let r,s=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return t.push(mi()),{duration:0,delay:0,easing:""};r=D(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=D(parseFloat(p),h[4]));const y=h[5];y&&(u=y)}else r=n;if(!e){let h=!1,p=t.length;r<0&&(t.push(function al(){return new o.vHH(3100,Ft)}()),h=!0),s<0&&(t.push(function nu(){return new o.vHH(3101,Ft)}()),h=!0),h&&t.splice(p,0,mi())}return{duration:r,delay:s,easing:u}}(n,t,e)}function J(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Oe(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else J(n,e);return e}function tt(n,t,e){return e?t+":"+e+";":""}function ot(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=tt(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=tt(0,Aa(e),n.style[e]));n.setAttribute("style",t)}function dt(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=Kr(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),jo()&&ot(n))}function Vt(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=Kr(e);n.style[i]=""}),jo()&&ot(n))}function Et(n){return Array.isArray(n)?1==n.length?n[0]:wa(n):n}const Wn=new RegExp("{{\\s*(.+?)\\s*}}","g");function qo(n){let t=[];if("string"==typeof n){let e;for(;e=Wn.exec(n);)t.push(e[1]);Wn.lastIndex=0}return t}function Vs(n,t,e){const i=n.toString(),r=i.replace(Wn,(s,u)=>{let h=t[u];return t.hasOwnProperty(u)||(e.push(function ll(n){return new o.vHH(3003,Ft)}()),h=""),h.toString()});return r==i?n:r}function fr(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Dr=/-+([a-z0-9])/g;function Kr(n){return n.replace(Dr,(...t)=>t[1].toUpperCase())}function Aa(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yi(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function Ec(n){return new o.vHH(3004,Ft)}()}}function xc(n,t){return window.getComputedStyle(n)[t]}function Cm(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function aC(n,t,e){if(":"==n[0]){const p=function Kd(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function uo(n){return new o.vHH(3016,Ft)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function Ta(n){return new o.vHH(3015,Ft)}()),t;const r=i[1],s=i[2],u=i[3];t.push(kc(r,u));"<"==s[0]&&!("*"==r&&"*"==u)&&t.push(kc(u,r))}(i,e,t)):e.push(n),e}const Zd=new Set(["true","1"]),Yd=new Set(["false","0"]);function kc(n,t){const e=Zd.has(n)||Yd.has(n),i=Zd.has(t)||Yd.has(t);return(r,s)=>{let u="*"==n||n==r,h="*"==t||t==s;return!u&&e&&"boolean"==typeof r&&(u=r?Zd.has(n):Yd.has(n)),!h&&i&&"boolean"==typeof s&&(h=s?Zd.has(t):Yd.has(t)),u&&h}}const yu=new RegExp("s*:selfs*,?","g");function Uf(n,t,e,i){return new lC(n).build(t,e,i)}class lC{constructor(t){this._driver=t}build(t,e,i){const r=new Tm(e);this._resetContextStyleTimingState(r);const s=Yi(this,Et(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],u=[];return"@"==t.name.charAt(0)&&e.errors.push(function iu(){return new o.vHH(3006,Ft)}()),t.definitions.forEach(h=>{if(this._resetContextStyleTimingState(e),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,s.push(this.visitState(p,e))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,e);i+=p.queryCount,r+=p.depCount,u.push(p)}else e.errors.push(function gm(){return new o.vHH(3007,Ft)}())}),{type:7,name:t.name,states:s,transitions:u,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,u=r||{};i.styles.forEach(h=>{if(Rc(h)){const p=h;Object.keys(p).forEach(y=>{qo(p[y]).forEach(E=>{u.hasOwnProperty(E)||s.add(E)})})}}),s.size&&(fr(s.values()),e.errors.push(function ru(n,t){return new o.vHH(3008,Ft)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Yi(this,Et(t.animation),e);return{type:1,matchers:Cm(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Ma(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Yi(this,i,e)),options:Ma(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(u=>{e.currentTime=i;const h=Yi(this,u,e);return r=Math.max(r,e.currentTime),h});return e.currentTime=r,{type:3,steps:s,options:Ma(t.options)}}visitAnimate(t,e){const i=function Sm(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return jf(R(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=jf(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=R(e,t);return jf(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:ui({});if(5==s.type)r=this.visitKeyframes(s,e);else{let u=t.styles,h=!1;if(!u){h=!0;const y={};i.easing&&(y.easing=i.easing),u=ui(y)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(u,e);p.isEmptyStep=h,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(u=>{"string"==typeof u?u==Gn?i.push(u):e.errors.push(function su(n){return new o.vHH(3002,Ft)}()):i.push(u)}):i.push(t.styles);let r=!1,s=null;return i.forEach(u=>{if(Rc(u)){const h=u,p=h.easing;if(p&&(s=p,delete h.easing),!r)for(let y in h)if(h[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return delete u[h],void e.unsupportedCSSPropertiesFound.add(h);const p=e.collectedStyles[e.currentQuerySelector],y=p[h];let E=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(e.errors.push(function ou(n,t,e,i,r){return new o.vHH(3010,Ft)}()),E=!1),s=y.startTime),E&&(p[h]={startTime:s,endTime:r}),e.options&&function ni(n,t,e){const i=t.params||{},r=qo(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function Ea(n){return new o.vHH(3001,Ft)}())})}(u[h],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function jd(){return new o.vHH(3011,Ft)}()),i;let s=0;const u=[];let h=!1,p=!1,y=0;const E=t.steps.map(et=>{const nt=this._makeStyleAst(et,e);let it=null!=nt.offset?nt.offset:function Im(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(Rc(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(Rc(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(nt.styles),rt=0;return null!=it&&(s++,rt=nt.offset=it),p=p||rt<0||rt>1,h=h||rt<y,y=rt,u.push(rt),nt});p&&e.errors.push(function lo(){return new o.vHH(3012,Ft)}()),h&&e.errors.push(function au(){return new o.vHH(3200,Ft)}());const I=t.steps.length;let M=0;s>0&&s<I?e.errors.push(function cl(){return new o.vHH(3202,Ft)}()):0==s&&(M=1/(I-1));const P=I-1,B=e.currentTime,Q=e.currentAnimateTimings,be=Q.duration;return E.forEach((et,nt)=>{const it=M>0?nt==P?1:M*nt:u[nt],rt=it*be;e.currentTime=B+Q.delay+rt,Q.duration=rt,this._validateStyleAst(et,e),et.offset=it,i.styles.push(et)}),i}visitReference(t,e){return{type:8,animation:Yi(this,Et(t.animation),e),options:Ma(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ma(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ma(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,u]=function vu(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(yu,"")),n=n.replace(/@\*/g,ms).replace(/@\w+/g,e=>ms+"-"+e.substr(1)).replace(/:animating/g,Wo),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,yi(e.collectedStyles,e.currentQuerySelector,{});const h=Yi(this,Et(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:h,originalSelector:t.selector,options:Ma(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function lu(){return new o.vHH(3013,Ft)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:R(t.timings,e.errors,!0);return{type:12,animation:Yi(this,Et(t.animation),e),timings:i,options:null}}}class Tm{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Rc(n){return!Array.isArray(n)&&"object"==typeof n}function Ma(n){return n?(n=J(n)).params&&(n.params=function Hf(n){return n?J(n):null}(n.params)):n={},n}function jf(n,t,e){return{duration:n,delay:t,easing:e}}function zf(n,t,e,i,r,s,u=null,h=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:u,subTimeline:h}}class Jd{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Oc=new RegExp(":enter","g"),uC=new RegExp(":leave","g");function $f(n,t,e,i,r,s={},u={},h,p,y=[]){return(new cC).buildKeyframes(n,t,e,i,r,s,u,h,p,y)}class cC{buildKeyframes(t,e,i,r,s,u,h,p,y,E=[]){y=y||new Jd;const I=new Dm(t,e,y,r,s,E,[]);I.options=p,I.currentTimeline.setStyles([u],null,I.errors,p),Yi(this,i,I);const M=I.timelines.filter(P=>P.containsAnimation());if(Object.keys(h).length){let P;for(let B=M.length-1;B>=0;B--){const Q=M[B];if(Q.element===e){P=Q;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([h],null,I.errors,p)}return M.length?M.map(P=>P.buildKeyframes()):[zf(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);s!=u&&e.transformIntoNewTimeline(u)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const u=null!=i.duration?S(i.duration):null,h=null!=i.delay?S(i.delay):null;return 0!==u&&t.forEach(p=>{const y=e.appendInstructionToTimeline(p,u,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Yi(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Pc);const u=S(s.delay);r.delayNextStep(u)}t.steps.length&&(t.steps.forEach(u=>Yi(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?S(t.options.delay):0;t.steps.forEach(u=>{const h=e.createSubContext(t.options);s&&h.delayNextStep(s),Yi(this,u,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(u=>e.currentTimeline.mergeTimelineCollectedStyles(u)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return R(e.params?Vs(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,h=e.createSubContext().currentTimeline;h.easing=i.easing,t.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,e.errors,e.options),h.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(h),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?S(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Pc);let u=i;const h=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=h.length;let p=null;h.forEach((y,E)=>{e.currentQueryIndex=E;const I=e.createSubContext(t.options,y);s&&I.delayNextStep(s),y===e.element&&(p=I.currentTimeline),Yi(this,t.animation,I),I.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,I.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(u),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,u=Math.abs(s.duration),h=u*(e.currentQueryTotal-1);let p=u*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=i.currentStaggerTime}const E=e.currentTimeline;p&&E.delayNextStep(p);const I=E.currentTime;Yi(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-I+(r.startTime-i.currentTimeline.startTime)}}const Pc={};class Dm{constructor(t,e,i,r,s,u,h,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Pc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new wu(this._driver,e,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=S(i.duration)),null!=i.delay&&(r.delay=S(i.delay));const s=i.params;if(s){let u=r.params;u||(u=this.options.params={}),Object.keys(s).forEach(h=>{(!e||!u.hasOwnProperty(h))&&(u[h]=Vs(s[h],u,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new Dm(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Pc,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new xm(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,u){let h=[];if(r&&h.push(this.element),t.length>0){t=(t=t.replace(Oc,"."+this._enterClassName)).replace(uC,"."+this._leaveClassName);let y=this._driver.query(this.element,t,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),h.push(...y)}return!s&&0==h.length&&u.push(function Ns(n){return new o.vHH(3014,Ft)}()),h}}class wu{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new wu(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Gn,this._currentKeyframe[e]=Gn}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},u=function vv(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(s=>{e[s]=Gn})):Oe(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const p=Vs(u[h],s,i);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Gn),this._updateStyle(h,p)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,p)=>{const y=Oe(h,!0);Object.keys(y).forEach(E=>{const I=y[E];"!"==I?t.add(E):I==Gn&&e.add(E)}),i||(y.offset=p/this.duration),r.push(y)});const s=t.size?fr(t.values()):[],u=e.size?fr(e.values()):[];if(i){const h=r[0],p=J(h);h.offset=0,p.offset=1,r=[h,p]}return zf(this.element,r,s,u,this.duration,this.startTime,this.easing,!1)}}class xm extends wu{constructor(t,e,i,r,s,u,h=!1){super(t,e,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],u=i+e,h=e/u,p=Oe(t[0],!1);p.offset=0,s.push(p);const y=Oe(t[0],!1);y.offset=Am(h),s.push(y);const E=t.length-1;for(let I=1;I<=E;I++){let M=Oe(t[I],!1);M.offset=Am((e+M.offset*i)/u),s.push(M)}i=u,e=0,r="",t=s}return zf(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function Am(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class wv{}class Xd extends wv{normalizePropertyName(t,e){return Kr(t)}normalizeStyleValue(t,e,i,r){let s="";const u=i.toString().trim();if(Mm[e]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function ao(n,t){return new o.vHH(3005,Ft)}())}return u+s}}const Mm=(()=>function _s(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Cu(n,t,e,i,r,s,u,h,p,y,E,I,M){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:u,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:E,totalTime:I,errors:M}}const Eu={};class Wf{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function km(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],s=this._stateStyles[t],u=r?r.buildStyles(e,i):{};return s?s.buildStyles(e,i):u}build(t,e,i,r,s,u,h,p,y,E){const I=[],M=this.ast.options&&this.ast.options.params||Eu,B=this.buildStyles(i,h&&h.params||Eu,I),Q=p&&p.params||Eu,be=this.buildStyles(r,Q,I),et=new Set,nt=new Map,it=new Map,rt="void"===r,kt={params:Object.assign(Object.assign({},M),Q)},Pt=E?[]:$f(t,e,this.ast.animation,s,u,B,be,kt,y,I);let tn=0;if(Pt.forEach(ji=>{tn=Math.max(ji.duration+ji.delay,tn)}),I.length)return Cu(e,this._triggerName,i,r,rt,B,be,[],[],nt,it,tn,I);Pt.forEach(ji=>{const Zs=ji.element,jV=yi(nt,Zs,{});ji.preStyleProps.forEach(tm=>jV[tm]=!0);const sC=yi(it,Zs,{});ji.postStyleProps.forEach(tm=>sC[tm]=!0),Zs!==e&&et.add(Zs)});const Yn=fr(et.values());return Cu(e,this._triggerName,i,r,rt,B,be,Pt,Yn,nt,it,tn)}}class Rm{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=J(this.defaultParams);return Object.keys(t).forEach(s=>{const u=t[s];null!=u&&(r[s]=u)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const u=s;Object.keys(u).forEach(h=>{let p=u[h];p.length>1&&(p=Vs(p,r,e));const y=this.normalizer.normalizePropertyName(h,e);p=this.normalizer.normalizeStyleValue(h,y,p,e),i[y]=p})}}),i}}class fC{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new Rm(r.style,r.options&&r.options.params||{},i)}),eh(this.states,"true","1"),eh(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new Wf(t,r,this.states))}),this.fallbackTransition=function Nc(n,t,e){return new Wf(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(u=>u.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function eh(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const qf=new Jd;class pC{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],s=Uf(this._driver,e,i,[]);if(i.length)throw function Gd(n){return new o.vHH(3503,Ft)}();this._animations[t]=s}_buildPlayer(t,e,i){const r=t.element,s=Ic(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations[t];let u;const h=new Map;if(s?(u=$f(this._driver,e,s,ho,Da,{},{},i,qf,r),u.forEach(E=>{const I=yi(h,E.element,{});E.postStyleProps.forEach(M=>I[M]=null)})):(r.push(function Rn(){return new o.vHH(3300,Ft)}()),u=[]),r.length)throw function mm(n){return new o.vHH(3504,Ft)}();h.forEach((E,I)=>{Object.keys(E).forEach(M=>{E[M]=this._driver.computeStyle(I,M,Gn)})});const y=Wr(u.map(E=>{const I=h.get(E.element);return this._buildPlayer(E,{},I)}));return this._playersById[t]=y,y.onDestroy(()=>this.destroy(t)),this.players.push(y),y}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function mv(n){return new o.vHH(3301,Ft)}();return e}listen(t,e,i,r){const s=Oi(e,"","","");return Sc(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const bv="ng-animate-queued",th="ng-animate-disabled",nh=[],dl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Tv={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xr="__ng_removed";class Tu{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function Dv(n){return null!=n?n:null}(i?t.value:t),i){const s=J(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Dn="void",ih=new Tu(Dn);class Iv{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Qi(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw function _m(n,t){return new o.vHH(3302,Ft)}();if(null==i||0==i.length)throw function Nf(n){return new o.vHH(3303,Ft)}();if(!function Fc(n){return"start"==n||"done"==n}(i))throw function $d(n,t){return new o.vHH(3400,Ft)}();const s=yi(this._elementListeners,t,[]),u={name:e,phase:i,callback:r};s.push(u);const h=yi(this._engine.statesByElement,t,{});return h.hasOwnProperty(e)||(Qi(t,pu),Qi(t,pu+"-"+e),h[e]=ih),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(u);p>=0&&s.splice(p,1),this._triggers[e]||delete h[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function ym(n){return new o.vHH(3401,Ft)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),u=new sh(this.id,e,t);let h=this._engine.statesByElement.get(t);h||(Qi(t,pu),Qi(t,pu+"-"+e),this._engine.statesByElement.set(t,h={}));let p=h[e];const y=new Tu(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h[e]=y,p||(p=ih),y.value!==Dn&&p.value===y.value){if(!function vi(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,y.params)){const Q=[],be=s.matchStyles(p.value,p.params,Q),et=s.matchStyles(y.value,y.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{Vt(t,be),dt(t,et)})}return}const M=yi(this._engine.playersByElement,t,[]);M.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==e&&Q.queued&&Q.destroy()});let P=s.matchTransition(p.value,y.value,t,y.params),B=!1;if(!P){if(!r)return;P=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:p,toState:y,player:u,isFallbackTransition:B}),B||(Qi(t,bv),u.onStart(()=>{ii(t,bv)})),u.onDone(()=>{let Q=this.players.indexOf(u);Q>=0&&this.players.splice(Q,1);const be=this._engine.playersByElement.get(t);if(be){let et=be.indexOf(u);et>=0&&be.splice(et,1)}}),this.players.push(u),M.push(u),u}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,ms,!0);i.forEach(r=>{if(r[xr])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(u=>u.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),u=new Map;if(s){const h=[];if(Object.keys(s).forEach(p=>{if(u.set(p,s[p].value),this._triggers[p]){const y=this.trigger(t,p,Dn,r);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,u),i&&Wr(h).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const u=s.name;if(r.has(u))return;r.add(u);const p=this._triggers[u].fallbackTransition,y=i[u]||ih,E=new Tu(Dn),I=new sh(this.id,u,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:u,transition:p,fromState:y,toState:E,player:I,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let u=t;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[xr];(!s||s===dl)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Qi(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,u=this._elementListeners.get(s);u&&u.forEach(h=>{if(h.name==i.triggerName){const p=Oi(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,Sc(i.player,h.phase,p,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class rh{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new Iv(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let u=!1;if(void 0!==this.driver.getParentElement){let h=this.driver.getParentElement(e);for(;h;){const p=r.get(h);if(p){const y=i.indexOf(p);i.splice(y+1,0,t),u=!0;break}h=this.driver.getParentElement(h)}}else for(let h=s;h>=0;h--)if(this.driver.containsElement(i[h].hostElement,e)){i.splice(h+1,0,t),u=!0;break}u||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const u=i[r[s]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&e.add(h)}}}return e}trigger(t,e,i,r){if(oh(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!oh(e))return;const s=e[xr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(e);u>=0&&this.collectedLeaveElements.splice(u,1)}if(t){const u=this._fetchNamespace(t);u&&u.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Qi(t,th)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ii(t,th))}removeNode(t,e,i,r){if(oh(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const u=this.namespacesByHostElement.get(e);u&&u.id!==t&&u.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[xr]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return oh(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,ms,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Wo,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Wr(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const i=t[xr];if(i&&i.setForRemoval){if(t[xr]=dl,i.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(th))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Qi(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Wr(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function vm(n){return new o.vHH(3402,Ft)}()}_flushAnimations(t,e){const i=new Jd,r=[],s=new Map,u=[],h=new Map,p=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(ft=>{E.add(ft);const Dt=this.driver.query(ft,".ng-animate-queued",!0);for(let Nt=0;Nt<Dt.length;Nt++)E.add(Dt[Nt])});const I=this.bodyNode,M=Array.from(this.statesByElement.keys()),P=xv(M,this.collectedEnterElements),B=new Map;let Q=0;P.forEach((ft,Dt)=>{const Nt=ho+Q++;B.set(Dt,Nt),ft.forEach(pn=>Qi(pn,Nt))});const be=[],et=new Set,nt=new Set;for(let ft=0;ft<this.collectedLeaveElements.length;ft++){const Dt=this.collectedLeaveElements[ft],Nt=Dt[xr];Nt&&Nt.setForRemoval&&(be.push(Dt),et.add(Dt),Nt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(pn=>et.add(pn)):nt.add(Dt))}const it=new Map,rt=xv(M,Array.from(et));rt.forEach((ft,Dt)=>{const Nt=Da+Q++;it.set(Dt,Nt),ft.forEach(pn=>Qi(pn,Nt))}),t.push(()=>{P.forEach((ft,Dt)=>{const Nt=B.get(Dt);ft.forEach(pn=>ii(pn,Nt))}),rt.forEach((ft,Dt)=>{const Nt=it.get(Dt);ft.forEach(pn=>ii(pn,Nt))}),be.forEach(ft=>{this.processLeaveNode(ft)})});const kt=[],Pt=[];for(let ft=this._namespaceList.length-1;ft>=0;ft--)this._namespaceList[ft].drainQueuedTransitions(e).forEach(Nt=>{const pn=Nt.player,Ur=Nt.element;if(kt.push(pn),this.collectedEnterElements.length){const Ys=Ur[xr];if(Ys&&Ys.setForMove){if(Ys.previousTriggersValues&&Ys.previousTriggersValues.has(Nt.triggerName)){const nm=Ys.previousTriggersValues.get(Nt.triggerName),xf=this.statesByElement.get(Nt.element);xf&&xf[Nt.triggerName]&&(xf[Nt.triggerName].value=nm)}return void pn.destroy()}}const ac=!I||!this.driver.containsElement(I,Ur),la=it.get(Ur),Df=B.get(Ur),hi=this._buildInstruction(Nt,i,Df,la,ac);if(hi.errors&&hi.errors.length)return void Pt.push(hi);if(ac)return pn.onStart(()=>Vt(Ur,hi.fromStyles)),pn.onDestroy(()=>dt(Ur,hi.toStyles)),void r.push(pn);if(Nt.isFallbackTransition)return pn.onStart(()=>Vt(Ur,hi.fromStyles)),pn.onDestroy(()=>dt(Ur,hi.toStyles)),void r.push(pn);const $V=[];hi.timelines.forEach(Ys=>{Ys.stretchStartingKeyframe=!0,this.disabledNodes.has(Ys.element)||$V.push(Ys)}),hi.timelines=$V,i.append(Ur,hi.timelines),u.push({instruction:hi,player:pn,element:Ur}),hi.queriedElements.forEach(Ys=>yi(h,Ys,[]).push(pn)),hi.preStyleProps.forEach((Ys,nm)=>{const xf=Object.keys(Ys);if(xf.length){let im=p.get(nm);im||p.set(nm,im=new Set),xf.forEach(pR=>im.add(pR))}}),hi.postStyleProps.forEach((Ys,nm)=>{const xf=Object.keys(Ys);let im=y.get(nm);im||y.set(nm,im=new Set),xf.forEach(pR=>im.add(pR))})});if(Pt.length){const ft=[];Pt.forEach(Dt=>{ft.push(function Wd(n,t){return new o.vHH(3505,Ft)}())}),kt.forEach(Dt=>Dt.destroy()),this.reportError(ft)}const tn=new Map,Yn=new Map;u.forEach(ft=>{const Dt=ft.element;i.has(Dt)&&(Yn.set(Dt,Dt),this._beforeAnimationBuild(ft.player.namespaceId,ft.instruction,tn))}),r.forEach(ft=>{const Dt=ft.element;this._getPreviousPlayers(Dt,!1,ft.namespaceId,ft.triggerName,null).forEach(pn=>{yi(tn,Dt,[]).push(pn),pn.destroy()})});const ji=be.filter(ft=>hl(ft,p,y)),Zs=new Map;Nm(Zs,this.driver,nt,y,Gn).forEach(ft=>{hl(ft,p,y)&&ji.push(ft)});const sC=new Map;P.forEach((ft,Dt)=>{Nm(sC,this.driver,new Set(ft),p,"!")}),ji.forEach(ft=>{const Dt=Zs.get(ft),Nt=sC.get(ft);Zs.set(ft,Object.assign(Object.assign({},Dt),Nt))});const tm=[],zV=[],GV={};u.forEach(ft=>{const{element:Dt,player:Nt,instruction:pn}=ft;if(i.has(Dt)){if(E.has(Dt))return Nt.onDestroy(()=>dt(Dt,pn.toStyles)),Nt.disabled=!0,Nt.overrideTotalTime(pn.totalTime),void r.push(Nt);let Ur=GV;if(Yn.size>1){let la=Dt;const Df=[];for(;la=la.parentNode;){const hi=Yn.get(la);if(hi){Ur=hi;break}Df.push(la)}Df.forEach(hi=>Yn.set(hi,Ur))}const ac=this._buildAnimation(Nt.namespaceId,pn,tn,s,sC,Zs);if(Nt.setRealPlayer(ac),Ur===GV)tm.push(Nt);else{const la=this.playersByElement.get(Ur);la&&la.length&&(Nt.parentPlayer=Wr(la)),r.push(Nt)}}else Vt(Dt,pn.fromStyles),Nt.onDestroy(()=>dt(Dt,pn.toStyles)),zV.push(Nt),E.has(Dt)&&r.push(Nt)}),zV.forEach(ft=>{const Dt=s.get(ft.element);if(Dt&&Dt.length){const Nt=Wr(Dt);ft.setRealPlayer(Nt)}}),r.forEach(ft=>{ft.parentPlayer?ft.syncPlayerEvents(ft.parentPlayer):ft.destroy()});for(let ft=0;ft<be.length;ft++){const Dt=be[ft],Nt=Dt[xr];if(ii(Dt,Da),Nt&&Nt.hasAnimation)continue;let pn=[];if(h.size){let ac=h.get(Dt);ac&&ac.length&&pn.push(...ac);let la=this.driver.query(Dt,Wo,!0);for(let Df=0;Df<la.length;Df++){let hi=h.get(la[Df]);hi&&hi.length&&pn.push(...hi)}}const Ur=pn.filter(ac=>!ac.destroyed);Ur.length?Zf(this,Dt,Ur):this.processLeaveNode(Dt)}return be.length=0,tm.forEach(ft=>{this.players.push(ft),ft.onDone(()=>{ft.destroy();const Dt=this.players.indexOf(ft);this.players.splice(Dt,1)}),ft.play()}),tm}elementContainsData(t,e){let i=!1;const r=e[xr];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let u=[];if(e){const h=this.playersByQueriedElement.get(t);h&&(u=h)}else{const h=this.playersByElement.get(t);if(h){const p=!s||s==Dn;h.forEach(y=>{y.queued||!p&&y.triggerName!=r||u.push(y)})}}return(i||r)&&(u=u.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),u}_beforeAnimationBuild(t,e,i){const s=e.element,u=e.isRemovalTransition?void 0:t,h=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const y=p.element,E=y!==s,I=yi(i,y,[]);this._getPreviousPlayers(y,E,u,h,e.toState).forEach(P=>{const B=P.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),P.destroy(),I.push(P)})}Vt(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,u){const h=e.triggerName,p=e.element,y=[],E=new Set,I=new Set,M=e.timelines.map(B=>{const Q=B.element;E.add(Q);const be=Q[xr];if(be&&be.removedBeforeQueried)return new Ca(B.duration,B.delay);const et=Q!==p,nt=function Yf(n){const t=[];return Lc(n,t),t}((i.get(Q)||nh).map(tn=>tn.getRealPlayer())).filter(tn=>!!tn.element&&tn.element===Q),it=s.get(Q),rt=u.get(Q),kt=Ic(0,this._normalizer,0,B.keyframes,it,rt),Pt=this._buildPlayer(B,kt,nt);if(B.subTimeline&&r&&I.add(Q),et){const tn=new sh(t,h,Q);tn.setRealPlayer(Pt),y.push(tn)}return Pt});y.forEach(B=>{yi(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function Sv(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,B.element,B))}),E.forEach(B=>Qi(B,xa));const P=Wr(M);return P.onDestroy(()=>{E.forEach(B=>ii(B,xa)),dt(p,e.toStyles)}),I.forEach(B=>{yi(r,B,[]).push(P)}),P}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Ca(t.duration,t.delay)}}class sh{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Ca,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>Sc(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){yi(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function oh(n){return n&&1===n.nodeType}function Pm(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function Nm(n,t,e,i,r){const s=[];e.forEach(p=>s.push(Pm(p)));const u=[];i.forEach((p,y)=>{const E={};p.forEach(I=>{const M=E[I]=t.computeStyle(y,I,r);(!M||0==M.length)&&(y[xr]=Tv,u.push(y))}),n.set(y,E)});let h=0;return e.forEach(p=>Pm(p,s[h++])),u}function xv(n,t){const e=new Map;if(n.forEach(h=>e.set(h,[])),0==t.length)return e;const r=new Set(t),s=new Map;function u(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=e.has(y)?y:r.has(y)?1:u(y),s.set(h,p),p}return t.forEach(h=>{const p=u(h);1!==p&&e.get(p).push(h)}),e}function Qi(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function ii(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function Zf(n,t,e){Wr(e).onDone(()=>n.processLeaveNode(t))}function Lc(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof tu?Lc(i.players,t):t.push(i)}}function hl(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class Iu{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new rh(t,e,i),this._timelineEngine=new pC(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const u=t+"-"+r;let h=this._triggerCache[u];if(!h){const p=[],E=Uf(this._driver,s,p,[]);if(p.length)throw function Ia(n,t){return new o.vHH(3404,Ft)}();h=function hC(n,t,e){return new fC(n,t,e)}(r,E,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(e,r,h)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,u]=zo(i);this._timelineEngine.command(s,e,u,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[u,h]=zo(i);return this._timelineEngine.listen(u,e,h,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Av=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&dt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dt(this._element,this._initialStyles),this._endStyles&&(dt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Vt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vt(this._element,this._endStyles),this._endStyles=null),dt(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Ji(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];Vc(r)&&(t=t||{},t[r]=n[r])}return t}function Vc(n){return"display"===n||"position"===n}class ah{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(i=>{"offset"!=i&&(t[i]=this._finished?e[i]:xc(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Mv{validateStyleProperty(t){return du(t)}matchesElement(t,e){return!1}containsElement(t,e){return Lf(t,e)}getParentElement(t){return Go(t)}query(t,e,i){return gs(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,u=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const y={},E=u.filter(M=>M instanceof ah);(function wm(n,t){return 0===n||0===t})(i,r)&&E.forEach(M=>{let P=M.currentSnapshot;Object.keys(P).forEach(B=>y[B]=P[B])}),e=function Bf(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let s=t[0],u=[];if(i.forEach(h=>{s.hasOwnProperty(h)||u.push(h),s[h]=e[h]}),u.length)for(var r=1;r<t.length;r++){let h=t[r];u.forEach(function(p){h[p]=xc(n,p)})}}return t}(t,e=e.map(M=>Oe(M,!1)),y);const I=function Qf(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=Ji(t[0]),t.length>1&&(i=Ji(t[t.length-1]))):t&&(e=Ji(t)),e||i?new Av(n,e,i):null}(t,e);return new ah(t,e,p,I)}}let lh=(()=>{class n extends Ud{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?wa(e):e;return Bc(this._renderer,null,i,"register",[r]),new Jf(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(de))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Jf extends class pm{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new kv(this._id,t,e||{},this._renderer)}}class kv{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Bc(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Bc(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const Ko="@.disabled";let ch=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,u)=>{const h=null==u?void 0:u.parentNode(s);h&&u.removeChild(h,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let E=this._rendererCache.get(s);return E||(E=new Fm("",s,this.engine),this._rendererCache.set(s,E)),E}const u=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,e);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(u,h,e,E.name,E)};return i.data.animation.forEach(p),new Rv(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,h]=s;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(Iu),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Fm{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==Ko?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Rv extends Fm{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Ko?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function dh(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.substr(1),u="";return"@"!=s.charAt(0)&&([s,u]=function Lm(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(t,e,i)}}let Ar=(()=>{class n extends Iu{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(de),o.LFG(Dc),o.LFG(wv))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Vm=new o.OlP("AnimationModuleType"),Bs=[{provide:Ud,useClass:lh},{provide:wv,useFactory:function Xf(){return new Xd}},{provide:Iu,useClass:Ar},{provide:o.FYo,useFactory:function ep(n,t,e){return new ch(n,t,e)},deps:[Oo,Iu,o.R0b]}],Su=[{provide:Dc,useFactory:()=>new Mv},{provide:Vm,useValue:"BrowserAnimations"},...Bs],Bm=[{provide:Dc,useClass:hu},{provide:Vm,useValue:"NoopAnimations"},...Bs];let Um=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Bm:Su}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:Su,imports:[_a]}),n})();var xn=N(8996),fl=N(3269);function bt(...n){const t=(0,fl.yG)(n);return(0,xn.D)(n,t)}var dn=N(7579);class Ni extends dn.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var v=N(8306);const{isArray:g}=Array,{getPrototypeOf:_,prototype:b,keys:x}=Object;function O(n){if(1===n.length){const t=n[0];if(g(t))return{args:t,keys:null};if(function Z(n){return n&&"object"==typeof n&&_(n)===b}(t)){const e=x(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var he=N(4671),we=N(4004);const{isArray:Xe}=Array;function ht(n){return(0,we.U)(t=>function mt(n,t){return Xe(t)?n(...t):n(t)}(n,t))}function qn(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var rn=N(5403),Du=N(9672);function ka(n,t,e){n?(0,Du.f)(e,n,t):t()}var pr=N(576);function pl(n,t){const e=(0,pr.m)(n)?n:()=>n,i=r=>r.error(e());return new v.y(t?r=>t.schedule(i,0,r):i)}const gl=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var xu=N(8189);function np(...n){return function zm(){return(0,xu.J)(1)}()((0,xn.D)(n,(0,fl.yG)(n)))}var po=N(8421);function Gm(n){return new v.y(t=>{(0,po.Xf)(n()).subscribe(t)})}var hh=N(515),ip=N(727),Fi=N(4482);function Ov(){return(0,Fi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,rn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class Pv extends v.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Fi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ip.w0;const e=this.getSubject();t.add(this.source.subscribe((0,rn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ip.w0.EMPTY)}return t}refCount(){return Ov()(this)}}function gr(n,t){return(0,Fi.e)((e,i)=>{let r=null,s=0,u=!1;const h=()=>u&&!r&&i.complete();e.subscribe((0,rn.x)(i,p=>{null==r||r.unsubscribe();let y=0;const E=s++;(0,po.Xf)(n(p,E)).subscribe(r=(0,rn.x)(i,I=>i.next(t?t(p,I,E,y++):I),()=>{r=null,h()}))},()=>{u=!0,h()}))})}var Nv=N(5698);function Uc(...n){const t=(0,fl.yG)(n);return(0,Fi.e)((e,i)=>{(t?np(n,e,t):np(n,e)).subscribe(i)})}function mC(n,t,e,i,r){return(s,u)=>{let h=e,p=t,y=0;s.subscribe((0,rn.x)(u,E=>{const I=y++;p=h?n(p,E,I):(h=!0,E),i&&u.next(p)},r&&(()=>{h&&u.next(p),u.complete()})))}}function Us(n,t){return(0,Fi.e)(mC(n,t,arguments.length>=2,!0))}function Zo(n,t){return(0,Fi.e)((e,i)=>{let r=0;e.subscribe((0,rn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}function ml(n){return(0,Fi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,rn.x)(e,void 0,void 0,u=>{s=(0,po.Xf)(n(u,ml(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}var mr=N(5577);function Au(n,t){return(0,pr.m)(t)?(0,mr.z)(n,t,1):(0,mr.z)(n,1)}function Fv(n){return n<=0?()=>hh.E:(0,Fi.e)((t,e)=>{let i=[];t.subscribe((0,rn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Lv(n=_C){return(0,Fi.e)((t,e)=>{let i=!1;t.subscribe((0,rn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function _C(){return new gl}function Vv(n){return(0,Fi.e)((t,e)=>{let i=!1;t.subscribe((0,rn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Mu(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Zo((r,s)=>n(r,s,i)):he.y,(0,Nv.q)(1),e?Vv(t):Lv(()=>new gl))}var Mr=N(8505);class Ra{constructor(t,e){this.id=t,this.url=e}}class rp extends Ra{constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fh extends Ra{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wm extends Ra{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sp extends Ra{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dD extends Ra{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yC extends Ra{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hD extends Ra{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fD extends Ra{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vC extends Ra{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qm{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Uv{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gR{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wC{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pD{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bC{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CC{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wt="primary";class Yo{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ph(n){return new Yo(n)}const Hv="ngNavigationCancelingError";function jv(n){const t=Error("NavigationCancelingError: "+n);return t[Hv]=!0,t}function mD(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const u=i[s],h=n[s];if(u.startsWith(":"))r[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Qo(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!EC(n[r],t[r]))return!1;return!0}function EC(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function TC(n){return Array.prototype.concat.apply([],n)}function IC(n){return n.length>0?n[n.length-1]:null}function Xi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Jo(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,xn.D)(Promise.resolve(n)):bt(n)}const Km={exact:function Zm(n,t,e){if(!Oa(n.segments,t.segments)||!gh(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Zm(n.children[i],t.children[i],e))return!1;return!0},subset:Ym},go={exact:function yD(n,t){return Qo(n,t)},subset:function _l(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>EC(n[e],t[e]))},ignored:()=>!0};function zv(n,t,e){return Km[e.paths](n.root,t.root,e.matrixParams)&&go[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Ym(n,t,e){return Gv(n,t,t.segments,e)}function Gv(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Oa(r,e)||t.hasChildren()||!gh(r,e,i))}if(n.segments.length===e.length){if(!Oa(n.segments,e)||!gh(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!Ym(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Oa(n.segments,r)&&gh(n.segments,r,i)&&n.children[Wt])&&Gv(n.children[Wt],t,s,i)}}function gh(n,t,e){return t.every((i,r)=>go[e](n[r].parameters,i.parameters))}class mh{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ph(this.queryParams)),this._queryParamMap}toString(){return mR.serialize(this)}}class Zt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Xi(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return t_(this)}}class Qm{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ph(this.parameters)),this._parameterMap}toString(){return Wv(this)}}function Oa(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class Xm{}class e_{parse(t){const e=new bR(t);return new mh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${op(t.root,!0)}`,i=function wD(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${n_(e)}=${n_(r)}`).join("&"):`${n_(e)}=${n_(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function xC(n){return encodeURI(n)}(t.fragment)}`:""}`}}const mR=new e_;function t_(n){return n.segments.map(t=>Wv(t)).join("/")}function op(n,t){if(!n.hasChildren())return t_(n);if(t){const e=n.children[Wt]?op(n.children[Wt],!1):"",i=[];return Xi(n.children,(r,s)=>{s!==Wt&&i.push(`${s}:${op(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function $v(n,t){let e=[];return Xi(n.children,(i,r)=>{r===Wt&&(e=e.concat(t(i,r)))}),Xi(n.children,(i,r)=>{r!==Wt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===Wt?[op(n.children[Wt],!1)]:[`${r}:${op(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${t_(n)}/${e[0]}`:`${t_(n)}/(${e.join("//")})`}}function DC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function n_(n){return DC(n).replace(/%3B/gi,";")}function AC(n){return DC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function i_(n){return decodeURIComponent(n)}function vD(n){return i_(n.replace(/\+/g,"%20"))}function Wv(n){return`${AC(n.path)}${function MC(n){return Object.keys(n).map(t=>`;${AC(t)}=${AC(n[t])}`).join("")}(n.parameters)}`}const qv=/^[^\/()?;=#]+/;function Kv(n){const t=n.match(qv);return t?t[0]:""}const _R=/^[^=?&#]+/,vR=/^[^&#]+/;class bR{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Wt]=new Zt(t,e)),i}parseSegment(){const t=Kv(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Qm(i_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Kv(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Kv(this.remaining);r&&(i=r,this.capture(i))}t[i_(e)]=i_(i)}parseQueryParam(t){const e=function yR(n){const t=n.match(_R);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const u=function wR(n){const t=n.match(vR);return t?t[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=vD(e),s=vD(i);if(t.hasOwnProperty(r)){let u=t[r];Array.isArray(u)||(u=[u],t[r]=u),u.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Kv(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Wt);const u=this.parseChildren();e[s]=1===Object.keys(u).length?u[Wt]:new Zt([],u),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class bD{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=kC(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=kC(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=RC(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return RC(t,this._root).map(e=>e.value)}}function kC(n,t){if(n===t.value)return t;for(const e of t.children){const i=kC(n,e);if(i)return i}return null}function RC(n,t){if(n===t.value)return[t];for(const e of t.children){const i=RC(n,e);if(i.length)return i.unshift(t),i}return[]}class ku{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Hs(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class r_ extends bD{constructor(t,e){super(t),this.snapshot=e,o_(this,t)}toString(){return this.snapshot.toString()}}function OC(n,t){const e=function PC(n,t){const u=new s_([],{},{},"",{},Wt,t,null,n.root,-1,{});return new yl("",new ku(u,[]))}(n,t),i=new Ni([new Qm("",{})]),r=new Ni({}),s=new Ni({}),u=new Ni({}),h=new Ni(""),p=new Ru(i,r,u,h,s,Wt,t,e.root);return p.snapshot=e.root,new r_(new ku(p,[]),e)}class Ru{constructor(t,e,i,r,s,u,h,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=u,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,we.U)(t=>ph(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,we.U)(t=>ph(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Zv(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Yv(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class s_{constructor(t,e,i,r,s,u,h,p,y,E,I){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=u,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=E,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ph(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ph(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class yl extends bD{constructor(t,e){super(e),this.url=t,o_(this,e)}toString(){return NC(this._root)}}function o_(n,t){t.value._routerState=n,t.children.forEach(e=>o_(n,e))}function NC(n){const t=n.children.length>0?` { ${n.children.map(NC).join(", ")} } `:"";return`${n.value}${t}`}function ap(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Qo(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Qo(t.params,e.params)||n.params.next(e.params),function _D(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Qo(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Qo(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Qv(n,t){const e=Qo(n.params,t.params)&&function Jm(n,t){return Oa(n,t)&&n.every((e,i)=>Qo(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Qv(n.parent,t.parent))}function lp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function CD(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return lp(n,i,r);return lp(n,i)})}(n,t,e);return new ku(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=t.value,u.children=t.children.map(h=>lp(n,h)),u}}const i=function up(n){return new Ru(new Ni(n.url),new Ni(n.params),new Ni(n.queryParams),new Ni(n.fragment),new Ni(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>lp(n,s));return new ku(i,r)}}function yh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Pa(n){return"object"==typeof n&&null!=n&&n.outlets}function Hc(n,t,e,i,r){let s={};if(i&&Xi(i,(h,p)=>{s[p]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),n===t)return new mh(e,s,r);const u=jc(n,t,e);return new mh(u,s,r)}function jc(n,t,e){const i={};return Xi(n.children,(r,s)=>{i[s]=r===t?e:jc(r,t,e)}),new Zt(n.segments,i)}class LC{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&yh(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Pa);if(r&&r!==IC(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class a_{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function cp(n,t,e){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return l_(n,t,e);const i=function UC(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const u=n.segments[r],h=e[i];if(Pa(h))break;const p=`${h}`,y=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!zC(p,y,u))return s;i+=2}else{if(!zC(p,{},u))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Zt(n.segments.slice(0,i.pathIndex),{});return s.children[Wt]=new Zt(n.segments.slice(i.pathIndex),n.children),l_(s,0,r)}return i.match&&0===r.length?new Zt(n.segments,{}):i.match&&!n.hasChildren()?HC(n,t,e):i.match?l_(n,0,r):HC(n,t,e)}function l_(n,t,e){if(0===e.length)return new Zt(n.segments,{});{const i=function BC(n){return Pa(n[0])?n[0].outlets:{[Wt]:n}}(e),r={};return Xi(i,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[u]=cp(n.children[u],t,s))}),Xi(n.children,(s,u)=>{void 0===i[u]&&(r[u]=s)}),new Zt(n.segments,r)}}function HC(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Pa(s)){const p=jC(s.outlets);return new Zt(i,p)}if(0===r&&yh(e[0])){i.push(new Qm(n.segments[t].path,ew(e[0]))),r++;continue}const u=Pa(s)?s.outlets[Wt]:`${s}`,h=r<e.length-1?e[r+1]:null;u&&h&&yh(h)?(i.push(new Qm(u,ew(h))),r+=2):(i.push(new Qm(u,{})),r++)}return new Zt(i,{})}function jC(n){const t={};return Xi(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=HC(new Zt([],{}),0,e))}),t}function ew(n){const t={};return Xi(n,(e,i)=>t[i]=`${e}`),t}function zC(n,t,e){return n==e.path&&Qo(t,e.parameters)}class ED{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),ap(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Hs(e);t.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,r[u],i),delete r[u]}),Xi(r,(s,u)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(t,e,u.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Hs(t);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);if(i&&i.outlet){const u=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:u,route:t,contexts:h})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Hs(t);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=Hs(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new bC(s.value.snapshot))}),t.children.length&&this.forwardEvent(new wC(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(ap(r),r===s)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,u.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),ap(h.route.value),this.activateChildRoutes(t,null,u.children)}else{const h=function TD(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),p=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=r,u.resolver=p,u.outlet&&u.outlet.activateWith(r,p),this.activateChildRoutes(t,null,u.children)}}else this.activateChildRoutes(t,null,i)}}class Zr{constructor(t,e){this.routes=t,this.module=e}}function Ou(n){return"function"==typeof n}function vh(n){return n instanceof mh}const zc=Symbol("INITIAL_VALUE");function wh(){return gr(n=>function tp(...n){const t=(0,fl.yG)(n),e=(0,fl.jO)(n),{args:i,keys:r}=O(n);if(0===i.length)return(0,xn.D)([],t);const s=new v.y(function Hm(n,t,e=he.y){return i=>{ka(t,()=>{const{length:r}=n,s=new Array(r);let u=r,h=r;for(let p=0;p<r;p++)ka(t,()=>{const y=(0,xn.D)(n[p],t);let E=!1;y.subscribe((0,rn.x)(i,I=>{s[p]=I,E||(E=!0,h--),h||i.next(e(s.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,t,r?u=>qn(r,u):he.y));return e?s.pipe(ht(e)):s}(n.map(t=>t.pipe((0,Nv.q)(1),Uc(zc)))).pipe(Us((t,e)=>{let i=!1;return e.reduce((r,s,u)=>r!==zc?r:(s===zc&&(i=!0),i||!1!==s&&u!==e.length-1&&!vh(s)?r:s),t)},zc),Zo(t=>t!==zc),(0,we.U)(t=>vh(t)?t:!0===t),(0,Nv.q)(1)))}class DD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new dp,this.attachRef=null}}class dp{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new DD,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let u_=(()=>{class n{constructor(e,i,r,s,u){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=s||Wt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const u=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new WC(e,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(dp),o.Y36(o.s_b),o.Y36(o._Vd),o.$8M("name"),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class WC{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Ru?this.route:t===dp?this.childContexts:this.parent.get(t,e)}}let qC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},directives:[u_],encapsulation:2}),n})();function tw(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];xD(i,AD(t,i))}}function xD(n,t){n.children&&tw(n.children,t)}function AD(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function c_(n){const t=n.children&&n.children.map(c_),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Wt&&(e.component=qC),e}function js(n){return n.outlet||Wt}function KC(n,t){const e=n.filter(i=>js(i)===t);return e.push(...n.filter(i=>js(i)!==t)),e}const Xo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bh(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},Xo):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||mD)(e,n,t);if(!s)return Object.assign({},Xo);const u={};Xi(s.posParams,(p,y)=>{u[y]=p.path});const h=s.consumed.length>0?Object.assign(Object.assign({},u),s.consumed[s.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:h,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function d_(n,t,e,i,r="corrected"){if(e.length>0&&function ZC(n,t,e){return e.some(i=>h_(n,t,i)&&js(i)!==Wt)}(n,e,i)){const u=new Zt(t,function TR(n,t,e,i){const r={};r[Wt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&js(s)!==Wt){const u=new Zt([],{});u._sourceSegment=n,u._segmentIndexShift=t.length,r[js(s)]=u}return r}(n,t,i,new Zt(e,n.children)));return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:[]}}if(0===e.length&&function kD(n,t,e){return e.some(i=>h_(n,t,i))}(n,e,i)){const u=new Zt(n.segments,function MD(n,t,e,i,r,s){const u={};for(const h of i)if(h_(n,e,h)&&!r[js(h)]){const p=new Zt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,u[js(h)]=p}return Object.assign(Object.assign({},r),u)}(n,t,e,i,n.children,r));return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:e}}const s=new Zt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function h_(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function YC(n,t,e,i){return!!(js(n)===i||i!==Wt&&h_(t,e,n))&&("**"===n.path||bh(t,n,e).matched)}function f_(n,t,e){return 0===t.length&&!n.children[e]}class p_{constructor(t){this.segmentGroup=t||null}}class QC{constructor(t){this.urlTree=t}}function Pu(n){return pl(new p_(n))}function g_(n){return pl(new QC(n))}class JC{constructor(t,e,i,r,s){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(o.h0i)}apply(){const t=d_(this.urlTree.root,[],[],this.config).segmentGroup,e=new Zt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Wt).pipe((0,we.U)(s=>this.createUrlTree(XC(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ml(s=>{if(s instanceof QC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof p_?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Wt).pipe((0,we.U)(r=>this.createUrlTree(XC(r),t.queryParams,t.fragment))).pipe(ml(r=>{throw r instanceof p_?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const r=t.segments.length>0?new Zt([],{[Wt]:t}):t;return new mh(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,we.U)(s=>new Zt([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,xn.D)(r).pipe(Au(s=>{const u=i.children[s],h=KC(e,s);return this.expandSegmentGroup(t,h,u,s).pipe((0,we.U)(p=>({segment:p,outlet:s})))}),Us((s,u)=>(s[u.outlet]=u.segment,s),{}),function Bv(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Zo((r,s)=>n(r,s,i)):he.y,Fv(1),e?Vv(t):Lv(()=>new gl))}())}expandSegment(t,e,i,r,s,u){return(0,xn.D)(i).pipe(Au(h=>this.expandSegmentAgainstRoute(t,e,i,h,r,s,u).pipe(ml(y=>{if(y instanceof p_)return bt(null);throw y}))),Mu(h=>!!h),ml((h,p)=>{if(h instanceof gl||"EmptyError"===h.name)return f_(e,r,s)?bt(new Zt([],{})):Pu(e);throw h}))}expandSegmentAgainstRoute(t,e,i,r,s,u,h){return YC(r,e,s,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u):Pu(e):Pu(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?g_(s):this.lineralizeSegments(i,s).pipe((0,mr.z)(u=>{const h=new Zt(u,{});return this.expandSegment(t,h,e,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:E}=bh(e,r,s);if(!h)return Pu(e);const I=this.applyRedirectCommands(p,r.redirectTo,E);return r.redirectTo.startsWith("/")?g_(I):this.lineralizeSegments(r,I).pipe((0,mr.z)(M=>this.expandSegment(t,e,i,M.concat(y),u,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?bt(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe((0,we.U)(I=>(i._loadedConfig=I,new Zt(r,{})))):bt(new Zt(r,{}));const{matched:u,consumedSegments:h,remainingSegments:p}=bh(e,i,r);return u?this.getChildConfig(t,i,r).pipe((0,mr.z)(E=>{const I=E.module,M=E.routes,{segmentGroup:P,slicedSegments:B}=d_(e,h,p,M),Q=new Zt(P.segments,P.children);if(0===B.length&&Q.hasChildren())return this.expandChildren(I,M,Q).pipe((0,we.U)(it=>new Zt(h,it)));if(0===M.length&&0===B.length)return bt(new Zt(h,{}));const be=js(i)===s;return this.expandSegment(I,Q,M,B,be?Wt:s,!0).pipe((0,we.U)(nt=>new Zt(h.concat(nt.segments),nt.children)))})):Pu(e)}getChildConfig(t,e,i){return e.children?bt(new Zr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?bt(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe((0,mr.z)(r=>r?this.configLoader.load(t.injector,e).pipe((0,we.U)(s=>(e._loadedConfig=s,s))):function nw(n){return pl(jv(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):bt(new Zr([],t))}runCanLoadGuards(t,e,i){const r=e.canLoad;return r&&0!==r.length?bt(r.map(u=>{const h=t.get(u);let p;if(function CR(n){return n&&Ou(n.canLoad)}(h))p=h.canLoad(e,i);else{if(!Ou(h))throw new Error("Invalid CanLoad guard");p=h(e,i)}return Jo(p)})).pipe(wh(),(0,Mr.b)(u=>{if(!vh(u))return;const h=jv(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,we.U)(u=>!0===u)):bt(!0)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return bt(i);if(r.numberOfChildren>1||!r.children[Wt])return pl(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));r=r.children[Wt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new mh(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Xi(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=e[h]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let u={};return Xi(e.children,(h,p)=>{u[p]=this.createSegmentGroup(t,h,i,r)}),new Zt(s,u)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}function XC(n){const t={};for(const i of Object.keys(n.children)){const s=XC(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function IR(n){if(1===n.numberOfChildren&&n.children[Wt]){const t=n.children[Wt];return new Zt(n.segments.concat(t.segments),t.children)}return n}(new Zt(n.segments,t))}class OD{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class m_{constructor(t,e){this.component=t,this.route=e}}function eE(n,t,e){const i=n._root;return Ch(i,t?t._root:null,e,[i.value])}function hp(n,t,e){const i=function nE(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function Ch(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Hs(t);return n.children.forEach(u=>{(function vl(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=t?t.value:null,h=e?e.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function __(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Oa(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Oa(n.url,t.url)||!Qo(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qv(n,t)||!Qo(n.queryParams,t.queryParams);default:return!Qv(n,t)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new OD(i)):(s.data=u.data,s._resolvedData=u._resolvedData),Ch(n,t,s.component?h?h.children:null:e,i,r),p&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new m_(h.outlet.component,u))}else u&&fp(t,h,r),r.canActivateChecks.push(new OD(i)),Ch(n,null,s.component?h?h.children:null:e,i,r)})(u,s[u.value.outlet],e,i.concat([u.value]),r),delete s[u.value.outlet]}),Xi(s,(u,h)=>fp(u,e.getContext(h),r)),r}function fp(n,t,e){const i=Hs(n),r=n.value;Xi(i,(s,u)=>{fp(s,r.component?t?t.children.getContext(u):null:t,e)}),e.canDeactivateChecks.push(new m_(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class rE{}function lw(n){return new v.y(t=>t.error(n))}class FD{constructor(t,e,i,r,s,u){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=u}recognize(){const t=d_(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Wt);if(null===e)return null;const i=new s_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ku(i,e),s=new yl(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,i=Zv(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const s of Object.keys(e.children)){const u=e.children[s],h=KC(t,s),p=this.processSegmentGroup(h,u,s);if(null===p)return null;i.push(...p)}const r=cw(i);return function uw(n){n.sort((t,e)=>t.value.outlet===Wt?-1:e.value.outlet===Wt?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,i,r){for(const s of t){const u=this.processSegmentAgainstRoute(s,e,i,r);if(null!==u)return u}return f_(e,i,r)?[]:null}processSegmentAgainstRoute(t,e,i,r){if(t.redirectTo||!YC(t,e,i,r))return null;let s,u=[],h=[];if("**"===t.path){const P=i.length>0?IC(i).parameters:{};s=new s_(i,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,aE(t),js(t),t.component,t,dw(e),oE(e)+i.length,Gc(t))}else{const P=bh(e,t,i);if(!P.matched)return null;u=P.consumedSegments,h=P.remainingSegments,s=new s_(u,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,aE(t),js(t),t.component,t,dw(e),oE(e)+u.length,Gc(t))}const p=function LD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:y,slicedSegments:E}=d_(e,u,h,p.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===E.length&&y.hasChildren()){const P=this.processChildren(p,y);return null===P?null:[new ku(s,P)]}if(0===p.length&&0===E.length)return[new ku(s,[])];const I=js(t)===r,M=this.processSegment(p,y,E,I?Wt:r);return null===M?null:[new ku(s,M)]}}function VD(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function cw(n){const t=[],e=new Set;for(const i of n){if(!VD(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=cw(i.children);t.push(new ku(i.value,r))}return t.filter(i=>!e.has(i))}function dw(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function oE(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function aE(n){return n.data||{}}function Gc(n){return n.resolve||{}}function ea(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function y_(n){return gr(t=>{const e=n(t);return e?(0,xn.D)(e).pipe((0,we.U)(()=>t)):bt(t)})}class cE extends class uE{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const fw=new o.OlP("ROUTES");class dE{constructor(t,e,i,r){this.injector=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe((0,we.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const u=s.create(t);return new Zr(TC(u.injector.get(fw,void 0,o.XFs.Self|o.XFs.Optional)).map(c_),u)}),ml(s=>{throw e._loader$=void 0,s}));return e._loader$=new Pv(r,()=>new dn.x).pipe(Ov()),e._loader$}loadModuleFactory(t){return Jo(t()).pipe((0,mr.z)(e=>e instanceof o.YKP?bt(e):(0,xn.D)(this.compiler.compileModuleAsync(e))))}}class GD{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function hE(n){throw n}function DR(n,t,e){return t.parse("/")}function pw(n,t){return bt(null)}const $D={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ys=(()=>{class n{constructor(e,i,r,s,u,h,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new dn.x,this.errorHandler=hE,this.malformedUriErrorHandler=DR,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pw,afterPreactivation:pw},this.urlHandlingStrategy=new GD,this.routeReuseStrategy=new cE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(o.h0i),this.console=u.get(o.c2e);const I=u.get(o.R0b);this.isNgZoneEnabled=I instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function SC(){return new mh(new Zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new dE(u,h,M=>this.triggerEvent(new qm(M)),M=>this.triggerEvent(new Uv(M))),this.routerState=OC(this.currentUrlTree,this.rootComponentType),this.transitions=new Ni({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Zo(r=>0!==r.id),(0,we.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),gr(r=>{let s=!1,u=!1;return bt(r).pipe((0,Mr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),gr(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return v_(h.source)&&(this.browserUrlTree=h.extractedUrl),bt(h).pipe(gr(I=>{const M=this.transitions.getValue();return i.next(new rp(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),M!==this.transitions.getValue()?hh.E:Promise.resolve(I)}),function rw(n,t,e,i){return gr(r=>function iw(n,t,e,i,r){return new JC(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,we.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Mr.b)(I=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function BD(n,t,e,i,r){return(0,mr.z)(s=>function sE(n,t,e,i,r="emptyOnly",s="legacy"){try{const u=new FD(n,t,e,i,r,s).recognize();return null===u?lw(new rE):bt(u)}catch(u){return lw(u)}}(n,t,s.urlAfterRedirects,e(s.urlAfterRedirects),i,r).pipe((0,we.U)(u=>Object.assign(Object.assign({},s),{targetSnapshot:u}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Mr.b)(I=>{if("eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(P,I)}this.browserUrlTree=I.urlAfterRedirects}const M=new dD(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);i.next(M)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:P,source:B,restoredState:Q,extras:be}=h,et=new rp(M,this.serializeUrl(P),B,Q);i.next(et);const nt=OC(P,this.rootComponentType).snapshot;return bt(Object.assign(Object.assign({},h),{targetSnapshot:nt,urlAfterRedirects:P,extras:Object.assign(Object.assign({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),hh.E}),y_(h=>{const{targetSnapshot:p,id:y,extractedUrl:E,rawUrl:I,extras:{skipLocationChange:M,replaceUrl:P}}=h;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:E,rawUrlTree:I,skipLocationChange:!!M,replaceUrl:!!P})}),(0,Mr.b)(h=>{const p=new yC(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,we.U)(h=>Object.assign(Object.assign({},h),{guards:eE(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function PD(n,t){return(0,mr.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:u}}=e;return 0===u.length&&0===s.length?bt(Object.assign(Object.assign({},e),{guardsResult:!0})):function SR(n,t,e,i){return(0,xn.D)(n).pipe((0,mr.z)(r=>function aw(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?bt(s.map(h=>{const p=hp(h,t,r);let y;if(function SD(n){return n&&Ou(n.canDeactivate)}(p))y=Jo(p.canDeactivate(n,t,e,i));else{if(!Ou(p))throw new Error("Invalid CanDeactivate guard");y=Jo(p(n,t,e,i))}return y.pipe(Mu())})).pipe(wh()):bt(!0)}(r.component,r.route,e,t,i)),Mu(r=>!0!==r,!0))}(u,i,r,n).pipe((0,mr.z)(h=>h&&function ID(n){return"boolean"==typeof n}(h)?function sw(n,t,e,i){return(0,xn.D)(t).pipe(Au(r=>np(function ow(n,t){return null!==n&&t&&t(new gR(n)),bt(!0)}(r.route.parent,i),function iE(n,t){return null!==n&&t&&t(new pD(n)),bt(!0)}(r.route,i),function ND(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(u=>function tE(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(u)).filter(u=>null!==u).map(u=>Gm(()=>bt(u.guards.map(p=>{const y=hp(p,u.node,e);let E;if(function ER(n){return n&&Ou(n.canActivateChild)}(y))E=Jo(y.canActivateChild(i,n));else{if(!Ou(y))throw new Error("Invalid CanActivateChild guard");E=Jo(y(i,n))}return E.pipe(Mu())})).pipe(wh())));return bt(s).pipe(wh())}(n,r.path,e),function pp(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return bt(!0);const r=i.map(s=>Gm(()=>{const u=hp(s,t,e);let h;if(function $C(n){return n&&Ou(n.canActivate)}(u))h=Jo(u.canActivate(t,n));else{if(!Ou(u))throw new Error("Invalid CanActivate guard");h=Jo(u(t,n))}return h.pipe(Mu())}));return bt(r).pipe(wh())}(n,r.route,e))),Mu(r=>!0!==r,!0))}(i,s,n,t):bt(h)),(0,we.U)(h=>Object.assign(Object.assign({},e),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Mr.b)(h=>{if(vh(h.guardsResult)){const y=jv(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new hD(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),Zo(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),y_(h=>{if(h.guards.canActivateChecks.length)return bt(h).pipe((0,Mr.b)(p=>{const y=new fD(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),gr(p=>{let y=!1;return bt(p).pipe(function UD(n,t){return(0,mr.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return bt(e);let s=0;return(0,xn.D)(r).pipe(Au(u=>function HD(n,t,e,i){return function jD(n,t,e,i){const r=ea(n);if(0===r.length)return bt({});const s={};return(0,xn.D)(r).pipe((0,mr.z)(u=>function hw(n,t,e,i){const r=hp(n,t,i);return Jo(r.resolve?r.resolve(t,e):r(t,e))}(n[u],t,e,i).pipe((0,Mr.b)(h=>{s[u]=h}))),Fv(1),(0,mr.z)(()=>ea(s).length===r.length?bt(s):hh.E))}(n._resolve,n,t,i).pipe((0,we.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),Zv(n,e).resolve),null)))}(u.route,i,n,t)),(0,Mr.b)(()=>s++),Fv(1),(0,mr.z)(u=>s===r.length?bt(e):hh.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Mr.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Mr.b)(p=>{const y=new vC(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),y_(h=>{const{targetSnapshot:p,id:y,extractedUrl:E,rawUrl:I,extras:{skipLocationChange:M,replaceUrl:P}}=h;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:E,rawUrlTree:I,skipLocationChange:!!M,replaceUrl:!!P})}),(0,we.U)(h=>{const p=function FC(n,t,e){const i=lp(n,t._root,e?e._root:void 0);return new r_(i,t)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:p})}),(0,Mr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,t,e)=>(0,we.U)(i=>(new ED(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Mr.b)({next(){s=!0},complete(){s=!0}}),function $m(n){return(0,Fi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}(()=>{var h;s||u||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===r.id&&(this.currentNavigation=null)}),ml(h=>{if(u=!0,function gD(n){return n&&n[Hv]}(h)){const p=vh(h.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const y=new Wm(r.id,this.serializeUrl(r.extractedUrl),h.message);i.next(y),p?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),I={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||v_(r.source)};this.scheduleNavigation(E,"imperative",null,I,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new sp(r.id,this.serializeUrl(r.extractedUrl),h);i.next(p);try{r.resolve(this.errorHandler(h))}catch(y){r.reject(y)}}return hh.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},u=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(u){const p=Object.assign({},u);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(e.url);this.scheduleNavigation(h,i,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){tw(e),this.config=e.map(c_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:u,queryParamsHandling:h,preserveFragment:p}=i,y=r||this.routerState.root,E=p?this.currentUrlTree.fragment:u;let I=null;switch(h){case"merge":I=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),function _h(n,t,e,i,r){if(0===e.length)return Hc(t.root,t.root,t.root,i,r);const s=function VC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new LC(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Xi(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===u?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?e=!0:".."===h?t++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new LC(e,t,i)}(e);if(s.toRoot())return Hc(t.root,t.root,new Zt([],{}),i,r);const u=function Jv(n,t,e){if(n.isAbsolute)return new a_(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new a_(s,s===t.root,0)}const i=yh(n.commands[0])?0:1;return function Xv(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new a_(i,!1,r-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,t,n),h=u.processChildren?l_(u.segmentGroup,u.index,s.commands):cp(u.segmentGroup,u.index,s.commands);return Hc(t.root,u.segmentGroup,h,i,r)}(y,this.currentUrlTree,e,I,null!=E?E:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=vh(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function xR(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},$D):!1===i?Object.assign({},WD):i,vh(e))return zv(this.currentUrlTree,e,r);const s=this.parseUrl(e);return zv(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new fh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,u){var h,p;if(this.disposed)return Promise.resolve(!1);let y,E,I;u?(y=u.resolve,E=u.reject,I=u.promise):I=new Promise((B,Q)=>{y=B,E=Q});const M=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),P=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):P=0,this.setTransition({id:M,targetPageId:P,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:y,reject:E,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(B=>Promise.reject(B))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===u?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===u&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new Wm(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function v_(n){return"imperative"!==n}let gw=(()=>{class n{constructor(e,i,r,s,u){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=u,this.commands=null,this.onChanges=new dn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:$c(this.skipLocationChange),replaceUrl:$c(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$c(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ys),o.Y36(Ru),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})(),mp=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new dn.x,this.subscription=e.events.subscribe(s=>{s instanceof fh&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,u){if(0!==e||i||r||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:$c(this.skipLocationChange),replaceUrl:$c(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$c(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ys),o.Y36(Ru),o.Y36(ge))},n.\u0275dir=o.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&o.uIk("target",i.target)("href",i.href,o.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})();function $c(n){return""===n||!!n}let qD=(()=>{class n{constructor(e,i,r,s,u,h){this.router=e,this.element=i,this.renderer=r,this.cdr=s,this.link=u,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new o.vpe,this.routerEventsSubscription=e.events.subscribe(p=>{p instanceof fh&&this.update()})}ngAfterContentInit(){bt(this.links.changes,this.linksWithHrefs.changes,bt(null)).pipe((0,xu.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const i=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,xn.D)(i).pipe((0,xu.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function ta(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ys),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(gw,8),o.Y36(mp,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,gw,5),o.Suo(r,mp,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.links=s),o.iGM(s=o.CRH())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[o.TTD]}),n})();class KD{}class mw{preload(t,e){return bt(null)}}let _w=(()=>{class n{constructor(e,i,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new dE(r,i,p=>e.triggerEvent(new qm(p)),p=>e.triggerEvent(new Uv(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zo(e=>e instanceof fh),Au(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(o.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const u=s._loadedConfig;r.push(this.processRoutes(u.module,u.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children));return(0,xn.D)(r).pipe((0,xu.J)(),(0,we.U)(s=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?bt(i._loadedConfig):this.loader.load(e.injector,i)).pipe((0,mr.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ys),o.LFG(o.Sil),o.LFG(o.zs3),o.LFG(KD))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),w_=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof rp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof fh&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof CC&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new CC(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Eh=new o.OlP("ROUTER_CONFIGURATION"),yw=new o.OlP("ROUTER_FORROOT_GUARD"),vw=[Te,{provide:Xm,useClass:e_},{provide:ys,useFactory:function XD(n,t,e,i,r,s,u={},h,p){const y=new ys(null,n,t,e,i,r,TC(s));return h&&(y.urlHandlingStrategy=h),p&&(y.routeReuseStrategy=p),function ex(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(u,y),u.enableTracing&&y.events.subscribe(E=>{var I,M;null===(I=console.group)||void 0===I||I.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(M=console.groupEnd)||void 0===M||M.call(console)}),y},deps:[Xm,dp,Te,o.zs3,o.Sil,fw,Eh,[class zD{},new o.FiY],[class lE{},new o.FiY]]},dp,{provide:Ru,useFactory:function C_(n){return n.routerState.root},deps:[ys]},_w,mw,class AR{preload(t,e){return e().pipe(ml(()=>bt(null)))}},{provide:Eh,useValue:{enableTracing:!1}}];function ZD(){return new o.PXZ("Router",ys)}let b_=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[vw,fE(e),{provide:yw,useFactory:JD,deps:[[ys,new o.FiY,new o.tp0]]},{provide:Eh,useValue:i||{}},{provide:ge,useFactory:QD,deps:[le,[new o.tBr(We),new o.FiY],Eh]},{provide:w_,useFactory:YD,deps:[ys,cc,Eh]},{provide:KD,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:mw},{provide:o.PXZ,multi:!0,useFactory:ZD},[Nu,{provide:o.ip1,multi:!0,useFactory:tx,deps:[Nu]},{provide:pE,useFactory:_p,deps:[Nu]},{provide:o.tb,multi:!0,useExisting:pE}]]}}static forChild(e){return{ngModule:n,providers:[fE(e)]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(yw,8),o.LFG(ys,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function YD(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new w_(n,t,e)}function QD(n,t,e={}){return e.useHash?new Me(n,t):new Ye(n,t)}function JD(n){return"guarded"}function fE(n){return[{provide:o.deG,multi:!0,useValue:n},{provide:fw,multi:!0,useValue:n}]}let Nu=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new dn.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(h=>i=h),s=this.injector.get(ys),u=this.injector.get(Eh);return"disabled"===u.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?bt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(Eh),r=this.injector.get(_w),s=this.injector.get(w_),u=this.injector.get(ys),h=this.injector.get(o.z2F);e===h.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&u.initialNavigation(),r.setUpPreloading(),s.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function tx(n){return n.appInitializer.bind(n)}function _p(n){return n.bootstrapListener.bind(n)}const pE=new o.OlP("Router Initializer");var mo=N(6451),Fu=N(5363),kr=N(6063);class Wc extends dn.x{constructor(t=1/0,e=1/0,i=kr.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:u}=this;e||(i.push(t),!r&&i.push(s.now()+u)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let u=0;u<s.length&&!t.closed;u+=i?1:2)t.next(s[u]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const u=e.now();let h=0;for(let p=1;p<i.length&&i[p]<=u;p+=2)h=p;h&&i.splice(0,h+1)}}}var yp=N(3099);function vs(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=null!=n?n:1/0,(0,yp.B)({connector:()=>new Wc(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function E_(n,t){return(0,pr.m)(t)?gr(()=>n,t):gr(()=>n)}var Lu=N(9468),_n=N(5813),wi=N(2011);N(5867);var Ie=N(5861),_o=N(9681),bl=N(4859),F=N(2090),yo=N(1877);const yE=new Map,vE={activated:!1,tokenObservers:[]},dx={initialized:!1,enabled:!1};function er(n){return yE.get(n)||vE}function Na(n,t){yE.set(n,t)}function T_(){return dx}class px{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ie.Z)(function*(){e.stop();try{e.pending=new F.BH,yield function wE(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new F.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Yr=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bE(n){if(!er(n).activated)throw Yr.create("use-before-activation",{appName:n.name})}function Sh(n,t){return Cw.apply(this,arguments)}function Cw(){return(Cw=(0,Ie.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const I=yield r.getHeartbeatsHeader();I&&(i["X-Firebase-Client"]=I)}const s={method:"POST",body:JSON.stringify(t),headers:i};let u,h;try{u=yield fetch(n,s)}catch(I){throw Yr.create("fetch-network-error",{originalErrorMessage:I.message})}if(200!==u.status)throw Yr.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(I){throw Yr.create("fetch-parse-error",{originalErrorMessage:I.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Yr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),E=Date.now();return{token:h.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}})).apply(this,arguments)}function mx(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const Cp="firebase-app-check-store";let I_=null;function Tw(){return I_||(I_=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Yr.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Cp,{keyPath:"compositeKey"})}}catch(e){t(Yr.create("storage-open",{originalErrorMessage:e.message}))}}),I_)}function SE(){return(SE=(0,Ie.Z)(function*(n,t){const i=(yield Tw()).transaction(Cp,"readwrite"),s=i.objectStore(Cp).put({compositeKey:n,value:t});return new Promise((u,h)=>{s.onsuccess=p=>{u()},i.onerror=p=>{var y;h(Yr.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Kc=new yo.Yd("@firebase/app-check");function Ep(n,t){return(0,F.hl)()?function Iw(n,t){return function IE(n,t){return SE.apply(this,arguments)}(function D_(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Kc.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function xE(){return T_().enabled}function Tp(){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,Ie.Z)(function*(){const n=T_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const AE={error:"UNKNOWN_ERROR"};function Aw(n){return F.US.encodeString(JSON.stringify(n),!1)}function Ip(n){return x_.apply(this,arguments)}function x_(){return(x_=(0,Ie.Z)(function*(n,t=!1){const e=n.app;bE(e);const i=er(e);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&Mh(p)&&(r=p)}if(!t&&r&&Mh(r))return{token:r.token};let h,u=!1;if(xE()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Sh(mx(e,yield Tp()),n.heartbeatServiceProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),u=!0);const p=yield i.exchangeTokenPromise;return yield Ep(e,p),Na(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),u=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Kc.warn(p.message):Kc.error(p),s=p}return r?(h={token:r.token},Na(e,Object.assign(Object.assign({},i),{token:r})),yield Ep(e,r)):h=RE(s),u&&Mw(e,h),h})).apply(this,arguments)}function A_(n,t){const e=er(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),Na(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function ME(n){const{app:t}=n,e=er(t);let i=e.tokenRefresher;i||(i=function kE(n){const{app:t}=n;return new px((0,Ie.Z)(function*(){let i;if(i=er(t).token?yield Ip(n,!0):yield Ip(n),i.error)throw i.error}),()=>!0,()=>{const e=er(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Na(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Mw(n,t){const e=er(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function Mh(n){return n.expireTimeMillis-Date.now()>0}function RE(n){return{token:Aw(AE),error:n}}class wx{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=er(this.app);for(const e of t)A_(this.app,e.next);return Promise.resolve()}}const zE="app-check-internal";!function GE(){(0,_o._registerComponent)(new bl.wA("app-check",n=>function OE(n,t){return new wx(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(zE).initialize()})),(0,_o._registerComponent)(new bl.wA(zE,n=>function PE(n){return{getToken:t=>Ip(n,t),addTokenListener:t=>function Sp(n,t,e,i){const{app:r}=n,s=er(r),u={next:e,error:i,type:t};if(Na(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,u]})),s.token&&Mh(s.token)){const h=s.token;Promise.resolve().then(()=>{e({token:h.token}),ME(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ME(n))}(n,"INTERNAL",t),removeTokenListener:t=>A_(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_o.registerVersion)("@firebase/app-check","0.5.8")}();class Fw{constructor(){return(0,_n.vb)("app-check")}}"undefined"!=typeof window&&window;var kh=N(127);const O_=new o.OlP("angularfire2.auth.use-emulator"),Lw=new o.OlP("angularfire2.auth.settings"),P_=new o.OlP("angularfire2.auth.tenant-id"),N_=new o.OlP("angularfire2.auth.langugage-code"),Rh=new o.OlP("angularfire2.auth.use-device-language"),Vw=new o.OlP("angularfire.auth.persistence"),F_=(n,t,e,i,r,s,u,h)=>(0,wi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),u)for(const[y,E]of Object.entries(u))p.settings[y]=E;return h&&p.setPersistence(h),p},[e,i,r,s,u,h]);let Mp=(()=>{class n{constructor(e,i,r,s,u,h,p,y,E,I,M,P){const B=new dn.x,Q=bt(void 0).pipe((0,Fu.Q)(u.outsideAngular),gr(()=>s.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8775)))),(0,we.U)(()=>(0,wi.on)(e,s,i)),(0,we.U)(be=>F_(be,s,h,y,E,I,p,M)),vs({bufferSize:1,refCount:!1}));if(fa(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=bt(null);else{Q.pipe(Mu()).subscribe();const et=Q.pipe(gr(rt=>rt.getRedirectResult().then(kt=>kt,()=>null)),_n.iC,vs({bufferSize:1,refCount:!1})),nt=Q.pipe(gr(rt=>new v.y(kt=>({unsubscribe:s.runOutsideAngular(()=>rt.onAuthStateChanged(Pt=>kt.next(Pt),Pt=>kt.error(Pt),()=>kt.complete()))})))),it=Q.pipe(gr(rt=>new v.y(kt=>({unsubscribe:s.runOutsideAngular(()=>rt.onIdTokenChanged(Pt=>kt.next(Pt),Pt=>kt.error(Pt),()=>kt.complete()))}))));this.authState=et.pipe(E_(nt),(0,Lu.R)(u.outsideAngular),(0,Fu.Q)(u.insideAngular)),this.user=et.pipe(E_(it),(0,Lu.R)(u.outsideAngular),(0,Fu.Q)(u.insideAngular)),this.idToken=this.user.pipe(gr(rt=>rt?(0,xn.D)(rt.getIdToken()):bt(null))),this.idTokenResult=this.user.pipe(gr(rt=>rt?(0,xn.D)(rt.getIdTokenResult()):bt(null))),this.credential=(0,mo.T)(et,B,this.authState.pipe(Zo(rt=>!rt))).pipe((0,we.U)(rt=>(null==rt?void 0:rt.user)?rt:null),(0,Lu.R)(u.outsideAngular),(0,Fu.Q)(u.insideAngular))}return(0,wi.pX)(this,Q,s,{spy:{apply:(be,et,nt)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&nt.then(it=>B.next(it))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(wi.Dh),o.LFG(wi.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(_n.HU),o.LFG(O_,8),o.LFG(Lw,8),o.LFG(P_,8),o.LFG(N_,8),o.LFG(Rh,8),o.LFG(Vw,8),o.LFG(Fw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Bu=(()=>{class n{constructor(e,i){this.angularFireAuth=e,this._router=i,this.isAuth=!1,this.isAuthContent=new Ni(this.isAuth),this.isAuthExpose=this.isAuthContent.asObservable(),this.angularFireAuth.authState.subscribe(r=>{r?(this.userData=r,localStorage.setItem("user",JSON.stringify(this.userData)),this.isAuthContent.next(!0),this._router.navigate(["pranavam/dashboard"])):(localStorage.removeItem("user"),this.isAuthContent.next(!1))})}isAuthenticated(){return null!=JSON.parse(localStorage.getItem("user"))}signIn(e,i){this.angularFireAuth.signInWithEmailAndPassword(e,i).then(r=>{}).catch(r=>{console.log("Something is wrong:",r.message)})}SignOut(){this.angularFireAuth.signOut().then(()=>{localStorage.removeItem("user"),this._router.navigate(["login"])})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Mp),o.LFG(ys))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oh=(()=>{class n{constructor(e,i){this._authService=e,this._router=i}canActivate(e,i){return!!this._authService.isAuthenticated()||(this._router.navigate(["login"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Bu),o.LFG(ys))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YE(n,t){if(1&n&&o._UZ(0,"img",6),2&n){const e=o.oxw(2);o.Q6J("src",e.image,o.LSH)}}function QE(n,t){if(1&n&&o._UZ(0,"span",8),2&n){const e=o.oxw(3);o.Tol(e.icon),o.Q6J("ngClass","p-chip-icon")}}function JE(n,t){if(1&n&&o.YNc(0,QE,1,3,"span",7),2&n){const e=o.oxw(2);o.Q6J("ngIf",e.icon)}}function XE(n,t){if(1&n&&(o.TgZ(0,"div",9),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.label)}}function eT(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",10),o.NdJ("click",function(r){return o.CHM(e),o.oxw(2).close(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(2).close(r)}),o.qZA()}if(2&n){const e=o.oxw(2);o.Tol(e.removeIcon),o.Q6J("ngClass","pi-chip-remove-icon")}}function tT(n,t){if(1&n&&(o.TgZ(0,"div",1),o.Hsn(1),o.YNc(2,YE,1,1,"img",2),o.YNc(3,JE,1,1,"ng-template",null,3,o.W1O),o.YNc(5,XE,2,1,"div",4),o.YNc(6,eT,1,3,"span",5),o.qZA()),2&n){const e=o.MAs(4),i=o.oxw();o.Tol(i.styleClass),o.Q6J("ngClass",i.containerClass())("ngStyle",i.style),o.xp6(2),o.Q6J("ngIf",i.image)("ngIfElse",e),o.xp6(3),o.Q6J("ngIf",i.label),o.xp6(1),o.Q6J("ngIf",i.removable)}}const nT=["*"];let Ax=(()=>{class n{constructor(){this.removeIcon="pi pi-times-circle",this.onRemove=new o.vpe,this.visible=!0}containerClass(){return{"p-chip p-component":!0,"p-chip-image":null!=this.image}}close(e){this.visible=!1,this.onRemove.emit(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-chip"]],hostAttrs:[1,"p-element"],inputs:{label:"label",icon:"icon",image:"image",style:"style",styleClass:"styleClass",removable:"removable",removeIcon:"removeIcon"},outputs:{onRemove:"onRemove"},ngContentSelectors:nT,decls:1,vars:1,consts:[[3,"ngClass","class","ngStyle",4,"ngIf"],[3,"ngClass","ngStyle"],[3,"src",4,"ngIf","ngIfElse"],["iconTemplate",""],["class","p-chip-text",4,"ngIf"],["tabindex","0",3,"class","ngClass","click","keydown.enter",4,"ngIf"],[3,"src"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[1,"p-chip-text"],["tabindex","0",3,"ngClass","click","keydown.enter"]],template:function(e,i){1&e&&(o.F$t(),o.YNc(0,tT,7,8,"div",0)),2&e&&o.Q6J("ngIf",i.visible)},directives:[on,kn,Ki],styles:[".p-chip{display:inline-flex;align-items:center}.p-chip-text,.p-chip-icon.pi{line-height:1.5}.pi-chip-remove-icon{line-height:1.5;cursor:pointer}.p-chip img{border-radius:50%}\n"],encapsulation:2,changeDetection:0}),n})(),Mx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei]]}),n})(),kx=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-dashboard"]],decls:144,vars:0,consts:[[1,"container-fluid","p-0"],[1,"h3","mb-3"],[1,"row"],[1,"col-12","col-lg-4","col-xxl-3","d-flex"],[1,"card","flex-fill","w-100"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body","d-flex","w-100"],[1,"align-self-center","chart","chart-lg","tile"],["label","Action","styleClass","mr-2"],["label","Comedy","styleClass","mr-2"],["label","Mystery","styleClass","mr-2"],["label","ComedyComedyComedyComedy","styleClass","mr-2"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"h1",1)(2,"strong"),o._uU(3,"Analytics"),o.qZA(),o._uU(4," Dashboard"),o.qZA(),o.TgZ(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"h5",6),o._uU(10,"Monthly Sales"),o.qZA()(),o.TgZ(11,"div",7)(12,"div",8),o._UZ(13,"p-chip",9)(14,"br")(15,"p-chip",10)(16,"br")(17,"p-chip",11)(18,"br")(19,"p-chip",9)(20,"br")(21,"p-chip",10)(22,"br")(23,"p-chip",11)(24,"br")(25,"p-chip",9)(26,"br")(27,"p-chip",10)(28,"br")(29,"p-chip",11)(30,"br")(31,"p-chip",9)(32,"br")(33,"p-chip",10)(34,"br")(35,"p-chip",11)(36,"br")(37,"p-chip",9)(38,"br")(39,"p-chip",10)(40,"br")(41,"p-chip",11)(42,"br")(43,"p-chip",9)(44,"br")(45,"p-chip",10)(46,"br")(47,"p-chip",11)(48,"br")(49,"p-chip",9)(50,"br")(51,"p-chip",10)(52,"br")(53,"p-chip",11)(54,"br"),o.qZA()()()(),o.TgZ(55,"div",3)(56,"div",4)(57,"div",5)(58,"h5",6),o._uU(59,"Monthly Sales"),o.qZA()(),o.TgZ(60,"div",7)(61,"div",8),o._UZ(62,"p-chip",9)(63,"br")(64,"p-chip",10)(65,"br")(66,"p-chip",11)(67,"br")(68,"p-chip",9)(69,"br")(70,"p-chip",10)(71,"br")(72,"p-chip",11)(73,"br")(74,"p-chip",9)(75,"br")(76,"p-chip",10)(77,"br")(78,"p-chip",11)(79,"br")(80,"p-chip",9)(81,"br")(82,"p-chip",10)(83,"br")(84,"p-chip",11)(85,"br")(86,"p-chip",9)(87,"br")(88,"p-chip",10)(89,"br")(90,"p-chip",11)(91,"br")(92,"p-chip",9)(93,"br")(94,"p-chip",10)(95,"br")(96,"p-chip",11)(97,"br")(98,"p-chip",9)(99,"br")(100,"p-chip",10)(101,"br")(102,"p-chip",11)(103,"br"),o.qZA()()()(),o.TgZ(104,"div",3)(105,"div",4)(106,"div",5)(107,"h5",6),o._uU(108,"Monthly Sales"),o.qZA()(),o.TgZ(109,"div",7)(110,"div",8),o._UZ(111,"p-chip",9)(112,"p-chip",12)(113,"p-chip",11)(114,"p-chip",9)(115,"p-chip",10)(116,"p-chip",11)(117,"p-chip",9)(118,"p-chip",10)(119,"p-chip",11)(120,"p-chip",9)(121,"br")(122,"p-chip",10)(123,"br")(124,"p-chip",11)(125,"br")(126,"p-chip",9)(127,"br")(128,"p-chip",10)(129,"br")(130,"p-chip",11)(131,"br")(132,"p-chip",9)(133,"br")(134,"p-chip",10)(135,"br")(136,"p-chip",11)(137,"br")(138,"p-chip",9)(139,"br")(140,"p-chip",10)(141,"br")(142,"p-chip",11)(143,"br"),o.qZA()()()()()())},directives:[Ax],styles:[".tile[_ngcontent-%COMP%]{height:200px!important;max-height:200px;min-height:200px!important;overflow:scroll}"]}),n})();class ct{static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,u,h,i=Array.isArray(t),r=Array.isArray(e);if(i&&r){if((u=t.length)!=e.length)return!1;for(s=u;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(i!=r)return!1;var p=t instanceof Date,y=e instanceof Date;if(p!=y)return!1;if(p&&y)return t.getTime()==e.getTime();var E=t instanceof RegExp,I=e instanceof RegExp;if(E!=I)return!1;if(E&&I)return t.toString()==e.toString();var M=Object.keys(t);if((u=M.length)!==Object.keys(e).length)return!1;for(s=u;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,M[s]))return!1;for(s=u;0!=s--;)if(!this.equalsByValue(t[h=M[s]],e[h]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let i=e.split("."),r=t;for(let s=0,u=i.length;s<u;++s){if(null==r)return null;r=r[i[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let s=!1;for(let u=0;u<i.length;u++)if(this.findIndexInList(i[u],r)>e){i.splice(u,0,t),s=!0;break}s||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}return i}static contains(t,e){if(null!=t&&e&&e.length)for(let i of e)if(this.equals(t,i))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}}var iT=0;function kp(){return"pr_id_"+ ++iT}var Rr=function Rx(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,u,h)=>{u&&(u.style.zIndex=String(((s,u)=>{let h=n.length>0?n[n.length-1]:{key:s,value:u},p=h.value+(h.key===s?0:u)+1;return n.push({key:s,value:p}),p})(s,h)))},clear:s=>{s&&((s=>{n=n.filter(u=>u.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();const Ox=["*"];let _r=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),Ph=(()=>{class n{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[_r.STARTS_WITH,_r.CONTAINS,_r.NOT_CONTAINS,_r.ENDS_WITH,_r.EQUALS,_r.NOT_EQUALS],numeric:[_r.EQUALS,_r.NOT_EQUALS,_r.LESS_THAN,_r.LESS_THAN_OR_EQUAL_TO,_r.GREATER_THAN,_r.GREATER_THAN_OR_EQUAL_TO],date:[_r.DATE_IS,_r.DATE_IS_NOT,_r.DATE_BEFORE,_r.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new dn.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation=Object.assign(Object.assign({},this.translation),e),this.translationSource.next(this.translation)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ws=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.NO_FILTER="noFilter",n.LT="lt",n.LTE="lte",n.GT="gt",n.GTE="gte",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.CLEAR="clear",n.APPLY="apply",n.MATCH_ALL="matchAll",n.MATCH_ANY="matchAny",n.ADD_RULE="addRule",n.REMOVE_RULE="removeRule",n.ACCEPT="accept",n.REJECT="reject",n.CHOOSE="choose",n.UPLOAD="upload",n.CANCEL="cancel",n.DAY_NAMES="dayNames",n.DAY_NAMES_SHORT="dayNamesShort",n.DAY_NAMES_MIN="dayNamesMin",n.MONTH_NAMES="monthNames",n.MONTH_NAMES_SHORT="monthNamesShort",n.FIRST_DAY_OF_WEEK="firstDayOfWeek",n.TODAY="today",n.WEEK_HEADER="weekHeader",n.WEAK="weak",n.MEDIUM="medium",n.STRONG="strong",n.PASSWORD_PROMPT="passwordPrompt",n.EMPTY_MESSAGE="emptyMessage",n.EMPTY_FILTER_MESSAGE="emptyFilterMessage",n})();var Uu=(()=>{return(n=Uu||(Uu={}))[n.ACCEPT=0]="ACCEPT",n[n.REJECT=1]="REJECT",n[n.CANCEL=2]="CANCEL",Uu;var n})();let Bw=(()=>{class n{constructor(){this.requireConfirmationSource=new dn.x,this.acceptConfirmationSource=new dn.x,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),rT=(()=>{class n{constructor(){this.filters={startsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=ct.removeAccents(i.toString()).toLocaleLowerCase(r);return ct.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=ct.removeAccents(i.toString()).toLocaleLowerCase(r);return-1!==ct.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=ct.removeAccents(i.toString()).toLocaleLowerCase(r);return-1===ct.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=ct.removeAccents(i.toString()).toLocaleLowerCase(r),u=ct.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==u.indexOf(s,u.length-s.length)},equals:(e,i,r)=>null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():ct.removeAccents(e.toString()).toLocaleLowerCase(r)==ct.removeAccents(i.toString()).toLocaleLowerCase(r)),notEquals:(e,i,r)=>!(null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():ct.removeAccents(e.toString()).toLocaleLowerCase(r)==ct.removeAccents(i.toString()).toLocaleLowerCase(r))),in:(e,i)=>{if(null==i||0===i.length)return!0;for(let r=0;r<i.length;r++)if(ct.equals(e,i[r]))return!0;return!1},between:(e,i)=>null==i||null==i[0]||null==i[1]||null!=e&&(e.getTime?i[0].getTime()<=e.getTime()&&e.getTime()<=i[1].getTime():i[0]<=e&&e<=i[1]),lt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<i.getTime():e<i),lte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<=i.getTime():e<=i),gt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>i.getTime():e>i),gte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>=i.getTime():e>=i),is:(e,i,r)=>this.filters.equals(e,i,r),isNot:(e,i,r)=>this.filters.notEquals(e,i,r),before:(e,i,r)=>this.filters.lt(e,i,r),after:(e,i,r)=>this.filters.gt(e,i,r),dateIs:(e,i)=>null==i||null!=e&&e.toDateString()===i.toDateString(),dateIsNot:(e,i)=>null==i||null!=e&&e.toDateString()!==i.toDateString(),dateBefore:(e,i)=>null==i||null!=e&&e.getTime()<i.getTime(),dateAfter:(e,i)=>null==i||null!=e&&e.getTime()>i.getTime()}}filter(e,i,r,s,u){let h=[];if(e)for(let p of e)for(let y of i){let E=ct.resolveFieldData(p,y);if(this.filters[s](E,r,u)){h.push(p);break}}return h}register(e,i){this.filters[e]=i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uw=(()=>{class n{constructor(){this.messageSource=new dn.x,this.clearSource=new dn.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Hw=(()=>{class n{constructor(){this.clickSource=new dn.x,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jw=(()=>{class n{}return n.AND="and",n.OR="or",n})(),sT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-footer"]],ngContentSelectors:Ox,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2}),n})(),Hu=(()=>{class n{constructor(e){this.template=e}getType(){return this.name}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),Ba=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei]]}),n})();var Rp=N(4986);function Op(){return(0,Fi.e)((n,t)=>{let e,i=!1;n.subscribe((0,rn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function L_(n,t=he.y){return n=null!=n?n:oT,(0,Fi.e)((e,i)=>{let r,s=!0;e.subscribe((0,rn.x)(i,u=>{const h=t(u);(s||!n(r,h))&&(s=!1,r=h,i.next(u))}))})}function oT(n,t){return n===t}N(8775);var at,aT=N(3942),Lx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bs={},Pp=Pp||{},Lt=Lx||self;function Np(){}function V_(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function B_(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var zw="closure_uid_"+(1e9*Math.random()>>>0),Vx=0;function Bx(n,t,e){return n.call.apply(n.bind,arguments)}function U_(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function yr(n,t,e){return(yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bx:U_).apply(null,arguments)}function Zc(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Ci(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return t.prototype[r].apply(i,u)}}function vn(){this.s=this.s,this.o=this.o}var lT={};vn.prototype.s=!1,vn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Tt(n){return Object.prototype.hasOwnProperty.call(n,zw)&&n[zw]||(n[zw]=++Vx)}(this);delete lT[n]}},vn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uT=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},cT=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function Gw(n){return Array.prototype.concat.apply([],arguments)}function H_(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function Fp(n){return/^[\s\xa0]*$/.test(n)}var Li,hT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Qr(n,t){return-1!=n.indexOf(t)}function $w(n,t){return n<t?-1:n>t?1:0}e:{var fT=Lt.navigator;if(fT){var pT=fT.userAgent;if(pT){Li=pT;break e}}Li=""}function Ww(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function Lp(n){const t={};for(const e in n)t[e]=n[e];return t}var qw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kw(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<qw.length;s++)e=qw[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function j_(n){return j_[" "](n),n}j_[" "]=Np;var Bp,n,Vp=Qr(Li,"Opera"),Ua=Qr(Li,"Trident")||Qr(Li,"MSIE"),gT=Qr(Li,"Edge"),Zw=gT||Ua,mT=Qr(Li,"Gecko")&&!(Qr(Li.toLowerCase(),"webkit")&&!Qr(Li,"Edge"))&&!(Qr(Li,"Trident")||Qr(Li,"MSIE"))&&!Qr(Li,"Edge"),_T=Qr(Li.toLowerCase(),"webkit")&&!Qr(Li,"Edge");function Yw(){var n=Lt.document;return n?n.documentMode:void 0}e:{var Qw="",z_=(n=Li,mT?/rv:([^\);]+)(\)|;)/.exec(n):gT?/Edge\/([\d\.]+)/.exec(n):Ua?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):_T?/WebKit\/(\S+)/.exec(n):Vp?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(z_&&(Qw=z_?z_[1]:""),Ua){var Jw=Yw();if(null!=Jw&&Jw>parseFloat(Qw)){Bp=String(Jw);break e}}Bp=Qw}var Hx={};var qR=Lt.document&&Ua&&(Yw()||parseInt(Bp,10))||void 0,vT=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",Np,t),Lt.removeEventListener("test",Np,t)}catch(e){}return n}();function Vi(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Up(n,t){if(Vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(mT){e:{try{j_(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zx[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Up.Z.h.call(this)}}Vi.prototype.h=function(){this.defaultPrevented=!0},Ci(Up,Vi);var zx={2:"touch",3:"pen",4:"mouse"};Up.prototype.h=function(){Up.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fh="closure_listenable_"+(1e6*Math.random()|0),Hp=0;function Gx(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++Hp,this.ca=this.fa=!1}function G_(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function $_(n){this.src=n,this.g={},this.h=0}function Xw(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=uT(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(G_(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function eb(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}$_.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=eb(n,t,i,r);return-1<u?(t=n[u],e||(t.fa=!1)):((t=new Gx(t,this.src,s,!!i,r)).fa=e,n.push(t)),t};var W_="closure_lm_"+(1e6*Math.random()|0),tb={};function wT(n,t,e,i,r){if(i&&i.once)return nb(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)wT(n,t[s],e,i,r);return null}return e=rb(e),n&&n[Fh]?n.N(t,e,B_(i)?!!i.capture:!!i,r):Yc(n,t,e,!1,i,r)}function Yc(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var u=B_(r)?!!r.capture:!!r,h=ib(n);if(h||(n[W_]=h=new $_(n)),(e=h.add(t,e,i,u,s)).proxy)return e;if(i=function $x(){var t=ET;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)vT||(r=u),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(CT(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function nb(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)nb(n,t[s],e,i,r);return null}return e=rb(e),n&&n[Fh]?n.O(t,e,B_(i)?!!i.capture:!!i,r):Yc(n,t,e,!0,i,r)}function bT(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)bT(n,t[s],e,i,r);else i=B_(i)?!!i.capture:!!i,e=rb(e),n&&n[Fh]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=eb(s=n.g[t],e,i,r))&&(G_(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=ib(n))&&(t=n.g[t.toString()],n=-1,t&&(n=eb(t,e,i,r)),(e=-1<n?t[n]:null)&&q_(e))}function q_(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Fh])Xw(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(CT(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=ib(t))?(Xw(e,n),0==e.h&&(e.src=null,t[W_]=null)):G_(n)}}}function CT(n){return n in tb?tb[n]:tb[n]="on"+n}function ET(n,t){if(n.ca)n=!0;else{t=new Up(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&q_(n),n=e.call(i,t)}return n}function ib(n){return(n=n[W_])instanceof $_?n:null}var jp="__closure_events_fn_"+(1e9*Math.random()>>>0);function rb(n){return"function"==typeof n?n:(n[jp]||(n[jp]=function(t){return n.handleEvent(t)}),n[jp])}function Bi(){vn.call(this),this.i=new $_(this),this.P=this,this.I=null}function tr(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Vi(t,n);else if(t instanceof Vi)t.target=t.target||n;else{var r=t;Kw(t=new Vi(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var u=t.g=e[s];r=K_(u,i,!0,t)&&r}if(r=K_(u=t.g=n,i,!0,t)&&r,r=K_(u,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=K_(u=t.g=e[s],i,!1,t)&&r}function K_(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var u=t[s];if(u&&!u.ca&&u.capture==e){var h=u.listener,p=u.ia||u.src;u.fa&&Xw(n.i,u),r=!1!==h.call(p,i)&&r}}return r&&!i.defaultPrevented}Ci(Bi,vn),Bi.prototype[Fh]=!0,Bi.prototype.removeEventListener=function(n,t,e,i){bT(this,n,t,e,i)},Bi.prototype.M=function(){if(Bi.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)G_(e[i]);delete n.g[t],n.h--}}this.I=null},Bi.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Bi.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var sb=Lt.JSON.stringify;function Wx(){var n=ST;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var lb,TT=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new IT,n=>n.reset());class IT{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function qx(n){Lt.setTimeout(()=>{throw n},0)}function ab(n,t){lb||function Kx(){var n=Lt.Promise.resolve(void 0);lb=function(){n.then(Zx)}}(),ub||(lb(),ub=!0),ST.add(n,t)}var ub=!1,ST=new class ob{constructor(){this.h=this.g=null}add(t,e){const i=TT.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function Zx(){for(var n;n=Wx();){try{n.h.call(n.g)}catch(e){qx(e)}var t=TT;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}ub=!1}function Z_(n,t){Bi.call(this),this.h=n||1,this.g=t||Lt,this.j=yr(this.kb,this),this.l=Date.now()}function Y_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Q_(n,t,e){if("function"==typeof n)e&&(n=yr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yr(n.handleEvent,n)}return 2147483647<Number(t)?-1:Lt.setTimeout(n,t||0)}function DT(n){n.g=Q_(()=>{n.g=null,n.i&&(n.i=!1,DT(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Ci(Z_,Bi),(at=Z_.prototype).da=!1,at.S=null,at.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),tr(this,"tick"),this.da&&(Y_(this),this.start()))}},at.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){Z_.Z.M.call(this),Y_(this),delete this.g};class Yx extends vn{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:DT(this)}M(){super.M(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lh(n){vn.call(this),this.h=n,this.g={}}Ci(Lh,vn);var xT=[];function AT(n,t,e,i){Array.isArray(e)||(e&&(xT[0]=e.toString()),e=xT);for(var r=0;r<e.length;r++){var s=wT(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function MT(n){Ww(n.g,function(t,e){this.g.hasOwnProperty(e)&&q_(t)},n),n.g={}}function Vh(){this.g=!0}function ju(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function Jx(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<r.length;u++)r[u]=""}}}return sb(e)}catch(h){return t}}(n,e)+(i?" "+i:"")})}Lh.prototype.M=function(){Lh.Z.M.call(this),MT(this)},Lh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vh.prototype.Aa=function(){this.g=!1},Vh.prototype.info=function(){};var El={},RT=null;function zp(){return RT=RT||new Bi}function OT(n){Vi.call(this,El.Ma,n)}function Bh(n){const t=zp();tr(t,new OT(t,n))}function PT(n,t){Vi.call(this,El.STAT_EVENT,n),this.stat=t}function Or(n){const t=zp();tr(t,new PT(t,n))}function Xx(n,t){Vi.call(this,El.Na,n),this.size=t}function Gp(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},t)}El.Ma="serverreachability",Ci(OT,Vi),El.STAT_EVENT="statevent",Ci(PT,Vi),El.Na="timingevent",Ci(Xx,Vi);var Qc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},NT={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function zu(){}function FT(){}zu.prototype.h=null;var hb,J_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function X_(){Vi.call(this,"d")}function db(){Vi.call(this,"c")}function ey(){}function $p(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new Lh(this),this.P=LT,this.W=new Z_(n=Zw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fb}function fb(){this.i=null,this.g="",this.h=!1}Ci(X_,Vi),Ci(db,Vi),Ci(ey,zu),ey.prototype.g=function(){return new XMLHttpRequest},ey.prototype.i=function(){return{}},hb=new ey;var LT=45e3,Wp={},Jc={};function Xc(n,t,e){n.K=1,n.v=Yp(Wu(t)),n.s=e,n.U=!0,VT(n,null)}function VT(n,t){n.F=Date.now(),qp(n),n.A=Wu(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),KT(e.h,"t",i),n.C=0,e=n.l.H,n.h=new fb,n.g=Mb(n.l,e?t:null,!n.s),0<n.O&&(n.L=new Yx(yr(n.Ia,n,n.g),n.O)),AT(n.V,n.g,"readystatechange",n.gb),t=n.H?Lp(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Bh(1),function cb(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var u="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var E=y[0];y=y[1];var I=E.split("_");u=2<=I.length&&"type"==I[1]?u+(E+"=")+y+"&":u+(E+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function pb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function gb(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=eA(n,e),r==Jc){4==t&&(n.o=4,Or(14),i=!1),ju(n.j,n.m,null,"[Incomplete Response]");break}if(r==Wp){n.o=4,Or(15),ju(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}ju(n.j,n.m,r,null),mb(n,r)}pb(n)&&r!=Jc&&r!=Wp&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Or(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),id(t),t.L=!0,Or(11))):(ju(n.j,n.m,e,"[Invalid Chunked Response]"),ed(n),iy(n))}function eA(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?Jc:(e=Number(t.substring(e,i)),isNaN(e)?Wp:(i+=1)+e>t.length?Jc:(t=t.substr(i,e),n.C=i+e,t))}function qp(n){n.Y=Date.now()+n.P,ty(n,n.P)}function ty(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Gp(yr(n.eb,n),t)}function ny(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function iy(n){0==n.l.G||n.I||aI(n.l,n)}function ed(n){ny(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,Y_(n.W),MT(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function mb(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||vo(e.i,n)))if(e.I=n.N,!n.J&&vo(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(e.u)e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=Gp(yr(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;Yh(e),eg(e)}sI(e),Or(18)}if(1>=sy(e.i)&&e.ka){try{e.ka()}catch(y){}e.ka=void 0}}else rd(e,11)}else if((n.J||e.g==n)&&Yh(e),!Fp(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let y=r[t];if(e.U=y[0],y=y[1],2==e.G)if("c"==y[0]){e.J=y[1],e.la=y[2];const E=y[3];null!=E&&(e.ma=E,e.h.info("VER="+e.ma));const I=y[4];null!=I&&(e.za=I,e.h.info("SVER="+e.za));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(e.K=i=1.5*M,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const P=n.g;if(P){const B=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=i.i;!s.g&&(Qr(B,"spdy")||Qr(B,"quic")||Qr(B,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(vb(s,s.h),s.h=null))}if(i.D){const Q=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(i.sa=Q,On(i.F,i.D,Q))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var u=n;if((i=e).oa=py(i,i.H?i.la:null,i.W),u.J){oy(i.i,u);var h=u,p=i.K;p&&h.setTimeout(p),h.B&&(ny(h),qp(h)),i.g=u}else rI(i);0<e.l.length&&tg(e)}else"stop"!=y[0]&&"close"!=y[0]||rd(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?rd(e,7):Sb(e):"noop"!=y[0]&&e.j&&e.j.wa(y),e.A=0)}Bh(4)}catch(y){}}function ry(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(V_(n)||"string"==typeof n)cT(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(V_(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function Hh(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(V_(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function ia(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof ia)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function BT(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];Gu(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)Gu(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function Gu(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(at=$p.prototype).setTimeout=function(n){this.P=n},at.gb=function(n){n=n.target;const t=this.L;t&&3==Ha(n)?t.l():this.Ia(n)},at.Ia=function(n){try{if(n==this.g)e:{const E=Ha(this.g);var t=this.g.Da();const I=this.g.ba();if(!(3>E)&&(3!=E||Zw||this.g&&(this.h.h||this.g.ga()||hy(this.g)))){this.I||4!=E||7==t||Bh(8==t||0>=I?3:2),ny(this);var e=this.g.ba();this.N=e;t:if(pb(this)){var i=hy(this.g);n="";var r=i.length,s=4==Ha(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ed(this),iy(this);var u="";break t}this.h.i=new Lt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==e,function kT(n,t,e,i,r,s,u){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.X,E,e),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fp(h)){var y=h;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,Or(12),ed(this),iy(this);break e}ju(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mb(this,e)}this.U?(gb(this,E,u),Zw&&this.i&&3==E&&(AT(this.V,this.W,"tick",this.fb),this.W.start())):(ju(this.j,this.m,u,null),mb(this,u)),4==E&&ed(this),this.i&&!this.I&&(4==E?aI(this.l,this):(this.i=!1,qp(this)))}else 400==e&&0<u.indexOf("Unknown SID")?(this.o=3,Or(12)):(this.o=0,Or(13)),ed(this),iy(this)}}}catch(E){}},at.fb=function(){if(this.g){var n=Ha(this.g),t=this.g.ga();this.C<t.length&&(ny(this),gb(this,n,t),this.i&&4!=n&&qp(this))}},at.cancel=function(){this.I=!0,ed(this)},at.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Qx(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Bh(3),Or(17)),ed(this),this.o=2,iy(this)):ty(this,this.Y-n)},(at=ia.prototype).R=function(){BT(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},at.T=function(){return BT(this),this.g.concat()},at.get=function(n,t){return Gu(this.h,n)?this.h[n]:t},at.set=function(n,t){Gu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},at.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};var UT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $u(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof $u){this.g=void 0!==t?t:n.g,Kp(this,n.j),this.s=n.s,jh(this,n.i),Zp(this,n.m),this.l=n.l,t=n.h;var e=new $h;e.i=t.i,t.g&&(e.g=new ia(t.g),e.h=t.h),_b(this,e),this.o=n.o}else n&&(e=String(n).match(UT))?(this.g=!!t,Kp(this,e[1]||"",!0),this.s=zh(e[2]||""),jh(this,e[3]||"",!0),Zp(this,e[4]),this.l=zh(e[5]||"",!0),_b(this,e[6]||"",!0),this.o=zh(e[7]||"")):(this.g=!!t,this.h=new $h(null,this.g))}function Wu(n){return new $u(n)}function Kp(n,t,e){n.j=e?zh(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function jh(n,t,e){n.i=e?zh(t,!0):t}function Zp(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function _b(n,t,e){t instanceof $h?(n.h=t,function nA(n,t){t&&!n.j&&(Tl(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(WT(this,i),KT(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=Gh(t,GT)),n.h=new $h(t,n.g))}function On(n,t,e){n.h.set(t,e)}function Yp(n){return On(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function zh(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Gh(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,tA),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$u.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Gh(t,yb,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Gh(t,yb,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(Gh(e,"/"==e.charAt(0)?zT:Qp,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Gh(e,$T)),n.join("")};var yb=/[#\/\?@]/g,Qp=/[#\?:]/g,zT=/[#\?]/g,GT=/[#\?@]/g,$T=/#/g;function $h(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Tl(n){n.g||(n.g=new ia,n.h=0,n.i&&function KR(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function WT(n,t){Tl(n),t=Wh(n,t),Gu(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Gu((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&BT(n)))}function qT(n,t){return Tl(n),t=Wh(n,t),Gu(n.g.h,t)}function KT(n,t,e){WT(n,t),0<e.length&&(n.i=null,n.g.set(Wh(n,t),H_(e)),n.h+=e.length)}function Wh(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function ZT(n){this.l=n||Jp,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ea&&Lt.g.Ea()&&Lt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=$h.prototype).add=function(n,t){Tl(this),this.i=null,n=Wh(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},at.forEach=function(n,t){Tl(this),this.g.forEach(function(e,i){cT(e,function(r){n.call(t,r,i,this)},this)},this)},at.T=function(){Tl(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e},at.R=function(n){Tl(this);var t=[];if("string"==typeof n)qT(this,n)&&(t=Gw(t,this.g.get(Wh(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=Gw(t,n[e])}return t},at.set=function(n,t){return Tl(this),this.i=null,qT(this,n=Wh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},at.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var u=r;""!==i[s]&&(u+="="+encodeURIComponent(String(i[s]))),n.push(u)}}return this.i=n.join("&")};var Jp=10;function YT(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sy(n){return n.h?1:n.g?n.g.size:0}function vo(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function vb(n,t){n.g?n.g.add(t):n.h=t}function oy(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function qh(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return H_(n.i)}function wb(){}function rA(){this.g=new wb}function sA(n,t,e){const i=e||"";try{ry(n,function(r,s){let u=r;B_(r)&&(u=sb(r)),t.push(i+s+"="+encodeURIComponent(u))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function td(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function Xp(n){this.l=n.$b||null,this.j=n.ib||!1}function ly(n,t){Bi.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=uy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ZT.prototype.cancel=function(){if(this.i=qh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},wb.prototype.stringify=function(n){return Lt.JSON.stringify(n,void 0)},wb.prototype.parse=function(n){return Lt.JSON.parse(n,void 0)},Ci(Xp,zu),Xp.prototype.g=function(){return new ly(this.l,this.j)},Xp.prototype.i=function(n){return function(){return n}}({}),Ci(ly,Bi);var uy=0;function bb(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function nd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Kh(n)}function Kh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=ly.prototype).open=function(n,t){if(this.readyState!=uy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Kh(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Lt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nd(this)),this.readyState=uy},at.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Kh(this)),this.g&&(this.readyState=3,Kh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Lt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bb(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},at.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?nd(this):Kh(this),3==this.readyState&&bb(this)}},at.Ua=function(n){this.g&&(this.response=this.responseText=n,nd(this))},at.Ta=function(n){this.g&&(this.response=n,nd(this))},at.ha=function(){this.g&&nd(this)},at.setRequestHeader=function(n,t){this.v.append(n,t)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(ly.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oA=Lt.JSON.parse;function Ei(n){Bi.call(this),this.headers=new ia,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=aA,this.K=this.L=!1}Ci(Ei,Bi);var aA="",Cb=/^https?$/i,Eb=["POST","PUT"];function Tb(n){return"content-type"==n.toLowerCase()}function cy(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,JT(n),dy(n)}function JT(n){n.D||(n.D=!0,tr(n,"complete"),tr(n,"error"))}function XT(n){if(n.h&&void 0!==Pp&&(!n.C[1]||4!=Ha(n)||2!=n.ba()))if(n.v&&4==Ha(n))Q_(n.Fa,0,n);else if(tr(n,"readystatechange"),4==Ha(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===h){var r=String(n.H).match(UT)[1]||null;if(!r&&Lt.self&&Lt.self.location){var s=Lt.self.location.protocol;r=s.substr(0,s.length-1)}i=!Cb.test(r?r.toLowerCase():"")}e=i}if(e)tr(n,"complete"),tr(n,"success");else{n.m=6;try{var u=2<Ha(n)?n.g.statusText:""}catch(p){u=""}n.j=u+" ["+n.ba()+"]",JT(n)}}finally{dy(n)}}}function dy(n,t){if(n.g){eI(n);const e=n.g,i=n.C[0]?Np:null;n.g=null,n.C=null,t||tr(n,"ready");try{e.onreadystatechange=i}catch(r){}}}function eI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function Ha(n){return n.g?n.g.readyState:0}function hy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case aA:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function fy(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function tI(n){let t="";return Ww(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):On(n,t,e))}function Zh(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function Ib(n){this.za=0,this.l=[],this.h=new Vh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zh("baseRetryDelayMs",5e3,n),this.$a=Zh("retryDelaySeedMs",1e4,n),this.Ya=Zh("forwardChannelMaxRetries",2,n),this.ra=Zh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ZT(n&&n.concurrentRequestLimit),this.Ca=new rA,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Sb(n){if(Db(n),3==n.G){var t=n.V++,e=Wu(n.F);On(e,"SID",n.J),On(e,"RID",t),On(e,"TYPE","terminate"),ja(n,e),(t=new $p(n,n.h,t,void 0)).K=2,t.v=Yp(Wu(e)),e=!1,Lt.navigator&&Lt.navigator.sendBeacon&&(e=Lt.navigator.sendBeacon(t.v.toString(),"")),!e&&Lt.Image&&((new Image).src=t.v,e=!0),e||(t.g=Mb(t.l,null),t.g.ea(t.v)),t.F=Date.now(),qp(t)}lI(n)}function eg(n){n.g&&(id(n),n.g.cancel(),n.g=null)}function Db(n){eg(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),Yh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function xb(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&tg(n)}function tg(n){YT(n.i)||n.m||(n.m=!0,ab(n.Ha,n),n.C=0)}function Pr(n,t){var e;e=t?t.m:n.V++;const i=Wu(n.F);On(i,"SID",n.J),On(i,"RID",e),On(i,"AID",n.U),ja(n,i),n.o&&n.s&&fy(i,n.o,n.s),e=new $p(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=iI(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),vb(n.i,e),Xc(e,i,t)}function ja(n,t){n.j&&ry({},function(e,i){On(t,i,e)})}function iI(n,t,e){e=Math.min(n.l.length,e);var i=n.j?yr(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const u=["count="+e];-1==s?0<e?(s=r[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let h=!0;for(let p=0;p<e;p++){let y=r[p].h;const E=r[p].g;if(y-=s,0>y)s=Math.max(0,r[p].h-100),h=!1;else try{sA(E,u,"req"+y+"_")}catch(I){i&&i(E)}}if(h){i=u.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function rI(n){n.g||n.u||(n.Y=1,ab(n.Ga,n),n.A=0)}function sI(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Gp(yr(n.Ga,n),Ab(n,n.A)),n.A++,0))}function id(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function oI(n){n.g=new $p(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Wu(n.oa);On(t,"RID","rpc"),On(t,"SID",n.J),On(t,"CI",n.N?"0":"1"),On(t,"AID",n.U),ja(n,t),On(t,"TYPE","xmlhttp"),n.o&&n.s&&fy(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=Yp(Wu(t)),e.s=null,e.U=!0,VT(e,n)}function Yh(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function aI(n,t){var e=null;if(n.g==t){Yh(n),id(n),n.g=null;var i=2}else{if(!vo(n.i,t))return;e=t.D,oy(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;tr(i=zp(),new Xx(i,e,t,r)),tg(n)}else rI(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function nI(n,t){return!(sy(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Gp(yr(n.Ha,n,t),Ab(n,n.C)),n.C++,0)))}(n,t)||2==i&&sI(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:rd(n,5);break;case 4:rd(n,10);break;case 3:rd(n,6);break;default:rd(n,2)}}function Ab(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function rd(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=yr(n.jb,n);e||(e=new $u("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||Kp(e,"https"),Yp(e)),function ay(n,t){const e=new Vh;if(Lt.Image){const i=new Image;i.onload=Zc(td,e,i,"TestLoadImage: loaded",!0,t),i.onerror=Zc(td,e,i,"TestLoadImage: error",!1,t),i.onabort=Zc(td,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=Zc(td,e,i,"TestLoadImage: timeout",!1,t),Lt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else Or(2);n.G=0,n.j&&n.j.va(t),lI(n),Db(n)}function lI(n){n.G=0,n.I=-1,n.j&&((0!=qh(n.i).length||0!=n.l.length)&&(n.i.i.length=0,H_(n.l),n.l.length=0),n.j.ua())}function py(n,t,e){let i=function HT(n){return n instanceof $u?Wu(n):new $u(n,void 0)}(e);if(""!=i.i)t&&jh(i,t+"."+i.i),Zp(i,i.m);else{const r=Lt.location;i=function jT(n,t,e,i){var r=new $u(null,void 0);return n&&Kp(r,n),t&&jh(r,t),e&&Zp(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&Ww(n.aa,function(r,s){On(i,s,r)}),e=n.sa,(t=n.D)&&e&&On(i,t,e),On(i,"VER",n.ma),ja(n,i),i}function Mb(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ei(e&&n.Ba&&!n.qa?new Xp({ib:!0}):n.qa)).L=n.H,t}function kb(){}function sd(){if(Ua&&!(10<=Number(qR)))throw Error("Environmental error: no available transport.")}function Jr(n,t){Bi.call(this),this.g=new Ib(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!Fp(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Fp(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Qh(this)}function lA(n){X_.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function Rb(){db.call(this),this.status=1}function Qh(n){this.g=n}(at=Ei.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hb.g(),this.C=function Uh(n){return n.h||(n.h=n.i())}(this.u?this.u:hb),this.g.onreadystatechange=yr(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void cy(this,s)}n=e||"";const r=new ia(this.headers);i&&ry(i,function(s,u){r.set(u,s)}),i=function dT(n){e:{var t=Tb;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=Lt.FormData&&n instanceof Lt.FormData,!(0<=uT(Eb,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{eI(this),0<this.B&&((this.K=function QT(n){return Ua&&function WR(){return function Ux(n){var t=Hx;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=hT(String(Bp)).split("."),e=hT("9").split("."),i=Math.max(t.length,e.length);for(let u=0;0==n&&u<i;u++){var r=t[u]||"",s=e[u]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=$w(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||$w(0==r[2].length,0==s[2].length)||$w(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yr(this.pa,this)):this.A=Q_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){cy(this,s)}},at.pa=function(){void 0!==Pp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tr(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,tr(this,"complete"),tr(this,"abort"),dy(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dy(this,!0)),Ei.Z.M.call(this)},at.Fa=function(){this.s||(this.F||this.v||this.l?XT(this):this.cb())},at.cb=function(){XT(this)},at.ba=function(){try{return 2<Ha(this)?this.g.status:-1}catch(n){return-1}},at.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},at.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),oA(t)}},at.Da=function(){return this.m},at.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=Ib.prototype).ma=8,at.G=1,at.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},at.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new $p(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=Lp(s),Kw(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=iI(this,r,t),On(e=Wu(this.F),"RID",n),On(e,"CVER",22),this.D&&On(e,"X-HTTP-Session-Id",this.D),ja(this,e),this.o&&s&&fy(e,this.o,s),vb(this.i,r),this.Ra&&On(e,"TYPE","init"),this.ja?(On(e,"$req",t),On(e,"SID","null"),r.$=!0,Xc(r,e,null)):Xc(r,e,t),this.G=2}}else 3==this.G&&(n?Pr(this,n):0==this.l.length||YT(this.i)||Pr(this))},at.Ga=function(){if(this.u=null,oI(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Gp(yr(this.bb,this),n)}},at.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Or(10),eg(this),oI(this))},at.ab=function(){null!=this.v&&(this.v=null,eg(this),sI(this),Or(19))},at.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Or(2)):(this.h.info("Failed to ping google.com"),Or(1))},(at=kb.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Oa=function(){},sd.prototype.g=function(n,t){return new Jr(n,t)},Ci(Jr,Bi),Jr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ab(yr(n.hb,n,t))),Or(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=py(n,null,n.W),tg(n)},Jr.prototype.close=function(){Sb(this.g)},Jr.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,xb(this.g,t)}else this.v?((t={}).__data__=sb(n),xb(this.g,t)):xb(this.g,n)},Jr.prototype.M=function(){this.g.j=null,delete this.j,Sb(this.g),delete this.g,Jr.Z.M.call(this)},Ci(lA,X_),Ci(Rb,db),Ci(Qh,kb),Qh.prototype.xa=function(){tr(this.g,"a")},Qh.prototype.wa=function(n){tr(this.g,new lA(n))},Qh.prototype.va=function(n){tr(this.g,new Rb(n))},Qh.prototype.ua=function(){tr(this.g,"b")},sd.prototype.createWebChannel=sd.prototype.g,Jr.prototype.send=Jr.prototype.u,Jr.prototype.open=Jr.prototype.m,Jr.prototype.close=Jr.prototype.close,Qc.NO_ERROR=0,Qc.TIMEOUT=8,Qc.HTTP_ERROR=6,NT.COMPLETE="complete",FT.EventType=J_,J_.OPEN="a",J_.CLOSE="b",J_.ERROR="c",J_.MESSAGE="d",Bi.prototype.listen=Bi.prototype.N,Ei.prototype.listenOnce=Ei.prototype.O,Ei.prototype.getLastError=Ei.prototype.La,Ei.prototype.getLastErrorCode=Ei.prototype.Da,Ei.prototype.getStatus=Ei.prototype.ba,Ei.prototype.getResponseJson=Ei.prototype.Qa,Ei.prototype.getResponseText=Ei.prototype.ga,Ei.prototype.send=Ei.prototype.ea;var uI=bs.createWebChannelTransport=function(){return new sd},gy=bs.getStatEventTarget=function(){return zp()},my=bs.ErrorCode=Qc,uA=bs.EventType=NT,Ob=bs.Event=El,_y=bs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ZR=bs.FetchXmlHttpFactory=Xp,yy=bs.WebChannel=FT,cA=bs.XhrIo=Ei;const Pb="@firebase/firestore";class nr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");let Jh="9.8.0";const Il=new yo.Yd("@firebase/firestore");function vy(){return Il.logLevel}function Ve(n,...t){if(Il.logLevel<=yo.in.DEBUG){const e=t.map(wy);Il.debug(`Firestore (${Jh}): ${n}`,...e)}}function ci(n,...t){if(Il.logLevel<=yo.in.ERROR){const e=t.map(wy);Il.error(`Firestore (${Jh}): ${n}`,...e)}}function ng(n,...t){if(Il.logLevel<=yo.in.WARN){const e=t.map(wy);Il.warn(`Firestore (${Jh}): ${n}`,...e)}}function wy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function lt(n="Unexpected state"){const t=`FIRESTORE (${Jh}) INTERNAL ASSERTION FAILED: `+n;throw ci(t),new Error(t)}function Mt(n,t){n||lt()}function Ze(n,t){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends F.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class hA{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class YR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(nr.UNAUTHENTICATED))}shutdown(){}}class QR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class JR{constructor(t){this.t=t,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,e(y)):Promise.resolve();let u=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ui,t.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=u;t.enqueueRetryable((0,Ie.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},p=y=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ui)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Mt("string"==typeof i.accessToken),new hA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Mt(null===t||"string"==typeof t),new nr(t)}}class XR{constructor(t,e,i){this.type="FirstParty",this.user=nr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class eO{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new XR(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fA{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tO{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=s=>{null!=s.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.p;return this.p=s.token,Ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Mt("string"==typeof e.token),this.p=e.token,new fA(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class wo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.I(i),this.T=i=>e.writeSequenceNumber(i))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function dI(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}wo.A=-1;class by{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=dI(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Ut(n,t){return n<t?-1:n>t?1:0}function od(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function pA(n){return n+"\0"}class Kn{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Kn.fromMillis(Date.now())}static fromDate(t){return Kn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Kn(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ut(this.nanoseconds,t.nanoseconds):Ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(t){this.timestamp=t}static fromTimestamp(t){return new St(t)}static min(){return new St(new Kn(0,0))}static max(){return new St(new Kn(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function hI(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function qu(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function gA(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class ig{constructor(t,e,i){void 0===e?e=0:e>t.length&&lt(),void 0===i?i=t.length-e:i>t.length-e&&lt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===ig.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ig?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),u=e.get(r);if(s<u)return-1;if(s>u)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class sn extends ig{construct(t,e,i){return new sn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new sn(e)}static emptyPath(){return new sn([])}}const Fb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends ig{construct(t,e,i){return new Hi(t,e,i)}static isValidIdentifier(t){return Fb.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hi(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ne(fe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let u=!1;for(;r<t.length;){const h=t[r];if("\\"===h){if(r+1===t.length)throw new Ne(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ne(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===h?(u=!u,r++):"."!==h||u?(i+=h,r++):(s(),r++)}if(s(),u)throw new Ne(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Hi(e)}static emptyPath(){return new Hi([])}}class rg{constructor(t){this.fields=t,t.sort(Hi.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return od(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class ir{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new ir(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new ir(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const mA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ku(n){if(Mt(!!n),"string"==typeof n){let t=0;const e=mA.exec(n);if(Mt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ri(n.seconds),nanos:ri(n.nanos)}}function ri(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xh(n){return"string"==typeof n?ir.fromBase64String(n):ir.fromUint8Array(n)}function Lb(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function Cy(n){const t=n.mapValue.fields.__previous_value__;return Lb(t)?Cy(t):t}function sg(n){const t=Ku(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(t.seconds,t.nanos)}class ra{constructor(t,e,i,r,s,u,h,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Sl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Sl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Sl&&t.projectId===this.projectId&&t.database===this.database}}function ad(n){return null==n}function og(n){return 0===n&&1/n==-1/0}function fI(n){return"number"==typeof n&&Number.isInteger(n)&&!og(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ze{constructor(t){this.path=t}static fromPath(t){return new ze(sn.fromString(t))}static fromName(t){return new ze(sn.fromString(t).popFirst(5))}static empty(){return new ze(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===sn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return sn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ze(new sn(t.slice()))}}const Dl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ag={nullValue:"NULL_VALUE"};function ld(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lb(n)?4:Vb(n)?9007199254740991:10:lt()}function sa(n,t){if(n===t)return!0;const e=ld(n);if(e!==ld(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return sg(n).isEqual(sg(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Ku(i.timestampValue),u=Ku(r.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Xh(n.bytesValue).isEqual(Xh(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return ri(i.geoPointValue.latitude)===ri(r.geoPointValue.latitude)&&ri(i.geoPointValue.longitude)===ri(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return ri(i.integerValue)===ri(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=ri(i.doubleValue),u=ri(r.doubleValue);return s===u?og(s)===og(u):isNaN(s)&&isNaN(u)}return!1}(n,t);case 9:return od(n.arrayValue.values||[],t.arrayValue.values||[],sa);case 10:return function(i,r){const s=i.mapValue.fields||{},u=r.mapValue.fields||{};if(hI(s)!==hI(u))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===u[h]||!sa(s[h],u[h])))return!1;return!0}(n,t);default:return lt()}var r}function lg(n,t){return void 0!==(n.values||[]).find(e=>sa(e,t))}function Zu(n,t){if(n===t)return 0;const e=ld(n),i=ld(t);if(e!==i)return Ut(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,t.booleanValue);case 2:return function(r,s){const u=ri(r.integerValue||r.doubleValue),h=ri(s.integerValue||s.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,t);case 3:return pI(n.timestampValue,t.timestampValue);case 4:return pI(sg(n),sg(t));case 5:return Ut(n.stringValue,t.stringValue);case 6:return function(r,s){const u=Xh(r),h=Xh(s);return u.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const u=r.split("/"),h=s.split("/");for(let p=0;p<u.length&&p<h.length;p++){const y=Ut(u[p],h[p]);if(0!==y)return y}return Ut(u.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const u=Ut(ri(r.latitude),ri(s.latitude));return 0!==u?u:Ut(ri(r.longitude),ri(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const u=r.values||[],h=s.values||[];for(let p=0;p<u.length&&p<h.length;++p){const y=Zu(u[p],h[p]);if(y)return y}return Ut(u.length,h.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Dl.mapValue&&s===Dl.mapValue)return 0;if(r===Dl.mapValue)return 1;if(s===Dl.mapValue)return-1;const u=r.fields||{},h=Object.keys(u),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let E=0;E<h.length&&E<y.length;++E){const I=Ut(h[E],y[E]);if(0!==I)return I;const M=Zu(u[h[E]],p[y[E]]);if(0!==M)return M}return Ut(h.length,y.length)}(n.mapValue,t.mapValue);default:throw lt()}}function pI(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Ut(n,t);const e=Ku(n),i=Ku(t),r=Ut(e.seconds,i.seconds);return 0!==r?r:Ut(e.nanos,i.nanos)}function Yu(n){return xl(n)}function xl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Ku(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xh(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const u of i.values||[])s?s=!1:r+=",",r+=xl(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",u=!0;for(const h of r)u?u=!1:s+=",",s+=`${h}:${xl(i.fields[h])}`;return s+"}"}(n.mapValue):lt();var t}function Qu(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Ey(n){return!!n&&"integerValue"in n}function ug(n){return!!n&&"arrayValue"in n}function _A(n){return!!n&&"nullValue"in n}function gI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ty(n){return!!n&&"mapValue"in n}function cg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return qu(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=cg(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=cg(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Vb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function yA(n){return"nullValue"in n?ag:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Qu(Sl.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function vA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Qu(Sl.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Dl:lt()}function wA(n,t){const e=Zu(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function Iy(n,t){const e=Zu(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class vr{constructor(t){this.value=t}static empty(){return new vr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Ty(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=cg(e)}setAll(t){let e=Hi.emptyPath(),i={},r=[];t.forEach((u,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=h.popLast()}u?i[h.lastSegment()]=cg(u):r.push(h.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());Ty(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return sa(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Ty(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){qu(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new vr(cg(this.value))}}function mI(n){const t=[];return qu(n.fields,(e,i)=>{const r=new Hi([e]);if(Ty(i)){const s=mI(i.mapValue).fields;if(0===s.length)t.push(r);else for(const u of s)t.push(r.child(u))}else t.push(r)}),new rg(t)}class Pn{constructor(t,e,i,r,s,u){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=u}static newInvalidDocument(t){return new Pn(t,0,St.min(),St.min(),vr.empty(),0)}static newFoundDocument(t,e,i){return new Pn(t,1,e,St.min(),i,0)}static newNoDocument(t,e){return new Pn(t,2,e,St.min(),vr.empty(),0)}static newUnknownDocument(t,e){return new Pn(t,3,e,St.min(),vr.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Pn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dg{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function hg(n){return n.fields.find(t=>2===t.kind)}function Al(n){return n.fields.filter(t=>2!==t.kind)}dg.UNKNOWN_ID=-1;class fg{constructor(t,e){this.fieldPath=t,this.kind=e}}class pg{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new pg(0,oa.min())}}function Bb(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=St.fromTimestamp(1e9===i?new Kn(e+1,0):new Kn(e,i));return new oa(r,ze.empty(),t)}function _I(n){return new oa(n.readTime,n.key,-1)}class oa{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new oa(St.min(),ze.empty(),-1)}static max(){return new oa(St.max(),ze.empty(),-1)}}function yI(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=ze.comparator(n.documentKey,t.documentKey),0!==e?e:Ut(n.largestBatchId,t.largestBatchId))}class Ti{constructor(t,e){this.comparator=t,this.root=e||rr.EMPTY}insert(t,e){return new Ti(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(t){return new Ti(this.comparator,this.root.remove(t,this.comparator).copy(null,null,rr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ub(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ub(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ub(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ub(this.root,t,this.comparator,!0)}}class Ub{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class rr{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=null!=i?i:rr.RED,this.left=null!=r?r:rr.EMPTY,this.right=null!=s?s:rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new rr(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return rr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const t=this.left.check();if(t!==this.right.check())throw lt();return t+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1,rr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new rr(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class An{constructor(t){this.comparator=t,this.data=new Ti(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new vI(this.data.getIterator())}getIteratorFrom(t){return new vI(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof An)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new An(this.comparator);return e.data=t,e}}class vI{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ef(n){return n.hasNext()?n.getNext():void 0}class iO{constructor(t,e=null,i=[],r=[],s=null,u=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=u,this.endAt=h,this.P=null}}function bA(n,t=null,e=[],i=[],r=null,s=null,u=null){return new iO(n,t,e,i,r,s,u)}function tf(n){const t=Ze(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Yu(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),ad(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Yu(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Yu(i)).join(",")),t.P=e}return t.P}function Sy(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!sO(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!sa(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Gb(n.startAt,t.startAt)&&Gb(n.endAt,t.endAt)}function Dy(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ud(n,t){return n.filters.filter(e=>e instanceof sr&&e.field.isEqual(t))}function wI(n,t,e){let i=ag,r=!0;for(const s of ud(n,t)){let u=ag,h=!0;switch(s.op){case"<":case"<=":u=yA(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,h=!1;break;case"!=":case"not-in":u=ag}wA({value:i,inclusive:r},{value:u,inclusive:h})<0&&(i=u,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const u=e.position[s];wA({value:i,inclusive:r},{value:u,inclusive:e.inclusive})<0&&(i=u,r=e.inclusive);break}return{value:i,inclusive:r}}function bI(n,t,e){let i=Dl,r=!0;for(const s of ud(n,t)){let u=Dl,h=!0;switch(s.op){case">=":case">":u=vA(s.value),h=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,h=!1;break;case"!=":case"not-in":u=Dl}Iy({value:i,inclusive:r},{value:u,inclusive:h})>0&&(i=u,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const u=e.position[s];Iy({value:i,inclusive:r},{value:u,inclusive:e.inclusive})>0&&(i=u,r=e.inclusive);break}return{value:i,inclusive:r}}class sr extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,i):new cd(t,e,i):"array-contains"===e?new CA(t,i):"in"===e?new jb(t,i):"not-in"===e?new zb(t,i):"array-contains-any"===e?new Ay(t,i):new sr(t,e,i)}static V(t,e,i){return"in"===e?new CI(t,i):new Hb(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Zu(e,this.value)):null!==e&&ld(this.value)===ld(e)&&this.v(Zu(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return lt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class cd extends sr{constructor(t,e,i){super(t,e,i),this.key=ze.fromName(i.referenceValue)}matches(t){const e=ze.comparator(t.key,this.key);return this.v(e)}}class CI extends sr{constructor(t,e){super(t,"in",e),this.keys=xy(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Hb extends sr{constructor(t,e){super(t,"not-in",e),this.keys=xy(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function xy(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>ze.fromName(i.referenceValue))}class CA extends sr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ug(e)&&lg(e.arrayValue,this.value)}}class jb extends sr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&lg(this.value.arrayValue,e)}}class zb extends sr{constructor(t,e){super(t,"not-in",e)}matches(t){if(lg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!lg(this.value.arrayValue,e)}}class Ay extends sr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ug(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>lg(this.value.arrayValue,i))}}class dd{constructor(t,e){this.position=t,this.inclusive=e}}class gg{constructor(t,e="asc"){this.field=t,this.dir=e}}function sO(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function EA(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],u=n.position[r];if(i=s.field.isKeyField()?ze.comparator(ze.fromName(u.referenceValue),e.key):Zu(u,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Gb(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!sa(n.position[e],t.position[e]))return!1;return!0}class Ml{constructor(t,e=null,i=[],r=[],s=null,u="F",h=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function EI(n,t,e,i,r,s,u,h){return new Ml(n,t,e,i,r,s,u,h)}function nf(n){return new Ml(n)}function My(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ky(n){for(const t of n.filters)if(t.S())return t.field;return null}function Ry(n){return null!==n.collectionGroup}function rf(n){const t=Ze(n);if(null===t.D){t.D=[];const e=ky(t),i=My(t);if(null!==e&&null===i)e.isKeyField()||t.D.push(new gg(e)),t.D.push(new gg(Hi.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.D.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new gg(Hi.keyField(),s))}}}return t.D}function bo(n){const t=Ze(n);if(!t.C)if("F"===t.limitType)t.C=bA(t.path,t.collectionGroup,rf(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of rf(t))e.push(new gg(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new dd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new dd(t.startAt.position,t.startAt.inclusive):null;t.C=bA(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.C}function $b(n,t,e){return new Ml(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function hd(n,t){return Sy(bo(n),bo(t))&&n.limitType===t.limitType}function IA(n){return`${tf(bo(n))}|lt:${n.limitType}`}function Oy(n){return`Query(target=${function rO(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${Yu(i.value)}`;var i}).join(", ")}]`),ad(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Yu(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Yu(e)).join(",")),`Target(${t})`}(bo(n))}; limitType=${n.limitType})`}function mg(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):ze.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,u){const h=EA(r,s,u);return r.inclusive?h<=0:h<0}(e.startAt,rf(e),i)||e.endAt&&!function(r,s,u){const h=EA(r,s,u);return r.inclusive?h>=0:h>0}(e.endAt,rf(e),i)));var e,i}function TI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function II(n){return(t,e)=>{let i=!1;for(const r of rf(n)){const s=oO(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function oO(n,t,e){const i=n.field.isKeyField()?ze.comparator(t.key,e.key):function(r,s,u){const h=s.data.field(r),p=u.data.field(r);return null!==h&&null!==p?Zu(h,p):lt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return lt()}}function SA(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:og(t)?"-0":t}}function SI(n){return{integerValue:""+n}}function DI(n,t){return fI(t)?SI(t):SA(n,t)}class Wb{constructor(){this._=void 0}}function aO(n,t,e){return n instanceof _g?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof fd?xA(n,t):n instanceof sf?AA(n,t):function(i,r){const s=DA(i,r),u=a(s)+a(i.k);return Ey(s)&&Ey(i.k)?SI(u):SA(i.M,u)}(n,t)}function lO(n,t,e){return n instanceof fd?xA(n,t):n instanceof sf?AA(n,t):e}function DA(n,t){return n instanceof yg?Ey(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class _g extends Wb{}class fd extends Wb{constructor(t){super(),this.elements=t}}function xA(n,t){const e=l(t);for(const i of n.elements)e.some(r=>sa(r,i))||e.push(i);return{arrayValue:{values:e}}}class sf extends Wb{constructor(t){super(),this.elements=t}}function AA(n,t){let e=l(t);for(const i of n.elements)e=e.filter(r=>!sa(r,i));return{arrayValue:{values:e}}}class yg extends Wb{constructor(t,e){super(),this.M=t,this.k=e}}function a(n){return ri(n.integerValue||n.doubleValue)}function l(n){return ug(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class c{constructor(t,e){this.field=t,this.transform=e}}class f{constructor(t,e){this.version=t,this.transformResults=e}}class m{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new m}static exists(t){return new m(void 0,t)}static updateTime(t){return new m(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function w(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class C{}function T(n,t,e){n instanceof X?function(i,r,s){const u=i.value.clone(),h=Ge(i.fieldTransforms,r,s.transformResults);u.setAll(h),r.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,t,e):n instanceof ye?function(i,r,s){if(!w(i.precondition,r))return void r.convertToUnknownDocument(s.version);const u=Ge(i.fieldTransforms,r,s.transformResults),h=r.data;h.setAll(Be(i)),h.setAll(u),r.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function A(n,t,e){var r;n instanceof X?function(i,r,s){if(!w(i.precondition,r))return;const u=i.value.clone(),h=st(i.fieldTransforms,s,r);u.setAll(h),r.convertToFoundDocument(j(r),u).setHasLocalMutations()}(n,t,e):n instanceof ye?function(i,r,s){if(!w(i.precondition,r))return;const u=st(i.fieldTransforms,s,r),h=r.data;h.setAll(Be(i)),h.setAll(u),r.convertToFoundDocument(j(r),h).setHasLocalMutations()}(n,t,e):w(n.precondition,r=t)&&r.convertToNoDocument(St.min())}function k(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=DA(i.transform,r||null);null!=s&&(null==e&&(e=vr.empty()),e.set(i.field,s))}return e||null}function V(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&od(e,i,(r,s)=>function d(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof fd&&i instanceof fd||e instanceof sf&&i instanceof sf?od(e.elements,i.elements,sa):e instanceof yg&&i instanceof yg?sa(e.k,i.k):e instanceof _g&&i instanceof _g);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}function j(n){return n.isFoundDocument()?n.version:St.min()}class X extends C{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}}class ye extends C{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function Be(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Ge(n,t,e){const i=new Map;Mt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],u=s.transform,h=t.data.field(s.field);i.set(s.field,lO(u,h,e[r]))}return i}function st(n,t,e){const i=new Map;for(const r of n){const s=r.transform,u=e.data.field(r.field);i.set(r.field,aO(s,u,t))}return i}class Ae extends C{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class _t extends C{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class Yt{constructor(t){this.count=t}}var At,Ot;function Ju(n){switch(n){default:return lt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function Py(n){if(void 0===n)return ci("GRPC error has no .code"),fe.UNKNOWN;switch(n){case At.OK:return fe.OK;case At.CANCELLED:return fe.CANCELLED;case At.UNKNOWN:return fe.UNKNOWN;case At.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case At.INTERNAL:return fe.INTERNAL;case At.UNAVAILABLE:return fe.UNAVAILABLE;case At.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case At.NOT_FOUND:return fe.NOT_FOUND;case At.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case At.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case At.ABORTED:return fe.ABORTED;case At.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case At.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case At.DATA_LOSS:return fe.DATA_LOSS;default:return lt()}}(Ot=At||(At={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";class za{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){qu(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return gA(this.inner)}size(){return this.innerSize}}const qb=new Ti(ze.comparator);function Cs(){return qb}const Kb=new Ti(ze.comparator);function vg(...n){let t=Kb;for(const e of n)t=t.insert(e.key,e);return t}function pd(){return new za(n=>n.toString(),(n,t)=>n.isEqual(t))}const Zb=new Ti(ze.comparator),Yb=new An(ze.comparator);function En(...n){let t=Yb;for(const e of n)t=t.add(e);return t}const YV=new An(Ut);function xI(){return YV}class Qb{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,Jb.createSynthesizedTargetChangeForCurrentChange(t,e)),new Qb(St.min(),i,xI(),Cs(),En())}}class Jb{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Jb(ir.EMPTY_BYTE_STRING,e,En(),En(),En())}}class AI{constructor(t,e,i,r){this.O=t,this.removedTargetIds=e,this.key=i,this.F=r}}class uO{constructor(t,e){this.targetId=t,this.$=e}}class cO{constructor(t,e,i=ir.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class dO{constructor(){this.B=0,this.L=fO(),this.U=ir.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=En(),e=En(),i=En();return this.L.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:lt()}}),new Jb(this.U,this.q,t,e,i)}J(){this.K=!1,this.L=fO()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class QV{constructor(t){this.nt=t,this.st=new Map,this.it=Cs(),this.rt=hO(),this.ot=new An(Ut)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const i=this.lt(e);switch(t.state){case 0:this.ft(e)&&i.W(t.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(t.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(e);break;case 3:this.ft(e)&&(i.et(),i.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),i.W(t.resumeToken));break;default:lt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((i,r)=>{this.ft(r)&&e(r)})}_t(t){const e=t.targetId,i=t.$.count,r=this.wt(e);if(r){const s=r.target;if(Dy(s))if(0===i){const u=new ze(s.path);this.ct(e,u,Pn.newNoDocument(u,St.min()))}else Mt(1===i);else this.gt(e)!==i&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((s,u)=>{const h=this.wt(u);if(h){if(s.current&&Dy(h.target)){const p=new ze(h.target.path);null!==this.it.get(p)||this.It(u,p)||this.ct(u,p,Pn.newNoDocument(p,t))}s.j&&(e.set(u,s.H()),s.J())}});let i=En();this.rt.forEach((s,u)=>{let h=!0;u.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(s))}),this.it.forEach((s,u)=>u.setReadTime(t));const r=new Qb(t,e,this.ot,this.it,i);return this.it=Cs(),this.rt=hO(),this.ot=new An(Ut),r}at(t,e){if(!this.ft(t))return;const i=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,i),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,i){if(!this.ft(t))return;const r=this.lt(t);this.It(t,e)?r.Y(e,1):r.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),i&&(this.it=this.it.insert(e,i))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new dO,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new An(Ut),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||Ve("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new dO),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function hO(){return new Ti(ze.comparator)}function fO(){return new Ti(ze.comparator)}const JV={asc:"ASCENDING",desc:"DESCENDING"},XV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class eB{constructor(t,e){this.databaseId=t,this.N=e}}function Xb(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function pO(n,t){return n.N?t.toBase64():t.toUint8Array()}function tB(n,t){return Xb(n,t.toTimestamp())}function Nr(n){return Mt(!!n),St.fromTimestamp(function(t){const e=Ku(t);return new Kn(e.seconds,e.nanos)}(n))}function MA(n,t){return(e=n,new sn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function gO(n){const t=sn.fromString(n);return Mt(TO(t)),t}function e0(n,t){return MA(n.databaseId,t.path)}function Xu(n,t){const e=gO(t);if(e.get(1)!==n.databaseId.projectId)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ze(_O(e))}function kA(n,t){return MA(n.databaseId,t)}function mO(n){const t=gO(n);return 4===t.length?sn.emptyPath():_O(t)}function t0(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _O(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yO(n,t,e){return{name:e0(n,t),fields:e.value.mapValue.fields}}function vO(n,t,e){const i=Xu(n,t.name),r=Nr(t.updateTime),s=new vr({mapValue:{fields:t.fields}}),u=Pn.newFoundDocument(i,r,s);return e&&u.setHasCommittedMutations(),e?u.setHasCommittedMutations():u}function n0(n,t){let e;if(t instanceof X)e={update:yO(n,t.key,t.value)};else if(t instanceof Ae)e={delete:e0(n,t.key)};else if(t instanceof ye)e={update:yO(n,t.key,t.data),updateMask:cB(t.fieldMask)};else{if(!(t instanceof _t))return lt();e={verify:e0(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const u=s.transform;if(u instanceof _g)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof fd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof sf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof yg)return{fieldPath:s.field.canonicalString(),increment:u.k};throw lt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:tB(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:lt()),e;var r}function RA(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?m.updateTime(Nr(r.updateTime)):void 0!==r.exists?m.exists(r.exists):m.none():m.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,u){let h=null;"setToServerValue"in u?(Mt("REQUEST_TIME"===u.setToServerValue),h=new _g):"appendMissingElements"in u?h=new fd(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new sf(u.removeAllFromArray.values||[]):"increment"in u?h=new yg(s,u.increment):lt();const p=Hi.fromServerFormat(u.fieldPath);return new c(p,h)}(n,r)):[];var r;if(t.update){const r=Xu(n,t.update.name),s=new vr({mapValue:{fields:t.update.fields}});if(t.updateMask){const u=new rg((t.updateMask.fieldPaths||[]).map(y=>Hi.fromServerFormat(y)));return new ye(r,s,u,e,i)}return new X(r,s,e,i)}if(t.delete){const r=Xu(n,t.delete);return new Ae(r,e)}if(t.verify){const r=Xu(n,t.verify);return new _t(r,e)}return lt()}function wO(n,t){return{documents:[kA(n,t.path)]}}function bO(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=kA(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=kA(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const y=p.map(E=>function(I){if("=="===I.op){if(gI(I.value))return{unaryFilter:{field:Ny(I.field),op:"IS_NAN"}};if(_A(I.value))return{unaryFilter:{field:Ny(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(gI(I.value))return{unaryFilter:{field:Ny(I.field),op:"IS_NOT_NAN"}};if(_A(I.value))return{unaryFilter:{field:Ny(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ny(I.field),op:aB(I.op),value:I.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:Ny((E=y).field),direction:oB(E.dir)};var E})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const u=(y=t.limit,n.N||ad(y)?y:{value:y});var y,h,p;return null!==u&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt={before:(h=t.startAt).inclusive,values:h.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function CO(n){let t=mO(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Mt(1===i);const E=e.from[0];E.allDescendants?r=E.collectionId:t=t.child(E.collectionId)}let s=[];e.where&&(s=EO(e.where));let u=[];e.orderBy&&(u=e.orderBy.map(E=>{return new gg(Fy((I=E).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let h=null;e.limit&&(h=function(E){let I;return I="object"==typeof E?E.value:E,ad(I)?null:I}(e.limit));let p=null;var E;e.startAt&&(p=new dd((E=e.startAt).values||[],!!E.before));let y=null;return e.endAt&&(y=function(E){return new dd(E.values||[],!E.before)}(e.endAt)),EI(t,r,u,s,h,"F",p,y)}function EO(n){return n?void 0!==n.unaryFilter?[uB(n)]:void 0!==n.fieldFilter?[lB(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>EO(t)).reduce((t,e)=>t.concat(e)):lt():[]}function oB(n){return JV[n]}function aB(n){return XV[n]}function Ny(n){return{fieldPath:n.canonicalString()}}function Fy(n){return Hi.fromServerFormat(n.fieldPath)}function lB(n){return sr.create(Fy(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function uB(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Fy(n.unaryFilter.field);return sr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Fy(n.unaryFilter.field);return sr.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Fy(n.unaryFilter.field);return sr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Fy(n.unaryFilter.field);return sr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function cB(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function TO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function zs(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=IO(t)),t=dB(n.get(e),t);return IO(t)}function dB(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function IO(n){return n+"\x01\x01"}function ec(n){const t=n.length;if(Mt(t>=2),2===t)return Mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const u=n.indexOf("\x01",s);switch((u<0||u>e)&&lt(),n.charAt(u+1)){case"\x01":const h=n.substring(s,u);let p;0===r.length?p=h:(r+=h,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,u),r+="\0";break;case"\x11":r+=n.substring(s,u+1);break;default:lt()}s=u+2}return new sn(i)}const SO=["userId","batchId"];function MI(n,t){return[n,zs(t)]}function DO(n,t,e){return[n,zs(t),e]}const hB={},fB=["prefixPath","collectionGroup","readTime","documentId"],pB=["prefixPath","collectionGroup","documentId"],gB=["collectionGroup","readTime","prefixPath","documentId"],mB=["canonicalId","targetId"],_B=["targetId","path"],yB=["path","targetId"],vB=["collectionId","parent"],wB=["indexId","uid"],bB=["uid","sequenceNumber"],CB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EB=["indexId","uid","orderedDocumentKey"],TB=["userId","collectionPath","documentId"],IB=["userId","collectionPath","largestBatchId"],SB=["userId","collectionGroup","largestBatchId"],xO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DB=[...xO,"documentOverlays"],AO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xB=[...AO,"indexConfiguration","indexState","indexEntries"],MO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new me((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof me?e:me.resolve(e)}catch(e){return me.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):me.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):me.reject(e)}static resolve(t){return new me((e,i)=>{e(t)})}static reject(t){return new me((e,i)=>{i(t)})}static waitFor(t){return new me((e,i)=>{let r=0,s=0,u=!1;t.forEach(h=>{++r,h.next(()=>{++s,u&&s===r&&e()},p=>i(p))}),u=!0,s===r&&e()})}static or(t){let e=me.resolve(!1);for(const i of t)e=e.next(r=>r?me.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}}class kI{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Ui,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new r0(t,e.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=OA(i.target.error);this.At.reject(new r0(t,r))}}static open(t,e,i,r){try{return new kI(e,t.transaction(r,i))}catch(s){throw new r0(e,s)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(Ve("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new MB(e)}}class kl{constructor(t,e,i){this.name=t,this.version=e,this.Pt=i,12.2===kl.Vt((0,F.z$)())&&ci("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ve("SimpleDb","Removing database:",t),bg(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(kl.St())return!0;const t=(0,F.z$)(),e=kl.Vt(t),i=0<e&&e<10,r=kl.Dt(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(t){var e=this;return(0,Ie.Z)(function*(){return e.db||(Ve("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=u=>{i(u.target.result)},s.onblocked=()=>{r(new r0(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const h=u.target.error;r("VersionError"===h.name?new Ne(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new r0(t,h))},s.onupgradeneeded=u=>{Ve("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',u.oldVersion),e.Pt.kt(u.target.result,s.transaction,u.oldVersion,e.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=i=>e.Mt(i)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Ie.Z)(function*(){const u="readonly"===e;let h=0;for(;;){++h;try{s.db=yield s.Nt(t);const p=kI.open(s.db,t,u?"readonly":"readwrite",i),y=r(p).next(E=>(p.bt(),E)).catch(E=>(p.abort(E),me.reject(E))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class AB{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return bg(this.Ft.delete())}}class r0 extends Ne{constructor(t,e){super(fe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function wg(n){return"IndexedDbTransactionError"===n.name}class MB{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Ve("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),bg(i)}add(t){return Ve("SimpleDb","ADD",this.store.name,t,t),bg(this.store.add(t))}get(t){return bg(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ve("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ve("SimpleDb","DELETE",this.store.name,t),bg(this.store.delete(t))}count(){return Ve("SimpleDb","COUNT",this.store.name),bg(this.store.count())}qt(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.Kt(r,(u,h)=>{s.push(h)}).next(()=>s)}{const r=this.store.getAll(i.range);return new me((s,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}}Gt(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new me((r,s)=>{i.onerror=u=>{s(u.target.error)},i.onsuccess=u=>{r(u.target.result)}})}Qt(t,e){Ve("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(s,u,h)=>h.delete())}Wt(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.Kt(r,e)}zt(t){const e=this.cursor({});return new me((i,r)=>{e.onerror=s=>{const u=OA(s.target.error);r(u)},e.onsuccess=s=>{const u=s.target.result;u?t(u.primaryKey,u.value).next(h=>{h?u.continue():i()}):i()}})}Kt(t,e){const i=[];return new me((r,s)=>{t.onerror=u=>{s(u.target.error)},t.onsuccess=u=>{const h=u.target.result;if(!h)return void r();const p=new AB(h),y=e(h.primaryKey,h.value,p);if(y instanceof me){const E=y.catch(I=>(p.done(),me.reject(I)));i.push(E)}p.isDone?r():null===p.Lt?h.continue():h.continue(p.Lt)}}).next(()=>me.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.jt?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function bg(n){return new me((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=OA(i.target.error);e(r)}})}let RO=!1;function OA(n){const t=kl.Vt((0,F.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RO||(RO=!0,setTimeout(()=>{throw i},0)),i}}return n}class OO extends kO{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function Fr(n,t){const e=Ze(n);return kl.xt(e.Ht,t)}class PA{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&T(s,t,i[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&A(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&A(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const i=t.get(e.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(St.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),En())}isEqual(t){return this.batchId===t.batchId&&od(this.mutations,t.mutations,(e,i)=>V(e,i))&&od(this.baseMutations,t.baseMutations,(e,i)=>V(e,i))}}class NA{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Mt(t.mutations.length===i.length);let r=Zb;const s=t.mutations;for(let u=0;u<s.length;u++)r=r.insert(s[u].key,i[u].version);return new NA(t,e,i,r)}}class FA{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class of{constructor(t,e,i,r,s=St.min(),u=St.min(),h=ir.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(t){return new of(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new of(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new of(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class PO{constructor(t){this.Jt=t}}function NO(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:RI(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:e0(r=n.Jt,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:Xb(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Cg(t.version)};else{if(!t.isUnknownDocument())return lt();i.unknownDocument={path:e.path.toArray(),version:Cg(t.version)}}var r,s;return i}function RI(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Cg(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Eg(n){const t=new Kn(n.seconds,n.nanoseconds);return St.fromTimestamp(t)}function Ly(n,t){const e=(t.baseMutations||[]).map(s=>RA(n.Jt,s));for(let s=0;s<t.mutations.length-1;++s){const u=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(u.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>RA(n.Jt,s)),r=Kn.fromMillis(t.localWriteTimeMs);return new PA(t.batchId,r,e,i)}function s0(n){const t=Eg(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Eg(n.lastLimboFreeSnapshotVersion):St.min();let i;var r;return void 0!==n.query.documents?(Mt(1===(r=n.query).documents.length),i=bo(nf(mO(r.documents[0])))):i=bo(CO(n.query)),new of(i,n.targetId,0,n.lastListenSequenceNumber,t,e,ir.fromBase64String(n.resumeToken))}function FO(n,t){const e=Cg(t.snapshotVersion),i=Cg(t.lastLimboFreeSnapshotVersion);let r;r=Dy(t.target)?wO(n.Jt,t.target):bO(n.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:tf(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function LA(n){const t=CO({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?$b(t,t.limit,"L"):t}function VA(n,t){return new FA(t.largestBatchId,RA(n.Jt,t.overlayMutation))}function LO(n,t){const e=t.path.lastSegment();return[n,zs(t.path.popLast()),e]}class RB{getBundleMetadata(t,e){return VO(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Eg(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return VO(t).put({bundleId:(i=e).id,createTime:Cg(Nr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return BO(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:LA(r.bundledQuery),readTime:Eg(r.readTime)};var r})}saveNamedQuery(t,e){return BO(t).put({name:(i=e).name,readTime:Cg(Nr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function VO(n){return Fr(n,"bundles")}function BO(n){return Fr(n,"namedQueries")}class BA{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new BA(t,e.uid||"")}getOverlay(t,e){return o0(t).get(LO(this.userId,e)).next(i=>i?VA(this.M,i):null)}saveOverlays(t,e,i){const r=[];return i.forEach((s,u)=>{const h=new FA(e,u);r.push(this.Xt(t,h))}),me.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(u=>r.add(zs(u.getCollectionPath())));const s=[];return r.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);s.push(o0(t).Qt("collectionPathOverlayIndex",h))}),me.waitFor(s)}getOverlaysForCollection(t,e,i){const r=pd(),s=zs(e),u=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return o0(t).qt("collectionPathOverlayIndex",u).next(h=>{for(const p of h){const y=VA(this.M,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=pd();let u;const h=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return o0(t).Wt({index:"collectionGroupOverlayIndex",range:h},(p,y,E)=>{const I=VA(this.M,y);s.size()<r||I.largestBatchId===u?(s.set(I.getKey(),I),u=I.largestBatchId):E.done()}).next(()=>s)}Xt(t,e){return o0(t).put(function(i,r,s){const[u,h,p]=LO(r,s.mutation.key);return{userId:r,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:n0(i.Jt,s.mutation)}}(this.M,this.userId,e))}}function o0(n){return Fr(n,"documentOverlays")}class Tg{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(ri(t.integerValue));else if("doubleValue"in t){const i=ri(t.doubleValue);isNaN(i)?this.ne(e,13):(this.ne(e,15),og(i)?e.se(0):e.se(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ne(e,20),"string"==typeof i?e.ie(i):(e.ie(`${i.seconds||""}`),e.se(i.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(Xh(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ne(e,45),e.se(i.latitude||0),e.se(i.longitude||0)}else"mapValue"in t?Vb(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):lt()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const i=t.fields||{};this.ne(e,55);for(const r of Object.keys(i))this.re(r,e),this.te(i[r],e)}he(t,e){const i=t.values||[];this.ne(e,50);for(const r of i)this.te(r,e)}ae(t,e){this.ne(e,37),ze.fromName(t).path.forEach(i=>{this.ne(e,60),this.le(i,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function OB(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function UO(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=OB(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Tg.fe=new Tg;class PB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this._e(i.value),i=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.ge(i.value),i=e.next();this.ye()}pe(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(e<"\ud800"||"\udbff"<e)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const r=e.codePointAt(0);this._e(240|r>>>18),this._e(128|63&r>>>12),this._e(128|63&r>>>6),this._e(128|63&r)}}this.we()}Ie(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const r=e.codePointAt(0);this.ge(240|r>>>18),this.ge(128|63&r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r)}}this.ye()}Te(t){const e=this.Ee(t),i=UO(e);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Re(t){const e=this.Ee(t),i=UO(e);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}_e(t){const e=255&t;0===e?(this.Pe(0),this.Pe(255)):255===e?(this.Pe(255),this.Pe(0)):this.Pe(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class NB{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.be()}}class FB{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class a0{constructor(){this.De=new PB,this.Ce=new NB(this.De),this.xe=new FB(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ig{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Ig(this.indexId,this.documentKey,this.arrayValue,i)}}function Sg(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=HO(n.arrayValue,t.arrayValue),0!==e?e:(e=HO(n.directionalValue,t.directionalValue),0!==e?e:ze.comparator(n.documentKey,t.documentKey)))}function HO(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class LB{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const i=e;i.S()?this.Fe=i:this.Oe.push(i)}}$e(t){const e=hg(t);if(void 0!==e&&!this.Be(e))return!1;const i=Al(t);let r=0,s=0;for(;r<i.length&&this.Be(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Fe){const u=i[r];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[s++],u))return!1;++r}for(;r<i.length;++r){const u=i[r];if(s>=this.Me.length||!this.Ue(this.Me[s++],u))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class VB{constructor(){this.qe=new UA}addToCollectionParentIndex(t,e){return this.qe.add(e),me.resolve()}getCollectionParents(t,e){return me.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return me.resolve()}deleteFieldIndex(t,e){return me.resolve()}getDocumentsMatchingTarget(t,e){return me.resolve(null)}getIndexType(t,e){return me.resolve(0)}getFieldIndexes(t,e){return me.resolve([])}getNextCollectionGroupToUpdate(t){return me.resolve(null)}getMinOffset(t,e){return me.resolve(oa.min())}updateCollectionGroup(t,e,i){return me.resolve()}updateIndexEntries(t,e){return me.resolve()}}class UA{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new An(sn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new An(sn.comparator)).toArray()}}const OI=new Uint8Array(0);class BB{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new UA,this.Ge=new za(i=>tf(i),(i,r)=>Sy(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const s={collectionId:i,parent:zs(r)};return jO(t).put(s)}return me.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[pA(e),""],!1,!0);return jO(t).qt(r).next(s=>{for(const u of s){if(u.collectionId!==e)break;i.push(ec(u.parent))}return i})}addFieldIndex(t,e){const i=PI(t),r={indexId:(s=e).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var s;return delete r.indexId,i.add(r).next()}deleteFieldIndex(t,e){const i=PI(t),r=NI(t),s=l0(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=l0(t);let r=!0;const s=new Map;return me.forEach(this.Qe(e),u=>this.je(t,u).next(h=>{r&&(r=!!h),s.set(u,h)})).next(()=>{if(r){let u=En();const h=[];return me.forEach(s,(p,y)=>{var E;Ve("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${tf(e)}`);const I=function(it,rt){const kt=hg(rt);if(void 0===kt)return null;for(const Pt of ud(it,kt.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(y,p),M=function(it,rt){const kt=new Map;for(const Pt of Al(rt))for(const tn of ud(it,Pt.fieldPath))switch(tn.op){case"==":case"in":kt.set(Pt.fieldPath.canonicalString(),tn.value);break;case"not-in":case"!=":return kt.set(Pt.fieldPath.canonicalString(),tn.value),Array.from(kt.values())}return null}(y,p),P=function(it,rt){const kt=[];let Pt=!0;for(const tn of Al(rt)){const Yn=0===tn.kind?wI(it,tn.fieldPath,it.startAt):bI(it,tn.fieldPath,it.startAt);kt.push(Yn.value),Pt&&(Pt=Yn.inclusive)}return new dd(kt,Pt)}(y,p),B=function(it,rt){const kt=[];let Pt=!0;for(const tn of Al(rt)){const Yn=0===tn.kind?bI(it,tn.fieldPath,it.endAt):wI(it,tn.fieldPath,it.endAt);kt.push(Yn.value),Pt&&(Pt=Yn.inclusive)}return new dd(kt,Pt)}(y,p),Q=this.We(p,y,P),be=this.We(p,y,B),et=this.ze(p,y,M),nt=this.He(p.indexId,I,Q,P.inclusive,be,B.inclusive,et);return me.forEach(nt,it=>i.Gt(it,e.limit).next(rt=>{rt.forEach(kt=>{const Pt=ze.fromSegments(kt.documentKey);u.has(Pt)||(u=u.add(Pt),h.push(Pt))})}))}).next(()=>h)}return me.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}He(t,e,i,r,s,u,h){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),y=p/(null!=e?e.length:1),E=[];for(let I=0;I<p;++I){const M=e?this.Je(e[I/y]):OI,P=this.Ye(t,M,i[I%y],r),B=this.Xe(t,M,s[I%y],u),Q=h.map(be=>this.Ye(t,M,be,!0));E.push(...this.createRange(P,B,Q))}return E}Ye(t,e,i,r){const s=new Ig(t,ze.empty(),e,i);return r?s:s.ke()}Xe(t,e,i,r){const s=new Ig(t,ze.empty(),e,i);return r?s.ke():s}je(t,e){const i=new LB(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let u=null;for(const h of s)i.$e(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(t,e){let i=2;return me.forEach(this.Qe(e),r=>this.je(t,r).next(s=>{s?0!==i&&s.fields.length<function(u){let h=new An(Hi.comparator),p=!1;for(const y of u.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:h=h.add(E.field))}for(const y of u.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}Ze(t,e){const i=new a0;for(const r of Al(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const u=i.Ne(r.kind);Tg.fe.Zt(s,u)}return i.Se()}Je(t){const e=new a0;return Tg.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const i=new a0;return Tg.fe.Zt(Qu(this.databaseId,e),i.Ne(function(r){const s=Al(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Se()}ze(t,e,i){if(null===i)return[];let r=[];r.push(new a0);let s=0;for(const u of Al(t)){const h=i[s++];for(const p of r)if(this.en(e,u.fieldPath)&&ug(h))r=this.nn(r,u,h);else{const y=p.Ne(u.kind);Tg.fe.Zt(h,y)}}return this.sn(r)}We(t,e,i){return this.ze(t,e,i.position)}sn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Se();return e}nn(t,e,i){const r=[...t],s=[];for(const u of i.arrayValue.values||[])for(const h of r){const p=new a0;p.seed(h.Se()),Tg.fe.Zt(u,p.Ne(e.kind)),s.push(p)}return s}en(t,e){return!!t.filters.find(i=>i instanceof sr&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=PI(t),r=NI(t);return(e?i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.qt()).next(s=>{const u=[];return me.forEach(s,h=>r.get([h.indexId,this.uid]).next(p=>{u.push(function(y,E){const I=E?new pg(E.sequenceNumber,new oa(Eg(E.readTime),new ze(ec(E.documentKey)),E.largestBatchId)):pg.empty(),M=y.fields.map(([P,B])=>new fg(Hi.fromServerFormat(P),B));return new dg(y.indexId,y.collectionGroup,M,I)}(h,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Ut(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=PI(t),s=NI(t);return this.rn(t).next(u=>r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>me.forEach(h,p=>{return s.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:Cg((M=i).readTime),documentKey:zs(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(t,e){const i=new Map;return me.forEach(e,(r,s)=>{const u=i.get(r.collectionGroup);return(u?me.resolve(u):this.getFieldIndexes(t,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),me.forEach(h,p=>this.on(t,r,p).next(y=>{const E=this.un(s,p);return y.isEqual(E)?me.resolve():this.an(t,s,p,y,E)}))))})}cn(t,e,i,r){return l0(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(i,e.key),documentKey:e.key.path.toArray()})}hn(t,e,i,r){return l0(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(i,e.key),e.key.path.toArray()])}on(t,e,i){const r=l0(t);let s=new An(Sg);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,e)])},(u,h)=>{s=s.add(new Ig(i.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>s)}un(t,e){let i=new An(Sg);const r=this.Ze(e,t);if(null==r)return i;const s=hg(e);if(null!=s){const u=t.data.field(s.fieldPath);if(ug(u))for(const h of u.arrayValue.values||[])i=i.add(new Ig(e.indexId,t.key,this.Je(h),r))}else i=i.add(new Ig(e.indexId,t.key,OI,r));return i}an(t,e,i,r,s){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const u=[];return function(h,p,y,E,I){const M=h.getIterator(),P=p.getIterator();let B=ef(M),Q=ef(P);for(;B||Q;){let be=!1,et=!1;if(B&&Q){const nt=y(B,Q);nt<0?et=!0:nt>0&&(be=!0)}else null!=B?et=!0:be=!0;be?(E(Q),Q=ef(P)):et?(I(B),B=ef(M)):(B=ef(M),Q=ef(P))}}(r,s,Sg,h=>{u.push(this.cn(t,e,i,h))},h=>{u.push(this.hn(t,e,i,h))}),me.waitFor(u)}rn(t){let e=1;return NI(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((u,h)=>Sg(u,h)).filter((u,h,p)=>!h||0!==Sg(u,p[h-1]));const r=[];r.push(t);for(const u of i){const h=Sg(u,t),p=Sg(u,e);if(0===h)r[0]=t.ke();else if(h>0&&p<0)r.push(u),r.push(u.ke());else if(p>0)break}r.push(e);const s=[];for(let u=0;u<r.length;u+=2)s.push(IDBKeyRange.bound([r[u].indexId,this.uid,r[u].arrayValue,r[u].directionalValue,OI,[]],[r[u+1].indexId,this.uid,r[u+1].arrayValue,r[u+1].directionalValue,OI,[]]));return s}getMinOffset(t,e){let i;return me.forEach(this.Qe(e),r=>this.je(t,r).next(s=>{s?(!i||yI(s.indexState.offset,i)<0)&&(i=s.indexState.offset):i=oa.min()})).next(()=>i)}}function jO(n){return Fr(n,"collectionParents")}function l0(n){return Fr(n,"indexEntries")}function PI(n){return Fr(n,"indexConfiguration")}function NI(n){return Fr(n,"indexState")}const zO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Co{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Co(t,Co.DEFAULT_COLLECTION_PERCENTILE,Co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function GO(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],u=IDBKeyRange.only(e.batchId);let h=0;const p=i.Wt({range:u},(E,I,M)=>(h++,M.delete()));s.push(p.next(()=>{Mt(1===h)}));const y=[];for(const E of e.mutations){const I=DO(t,E.key.path,e.batchId);s.push(r.delete(I)),y.push(E.key)}return me.waitFor(s).next(()=>y)}function FI(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw lt();t=n.noDocument}return JSON.stringify(t).length}Co.DEFAULT_COLLECTION_PERCENTILE=10,Co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Co.DEFAULT=new Co(41943040,Co.DEFAULT_COLLECTION_PERCENTILE,Co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Co.DISABLED=new Co(-1,0,0);class HA{constructor(t,e,i,r){this.userId=t,this.M=e,this.indexManager=i,this.referenceDelegate=r,this.ln={}}static Yt(t,e,i,r){Mt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new HA(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return af(t).Wt({index:"userMutationsIndex",range:i},(r,s,u)=>{e=!1,u.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Vy(t),u=af(t);return u.add({}).next(h=>{Mt("number"==typeof h);const p=new PA(h,e,i,r),y=function(M,P,B){const Q=B.baseMutations.map(et=>n0(M.Jt,et)),be=B.mutations.map(et=>n0(M.Jt,et));return{userId:P,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:Q,mutations:be}}(this.M,this.userId,p),E=[];let I=new An((M,P)=>Ut(M.canonicalString(),P.canonicalString()));for(const M of r){const P=DO(this.userId,M.key.path,h);I=I.add(M.key.path.popLast()),E.push(u.put(y)),E.push(s.put(P,hB))}return I.forEach(M=>{E.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.ln[h]=p.keys()}),me.waitFor(E).next(()=>p)})}lookupMutationBatch(t,e){return af(t).get(e).next(i=>i?(Mt(i.userId===this.userId),Ly(this.M,i)):null)}fn(t,e){return this.ln[e]?me.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.ln[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return af(t).Wt({index:"userMutationsIndex",range:r},(u,h,p)=>{h.userId===this.userId&&(Mt(h.batchId>=i),s=Ly(this.M,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return af(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(r,s,u)=>{i=s.batchId,u.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return af(t).qt("userMutationsIndex",e).next(i=>i.map(r=>Ly(this.M,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=MI(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Vy(t).Wt({range:r},(u,h,p)=>{const[y,E,I]=u,M=ec(E);if(y===this.userId&&e.path.isEqual(M))return af(t).get(I).next(P=>{if(!P)throw lt();Mt(P.userId===this.userId),s.push(Ly(this.M,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new An(Ut);const r=[];return e.forEach(s=>{const u=MI(this.userId,s.path),h=IDBKeyRange.lowerBound(u),p=Vy(t).Wt({range:h},(y,E,I)=>{const[M,P,B]=y,Q=ec(P);M===this.userId&&s.path.isEqual(Q)?i=i.add(B):I.done()});r.push(p)}),me.waitFor(r).next(()=>this.dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=MI(this.userId,i),u=IDBKeyRange.lowerBound(s);let h=new An(Ut);return Vy(t).Wt({range:u},(p,y,E)=>{const[I,M,P]=p,B=ec(M);I===this.userId&&i.isPrefixOf(B)?B.length===r&&(h=h.add(P)):E.done()}).next(()=>this.dn(t,h))}dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(af(t).get(s).next(u=>{if(null===u)throw lt();Mt(u.userId===this.userId),i.push(Ly(this.M,u))}))}),me.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return GO(t.Ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),me.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return me.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Vy(t).Wt({range:i},(s,u,h)=>{if(s[0]===this.userId){const p=ec(s[1]);r.push(p)}else h.done()}).next(()=>{Mt(0===r.length)})})}containsKey(t,e){return $O(t,this.userId,e)}wn(t){return WO(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $O(n,t,e){const i=MI(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let u=!1;return Vy(n).Wt({range:s,jt:!0},(h,p,y)=>{const[E,I,M]=h;E===t&&I===r&&(u=!0),y.done()}).next(()=>u)}function af(n){return Fr(n,"mutations")}function Vy(n){return Fr(n,"documentMutations")}function WO(n){return Fr(n,"mutationQueues")}class Dg{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new Dg(0)}static yn(){return new Dg(-1)}}class UB{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const i=new Dg(e.highestTargetId);return e.highestTargetId=i.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>St.fromTimestamp(new Kn(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.pn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.In(t,r)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(i=>(i.targetCount+=1,this.En(e,i),this.In(t,i))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>By(t).delete(e.targetId)).next(()=>this.pn(t)).next(i=>(Mt(i.targetCount>0),i.targetCount-=1,this.In(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return By(t).Wt((u,h)=>{const p=s0(h);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>me.waitFor(s)).next(()=>r)}forEachTarget(t,e){return By(t).Wt((i,r)=>{const s=s0(r);e(s)})}pn(t){return qO(t).get("targetGlobalKey").next(e=>(Mt(null!==e),e))}In(t,e){return qO(t).put("targetGlobalKey",e)}Tn(t,e){return By(t).put(FO(this.M,e))}En(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=tf(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return By(t).Wt({range:r,index:"queryTargetsIndex"},(u,h,p)=>{const y=s0(h);Sy(e,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=lf(t);return e.forEach(u=>{const h=zs(u.path);r.push(s.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(t,i,u))}),me.waitFor(r)}removeMatchingKeys(t,e,i){const r=lf(t);return me.forEach(e,s=>{const u=zs(s.path);return me.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=lf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=lf(t);let s=En();return r.Wt({range:i,jt:!0},(u,h,p)=>{const y=ec(u[1]),E=new ze(y);s=s.add(E)}).next(()=>s)}containsKey(t,e){const i=zs(e.path),r=IDBKeyRange.bound([i],[pA(i)],!1,!0);let s=0;return lf(t).Wt({index:"documentTargetsIndex",jt:!0,range:r},([u,h],p,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}Et(t,e){return By(t).get(e).next(i=>i?s0(i):null)}}function By(n){return Fr(n,"targets")}function qO(n){return Fr(n,"targetGlobal")}function lf(n){return Fr(n,"targetDocuments")}function xg(n){return jA.apply(this,arguments)}function jA(){return jA=(0,Ie.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==MO)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),jA.apply(this,arguments)}function KO([n,t],[e,i]){const r=Ut(n,e);return 0===r?Ut(t,i):r}class HB{constructor(t){this.An=t,this.buffer=new An(KO),this.Rn=0}bn(){return++this.Rn}Pn(t){const e=[t,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();KO(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class jB{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const i=this.Vn?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,Ie.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(r){wg(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield xg(r)}yield e.Sn(t)}))}}class zB{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return me.resolve(wo.A);const i=new HB(e);return this.Dn.forEachTarget(t,r=>i.Pn(r.sequenceNumber)).next(()=>this.Dn.xn(t,r=>i.Pn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Dn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(zO)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zO):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let i,r,s,u,h,p,y;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),r=this.params.maximumSequenceNumbersToCollect):r=I,u=Date.now(),this.nthSequenceNumber(t,r))).next(I=>(i=I,h=Date.now(),this.removeTargets(t,i,e))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(I=>(y=Date.now(),vy()<=yo.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-E}ms\n\tDetermined least recently used ${r} in `+(h-u)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${I} documents in `+(y-p)+`ms\nTotal Duration: ${y-E}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:I})))}}class GB{constructor(t,e){this.db=t,this.garbageCollector=new zB(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}kn(t){let e=0;return this.xn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(i,r)=>e(r))}addReference(t,e,i){return LI(t,i)}removeReference(t,e,i){return LI(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return LI(t,e)}On(t,e){return function(i,r){let s=!1;return WO(i).zt(u=>$O(i,u,r).next(h=>(h&&(s=!0),me.resolve(!h)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Mn(t,(u,h)=>{if(h<=e){const p=this.On(t,u).next(y=>{if(!y)return s++,i.getEntry(t,u).next(()=>(i.removeEntry(u,St.min()),lf(t).delete([0,zs(u.path)])))});r.push(p)}}).next(()=>me.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return LI(t,e)}Mn(t,e){const i=lf(t);let r,s=wo.A;return i.Wt({index:"documentTargetsIndex"},([u,h],{path:p,sequenceNumber:y})=>{0===u?(s!==wo.A&&e(new ze(ec(r)),s),s=y,r=p):s=wo.A}).next(()=>{s!==wo.A&&e(new ze(ec(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function LI(n,t){return lf(n).put((i=n.currentSequenceNumber,{targetId:0,path:zs(t.path),sequenceNumber:i}));var i}class ZO{constructor(){this.changes=new za(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Pn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?me.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class $B{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Ag(t).put(i)}removeEntry(t,e,i){return Ag(t).delete(function(r,s){const u=r.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],RI(s),u[u.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Fn(t,i)))}getEntry(t,e){let i=Pn.newInvalidDocument(e);return Ag(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(u0(e))},(r,s)=>{i=this.$n(e,s)}).next(()=>i)}Bn(t,e){let i={size:0,document:Pn.newInvalidDocument(e)};return Ag(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(u0(e))},(r,s)=>{i={document:this.$n(e,s),size:FI(s)}}).next(()=>i)}getEntries(t,e){let i=Cs();return this.Ln(t,e,(r,s)=>{const u=this.$n(r,s);i=i.insert(r,u)}).next(()=>i)}Un(t,e){let i=Cs(),r=new Ti(ze.comparator);return this.Ln(t,e,(s,u)=>{const h=this.$n(s,u);i=i.insert(s,h),r=r.insert(s,FI(u))}).next(()=>({documents:i,qn:r}))}Ln(t,e,i){if(e.isEmpty())return me.resolve();let r=new An(JO);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(u0(r.first()),u0(r.last())),u=r.getIterator();let h=u.getNext();return Ag(t).Wt({index:"documentKeyIndex",range:s},(p,y,E)=>{const I=ze.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&JO(h,I)<0;)i(h,null),h=u.getNext();h&&h.isEqual(I)&&(i(h,y),h=u.hasNext()?u.getNext():null),h?E.Ut(u0(h)):E.done()}).next(()=>{for(;h;)i(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),RI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ag(t).qt(IDBKeyRange.bound(r,s,!0)).next(u=>{let h=Cs();for(const p of u){const y=this.$n(ze.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(t,e,i,r){let s=Cs();const u=QO(e,i),h=QO(e,oa.max());return Ag(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(p,y,E)=>{const I=this.$n(ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(I.key,I),s.size===r&&E.done()}).next(()=>s)}newChangeBuffer(t){return new WB(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return YO(t).get("remoteDocumentGlobalKey").next(e=>(Mt(!!e),e))}Fn(t,e){return YO(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const i=function kB(n,t){let e;if(t.document)e=vO(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=ze.fromSegments(t.noDocument.path),r=Eg(t.noDocument.readTime);e=Pn.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return lt();{const i=ze.fromSegments(t.unknownDocument.path),r=Eg(t.unknownDocument.version);e=Pn.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Kn(i[0],i[1]);return St.fromTimestamp(r)}(t.readTime)),e}(this.M,e);if(!i.isNoDocument()||!i.version.isEqual(St.min()))return i}return Pn.newInvalidDocument(t)}}class WB extends ZO{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new za(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new An((s,u)=>Ut(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const h=this.Gn.get(s);if(e.push(this.Kn.removeEntry(t,s,h.readTime)),u.isValidDocument()){const p=NO(this.Kn.M,u);r=r.add(s.path.popLast()),i+=FI(p)-h.size,e.push(this.Kn.addEntry(t,s,p))}else if(i-=h.size,this.trackRemovals){const p=NO(this.Kn.M,u.convertToNoDocument(St.min()));e.push(this.Kn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Kn.updateMetadata(t,i)),me.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(i=>(this.Gn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:i,qn:r})=>(r.forEach((s,u)=>{this.Gn.set(s,{size:u,readTime:i.get(s).readTime})}),i))}}function YO(n){return Fr(n,"remoteDocumentGlobal")}function Ag(n){return Fr(n,"remoteDocumentsV14")}function u0(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function QO(n,t){const e=t.documentKey.path.toArray();return[n,RI(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function JO(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Ut(e[s],i[s]),r)return r;return r=Ut(e.length,i.length),r||(r=Ut(e[e.length-2],i[i.length-2]),r||Ut(e[e.length-1],i[i.length-1]))}class qB{constructor(t){this.M=t}kt(t,e,i,r){const s=new kI("createOrUpgrade",e);var h;i<1&&r>=1&&(t.createObjectStore("owner"),(h=t).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SO,{unique:!0}),h.createObjectStore("documentMutations"),XO(t),function(h){h.createObjectStore("remoteDocuments")}(t));let u=me.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(t),XO(t)),u=u.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(u=u.next(()=>function(h,p){return p.store("mutations").qt().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SO,{unique:!0});const E=p.store("mutations"),I=y.map(M=>E.put(M));return me.waitFor(I)})}(t,s))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(u=u.next(()=>this.Qn(s))),i<6&&r>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(t),this.jn(s)))),i<7&&r>=7&&(u=u.next(()=>this.Wn(s))),i<8&&r>=8&&(u=u.next(()=>this.zn(t,s))),i<9&&r>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(u=u.next(()=>this.Hn(s))),i<11&&r>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(u=u.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:TB});p.createIndex("collectionPathOverlayIndex",IB,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",SB,{unique:!1})}(t)})),i<13&&r>=13&&(u=u.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:fB});p.createIndex("documentKeyIndex",pB),p.createIndex("collectionGroupIndex",gB)}(t)).next(()=>this.Jn(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(u=u.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:wB}).createIndex("sequenceNumberIndex",bB,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:CB}).createIndex("documentKeyIndex",EB,{unique:!1})}(t)})),u}jn(t){let e=0;return t.store("remoteDocuments").Wt((i,r)=>{e+=FI(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Qn(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.qt().next(r=>me.forEach(r,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",u).next(h=>me.forEach(h,p=>{Mt(p.userId===s.userId);const y=Ly(this.M,p);return GO(t,s.userId,y).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Wt((u,h)=>{const p=new sn(u),y=[0,zs(p)];s.push(e.get(y).next(E=>E?me.resolve():e.put({targetId:0,path:zs(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>me.waitFor(s))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:vB});const i=e.store("collectionParents"),r=new UA,s=u=>{if(r.add(u)){const h=u.lastSegment(),p=u.popLast();return i.put({collectionId:h,parent:zs(p)})}};return e.store("remoteDocuments").Wt({jt:!0},(u,h)=>{const p=new sn(u);return s(p.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([u,h,p],y)=>{const E=ec(h);return s(E.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((i,r)=>{const s=s0(r),u=FO(this.M,s);return e.put(u)})}Jn(t,e){const i=e.store("remoteDocuments"),r=[];return i.Wt((s,u)=>{const h=e.store("remoteDocumentsV14"),p=(y=u,y.document?new ze(sn.fromString(y.document.name).popFirst(5)):y.noDocument?ze.fromSegments(y.noDocument.path):y.unknownDocument?ze.fromSegments(y.unknownDocument.path):lt()).path.toArray();var y;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(h.put(E))}).next(()=>me.waitFor(r))}}function XO(n){n.createObjectStore("targetDocuments",{keyPath:_B}).createIndex("documentTargetsIndex",yB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mB,{unique:!0}),n.createObjectStore("targetGlobal")}const zA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GA{constructor(t,e,i,r,s,u,h,p,y,E,I=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Yn=s,this.window=u,this.document=h,this.Xn=y,this.Zn=E,this.ts=I,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!GA.vt())throw new Ne(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GB(this,r),this.hs=e+"main",this.M=new PO(p),this.ls=new kl(this.hs,this.ts,new qB(this.M)),this.fs=new UB(this.referenceDelegate,this.M),this.ds=new $B(this.M),this._s=new RB,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===E&&ci("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(fe.FAILED_PRECONDITION,zA);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new wo(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var i=(0,Ie.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,Ie.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,Ie.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>VI(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.bs(t).next(()=>!0))).catch(t=>{if(wg(t))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return c0(t).get("owner").next(e=>me.resolve(this.Ps(e)))}Vs(t){return VI(t).delete(this.clientId)}vs(){var t=this;return(0,Ie.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Fr(i,"clientMetadata");return r.qt().next(s=>{const u=t.Ds(s,18e5),h=s.filter(p=>-1===u.indexOf(p));return me.forEach(h,p=>r.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(t.ws)for(const i of e)t.ws.removeItem(t.Cs(i.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?me.resolve(!0):c0(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.Ps(e)&&this.networkEnabled)return!0;if(!this.Ps(e)){if(!e.allowTabSynchronization)throw new Ne(fe.FAILED_PRECONDITION,zA);return!1}}return!(!this.networkEnabled||!this.inForeground)||VI(t).qt().next(i=>void 0===this.Ds(i,5e3).find(r=>{if(this.clientId!==r.clientId){const u=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||u&&h)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Ve("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ie.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new OO(e,wo.A);return t.Rs(i).next(()=>t.Vs(i))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(i=>this.Ss(i.updateTimeMs,e)&&!this.xs(i.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>VI(t).qt().next(e=>this.Ds(e,18e5).map(i=>i.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return HA.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new BB(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return BA.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,i){Ve("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=14===(u=this.ts)?xB:13===u?AO:12===u?DB:11===u?xO:void lt();var u;let h;return this.ls.runTransaction(t,r,s,p=>(h=new OO(p,this.es?this.es.next():wo.A),"readwrite-primary"===e?this.Es(h).next(y=>!!y||this.As(h)).next(y=>{if(!y)throw ci(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ne(fe.FAILED_PRECONDITION,MO);return i(h)}).next(y=>this.bs(h).next(()=>y)):this.$s(h).next(()=>i(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}$s(t){return c0(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.Ps(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ne(fe.FAILED_PRECONDITION,zA)})}bs(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return c0(t).put("owner",e)}static vt(){return kl.vt()}Rs(t){const e=c0(t);return e.get("owner").next(i=>this.Ps(i)?(Ve("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):me.resolve())}Ss(t,e){const i=Date.now();return!(t<i-e||t>i&&(ci(`Detected an update time that is in the future: ${t} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const i=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return Ve("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ci("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){ci("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function c0(n){return Fr(n,"owner")}function VI(n){return Fr(n,"clientMetadata")}function $A(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class KB{constructor(t,e,i){this.ds=t,this.Bs=e,this.indexManager=i}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(i=>this.Us(t,e,i))}Us(t,e,i){return this.ds.getEntry(t,e).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}qs(t,e){t.forEach((i,r)=>{for(const s of e)s.applyToLocalView(r)})}Ks(t,e){return this.ds.getEntries(t,e).next(i=>this.Gs(t,i).next(()=>i))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(i=>this.qs(e,i))}Qs(t,e,i){return ze.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.js(t,e.path):Ry(e)?this.Ws(t,e,i):this.zs(t,e,i);var r}js(t,e){return this.Ls(t,new ze(e)).next(i=>{let r=vg();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ws(t,e,i){const r=e.collectionGroup;let s=vg();return this.indexManager.getCollectionParents(t,r).next(u=>me.forEach(u,h=>{const p=(y=e,E=h.child(r),new Ml(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.zs(t,p,i).next(y=>{y.forEach((E,I)=>{s=s.insert(E,I)})})}).next(()=>s))}zs(t,e,i){let r;return this.ds.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(s=>{for(const u of s)for(const h of u.mutations){const p=h.key;let y=r.get(p);null==y&&(y=Pn.newInvalidDocument(p),r=r.insert(p,y)),A(h,y,u.localWriteTime),y.isFoundDocument()||(r=r.remove(p))}}).next(()=>(r.forEach((s,u)=>{mg(e,u)||(r=r.remove(s))}),r))}}class WA{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Hs=i,this.Js=r}static Ys(t,e){let i=En(),r=En();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new WA(t,e.fromCache,i,r)}}class eP{constructor(){this.Xs=!1}initialize(t,e){this.Zs=t,this.indexManager=e,this.Xs=!0}Qs(t,e,i,r){return this.ti(t,e).next(s=>s||this.ei(t,e,r,i)).next(s=>s||this.ni(t,e))}ti(t,e){return me.resolve(null)}ei(t,e,i,r){return function TA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(e)||r.isEqual(St.min())?this.ni(t,e):this.Zs.Ks(t,i).next(s=>{const u=this.si(e,s);return this.ii(e,u,i,r)?this.ni(t,e):(vy()<=yo.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Oy(e)),this.ri(t,u,e,Bb(r,-1)))})}si(t,e){let i=new An(II(t));return e.forEach((r,s)=>{mg(t,s)&&(i=i.add(s))}),i}ii(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ni(t,e){return vy()<=yo.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Oy(e)),this.Zs.Qs(t,e,oa.min())}ri(t,e,i,r){return this.Zs.Qs(t,i,r).next(s=>(e.forEach(u=>{s=s.insert(u.key,u)}),s))}}class ZB{constructor(t,e,i,r){this.persistence=t,this.oi=e,this.M=r,this.ui=new Ti(Ut),this.ai=new za(s=>tf(s),Sy),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(i)}li(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.fi=new KB(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ui))}}function tP(n,t,e,i){return new ZB(n,t,e,i)}function nP(n,t){return qA.apply(this,arguments)}function qA(){return qA=(0,Ie.Z)(function*(n,t){const e=Ze(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.Bs.getAllMutationBatches(i).next(s=>(r=s,e.li(t),e.Bs.getAllMutationBatches(i))).next(s=>{const u=[],h=[];let p=En();for(const y of r){u.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of s){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return e.fi.Ks(i,p).next(y=>({di:y,removedBatchIds:u,addedBatchIds:h}))})})}),qA.apply(this,arguments)}function YB(n,t){const e=Ze(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.hi.newChangeBuffer({trackRemovals:!0});return function(u,h,p,y){const E=p.batch,I=E.keys();let M=me.resolve();return I.forEach(P=>{M=M.next(()=>y.getEntry(h,P)).next(B=>{const Q=p.docVersions.get(P);Mt(null!==Q),B.version.compareTo(Q)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),y.addEntry(B)))})}),M.next(()=>u.Bs.removeMutationBatch(h,E))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.Bs.performConsistencyCheck(i)).next(()=>e.fi.Ks(i,r))})}function iP(n){const t=Ze(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function QB(n,t){const e=Ze(n),i=t.snapshotVersion;let r=e.ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=e.hi.newChangeBuffer({trackRemovals:!0});r=e.ui;const h=[];t.targetChanges.forEach((y,E)=>{const I=r.get(E);if(!I)return;h.push(e.fs.removeMatchingKeys(s,y.removedDocuments,E).next(()=>e.fs.addMatchingKeys(s,y.addedDocuments,E)));let M=I.withSequenceNumber(s.currentSequenceNumber);var P,B,Q;t.targetMismatches.has(E)?M=M.withResumeToken(ir.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):y.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(y.resumeToken,i)),r=r.insert(E,M),B=M,Q=y,(0===(P=I).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&h.push(e.fs.updateTargetData(s,M))});let p=Cs();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push(rP(s,u,t.documentUpdates).next(y=>{p=y})),!i.isEqual(St.min())){const y=e.fs.getLastRemoteSnapshotVersion(s).next(E=>e.fs.setTargetsMetadata(s,s.currentSequenceNumber,i));h.push(y)}return me.waitFor(h).next(()=>u.apply(s)).next(()=>e.fi.Gs(s,p)).next(()=>p)}).then(s=>(e.ui=r,s))}function rP(n,t,e){let i=En();return e.forEach(r=>i=i.add(r)),t.getEntries(n,i).next(r=>{let s=Cs();return e.forEach((u,h)=>{const p=r.get(u);h.isNoDocument()&&h.version.isEqual(St.min())?(t.removeEntry(u,h.readTime),s=s.insert(u,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(t.addEntry(h),s=s.insert(u,h)):Ve("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",h.version)}),s})}function JB(n,t){const e=Ze(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(i,t)))}function Uy(n,t){const e=Ze(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.fs.getTargetData(i,t).next(s=>s?(r=s,me.resolve(r)):e.fs.allocateTargetId(i).next(u=>(r=new of(t,u,0,i.currentSequenceNumber),e.fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ui=e.ui.insert(i.targetId,i),e.ai.set(t,i.targetId)),i})}function Hy(n,t,e){return KA.apply(this,arguments)}function KA(){return KA=(0,Ie.Z)(function*(n,t,e){const i=Ze(n),r=i.ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!wg(u))throw u;Ve("LocalStore",`Failed to update sequence numbers for target ${t}: ${u}`)}i.ui=i.ui.remove(t),i.ai.delete(r.target)}),KA.apply(this,arguments)}function BI(n,t,e){const i=Ze(n);let r=St.min(),s=En();return i.persistence.runTransaction("Execute query","readonly",u=>function(h,p,y){const E=Ze(h),I=E.ai.get(y);return void 0!==I?me.resolve(E.ui.get(I)):E.fs.getTargetData(p,y)}(i,u,bo(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(u,h.targetId).next(p=>{s=p})}).next(()=>i.oi.Qs(u,t,e?r:St.min(),e?s:En())).next(h=>(aP(i,TI(t),h),{documents:h,_i:s})))}function sP(n,t){const e=Ze(n),i=Ze(e.fs),r=e.ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.Et(s,t).next(u=>u?u.target:null))}function oP(n,t){const e=Ze(n),i=e.ci.get(t)||St.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.hi.getAllFromCollectionGroup(r,t,Bb(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(aP(e,t,r),r))}function aP(n,t,e){let i=St.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ci.set(t,i)}function ZA(){return ZA=(0,Ie.Z)(function*(n,t,e,i){const r=Ze(n);let s=En(),u=Cs();for(const y of e){const E=t.wi(y.metadata.name);y.document&&(s=s.add(E));const I=t.mi(y);I.setReadTime(t.gi(y.metadata.readTime)),u=u.insert(E,I)}const h=r.hi.newChangeBuffer({trackRemovals:!0}),p=yield Uy(r,(y=i,bo(nf(sn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>rP(y,h,u).next(E=>(h.apply(y),E)).next(E=>r.fs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.fs.addMatchingKeys(y,s,p.targetId)).next(()=>r.fi.Gs(y,E)).next(()=>E)))}),ZA.apply(this,arguments)}function eU(n,t){return YA.apply(this,arguments)}function YA(){return YA=(0,Ie.Z)(function*(n,t,e=En()){const i=yield Uy(n,bo(LA(t.bundledQuery))),r=Ze(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const u=Nr(t.readTime);if(i.snapshotVersion.compareTo(u)>=0)return r._s.saveNamedQuery(s,t);const h=i.withResumeToken(ir.EMPTY_BYTE_STRING,u);return r.ui=r.ui.insert(h.targetId,h),r.fs.updateTargetData(s,h).next(()=>r.fs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.fs.addMatchingKeys(s,e,i.targetId)).next(()=>r._s.saveNamedQuery(s,t))})}),YA.apply(this,arguments)}class tU{constructor(t){this.M=t,this.yi=new Map,this.pi=new Map}getBundleMetadata(t,e){return me.resolve(this.yi.get(e))}saveBundleMetadata(t,e){var i;return this.yi.set(e.id,{id:(i=e).id,version:i.version,createTime:Nr(i.createTime)}),me.resolve()}getNamedQuery(t,e){return me.resolve(this.pi.get(e))}saveNamedQuery(t,e){return this.pi.set(e.name,{name:(i=e).name,query:LA(i.bundledQuery),readTime:Nr(i.readTime)}),me.resolve();var i}}class nU{constructor(){this.overlays=new Ti(ze.comparator),this.Ii=new Map}getOverlay(t,e){return me.resolve(this.overlays.get(e))}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.Xt(t,e,s)}),me.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Ii.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(i)),me.resolve()}getOverlaysForCollection(t,e,i){const r=pd(),s=e.length+1,u=new ze(e.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return me.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Ti((y,E)=>y-E);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>i){let E=s.get(y.largestBatchId);null===E&&(E=pd(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const h=pd(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>h.set(y,E)),!(h.size()>=r)););return me.resolve(h)}Xt(t,e,i){if(null===i)return;const r=this.overlays.get(i.key);if(null!==r){const u=this.Ii.get(r.largestBatchId).delete(i.key);this.Ii.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new FA(e,i));let s=this.Ii.get(e);void 0===s&&(s=En(),this.Ii.set(e,s)),this.Ii.set(e,s.add(i.key))}}class QA{constructor(){this.Ti=new An(Lr.Ei),this.Ai=new An(Lr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(t,e){const i=new Lr(t,e);this.Ti=this.Ti.add(i),this.Ai=this.Ai.add(i)}bi(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Pi(new Lr(t,e))}Vi(t,e){t.forEach(i=>this.removeReference(i,e))}vi(t){const e=new ze(new sn([])),i=new Lr(e,t),r=new Lr(e,t+1),s=[];return this.Ai.forEachInRange([i,r],u=>{this.Pi(u),s.push(u.key)}),s}Si(){this.Ti.forEach(t=>this.Pi(t))}Pi(t){this.Ti=this.Ti.delete(t),this.Ai=this.Ai.delete(t)}Di(t){const e=new ze(new sn([])),i=new Lr(e,t),r=new Lr(e,t+1);let s=En();return this.Ai.forEachInRange([i,r],u=>{s=s.add(u.key)}),s}containsKey(t){const e=new Lr(t,0),i=this.Ti.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Lr{constructor(t,e){this.key=t,this.Ci=e}static Ei(t,e){return ze.comparator(t.key,e.key)||Ut(t.Ci,e.Ci)}static Ri(t,e){return Ut(t.Ci,e.Ci)||ze.comparator(t.key,e.key)}}class iU{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.xi=1,this.Ni=new An(Lr.Ei)}checkEmpty(t){return me.resolve(0===this.Bs.length)}addMutationBatch(t,e,i,r){const s=this.xi;this.xi++;const u=new PA(s,e,i,r);this.Bs.push(u);for(const h of r)this.Ni=this.Ni.add(new Lr(h.key,s)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return me.resolve(u)}lookupMutationBatch(t,e){return me.resolve(this.ki(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.Mi(e+1),s=r<0?0:r;return me.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(t){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Lr(e,0),r=new Lr(e,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([i,r],u=>{const h=this.ki(u.Ci);s.push(h)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new An(Ut);return e.forEach(r=>{const s=new Lr(r,0),u=new Lr(r,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,u],h=>{i=i.add(h.Ci)})}),me.resolve(this.Oi(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;ze.isDocumentKey(s)||(s=s.child(""));const u=new Lr(new ze(s),0);let h=new An(Ut);return this.Ni.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(p.Ci)),!0)},u),me.resolve(this.Oi(h))}Oi(t){const e=[];return t.forEach(i=>{const r=this.ki(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Mt(0===this.Fi(e.batchId,"removed")),this.Bs.shift();let i=this.Ni;return me.forEach(e.mutations,r=>{const s=new Lr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Ni=i})}_n(t){}containsKey(t,e){const i=new Lr(e,0),r=this.Ni.firstAfterOrEqual(i);return me.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return me.resolve()}Fi(t,e){return this.Mi(t)}Mi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}ki(t){const e=this.Mi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class rU{constructor(t){this.$i=t,this.docs=new Ti(ze.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,u=this.$i(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return me.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(e))}getEntries(t,e){let i=Cs();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Pn.newInvalidDocument(r))}),me.resolve(i)}getAllFromCollection(t,e,i){let r=Cs();const s=new ze(e.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!e.isPrefixOf(h.path))break;h.path.length>e.length+1||yI(_I(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return me.resolve(r)}getAllFromCollectionGroup(t,e,i,r){lt()}Bi(t,e){return me.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new sU(this)}getSize(t){return me.resolve(this.size)}}class sU extends ZO{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Kn.addEntry(t,r)):this.Kn.removeEntry(i)}),me.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class oU{constructor(t){this.persistence=t,this.Li=new za(e=>tf(e),Sy),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Ui=0,this.qi=new QA,this.targetCount=0,this.Ki=Dg.gn()}forEachTarget(t,e){return this.Li.forEach((i,r)=>e(r)),me.resolve()}getLastRemoteSnapshotVersion(t){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return me.resolve(this.Ui)}allocateTargetId(t){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ui&&(this.Ui=e),me.resolve()}Tn(t){this.Li.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ki=new Dg(e),this.highestTargetId=e),t.sequenceNumber>this.Ui&&(this.Ui=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,me.resolve()}updateTargetData(t,e){return this.Tn(e),me.resolve()}removeTargetData(t,e){return this.Li.delete(e.target),this.qi.vi(e.targetId),this.targetCount-=1,me.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Li.forEach((u,h)=>{h.sequenceNumber<=e&&null===i.get(h.targetId)&&(this.Li.delete(u),s.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),me.waitFor(s).next(()=>r)}getTargetCount(t){return me.resolve(this.targetCount)}getTargetData(t,e){const i=this.Li.get(e)||null;return me.resolve(i)}addMatchingKeys(t,e,i){return this.qi.bi(e,i),me.resolve()}removeMatchingKeys(t,e,i){this.qi.Vi(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(u=>{s.push(r.markPotentiallyOrphaned(t,u))}),me.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.qi.vi(e),me.resolve()}getMatchingKeysForTargetId(t,e){const i=this.qi.Di(e);return me.resolve(i)}containsKey(t,e){return me.resolve(this.qi.containsKey(e))}}class aU{constructor(t,e){this.Gi={},this.overlays={},this.es=new wo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new oU(this),this.indexManager=new VB,this.ds=new rU(i=>this.referenceDelegate.Qi(i)),this.M=new PO(e),this._s=new tU(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new nU,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Gi[t.toKey()];return i||(i=new iU(e,this.referenceDelegate),this.Gi[t.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,i){Ve("MemoryPersistence","Starting transaction:",t);const r=new lU(this.es.next());return this.referenceDelegate.ji(),i(r).next(s=>this.referenceDelegate.Wi(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}zi(t,e){return me.or(Object.values(this.Gi).map(i=>()=>i.containsKey(t,e)))}}class lU extends kO{constructor(t){super(),this.currentSequenceNumber=t}}class JA{constructor(t){this.persistence=t,this.Hi=new QA,this.Ji=null}static Yi(t){return new JA(t)}get Xi(){if(this.Ji)return this.Ji;throw lt()}addReference(t,e,i){return this.Hi.addReference(i,e),this.Xi.delete(i.toString()),me.resolve()}removeReference(t,e,i){return this.Hi.removeReference(i,e),this.Xi.add(i.toString()),me.resolve()}markPotentiallyOrphaned(t,e){return this.Xi.add(e.toString()),me.resolve()}removeTarget(t,e){this.Hi.vi(e.targetId).forEach(r=>this.Xi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Xi.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ji(){this.Ji=new Set}Wi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,i=>{const r=ze.fromPath(i);return this.Zi(t,r).next(s=>{s||e.removeEntry(r,St.min())})}).next(()=>(this.Ji=null,e.apply(t)))}updateLimboDocument(t,e){return this.Zi(t,e).next(i=>{i?this.Xi.delete(e.toString()):this.Xi.add(e.toString())})}Qi(t){return 0}Zi(t,e){return me.or([()=>me.resolve(this.Hi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.zi(t,e)])}}function lP(n,t){return`firestore_clients_${n}_${t}`}function uP(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function XA(n,t){return`firestore_targets_${n}_${t}`}class UI{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static tr(t,e,i){const r=JSON.parse(i);let s,u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ne(r.error.code,r.error.message))),u?new UI(t,e,r.state,s):(ci("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class d0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static tr(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ne(i.error.code,i.error.message))),s?new d0(t,i.state,r):(ci("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class HI{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static tr(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=xI();for(let u=0;r&&u<i.activeTargetIds.length;++u)r=fI(i.activeTargetIds[u]),s=s.add(i.activeTargetIds[u]);return r?new HI(t,s):(ci("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class e1{constructor(t,e){this.clientId=t,this.onlineState=e}static tr(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new e1(e.clientId,e.onlineState):(ci("SharedClientState",`Failed to parse online state: ${t}`),null)}}class t1{constructor(){this.activeTargetIds=xI()}nr(t){this.activeTargetIds=this.activeTargetIds.add(t)}sr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}er(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class n1{constructor(t,e,i,r,s){this.window=t,this.Yn=e,this.persistenceKey=i,this.ir=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Ti(Ut),this.started=!1,this.cr=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=lP(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new t1),this.dr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.syncEngine.Fs();for(const r of e){if(r===t.ir)continue;const s=t.getItem(lP(t.persistenceKey,r));if(s){const u=HI.tr(r,s);u&&(t.ar=t.ar.insert(u.clientId,u))}}t.yr();const i=t.storage.getItem(t.mr);if(i){const r=t.pr(i);r&&t.Ir(r)}for(const r of t.cr)t.ur(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.lr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(t){let e=!1;return this.ar.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Er(t,"pending")}updateMutationState(t,e,i){this.Er(t,e,i),this.Ar(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(XA(this.persistenceKey,t));if(i){const r=d0.tr(t,i);r&&(e=r.state)}}return this.Rr.nr(t),this.yr(),e}removeLocalQueryTarget(t){this.Rr.sr(t),this.yr()}isLocalQueryTarget(t){return this.Rr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(XA(this.persistenceKey,t))}updateQueryState(t,e,i){this.br(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Ar(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Pr(t)}notifyBundleLoaded(t){this.Vr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ve("SharedClientState","READ",t,e),e}setItem(t,e){Ve("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ve("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ur(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Ve("SharedClientState","EVENT",i.key,i.newValue),i.key===this.hr)return void ci("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ie.Z)(function*(){if(e.started){if(null!==i.key)if(e.dr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Sr(r,null)}{const r=e.Dr(i.key,i.newValue);if(r)return e.Sr(r.clientId,r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Cr(i.key,i.newValue);if(r)return e.Nr(r)}}else if(e.wr.test(i.key)){if(null!==i.newValue){const r=e.kr(i.key,i.newValue);if(r)return e.Mr(r)}}else if(i.key===e.mr){if(null!==i.newValue){const r=e.pr(i.newValue);if(r)return e.Ir(r)}}else if(i.key===e.lr){const r=function(s){let u=wo.A;if(null!=s)try{const h=JSON.parse(s);Mt("number"==typeof h),u=h}catch(h){ci("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(i.newValue);r!==wo.A&&e.sequenceNumberHandler(r)}else if(i.key===e.gr){const r=e.Or(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Fr(s)))}}else e.cr.push(i)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(t,e,i){const r=new UI(this.currentUser,t,e,i),s=uP(this.persistenceKey,this.currentUser,t);this.setItem(s,r.er())}Ar(t){const e=uP(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Pr(t){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:t}))}br(t,e,i){const r=XA(this.persistenceKey,t),s=new d0(t,e,i);this.setItem(r,s.er())}Vr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.gr,e)}vr(t){const e=this.dr.exec(t);return e?e[1]:null}Dr(t,e){const i=this.vr(t);return HI.tr(i,e)}Cr(t,e){const i=this._r.exec(t),r=Number(i[1]);return UI.tr(new nr(void 0!==i[2]?i[2]:null),r,e)}kr(t,e){const i=this.wr.exec(t),r=Number(i[1]);return d0.tr(r,e)}pr(t){return e1.tr(t)}Or(t){return JSON.parse(t)}Nr(t){var e=this;return(0,Ie.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.$r(t.batchId,t.state,t.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Mr(t){return this.syncEngine.Br(t.targetId,t.state,t.error)}Sr(t,e){const i=e?this.ar.insert(t,e):this.ar.remove(t),r=this.Tr(this.ar),s=this.Tr(i),u=[],h=[];return s.forEach(p=>{r.has(p)||u.push(p)}),r.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Lr(u,h).then(()=>{this.ar=i})}Ir(t){this.ar.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Tr(t){let e=xI();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class cP{constructor(){this.Ur=new t1,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Ur.nr(t),this.qr[t]||"not-current"}updateQueryState(t,e,i){this.qr[t]=e}removeLocalQueryTarget(t){this.Ur.sr(t)}isLocalQueryTarget(t){return this.Ur.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(t){return this.Ur.activeTargetIds.has(t)}start(){return this.Ur=new t1,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class uU{Kr(t){}shutdown(){}}class dP{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(t){this.zr.push(t)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.zr)t(0)}Wr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.zr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class dU{constructor(t){this.Jr=t.Jr,this.Yr=t.Yr}Xr(t){this.Zr=t}eo(t){this.no=t}onMessage(t){this.so=t}close(){this.Yr()}send(t){this.Jr(t)}io(){this.Zr()}ro(t){this.no(t)}oo(t){this.so(t)}}class hU extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.uo=(t.ssl?"https":"http")+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(t,e,i,r,s){const u=this.ho(t,e);Ve("RestConnection","Sending: ",u,i);const h={};return this.lo(h,r,s),this.fo(t,u,h,i).then(p=>(Ve("RestConnection","Received: ",p),p),p=>{throw ng("RestConnection",`${t} failed with error: `,p,"url: ",u,"request:",i),p})}_o(t,e,i,r,s){return this.co(t,e,i,r,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Jh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ho(t,e){return`${this.uo}/v1/${e}:${cU[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((s,u)=>{const h=new cA;h.listenOnce(uA.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case my.NO_ERROR:const y=h.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(y)),s(y);break;case my.TIMEOUT:Ve("Connection",'RPC "'+t+'" timed out'),u(new Ne(fe.DEADLINE_EXCEEDED,"Request time out"));break;case my.HTTP_ERROR:const E=h.getStatus();if(Ve("Connection",'RPC "'+t+'" failed with status:',E,"response text:",h.getResponseText()),E>0){const I=h.getResponseJson().error;if(I&&I.status&&I.message){const M=function(P){const B=P.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(B)>=0?B:fe.UNKNOWN}(I.status);u(new Ne(M,I.message))}else u(new Ne(fe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Ne(fe.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Ve("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);h.send(e,"POST",p,i,15)})}wo(t,e,i){const r=[this.uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=uI(),u=gy(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new ZR({})),this.lo(h.initMessageHeaders,e,i),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");Ve("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let E=!1,I=!1;const M=new dU({Jr:B=>{I?Ve("Connection","Not sending because WebChannel is closed:",B):(E||(Ve("Connection","Opening WebChannel transport."),y.open(),E=!0),Ve("Connection","WebChannel sending:",B),y.send(B))},Yr:()=>y.close()}),P=(B,Q,be)=>{B.listen(Q,et=>{try{be(et)}catch(nt){setTimeout(()=>{throw nt},0)}})};return P(y,yy.EventType.OPEN,()=>{I||Ve("Connection","WebChannel transport opened.")}),P(y,yy.EventType.CLOSE,()=>{I||(I=!0,Ve("Connection","WebChannel transport closed"),M.ro())}),P(y,yy.EventType.ERROR,B=>{I||(I=!0,ng("Connection","WebChannel transport errored:",B),M.ro(new Ne(fe.UNAVAILABLE,"The operation could not be completed")))}),P(y,yy.EventType.MESSAGE,B=>{var Q;if(!I){const be=B.data[0];Mt(!!be);const et=be,nt=et.error||(null===(Q=et[0])||void 0===Q?void 0:Q.error);if(nt){Ve("Connection","WebChannel received error:",nt);const it=nt.status;let rt=function(Pt){const tn=At[Pt];if(void 0!==tn)return Py(tn)}(it),kt=nt.message;void 0===rt&&(rt=fe.INTERNAL,kt="Unknown error status: "+it+" with message "+nt.message),I=!0,M.ro(new Ne(rt,kt)),y.close()}else Ve("Connection","WebChannel received:",be),M.oo(be)}}),P(u,Ob.STAT_EVENT,B=>{B.stat===_y.PROXY?Ve("Connection","Detected buffering proxy"):B.stat===_y.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.io()},0),M}}function hP(){return"undefined"!=typeof window?window:null}function jI(){return"undefined"!=typeof document?document:null}function h0(n){return new eB(n,!0)}class r1{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Yn=t,this.timerId=e,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&Ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class fP{constructor(t,e,i,r,s,u,h,p){this.Yn=t,this.Vo=i,this.vo=r,this.So=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new r1(t,e)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,Ie.Z)(function*(){t.ko()&&(yield t.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(t){this.Uo(),this.stream.send(t)}Bo(){var t=this;return(0,Ie.Z)(function*(){if(t.Mo())return t.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(t,e){var i=this;return(0,Ie.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==t?i.No.reset():e&&e.code===fe.RESOURCE_EXHAUSTED?(ci(e.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):e&&e.code===fe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.eo(e)})()}Ko(){}auth(){this.state=1;const t=this.Go(this.Do),e=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Do===e&&this.Qo(i,r)},i=>{t(()=>{const r=new Ne(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(r)})})}Qo(t,e){const i=this.Go(this.Do);this.stream=this.Wo(t,e),this.stream.Xr(()=>{i(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(r=>{i(()=>this.jo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.No.Ro((0,Ie.Z)(function*(){t.state=0,t.start()}))}jo(t){return Ve("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Go(t){return e=>{this.Yn.enqueueAndForget(()=>this.Do===t?e():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fU extends fP{constructor(t,e,i,r,s,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,u),this.M=s}Wo(t,e){return this.So.wo("Listen",t,e)}onMessage(t){this.No.reset();const e=function iB(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:lt(),r=t.targetChange.targetIds||[],s=function(p,y){return p.N?(Mt(void 0===y||"string"==typeof y),ir.fromBase64String(y||"")):(Mt(void 0===y||y instanceof Uint8Array),ir.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),u=t.targetChange.cause,h=u&&function(p){const y=void 0===p.code?fe.UNKNOWN:Py(p.code);return new Ne(y,p.message||"")}(u);e=new cO(i,r,s,h||null)}else if("documentChange"in t){const i=t.documentChange,r=Xu(n,i.document.name),s=Nr(i.document.updateTime),u=new vr({mapValue:{fields:i.document.fields}}),h=Pn.newFoundDocument(r,s,u);e=new AI(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){const i=t.documentDelete,r=Xu(n,i.document),s=i.readTime?Nr(i.readTime):St.min(),u=Pn.newNoDocument(r,s);e=new AI([],i.removedTargetIds||[],u.key,u)}else if("documentRemove"in t){const i=t.documentRemove,r=Xu(n,i.document);e=new AI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return lt();{const i=t.filter,s=new Yt(i.count||0);e=new uO(i.targetId,s)}}var p;return e}(this.M,t),i=function(r){if(!("targetChange"in r))return St.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?St.min():s.readTime?Nr(s.readTime):St.min()}(t);return this.listener.zo(e,i)}Ho(t){const e={};e.database=t0(this.M),e.addTarget=function(r,s){let u;const h=s.target;return u=Dy(h)?{documents:wO(r,h)}:{query:bO(r,h)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=pO(r,s.resumeToken):s.snapshotVersion.compareTo(St.min())>0&&(u.readTime=Xb(r,s.snapshotVersion.toTimestamp())),u}(this.M,t);const i=function sB(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Lo(e)}Jo(t){const e={};e.database=t0(this.M),e.removeTarget=t,this.Lo(e)}}class pU extends fP{constructor(t,e,i,r,s,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,u),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(t,e){return this.So.wo("Write",t,e)}onMessage(t){if(Mt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Yo){this.No.reset();const e=function rB(n,t){return n&&n.length>0?(Mt(void 0!==t),n.map(e=>function(i,r){let s=Nr(i.updateTime?i.updateTime:r);return s.isEqual(St.min())&&(s=Nr(r)),new f(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Nr(t.commitTime);return this.listener.tu(i,e)}return Mt(!t.writeResults||0===t.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const t={};t.database=t0(this.M),this.Lo(t)}Zo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>n0(this.M,i))};this.Lo(e)}}class gU extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.So=i,this.M=r,this.su=!1}iu(){if(this.su)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So.co(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ne(fe.UNKNOWN,r.toString())})}_o(t,e,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So._o(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ne(fe.UNKNOWN,r.toString())})}terminate(){this.su=!0}}class mU{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(t){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.fu(),this.ru=0,"Online"===t&&(this.uu=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}hu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ci(e),this.uu=!1):Ve("OnlineStateTracker",e)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class _U{constructor(t,e,i,r,s){var u=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(h=>{i.enqueueAndForget((0,Ie.Z)(function*(){var p;uf(u)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ie.Z)(function*(y){const E=Ze(y);E.wu.add(4),yield jy(E),E.yu.set("Unknown"),E.wu.delete(4),yield f0(E)}),function(y){return p.apply(this,arguments)})(u))}))}),this.yu=new mU(i,r)}}function f0(n){return s1.apply(this,arguments)}function s1(){return s1=(0,Ie.Z)(function*(n){if(uf(n))for(const t of n.mu)yield t(!0)}),s1.apply(this,arguments)}function jy(n){return o1.apply(this,arguments)}function o1(){return o1=(0,Ie.Z)(function*(n){for(const t of n.mu)yield t(!1)}),o1.apply(this,arguments)}function zI(n,t){const e=Ze(n);e._u.has(t.targetId)||(e._u.set(t.targetId,t),u1(e)?l1(e):Gy(e).Mo()&&a1(e,t))}function p0(n,t){const e=Ze(n),i=Gy(e);e._u.delete(t),i.Mo()&&pP(e,t),0===e._u.size&&(i.Mo()?i.$o():uf(e)&&e.yu.set("Unknown"))}function a1(n,t){n.pu.Z(t.targetId),Gy(n).Ho(t)}function pP(n,t){n.pu.Z(t),Gy(n).Jo(t)}function l1(n){n.pu=new QV({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n._u.get(t)||null}),Gy(n).start(),n.yu.au()}function u1(n){return uf(n)&&!Gy(n).ko()&&n._u.size>0}function uf(n){return 0===Ze(n).wu.size}function gP(n){n.pu=void 0}function yU(n){return c1.apply(this,arguments)}function c1(){return c1=(0,Ie.Z)(function*(n){n._u.forEach((t,e)=>{a1(n,t)})}),c1.apply(this,arguments)}function vU(n,t){return d1.apply(this,arguments)}function d1(){return d1=(0,Ie.Z)(function*(n,t){gP(n),u1(n)?(n.yu.lu(t),l1(n)):n.yu.set("Unknown")}),d1.apply(this,arguments)}function wU(n,t,e){return h1.apply(this,arguments)}function h1(){return h1=(0,Ie.Z)(function*(n,t,e){if(n.yu.set("Online"),t instanceof cO&&2===t.state&&t.cause)try{yield(i=(0,Ie.Z)(function*(r,s){const u=s.cause;for(const h of s.targetIds)r._u.has(h)&&(yield r.remoteSyncer.rejectListen(h,u),r._u.delete(h),r.pu.removeTarget(h))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){Ve("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield GI(n,i)}else if(t instanceof AI?n.pu.ut(t):t instanceof uO?n.pu._t(t):n.pu.ht(t),!e.isEqual(St.min()))try{const i=yield iP(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const u=r.pu.yt(s);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=r._u.get(p);y&&r._u.set(p,y.withResumeToken(h.resumeToken,s))}}),u.targetMismatches.forEach(h=>{const p=r._u.get(h);if(!p)return;r._u.set(h,p.withResumeToken(ir.EMPTY_BYTE_STRING,p.snapshotVersion)),pP(r,h);const y=new of(p.target,h,1,p.sequenceNumber);a1(r,y)}),r.remoteSyncer.applyRemoteEvent(u)}(n,e))}catch(i){Ve("RemoteStore","Failed to raise snapshot:",i),yield GI(n,i)}var i}),h1.apply(this,arguments)}function GI(n,t,e){return f1.apply(this,arguments)}function f1(){return f1=(0,Ie.Z)(function*(n,t,e){if(!wg(t))throw t;n.wu.add(1),yield jy(n),n.yu.set("Offline"),e||(e=()=>iP(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield e(),n.wu.delete(1),yield f0(n)}))}),f1.apply(this,arguments)}function mP(n,t){return t().catch(e=>GI(n,e,t))}function zy(n){return p1.apply(this,arguments)}function p1(){return p1=(0,Ie.Z)(function*(n){const t=Ze(n),e=cf(t);let i=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;bU(t);)try{const r=yield JB(t.localStore,i);if(null===r){0===t.du.length&&e.$o();break}i=r.batchId,CU(t,r)}catch(r){yield GI(t,r)}_P(t)&&yP(t)}),p1.apply(this,arguments)}function bU(n){return uf(n)&&n.du.length<10}function CU(n,t){n.du.push(t);const e=cf(n);e.Mo()&&e.Xo&&e.Zo(t.mutations)}function _P(n){return uf(n)&&!cf(n).ko()&&n.du.length>0}function yP(n){cf(n).start()}function EU(n){return g1.apply(this,arguments)}function g1(){return g1=(0,Ie.Z)(function*(n){cf(n).nu()}),g1.apply(this,arguments)}function TU(n){return m1.apply(this,arguments)}function m1(){return m1=(0,Ie.Z)(function*(n){const t=cf(n);for(const e of n.du)t.Zo(e.mutations)}),m1.apply(this,arguments)}function IU(n,t,e){return _1.apply(this,arguments)}function _1(){return _1=(0,Ie.Z)(function*(n,t,e){const i=n.du.shift(),r=NA.from(i,t,e);yield mP(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield zy(n)}),_1.apply(this,arguments)}function SU(n,t){return y1.apply(this,arguments)}function y1(){return y1=(0,Ie.Z)(function*(n,t){var e;t&&cf(n).Xo&&(yield(e=(0,Ie.Z)(function*(i,r){if(Ju(s=r.code)&&s!==fe.ABORTED){const u=i.du.shift();cf(i).Fo(),yield mP(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,r)),yield zy(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),_P(n)&&yP(n)}),y1.apply(this,arguments)}function vP(n,t){return v1.apply(this,arguments)}function v1(){return v1=(0,Ie.Z)(function*(n,t){const e=Ze(n);e.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const i=uf(e);e.wu.add(3),yield jy(e),i&&e.yu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.wu.delete(3),yield f0(e)}),v1.apply(this,arguments)}function w1(n,t){return b1.apply(this,arguments)}function b1(){return b1=(0,Ie.Z)(function*(n,t){const e=Ze(n);t?(e.wu.delete(2),yield f0(e)):t||(e.wu.add(2),yield jy(e),e.yu.set("Unknown"))}),b1.apply(this,arguments)}function Gy(n){return n.Iu||(n.Iu=function(t,e,i){const r=Ze(t);return r.iu(),new fU(e,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:yU.bind(null,n),eo:vU.bind(null,n),zo:wU.bind(null,n)}),n.mu.push(function(){var t=(0,Ie.Z)(function*(e){e?(n.Iu.Fo(),u1(n)?l1(n):n.yu.set("Unknown")):(yield n.Iu.stop(),gP(n))});return function(e){return t.apply(this,arguments)}}())),n.Iu}function cf(n){return n.Tu||(n.Tu=function(t,e,i){const r=Ze(t);return r.iu(),new pU(e,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:EU.bind(null,n),eo:SU.bind(null,n),eu:TU.bind(null,n),tu:IU.bind(null,n)}),n.mu.push(function(){var t=(0,Ie.Z)(function*(e){e?(n.Tu.Fo(),yield zy(n)):(yield n.Tu.stop(),n.du.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(e){return t.apply(this,arguments)}}())),n.Tu}class C1{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(t,e,i,r,s){const u=Date.now()+i,h=new C1(t,e,u,r,s);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(fe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $y(n,t){if(ci("AsyncQueue",`${t}: ${n}`),wg(n))return new Ne(fe.UNAVAILABLE,`${t}: ${n}`);throw n}class Wy{constructor(t){this.comparator=t?(e,i)=>t(e,i)||ze.comparator(e.key,i.key):(e,i)=>ze.comparator(e.key,i.key),this.keyedMap=vg(),this.sortedSet=new Ti(this.comparator)}static emptySet(t){return new Wy(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Wy)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Wy;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class wP{constructor(){this.Eu=new Ti(ze.comparator)}track(t){const e=t.doc.key,i=this.Eu.get(e);i?0!==t.type&&3===i.type?this.Eu=this.Eu.insert(e,t):3===t.type&&1!==i.type?this.Eu=this.Eu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Eu=this.Eu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Eu=this.Eu.remove(e):1===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):lt():this.Eu=this.Eu.insert(e,t)}Au(){const t=[];return this.Eu.inorderTraversal((e,i)=>{t.push(i)}),t}}class qy{constructor(t,e,i,r,s,u,h,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(u=>{s.push({type:0,doc:u})}),new qy(t,e,Wy.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class DU{constructor(){this.Ru=void 0,this.listeners=[]}}class xU{constructor(){this.queries=new za(t=>IA(t),hd),this.onlineState="Unknown",this.bu=new Set}}function E1(n,t){return T1.apply(this,arguments)}function T1(){return T1=(0,Ie.Z)(function*(n,t){const e=Ze(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new DU),r)try{s.Ru=yield e.onListen(i)}catch(u){const h=$y(u,`Initialization of query '${Oy(t.query)}' failed`);return void t.onError(h)}e.queries.set(i,s),s.listeners.push(t),t.Pu(e.onlineState),s.Ru&&t.Vu(s.Ru)&&D1(e)}),T1.apply(this,arguments)}function I1(n,t){return S1.apply(this,arguments)}function S1(){return S1=(0,Ie.Z)(function*(n,t){const e=Ze(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const u=s.listeners.indexOf(t);u>=0&&(s.listeners.splice(u,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),S1.apply(this,arguments)}function AU(n,t){const e=Ze(n);let i=!1;for(const r of t){const u=e.queries.get(r.query);if(u){for(const h of u.listeners)h.Vu(r)&&(i=!0);u.Ru=r}}i&&D1(e)}function MU(n,t,e){const i=Ze(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function D1(n){n.bu.forEach(t=>{t.next()})}class x1{constructor(t,e,i){this.query=t,this.vu=e,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}Vu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new qy(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Su?this.Cu(t)&&(this.vu.next(t),e=!0):this.xu(t,this.onlineState)&&(this.Nu(t),e=!0),this.Du=t,e}onError(t){this.vu.error(t)}Pu(t){this.onlineState=t;let e=!1;return this.Du&&!this.Su&&this.xu(this.Du,t)&&(this.Nu(this.Du),e=!0),e}xu(t,e){return!t.fromCache||!(this.options.ku&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}Cu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(t){t=qy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Su=!0,this.vu.next(t)}}class kU{constructor(t,e){this.payload=t,this.byteLength=e}Mu(){return"metadata"in this.payload}}class bP{constructor(t){this.M=t}wi(t){return Xu(this.M,t)}mi(t){return t.metadata.exists?vO(this.M,t.document,!1):Pn.newNoDocument(this.wi(t.metadata.name),this.gi(t.metadata.readTime))}gi(t){return Nr(t)}}class RU{constructor(t,e,i){this.Ou=t,this.localStore=e,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CP(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=sn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new bP(this.M);for(const r of t)if(r.metadata.queries){const s=i.wi(r.metadata.name);for(const u of r.metadata.queries){const h=(e.get(u)||En()).add(s);e.set(u,h)}}return e}complete(){var t=this;return(0,Ie.Z)(function*(){const e=yield function XB(n,t,e,i){return ZA.apply(this,arguments)}(t.localStore,new bP(t.M),t.documents,t.Ou.id),i=t.$u(t.documents);for(const r of t.queries)yield eU(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function CP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class EP{constructor(t){this.key=t}}class TP{constructor(t){this.key=t}}class IP{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.current=!1,this.Ku=En(),this.mutatedKeys=En(),this.Gu=II(t),this.Qu=new Wy(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new wP,r=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,u=r,h=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((E,I)=>{const M=r.get(E),P=mg(this.query,I)?I:null,B=!!M&&this.mutatedKeys.has(M.key),Q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let be=!1;M&&P?M.data.isEqual(P.data)?B!==Q&&(i.track({type:3,doc:P}),be=!0):this.Hu(M,P)||(i.track({type:2,doc:P}),be=!0,(p&&this.Gu(P,p)>0||y&&this.Gu(P,y)<0)&&(h=!0)):!M&&P?(i.track({type:0,doc:P}),be=!0):M&&!P&&(i.track({type:1,doc:M}),be=!0,(p||y)&&(h=!0)),be&&(P?(u=u.add(P),s=Q?s.add(E):s.delete(E)):(u=u.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const E="F"===this.query.limitType?u.last():u.first();u=u.delete(E.key),s=s.delete(E.key),i.track({type:1,doc:E})}return{Qu:u,zu:i,ii:h,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Au();s.sort((y,E)=>function(I,M){const P=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return P(I)-P(M)}(y.type,E.type)||this.Gu(y.doc,E.doc)),this.Ju(i);const u=e?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==s.length||p?{snapshot:new qy(this.query,t.Qu,r,s,t.mutatedKeys,0===h,p,!1),Xu:u}:{Xu:u}}Pu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new wP,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=En(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new TP(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new EP(i))}),e}ta(t){this.Uu=t._i,this.Ku=En();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ea(){return qy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class OU{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class PU{constructor(t){this.key=t,this.na=!1}}class NU{constructor(t,e,i,r,s,u){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sa={},this.ia=new za(h=>IA(h),hd),this.ra=new Map,this.oa=new Set,this.ua=new Ti(ze.comparator),this.aa=new Map,this.ca=new QA,this.ha={},this.la=new Map,this.fa=Dg.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function FU(n,t){return A1.apply(this,arguments)}function A1(){return A1=(0,Ie.Z)(function*(n,t){const e=J1(n);let i,r;const s=e.ia.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.ea();else{const u=yield Uy(e.localStore,bo(t));e.isPrimaryClient&&zI(e.remoteStore,u);const h=e.sharedClientState.addLocalQueryTarget(u.targetId);i=u.targetId,r=yield M1(e,t,i,"current"===h)}return r}),A1.apply(this,arguments)}function M1(n,t,e,i){return k1.apply(this,arguments)}function k1(){return k1=(0,Ie.Z)(function*(n,t,e,i){n._a=(E,I,M)=>{return(P=(0,Ie.Z)(function*(B,Q,be,et){let nt=Q.view.Wu(be);nt.ii&&(nt=yield BI(B.localStore,Q.query,!1).then(({documents:kt})=>Q.view.Wu(kt,nt)));const it=et&&et.targetChanges.get(Q.targetId),rt=Q.view.applyChanges(nt,B.isPrimaryClient,it);return H1(B,Q.targetId,rt.Xu),rt.snapshot}),function(B,Q,be,et){return P.apply(this,arguments)})(n,E,I,M);var P};const r=yield BI(n.localStore,t,!0),s=new IP(t,r._i),u=s.Wu(r.documents),h=Jb.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),p=s.applyChanges(u,n.isPrimaryClient,h);H1(n,e,p.Xu);const y=new OU(t,e,s);return n.ia.set(t,y),n.ra.has(e)?n.ra.get(e).push(t):n.ra.set(e,[t]),p.snapshot}),k1.apply(this,arguments)}function LU(n,t){return R1.apply(this,arguments)}function R1(){return R1=(0,Ie.Z)(function*(n,t){const e=Ze(n),i=e.ia.get(t),r=e.ra.get(i.targetId);if(r.length>1)return e.ra.set(i.targetId,r.filter(s=>!hd(s,t))),void e.ia.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Hy(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),p0(e.remoteStore,i.targetId),Ky(e,i.targetId)}).catch(xg))):(Ky(e,i.targetId),yield Hy(e.localStore,i.targetId,!0))}),R1.apply(this,arguments)}function O1(){return O1=(0,Ie.Z)(function*(n,t,e){const i=X1(n);try{const r=yield function(s,u){const h=Ze(s),p=Kn.now(),y=u.reduce((I,M)=>I.add(M.key),En());let E;return h.persistence.runTransaction("Locally write mutations","readwrite",I=>h.fi.Ks(I,y).next(M=>{E=M;const P=[];for(const B of u){const Q=k(B,E.get(B.key));null!=Q&&P.push(new ye(B.key,Q,mI(Q.value.mapValue),m.exists(!0)))}return h.Bs.addMutationBatch(I,p,P,u)})).then(I=>(I.applyToLocalDocumentSet(E),{batchId:I.batchId,changes:E}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,u,h){let p=s.ha[s.currentUser.toKey()];p||(p=new Ti(Ut)),p=p.insert(u,h),s.ha[s.currentUser.toKey()]=p}(i,r.batchId,e),yield gd(i,r.changes),yield zy(i.remoteStore)}catch(r){const s=$y(r,"Failed to persist write");e.reject(s)}}),O1.apply(this,arguments)}function SP(n,t){return P1.apply(this,arguments)}function P1(){return P1=(0,Ie.Z)(function*(n,t){const e=Ze(n);try{const i=yield QB(e.localStore,t);t.targetChanges.forEach((r,s)=>{const u=e.aa.get(s);u&&(Mt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.na=!0:r.modifiedDocuments.size>0?Mt(u.na):r.removedDocuments.size>0&&(Mt(u.na),u.na=!1))}),yield gd(e,i,t)}catch(i){yield xg(i)}}),P1.apply(this,arguments)}function DP(n,t,e){const i=Ze(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ia.forEach((s,u)=>{const h=u.view.Pu(t);h.snapshot&&r.push(h.snapshot)}),function(s,u){const h=Ze(s);h.onlineState=u;let p=!1;h.queries.forEach((y,E)=>{for(const I of E.listeners)I.Pu(u)&&(p=!0)}),p&&D1(h)}(i.eventManager,t),r.length&&i.sa.zo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function BU(n,t,e){return N1.apply(this,arguments)}function N1(){return N1=(0,Ie.Z)(function*(n,t,e){const i=Ze(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.aa.get(t),s=r&&r.key;if(s){let u=new Ti(ze.comparator);u=u.insert(s,Pn.newNoDocument(s,St.min()));const h=En().add(s),p=new Qb(St.min(),new Map,new An(Ut),u,h);yield SP(i,p),i.ua=i.ua.remove(s),i.aa.delete(t),j1(i)}else yield Hy(i.localStore,t,!1).then(()=>Ky(i,t,e)).catch(xg)}),N1.apply(this,arguments)}function UU(n,t){return F1.apply(this,arguments)}function F1(){return F1=(0,Ie.Z)(function*(n,t){const e=Ze(n),i=t.batch.batchId;try{const r=yield YB(e.localStore,t);U1(e,i,null),B1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield gd(e,r)}catch(r){yield xg(r)}}),F1.apply(this,arguments)}function HU(n,t,e){return L1.apply(this,arguments)}function L1(){return L1=(0,Ie.Z)(function*(n,t,e){const i=Ze(n);try{const r=yield function(s,u){const h=Ze(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.Bs.lookupMutationBatch(p,u).next(E=>(Mt(null!==E),y=E.keys(),h.Bs.removeMutationBatch(p,E))).next(()=>h.Bs.performConsistencyCheck(p)).next(()=>h.fi.Ks(p,y))})}(i.localStore,t);U1(i,t,e),B1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield gd(i,r)}catch(r){yield xg(r)}}),L1.apply(this,arguments)}function V1(){return V1=(0,Ie.Z)(function*(n,t){const e=Ze(n);uf(e.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const u=Ze(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.Bs.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===i)return void t.resolve();const r=e.la.get(i)||[];r.push(t),e.la.set(i,r)}catch(i){const r=$y(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),V1.apply(this,arguments)}function B1(n,t){(n.la.get(t)||[]).forEach(e=>{e.resolve()}),n.la.delete(t)}function U1(n,t,e){const i=Ze(n);let r=i.ha[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.ha[i.currentUser.toKey()]=r}}function Ky(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ra.get(t))n.ia.delete(i),e&&n.sa.wa(i,e);n.ra.delete(t),n.isPrimaryClient&&n.ca.vi(t).forEach(i=>{n.ca.containsKey(i)||xP(n,i)})}function xP(n,t){n.oa.delete(t.path.canonicalString());const e=n.ua.get(t);null!==e&&(p0(n.remoteStore,e),n.ua=n.ua.remove(t),n.aa.delete(e),j1(n))}function H1(n,t,e){for(const i of e)i instanceof EP?(n.ca.addReference(i.key,t),zU(n,i)):i instanceof TP?(Ve("SyncEngine","Document no longer in limbo: "+i.key),n.ca.removeReference(i.key,t),n.ca.containsKey(i.key)||xP(n,i.key)):lt()}function zU(n,t){const e=t.key,i=e.path.canonicalString();n.ua.get(e)||n.oa.has(i)||(Ve("SyncEngine","New document in limbo: "+e),n.oa.add(i),j1(n))}function j1(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const t=n.oa.values().next().value;n.oa.delete(t);const e=new ze(sn.fromString(t)),i=n.fa.next();n.aa.set(i,new PU(e)),n.ua=n.ua.insert(e,i),zI(n.remoteStore,new of(bo(nf(e.path)),i,2,wo.A))}}function gd(n,t,e){return z1.apply(this,arguments)}function z1(){return z1=(0,Ie.Z)(function*(n,t,e){const i=Ze(n),r=[],s=[],u=[];var h;i.ia.isEmpty()||(i.ia.forEach((h,p)=>{u.push(i._a(p,t,e).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),r.push(y);const E=WA.Ys(p.targetId,y);s.push(E)}}))}),yield Promise.all(u),i.sa.zo(r),yield(h=(0,Ie.Z)(function*(p,y){const E=Ze(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>me.forEach(y,M=>me.forEach(M.Hs,P=>E.persistence.referenceDelegate.addReference(I,M.targetId,P)).next(()=>me.forEach(M.Js,P=>E.persistence.referenceDelegate.removeReference(I,M.targetId,P)))))}catch(I){if(!wg(I))throw I;Ve("LocalStore","Failed to update sequence numbers: "+I)}for(const I of y){const M=I.targetId;if(!I.fromCache){const P=E.ui.get(M),Q=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);E.ui=E.ui.insert(M,Q)}}}),function(p,y){return h.apply(this,arguments)})(i.localStore,s))}),z1.apply(this,arguments)}function GU(n,t){return G1.apply(this,arguments)}function G1(){return G1=(0,Ie.Z)(function*(n,t){const e=Ze(n);if(!e.currentUser.isEqual(t)){Ve("SyncEngine","User change. New user:",t.toKey());const i=yield nP(e.localStore,t);e.currentUser=t,(r=e).la.forEach(u=>{u.forEach(h=>{h.reject(new Ne(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.la.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield gd(e,i.di)}var r}),G1.apply(this,arguments)}function $U(n,t){const e=Ze(n),i=e.aa.get(t);if(i&&i.na)return En().add(i.key);{let r=En();const s=e.ra.get(t);if(!s)return r;for(const u of s){const h=e.ia.get(u);r=r.unionWith(h.view.ju)}return r}}function WU(n,t){return $1.apply(this,arguments)}function $1(){return $1=(0,Ie.Z)(function*(n,t){const e=Ze(n),i=yield BI(e.localStore,t.query,!0),r=t.view.ta(i);return e.isPrimaryClient&&H1(e,t.targetId,r.Xu),r}),$1.apply(this,arguments)}function qU(n,t){return W1.apply(this,arguments)}function W1(){return W1=(0,Ie.Z)(function*(n,t){const e=Ze(n);return oP(e.localStore,t).then(i=>gd(e,i))}),W1.apply(this,arguments)}function KU(n,t,e,i){return q1.apply(this,arguments)}function q1(){return q1=(0,Ie.Z)(function*(n,t,e,i){const r=Ze(n),s=yield function(u,h){const p=Ze(u),y=Ze(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.fn(E,h).next(I=>I?p.fi.Ks(E,I):me.resolve(null)))}(r.localStore,t);var h;null!==s?("pending"===e?yield zy(r.remoteStore):"acknowledged"===e||"rejected"===e?(U1(r,t,i||null),B1(r,t),h=t,Ze(Ze(r.localStore).Bs)._n(h)):lt(),yield gd(r,s)):Ve("SyncEngine","Cannot apply mutation batch with id: "+t)}),q1.apply(this,arguments)}function K1(){return K1=(0,Ie.Z)(function*(n,t){const e=Ze(n);if(J1(e),X1(e),!0===t&&!0!==e.da){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield AP(e,i.toArray());e.da=!0,yield w1(e.remoteStore,!0);for(const s of r)zI(e.remoteStore,s)}else if(!1===t&&!1!==e.da){const i=[];let r=Promise.resolve();e.ra.forEach((s,u)=>{e.sharedClientState.isLocalQueryTarget(u)?i.push(u):r=r.then(()=>(Ky(e,u),Hy(e.localStore,u,!0))),p0(e.remoteStore,u)}),yield r,yield AP(e,i),function(s){const u=Ze(s);u.aa.forEach((h,p)=>{p0(u.remoteStore,p)}),u.ca.Si(),u.aa=new Map,u.ua=new Ti(ze.comparator)}(e),e.da=!1,yield w1(e.remoteStore,!1)}}),K1.apply(this,arguments)}function AP(n,t,e){return Z1.apply(this,arguments)}function Z1(){return Z1=(0,Ie.Z)(function*(n,t,e){const i=Ze(n),r=[],s=[];for(const u of t){let h;const p=i.ra.get(u);if(p&&0!==p.length){h=yield Uy(i.localStore,bo(p[0]));for(const y of p){const E=i.ia.get(y),I=yield WU(i,E);I.snapshot&&s.push(I.snapshot)}}else{const y=yield sP(i.localStore,u);h=yield Uy(i.localStore,y),yield M1(i,MP(y),u,!1)}r.push(h)}return i.sa.zo(s),r}),Z1.apply(this,arguments)}function MP(n){return EI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function YU(n){const t=Ze(n);return Ze(Ze(t.localStore).persistence).Fs()}function QU(n,t,e,i){return Y1.apply(this,arguments)}function Y1(){return Y1=(0,Ie.Z)(function*(n,t,e,i){const r=Ze(n);if(r.da)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const s=r.ra.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const u=yield oP(r.localStore,TI(s[0])),h=Qb.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield gd(r,u,h);break}case"rejected":yield Hy(r.localStore,t,!0),Ky(r,t,i);break;default:lt()}}),Y1.apply(this,arguments)}function JU(n,t,e){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,Ie.Z)(function*(n,t,e){const i=J1(n);if(i.da){for(const r of t){if(i.ra.has(r)){Ve("SyncEngine","Adding an already active target "+r);continue}const s=yield sP(i.localStore,r),u=yield Uy(i.localStore,s);yield M1(i,MP(s),u.targetId,!1),zI(i.remoteStore,u)}for(const r of e)i.ra.has(r)&&(yield Hy(i.localStore,r,!1).then(()=>{p0(i.remoteStore,r),Ky(i,r)}).catch(xg))}}),Q1.apply(this,arguments)}function J1(n){const t=Ze(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=SP.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$U.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=BU.bind(null,t),t.sa.zo=AU.bind(null,t.eventManager),t.sa.wa=MU.bind(null,t.eventManager),t}function X1(n){const t=Ze(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UU.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=HU.bind(null,t),t}class kP{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ie.Z)(function*(){e.M=h0(t.databaseInfo.databaseId),e.sharedClientState=e.ga(t),e.persistence=e.ya(t),yield e.persistence.start(),e.gcScheduler=e.pa(t),e.localStore=e.Ia(t)})()}pa(t){return null}Ia(t){return tP(this.persistence,new eP,t.initialUser,this.M)}ya(t){return new aU(JA.Yi,this.M)}ga(t){return new cP}terminate(){var t=this;return(0,Ie.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class RP extends kP{constructor(t,e,i){super(),this.Ta=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield e().call(i,t),yield i.Ta.initialize(i,t),yield X1(i.Ta.syncEngine),yield zy(i.Ta.remoteStore),yield i.persistence.Ts(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Ia(t){return tP(this.persistence,new eP,t.initialUser,this.M)}pa(t){return new jB(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}ya(t){const e=$A(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Co.withCacheSize(this.cacheSizeBytes):Co.DEFAULT;return new GA(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,hP(),jI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(t){return new cP}}class eH extends RP{constructor(t,e){super(t,e,!1),this.Ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield e().call(i,t);const r=i.Ta.syncEngine;i.sharedClientState instanceof n1&&(i.sharedClientState.syncEngine={$r:KU.bind(null,r),Br:QU.bind(null,r),Lr:JU.bind(null,r),Fs:YU.bind(null,r),Fr:qU.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ts(function(){var s=(0,Ie.Z)(function*(u){yield function ZU(n,t){return K1.apply(this,arguments)}(i.Ta.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):u||i.gcScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}ga(t){const e=hP();if(!n1.vt(e))throw new Ne(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=$A(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new n1(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class eM{initialize(t,e){var i=this;return(0,Ie.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>DP(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=GU.bind(null,i.syncEngine),yield w1(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new xU}createDatastore(t){const e=h0(t.databaseInfo.databaseId),i=new hU(t.databaseInfo);return new gU(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=h=>DP(this.syncEngine,h,0),u=dP.vt()?new dP:new uU,new _U(e,i,r,s,u);var e,i,r,s,u}createSyncEngine(t,e){return function(i,r,s,u,h,p,y){const E=new NU(i,r,s,u,h,p);return y&&(E.da=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Ie.Z)(function*(e){const i=Ze(e);Ve("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield jy(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function OP(n,t=10240){let e=0;return{read:()=>(0,Ie.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class $I{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ea(this.observer.next,t)}error(t){this.observer.error?this.Ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Aa(){this.muted=!0}Ea(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class tH{constructor(t,e){this.Ra=t,this.M=e,this.metadata=new Ui,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(i=>{i&&i.Mu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ra.cancel()}getMetadata(){var t=this;return(0,Ie.Z)(function*(){return t.metadata.promise})()}ma(){var t=this;return(0,Ie.Z)(function*(){return yield t.getMetadata(),t.Pa()})()}Pa(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.Va();if(null===e)return null;const i=t.ba.decode(e),r=Number(i);isNaN(r)&&t.va(`length string (${i}) is not valid number`);const s=yield t.Sa(r);return new kU(JSON.parse(s),e.length+r)})()}Da(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Va(){var t=this;return(0,Ie.Z)(function*(){for(;t.Da()<0&&!(yield t.Ca()););if(0===t.buffer.length)return null;const e=t.Da();e<0&&t.va("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Sa(t){var e=this;return(0,Ie.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ca())&&e.va("Reached the end of bundle when more is expected.");const i=e.ba.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}va(t){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${t}`)}Ca(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.Ra.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class nH{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ne(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ie.Z)(function*(s,u){const h=Ze(s),p=t0(h.M)+"/documents",y={documents:u.map(P=>e0(h.M,P))},E=yield h._o("BatchGetDocuments",p,y),I=new Map;E.forEach(P=>{const B=function nB(n,t){return"found"in t?function(e,i){Mt(!!i.found);const r=Xu(e,i.found.name),s=Nr(i.found.updateTime),u=new vr({mapValue:{fields:i.found.fields}});return Pn.newFoundDocument(r,s,u)}(n,t):"missing"in t?function(e,i){Mt(!!i.missing),Mt(!!i.readTime);const r=Xu(e,i.missing),s=Nr(i.readTime);return Pn.newNoDocument(r,s)}(n,t):lt()}(h.M,P);I.set(B.key.toString(),B)});const M=[];return u.forEach(P=>{const B=I.get(P.toString());Mt(!!B),M.push(B)}),M}),function(s,u){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Ae(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=ze.fromPath(r);t.mutations.push(new _t(s,t.precondition(s)))}),yield(i=(0,Ie.Z)(function*(r,s){const u=Ze(r),h=t0(u.M)+"/documents",p={writes:s.map(y=>n0(u.M,y))};yield u.co("Commit",h,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw lt();e=St.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ne(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?m.updateTime(e):m.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(St.min()))throw new Ne(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return m.updateTime(e)}return m.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class iH{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.xa=i.maxAttempts,this.No=new r1(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var t=this;this.No.Ro((0,Ie.Z)(function*(){const e=new nH(t.datastore),i=t.ka(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Ma(s)}))}).catch(r=>{t.Ma(r)})}))}ka(t){try{const e=this.updateFunction(t);return!ad(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ma(t){this.xa>0&&this.Oa(t)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(t)}Oa(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!Ju(e)}return!1}}class rH{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=nr.UNAUTHENTICATED,this.clientId=by.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var u=(0,Ie.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(i,u=>(Ve("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var t=this;return(0,Ie.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=$y(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function PP(n,t){return tM.apply(this,arguments)}function tM(){return tM=(0,Ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ie.Z)(function*(s){i.isEqual(s)||(yield nP(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),tM.apply(this,arguments)}function NP(n,t){return nM.apply(this,arguments)}function nM(){return nM=(0,Ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield iM(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>vP(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>vP(t.remoteStore,s)),n.onlineComponents=t}),nM.apply(this,arguments)}function iM(n){return rM.apply(this,arguments)}function rM(){return rM=(0,Ie.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield PP(n,new kP)),n.offlineComponents}),rM.apply(this,arguments)}function WI(n){return sM.apply(this,arguments)}function sM(){return sM=(0,Ie.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield NP(n,new eM)),n.onlineComponents}),sM.apply(this,arguments)}function FP(n){return iM(n).then(t=>t.persistence)}function oM(n){return iM(n).then(t=>t.localStore)}function LP(n){return WI(n).then(t=>t.remoteStore)}function aM(n){return WI(n).then(t=>t.syncEngine)}function Zy(n){return lM.apply(this,arguments)}function lM(){return lM=(0,Ie.Z)(function*(n){const t=yield WI(n),e=t.eventManager;return e.onListen=FU.bind(null,t.syncEngine),e.onUnlisten=LU.bind(null,t.syncEngine),e}),lM.apply(this,arguments)}function VP(n,t,e={}){const i=new Ui;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,s,u,h,p){const y=new $I({next:I=>{s.enqueueAndForget(()=>I1(r,E));const M=I.docs.has(u);!M&&I.fromCache?p.reject(new Ne(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&I.fromCache&&h&&"server"===h.source?p.reject(new Ne(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),E=new x1(nf(u.path),y,{includeMetadataChanges:!0,ku:!0});return E1(r,E)}(yield Zy(n),n.asyncQueue,t,e,i)})),i.promise}function BP(n,t,e={}){const i=new Ui;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,s,u,h,p){const y=new $I({next:I=>{s.enqueueAndForget(()=>I1(r,E)),I.fromCache&&"server"===h.source?p.reject(new Ne(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),E=new x1(u,y,{includeMetadataChanges:!0,ku:!0});return E1(r,E)}(yield Zy(n),n.asyncQueue,t,e,i)})),i.promise}const UP=new Map;function uM(n,t,e){if(!e)throw new Ne(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function HP(n,t,e,i){if(!0===t&&!0===i)throw new Ne(fe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function jP(n){if(!ze.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zP(n){if(ze.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":lt()}function un(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ne(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qI(n);throw new Ne(fe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function GP(n,t){if(t<=0)throw new Ne(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class $P{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ne(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ne(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,HP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class g0{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $P({}),this._settingsFrozen=!1,t instanceof Sl?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Ne(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(r.options.projectId)}(t))}get app(){if(!this._app)throw new Ne(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ne(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $P(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new YR;switch(e.type){case"gapi":const i=e.client;return Mt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new eO(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ne(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=UP.get(t);e&&(Ve("ComponentProvider","Removing Datastore"),UP.delete(t),e.terminate())}(this),Promise.resolve()}}class Zn{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Zn(this.firestore,t,this._key)}}class Es{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Es(this.firestore,t,this._query)}}class tc extends Es{constructor(t,e,i){super(t,e,nf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Zn(this.firestore,null,new ze(t))}withConverter(t){return new tc(this.firestore,t,this._path)}}function WP(n,t,...e){if(n=(0,F.m9)(n),uM("collection","path",t),n instanceof g0){const i=sn.fromString(t,...e);return zP(i),new tc(n,null,i)}{if(!(n instanceof Zn||n instanceof tc))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(sn.fromString(t,...e));return zP(i),new tc(n.firestore,null,i)}}function KI(n,t,...e){if(n=(0,F.m9)(n),1===arguments.length&&(t=by.R()),uM("doc","path",t),n instanceof g0){const i=sn.fromString(t,...e);return jP(i),new Zn(n,null,new ze(i))}{if(!(n instanceof Zn||n instanceof tc))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(sn.fromString(t,...e));return jP(i),new Zn(n.firestore,n instanceof tc?n.converter:null,new ze(i))}}function qP(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),(n instanceof Zn||n instanceof tc)&&(t instanceof Zn||t instanceof tc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function KP(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),n instanceof Es&&t instanceof Es&&n.firestore===t.firestore&&hd(n._query,t._query)&&n.converter===t.converter}class gH{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new r1(this,"async_queue_retry"),this.Qa=()=>{const e=jI();e&&Ve("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const t=jI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ja(),this.Wa(t)}enterRestrictedMode(t){if(!this.Ba){this.Ba=!0,this.Ka=t||!1;const e=jI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Qa)}}enqueue(t){if(this.ja(),this.Ba)return new Promise(()=>{});const e=new Ui;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.$a.push(t),this.za()))}za(){var t=this;return(0,Ie.Z)(function*(){if(0!==t.$a.length){try{yield t.$a[0](),t.$a.shift(),t.No.reset()}catch(e){if(!wg(e))throw e;Ve("AsyncQueue","Operation failed with retryable error: "+e)}t.$a.length>0&&t.No.Ro(()=>t.za())}})()}Wa(t){const e=this.Fa.then(()=>(this.qa=!0,t().catch(i=>{throw this.Ua=i,this.qa=!1,ci("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(i)),i}).then(i=>(this.qa=!1,i))));return this.Fa=e,e}enqueueAfterDelay(t,e,i){this.ja(),this.Ga.indexOf(t)>-1&&(e=0);const r=C1.createAndSchedule(this,t,e,i,s=>this.Ha(s));return this.La.push(r),r}ja(){this.Ua&&lt()}verifyOperationInProgress(){}Ja(){var t=this;return(0,Ie.Z)(function*(){let e;do{e=t.Fa,yield e}while(e!==t.Fa)})()}Ya(t){for(const e of this.La)if(e.timerId===t)return!0;return!1}Xa(t){return this.Ja().then(()=>{this.La.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.La)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Ja()})}Za(t){this.Ga.push(t)}Ha(t){const e=this.La.indexOf(t);this.La.splice(e,1)}}function cM(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class mH{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class si extends g0{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new gH,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ZP(this),this._firestoreClient.terminate()}}function or(n){return n._firestoreClient||ZP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ZP(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new ra(n._databaseId,s,n._persistenceKey,(h=e).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new rH(n._authCredentials,n._appCheckCredentials,n._queue,i)}function YP(n,t,e){const i=new Ui;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield PP(n,e),yield NP(n,t),i.resolve()}catch(r){if(!("FirebaseError"===(s=r).name?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var s})).then(()=>i.promise)}function QP(n){if(n._initialized||n._terminated)throw new Ne(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class md{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ne(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class nc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nc(ir.fromBase64String(t))}catch(e){throw new Ne(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new nc(ir.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Mg{constructor(t){this._methodName=t}}class ZI{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ne(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ne(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ut(this._lat,t._lat)||Ut(this._long,t._long)}}const SH=/^__.*__$/;class DH{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new ye(t,this.data,this.fieldMask,e,this.fieldTransforms):new X(t,this.data,e,this.fieldTransforms)}}class JP{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ye(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function XP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class YI{constructor(t,e,i,r,s,u){this.settings=t,this.databaseId=e,this.M=i,this.ignoreUndefinedProperties=r,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(t){return new YI(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.nc({path:i,ic:!1});return r.rc(t),r}oc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.nc({path:i,ic:!1});return r.tc(),r}uc(t){return this.nc({path:void 0,ic:!0})}ac(t){return XI(t,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}tc(){if(this.path)for(let t=0;t<this.path.length;t++)this.rc(this.path.get(t))}rc(t){if(0===t.length)throw this.ac("Document fields must not be empty");if(XP(this.ec)&&SH.test(t))throw this.ac('Document fields cannot begin and end with "__"')}}class xH{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=i||h0(t)}lc(t,e,i,r=!1){return new YI({ec:t,methodName:e,hc:i,path:Hi.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function kg(n){const t=n._freezeSettings(),e=h0(n._databaseId);return new xH(n._databaseId,!!t.ignoreUndefinedProperties,e)}function QI(n,t,e,i,r,s={}){const u=n.lc(s.merge||s.mergeFields?2:0,t,e,r);pM("Data must be an object, but it was:",u,i);const h=nN(i,u);let p,y;if(s.merge)p=new rg(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const E=[];for(const I of s.mergeFields){const M=gM(t,I,e);if(!u.contains(M))throw new Ne(fe.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);rN(E,M)||E.push(M)}p=new rg(E),y=u.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,y=u.fieldTransforms;return new DH(new vr(h),p,y)}class m0 extends Mg{_toFieldTransform(t){if(2!==t.ec)throw t.ac(1===t.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof m0}}function eN(n,t,e){return new YI({ec:3,hc:t.settings.hc,methodName:n._methodName,ic:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class dM extends Mg{_toFieldTransform(t){return new c(t.path,new _g)}isEqual(t){return t instanceof dM}}class AH extends Mg{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=eN(this,t,!0),i=this.fc.map(s=>Rg(s,e)),r=new fd(i);return new c(t.path,r)}isEqual(t){return this===t}}class MH extends Mg{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=eN(this,t,!0),i=this.fc.map(s=>Rg(s,e)),r=new sf(i);return new c(t.path,r)}isEqual(t){return this===t}}class kH extends Mg{constructor(t,e){super(t),this.dc=e}_toFieldTransform(t){const e=new yg(t.M,DI(t.M,this.dc));return new c(t.path,e)}isEqual(t){return this===t}}function hM(n,t,e,i){const r=n.lc(1,t,e);pM("Data must be an object, but it was:",r,i);const s=[],u=vr.empty();qu(i,(p,y)=>{const E=JI(t,p,e);y=(0,F.m9)(y);const I=r.oc(E);if(y instanceof m0)s.push(E);else{const M=Rg(y,I);null!=M&&(s.push(E),u.set(E,M))}});const h=new rg(s);return new JP(u,h,r.fieldTransforms)}function fM(n,t,e,i,r,s){const u=n.lc(1,t,e),h=[gM(t,i,e)],p=[r];if(s.length%2!=0)throw new Ne(fe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)h.push(gM(t,s[M])),p.push(s[M+1]);const y=[],E=vr.empty();for(let M=h.length-1;M>=0;--M)if(!rN(y,h[M])){const P=h[M];let B=p[M];B=(0,F.m9)(B);const Q=u.oc(P);if(B instanceof m0)y.push(P);else{const be=Rg(B,Q);null!=be&&(y.push(P),E.set(P,be))}}const I=new rg(y);return new JP(E,I,u.fieldTransforms)}function tN(n,t,e,i=!1){return Rg(e,n.lc(i?4:3,t))}function Rg(n,t){if(iN(n=(0,F.m9)(n)))return pM("Unsupported field value:",t,n),nN(n,t);if(n instanceof Mg)return function(e,i){if(!XP(i.ec))throw i.ac(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ac(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const u of e){let h=Rg(u,i.uc(s));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,F.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return DI(i.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Kn.fromDate(e);return{timestampValue:Xb(i.M,r)}}if(e instanceof Kn){const r=new Kn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xb(i.M,r)}}if(e instanceof ZI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof nc)return{bytesValue:pO(i.M,e._byteString)};if(e instanceof Zn){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:MA(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ac(`Unsupported field value: ${qI(e)}`)}(n,t)}function nN(n,t){const e={};return gA(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qu(n,(i,r)=>{const s=Rg(r,t.sc(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function iN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof ZI||n instanceof nc||n instanceof Zn||n instanceof Mg)}function pM(n,t,e){if(!iN(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=qI(e);throw t.ac("an object"===i?n+" a custom object":n+" "+i)}var i}function gM(n,t,e){if((t=(0,F.m9)(t))instanceof md)return t._internalPath;if("string"==typeof t)return JI(n,t);throw XI("Field path arguments must be of type string or ",n,!1,void 0,e)}const RH=new RegExp("[~\\*/\\[\\]]");function JI(n,t,e){if(t.search(RH)>=0)throw XI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new md(...t.split("."))._internalPath}catch(i){throw XI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function XI(n,t,e,i,r){const s=i&&!i.isEmpty(),u=void 0!==r;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${i}`),u&&(p+=` in document ${r}`),p+=")"),new Ne(fe.INVALID_ARGUMENT,h+n+p)}function rN(n,t){return n.some(e=>e.isEqual(t))}class _0{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new OH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(eS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class OH extends _0{data(){return super.data()}}function eS(n,t){return"string"==typeof t?JI(n,t):t instanceof md?t._internalPath:t._delegate._internalPath}class Og{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _d extends _0{constructor(t,e,i,r,s,u){super(t,e,i,r,u),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(eS("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class y0 extends _d{data(t={}){return super.data(t)}}class df{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Og(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new y0(this._firestore,this._userDataWriter,i.key,i,new Og(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ne(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(u=>({type:"added",doc:new y0(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Og(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||3!==u.type).map(u=>{const h=new y0(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Og(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:PH(u.type),doc:h,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function PH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function sN(n,t){return n instanceof _d&&t instanceof _d?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof df&&t instanceof df&&n._firestore===t._firestore&&KP(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function oN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class v0{}function hf(n,...t){for(const e of t)n=e._apply(n);return n}class NH extends v0{constructor(t,e,i){super(),this._c=t,this.wc=e,this.mc=i,this.type="where"}_apply(t){const e=kg(t.firestore),i=function(r,s,u,h,p,y,E){let I;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){hN(E,y);const P=[];for(const B of E)P.push(dN(h,r,B));I={arrayValue:{values:P}}}else I=dN(h,r,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||hN(E,y),I=tN(u,"where",E,"in"===y||"not-in"===y);const M=sr.create(p,y,I);return function(P,B){if(B.S()){const be=ky(P);if(null!==be&&!be.isEqual(B.field))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${B.field.toString()}'`);const et=My(P);null!==et&&fN(0,B.field,et)}const Q=function(be,et){for(const nt of be.filters)if(et.indexOf(nt.op)>=0)return nt.op;return null}(P,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==Q)throw new Ne(fe.INVALID_ARGUMENT,Q===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${Q.toString()}' filters.`)}(r,M),M}(t._query,0,e,t.firestore._databaseId,this._c,this.wc,this.mc);return new Es(t.firestore,t.converter,function(r,s){const u=r.filters.concat([s]);return new Ml(r.path,r.collectionGroup,r.explicitOrderBy.slice(),u,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class LH extends v0{constructor(t,e){super(),this._c=t,this.gc=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new gg(r,s);return function(h,p){if(null===My(h)){const y=ky(h);null!==y&&fN(0,y,p.field)}}(i,u),u}(t._query,this._c,this.gc);return new Es(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Ml(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class aN extends v0{constructor(t,e,i){super(),this.type=t,this.yc=e,this.Ic=i}_apply(t){return new Es(t.firestore,t.converter,$b(t._query,this.yc,this.Ic))}}class lN extends v0{constructor(t,e,i){super(),this.type=t,this.Tc=e,this.Ec=i}_apply(t){const e=cN(t,this.type,this.Tc,this.Ec);return new Es(t.firestore,t.converter,(r=e,new Ml((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class uN extends v0{constructor(t,e,i){super(),this.type=t,this.Tc=e,this.Ec=i}_apply(t){const e=cN(t,this.type,this.Tc,this.Ec);return new Es(t.firestore,t.converter,(r=e,new Ml((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function cN(n,t,e,i){if(e[0]=(0,F.m9)(e[0]),e[0]instanceof _0)return function(r,s,u,h,p){if(!h)throw new Ne(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const E of rf(r))if(E.field.isKeyField())y.push(Qu(s,h.key));else{const I=h.data.field(E.field);if(Lb(I))throw new Ne(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const M=E.field.canonicalString();throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(I)}return new dd(y,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=kg(n.firestore);return function(s,u,h,p,y,E){const I=s.explicitOrderBy;if(y.length>I.length)throw new Ne(fe.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let P=0;P<y.length;P++){const B=y[P];if(I[P].field.isKeyField()){if("string"!=typeof B)throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!Ry(s)&&-1!==B.indexOf("/"))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const Q=s.path.child(sn.fromString(B));if(!ze.isDocumentKey(Q))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const be=new ze(Q);M.push(Qu(u,be))}else{const Q=tN(h,p,B);M.push(Q)}}return new dd(M,E)}(n._query,n.firestore._databaseId,r,t,e,i)}}function dN(n,t,e){if("string"==typeof(e=(0,F.m9)(e))){if(""===e)throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ry(t)&&-1!==e.indexOf("/"))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(sn.fromString(e));if(!ze.isDocumentKey(i))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Qu(n,new ze(i))}if(e instanceof Zn)return Qu(n,e._key);throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qI(e)}.`)}function hN(n,t){if(!Array.isArray(n)||0===n.length)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function fN(n,t,e){if(!e.isEqual(t))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const $H={maxAttempts:5};class mM{convertValue(t,e="none"){switch(ld(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ri(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Xh(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw lt()}}convertObject(t,e){const i={};return qu(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new ZI(ri(t.latitude),ri(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Cy(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(sg(t));default:return null}}convertTimestamp(t){const e=Ku(t);return new Kn(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=sn.fromString(t);Mt(TO(i));const r=new Sl(i.get(1),i.get(3)),s=new ze(i.popFirst(5));return r.isEqual(e)||ci(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function tS(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class WH extends mM{constructor(t){super(),this.firestore=t}convertBytes(t){return new nc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zn(this.firestore,null,e)}}class pN{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=kg(t)}set(t,e,i){this._verifyNotCommitted();const r=ff(t,this._firestore),s=tS(r.converter,e,i),u=QI(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(u.toMutation(r._key,m.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=ff(t,this._firestore);let u;return u="string"==typeof(e=(0,F.m9)(e))||e instanceof md?fM(this._dataReader,"WriteBatch.update",s._key,e,i,r):hM(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(u.toMutation(s._key,m.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=ff(t,this._firestore);return this._mutations=this._mutations.concat(new Ae(e._key,m.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ff(n,t){if((n=(0,F.m9)(n)).firestore!==t)throw new Ne(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pg extends mM{constructor(t){super(),this.firestore=t}convertBytes(t){return new nc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zn(this.firestore,null,e)}}function gN(n,t,e){n=un(n,Zn);const i=un(n.firestore,si),r=tS(n.converter,t,e);return Yy(i,[QI(kg(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,m.none())])}function mN(n,t,e,...i){n=un(n,Zn);const r=un(n.firestore,si),s=kg(r);let u;return u="string"==typeof(t=(0,F.m9)(t))||t instanceof md?fM(s,"updateDoc",n._key,t,e,i):hM(s,"updateDoc",n._key,t),Yy(r,[u.toMutation(n._key,m.exists(!0))])}function _N(n,...t){var e,i,r;n=(0,F.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof t[u]||cM(t[u])||(s=t[u],u++);const h={includeMetadataChanges:s.includeMetadataChanges};if(cM(t[u])){const I=t[u];t[u]=null===(e=I.next)||void 0===e?void 0:e.bind(I),t[u+1]=null===(i=I.error)||void 0===i?void 0:i.bind(I),t[u+2]=null===(r=I.complete)||void 0===r?void 0:r.bind(I)}let p,y,E;if(n instanceof Zn)y=un(n.firestore,si),E=nf(n._key.path),p={next:I=>{t[u]&&t[u](_M(y,n,I))},error:t[u+1],complete:t[u+2]};else{const I=un(n,Es);y=un(I.firestore,si),E=I._query;const M=new Pg(y);p={next:P=>{t[u]&&t[u](new df(y,M,I,P))},error:t[u+1],complete:t[u+2]},oN(n._query)}return function(I,M,P,B){const Q=new $I(B),be=new x1(M,Q,P);return I.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return E1(yield Zy(I),be)})),()=>{Q.Aa(),I.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return I1(yield Zy(I),be)}))}}(or(y),E,h,p)}function Yy(n,t){return function(e,i){const r=new Ui;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function VU(n,t,e){return O1.apply(this,arguments)}(yield aM(e),i,r)})),r.promise}(or(n),t)}function _M(n,t,e){const i=e.docs.get(t._key),r=new Pg(n);return new _d(n,r,t._key,i,new Og(e.hasPendingWrites,e.fromCache),t.converter)}class n3 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=kg(t)}get(t){const e=ff(t,this._firestore),i=new WH(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return lt();const s=r[0];if(s.isFoundDocument())return new _0(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new _0(this._firestore,i,e._key,null,e.converter);throw lt()})}set(t,e,i){const r=ff(t,this._firestore),s=tS(r.converter,e,i),u=QI(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,u),this}update(t,e,i,...r){const s=ff(t,this._firestore);let u;return u="string"==typeof(e=(0,F.m9)(e))||e instanceof md?fM(this._dataReader,"Transaction.update",s._key,e,i,r):hM(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,u),this}delete(t){const e=ff(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=ff(t,this._firestore),i=new Pg(this._firestore);return super.get(t).then(r=>new _d(this._firestore,i,e._key,r._document,new Og(!1,!1),e.converter))}}function yM(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function vN(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function wN(){if(!function nO(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Jh=_o.SDK_VERSION,(0,_o._registerComponent)(new bl.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),s=new si(r,new JR(e.getProvider("auth-internal")),new tO(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),(0,_o.registerVersion)(Pb,"3.4.9",n),(0,_o.registerVersion)(Pb,"3.4.9","esm2017")}();class w0{constructor(t){this._delegate=t}static fromBase64String(t){return wN(),new w0(nc.fromBase64String(t))}static fromUint8Array(t){return vN(),new w0(nc.fromUint8Array(t))}toBase64(){return wN(),this._delegate.toBase64()}toUint8Array(){return vN(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vM(n){return function d3(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class h3{enableIndexedDbPersistence(t,e){return function yH(n,t){QP(n=un(n,si));const e=or(n),i=n._freezeSettings(),r=new eM;return YP(e,r,new RP(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function vH(n){QP(n=un(n,si));const t=or(n),e=n._freezeSettings(),i=new eM;return YP(t,i,new eH(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function wH(n){if(n._initialized&&!n._terminated)throw new Ne(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ui;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(e=(0,Ie.Z)(function*(i){if(!kl.vt())return Promise.resolve();const r=i+"main";yield kl.delete(r)}),function(i){return e.apply(this,arguments)})($A(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class bN{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Sl||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&ng("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function fH(n,t,e,i={}){var r;const s=(n=un(n,g0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&ng("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let u,h;if("string"==typeof i.mockUserToken)u=i.mockUserToken,h=nr.MOCK_USER;else{u=(0,F.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Ne(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new nr(p)}n._authCredentials=new QR(new hA(u,h))}}(this._delegate,t,e,i)}enableNetwork(){return function CH(n){return function sH(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const t=yield FP(n),e=yield LP(n);return t.setNetworkEnabled(!0),function(i){const r=Ze(i);return r.wu.delete(0),f0(r)}(e)}))}(or(n=un(n,si)))}(this._delegate)}disableNetwork(){return function EH(n){return function oH(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const t=yield FP(n),e=yield LP(n);return t.setNetworkEnabled(!1),(i=(0,Ie.Z)(function*(r){const s=Ze(r);s.wu.add(0),yield jy(s),s.yu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(or(n=un(n,si)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,HP("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function bH(n){return function(t){const e=new Ui;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function jU(n,t){return V1.apply(this,arguments)}(yield aM(t),e)})),e.promise}(or(n=un(n,si)))}(this._delegate)}onSnapshotsInSync(t){return function t3(n,t){return function uH(n,t){const e=new $I(t);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield Zy(n),r=e,Ze(i).bu.add(r),void r.next();var i,r})),()=>{e.Aa(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield Zy(n),r=e,void Ze(i).bu.delete(r);var i,r}))}}(or(n=un(n,si)),cM(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Qy(this,WP(this._delegate,t))}catch(e){throw Gs(e,"collection()","Firestore.collection()")}}doc(t){try{return new Ga(this,KI(this._delegate,t))}catch(e){throw Gs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new $s(this,function pH(n,t){if(n=un(n,g0),uM("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Es(n,null,(e=t,new Ml(sn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Gs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function i3(n,t,e){n=un(n,si);const i=Object.assign(Object.assign({},$H),e);return function(r){if(r.maxAttempts<1)throw new Ne(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function cH(n,t,e){const i=new Ui;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const r=yield(s=n,WI(s).then(u=>u.datastore));var s;new iH(n.asyncQueue,r,e,t,i).run()})),i.promise}(or(n),r=>t(new n3(n,r)),i)}(this._delegate,e=>t(new CN(this,e)))}batch(){return or(this._delegate),new EN(new pN(this._delegate,t=>Yy(this._delegate,t)))}loadBundle(t){return function TH(n,t){const e=or(n=un(n,si)),i=new mH;return function dH(n,t,e,i){const r=function(s,u){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return OP(p,y);if(p instanceof ArrayBuffer)return OP(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new tH(p,u);var p}(e,h0(t));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function XU(n,t,e){const i=Ze(n);var r;(r=(0,Ie.Z)(function*(s,u,h){try{const p=yield u.getMetadata();if(yield function(M,P){const B=Ze(M),Q=Nr(P.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",be=>B._s.getBundleMetadata(be,P.id)).then(be=>!!be&&be.createTime.compareTo(Q)>=0)}(s.localStore,p))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);h._updateProgress(CP(p));const y=new RU(p,s.localStore,u.M);let E=yield u.ma();for(;E;){const M=yield y.Fu(E);M&&h._updateProgress(M),E=yield u.ma()}const I=yield y.complete();return yield gd(s,I.Lu,void 0),yield function(M,P){const B=Ze(M);return B.persistence.runTransaction("Save bundle","readwrite",Q=>B._s.saveBundleMetadata(Q,P))}(s.localStore,p),h._completeWith(I.progress),Promise.resolve(I.Bu)}catch(p){return ng("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var M}),function(s,u,h){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield aM(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function IH(n,t){return function hH(n,t){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(e,i){const r=Ze(e);return r.persistence.runTransaction("Get named query","readonly",s=>r._s.getNamedQuery(s,i))}(yield oM(n),t)}))}(or(n=un(n,si)),t).then(e=>e?new Es(n,null,e.query):null)}(this._delegate,t).then(e=>e?new $s(this,e):null)}}class nS extends mM{constructor(t){super(),this.firestore=t}convertBytes(t){return new w0(new nc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Ga.forKey(e,this.firestore,null)}}class CN{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new nS(t)}get(t){const e=Fg(t);return this._delegate.get(e).then(i=>new b0(this._firestore,new _d(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Fg(t);return i?(yM("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Fg(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Fg(t);return this._delegate.delete(e),this}}class EN{constructor(t){this._delegate=t}set(t,e,i){const r=Fg(t);return i?(yM("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Fg(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Fg(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Ng{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new y0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new C0(this._firestore,i),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Ng.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Ng(t,new nS(t),e),r.set(e,s)),s}}Ng.INSTANCES=new WeakMap;class Ga{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new nS(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ga(e,new Zn(e._delegate,i,new ze(t)))}static forKey(t,e,i){return new Ga(e,new Zn(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Qy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Qy(this.firestore,WP(this._delegate,t))}catch(e){throw Gs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,F.m9)(t))instanceof Zn&&qP(this._delegate,t)}set(t,e){e=yM("DocumentReference.set",e);try{return e?gN(this._delegate,t,e):gN(this._delegate,t)}catch(i){throw Gs(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?mN(this._delegate,t):mN(this._delegate,t,e,...i)}catch(r){throw Gs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function XH(n){return Yy(un(n.firestore,si),[new Ae(n._key,m.none())])}(this._delegate)}onSnapshot(...t){const e=TN(t),i=IN(t,r=>new b0(this.firestore,new _d(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return _N(this._delegate,e,i)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function KH(n){n=un(n,Zn);const t=un(n.firestore,si),e=or(t),i=new Pg(t);return function aH(n,t){const e=new Ui;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,s,u){try{const h=yield function(p,y){const E=Ze(p);return E.persistence.runTransaction("read document","readonly",I=>E.fi.Ls(I,y))}(r,s);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Ne(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=$y(h,`Failed to get document '${s} from cache`);u.reject(p)}}),function(r,s,u){return i.apply(this,arguments)})(yield oM(n),t,e);var i})),e.promise}(e,n._key).then(r=>new _d(t,i,n._key,r,new Og(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function ZH(n){n=un(n,Zn);const t=un(n.firestore,si);return VP(or(t),n._key,{source:"server"}).then(e=>_M(t,n,e))}(this._delegate):function qH(n){n=un(n,Zn);const t=un(n.firestore,si);return VP(or(t),n._key).then(e=>_M(t,n,e))}(this._delegate),e.then(i=>new b0(this.firestore,new _d(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Ga(this.firestore,this._delegate.withConverter(t?Ng.getInstance(this.firestore,t):null))}}function Gs(n,t,e){return n.message=n.message.replace(t,e),n}function TN(n){for(const t of n)if("object"==typeof t&&!vM(t))return t;return{}}function IN(n,t){var e,i;let r;return r=vM(n[0])?n[0]:vM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class b0{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return sN(this._delegate,t._delegate)}}class C0 extends b0{data(t){const e=this._delegate.data(t);return function cI(n,t){n||lt()}(void 0!==e),e}}class $s{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new nS(t)}where(t,e,i){try{return new $s(this.firestore,hf(this._delegate,function FH(n,t,e){const i=t,r=eS("where",n);return new NH(r,i,e)}(t,e,i)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new $s(this.firestore,hf(this._delegate,function VH(n,t="asc"){const e=t,i=eS("orderBy",n);return new LH(i,e)}(t,e)))}catch(i){throw Gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new $s(this.firestore,hf(this._delegate,function BH(n){return GP("limit",n),new aN("limit",n,"F")}(t)))}catch(e){throw Gs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new $s(this.firestore,hf(this._delegate,function UH(n){return GP("limitToLast",n),new aN("limitToLast",n,"L")}(t)))}catch(e){throw Gs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new $s(this.firestore,hf(this._delegate,function HH(...n){return new lN("startAt",n,!0)}(...t)))}catch(e){throw Gs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new $s(this.firestore,hf(this._delegate,function jH(...n){return new lN("startAfter",n,!1)}(...t)))}catch(e){throw Gs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new $s(this.firestore,hf(this._delegate,function zH(...n){return new uN("endBefore",n,!1)}(...t)))}catch(e){throw Gs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new $s(this.firestore,hf(this._delegate,function GH(...n){return new uN("endAt",n,!0)}(...t)))}catch(e){throw Gs(e,"endAt()","Query.endAt()")}}isEqual(t){return KP(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function QH(n){n=un(n,Es);const t=un(n.firestore,si),e=or(t),i=new Pg(t);return function lH(n,t){const e=new Ui;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,s,u){try{const h=yield BI(r,s,!0),p=new IP(s,h._i),y=p.Wu(h.documents),E=p.applyChanges(y,!1);u.resolve(E.snapshot)}catch(h){const p=$y(h,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(r,s,u){return i.apply(this,arguments)})(yield oM(n),t,e);var i})),e.promise}(e,n._query).then(r=>new df(t,i,n,r))}(this._delegate):"server"===(null==t?void 0:t.source)?function JH(n){n=un(n,Es);const t=un(n.firestore,si),e=or(t),i=new Pg(t);return BP(e,n._query,{source:"server"}).then(r=>new df(t,i,n,r))}(this._delegate):function YH(n){n=un(n,Es);const t=un(n.firestore,si),e=or(t),i=new Pg(t);return oN(n._query),BP(e,n._query).then(r=>new df(t,i,n,r))}(this._delegate),e.then(i=>new wM(this.firestore,new df(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=TN(t),i=IN(t,r=>new wM(this.firestore,new df(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return _N(this._delegate,e,i)}withConverter(t){return new $s(this.firestore,this._delegate.withConverter(t?Ng.getInstance(this.firestore,t):null))}}class p3{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new C0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wM{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new $s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new C0(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new p3(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new C0(this._firestore,i))})}isEqual(t){return sN(this._delegate,t._delegate)}}class Qy extends $s{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ga(this.firestore,t):null}doc(t){try{return new Ga(this.firestore,void 0===t?KI(this._delegate):KI(this._delegate,t))}catch(e){throw Gs(e,"doc()","CollectionReference.doc()")}}add(t){return function e3(n,t){const e=un(n.firestore,si),i=KI(n),r=tS(n.converter,t);return Yy(e,[QI(kg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,m.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Ga(this.firestore,e))}isEqual(t){return qP(this._delegate,t._delegate)}withConverter(t){return new Qy(this.firestore,this._delegate.withConverter(t?Ng.getInstance(this.firestore,t):null))}}function Fg(n){return un(n,Zn)}class bM{constructor(...t){this._delegate=new md(...t)}static documentId(){return new bM(Hi.keyField().canonicalString())}isEqual(t){return(t=(0,F.m9)(t))instanceof md&&this._delegate._internalPath.isEqual(t._internalPath)}}class Lg{constructor(t){this._delegate=t}static serverTimestamp(){const t=function s3(){return new dM("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Lg(t)}static delete(){const t=function r3(){return new m0("deleteField")}();return t._methodName="FieldValue.delete",new Lg(t)}static arrayUnion(...t){const e=function o3(...n){return new AH("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Lg(e)}static arrayRemove(...t){const e=function a3(...n){return new MH("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Lg(e)}static increment(t){const e=function l3(n){return new kH("increment",n)}(t);return e._methodName="FieldValue.increment",new Lg(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const g3={Firestore:bN,GeoPoint:ZI,Timestamp:Kn,Blob:w0,Transaction:CN,WriteBatch:EN,DocumentReference:Ga,DocumentSnapshot:b0,Query:$s,QueryDocumentSnapshot:C0,QuerySnapshot:wM,CollectionReference:Qy,FieldPath:bM,FieldValue:Lg,setLogLevel:function f3(n){!function dA(n){Il.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function SN(n,t){return function y3(n,t=Rp.z){return new v.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=i&&i()}})}(n,t)}function CM(n,t){return SN(n,t).pipe((0,we.U)(e=>({payload:e,type:"query"})))}function iS(n,t){return CM(n,t).pipe(Uc(void 0),Op(),(0,we.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(u=>({type:u.type,payload:u}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,h)=>{const p=r.find(E=>E.doc.ref.isEqual(u.ref)),y=null==e?void 0:e.payload.docs.find(E=>E.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),s}))}function DN(n,t,e){return iS(n,e).pipe(Us((i,r)=>function w3(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function b3(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return EM(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return EM(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return EM(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),L_(),(0,we.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function EM(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function xN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function _3(n){(function m3(n,t){n.INTERNAL.registerComponent(new bl.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},g3)))})(n,(t,e)=>new bN(t,e,new h3)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(aT.Z);class AN{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=iS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,we.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Uc(void 0),Op(),Zo(([i,r])=>r.length>0||!i),(0,we.U)(([i,r])=>r),_n.iC)}auditTrail(t){return this.stateChanges(t).pipe(Us((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=xN(t);return DN(this.query,e,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(t={}){return CM(this.query,this.afs.schedulers.outsideAngular).pipe((0,we.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),_n.iC)}get(t){return(0,xn.D)(this.query.get(t)).pipe(_n.iC)}add(t){return this.ref.add(t)}doc(t){return new MN(this.ref.doc(t),this.afs)}}class MN{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=ON(i,e);return new AN(r,s,this.afs)}snapshotChanges(){return function v3(n,t){return SN(n,t).pipe(Uc(void 0),Op(),(0,we.U)(([e,i])=>i.exists?(null==e?void 0:e.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,we.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,xn.D)(this.ref.get(t)).pipe(_n.iC)}}class C3{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?iS(this.query,this.afs.schedulers.outsideAngular).pipe((0,we.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Zo(e=>e.length>0),_n.iC):iS(this.query,this.afs.schedulers.outsideAngular).pipe(_n.iC)}auditTrail(t){return this.stateChanges(t).pipe(Us((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=xN(t);return DN(this.query,e,this.afs.schedulers.outsideAngular).pipe(_n.iC)}valueChanges(t={}){return CM(this.query,this.afs.schedulers.outsideAngular).pipe((0,we.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),_n.iC)}get(t){return(0,xn.D)(this.query.get(t)).pipe(_n.iC)}}const kN=new o.OlP("angularfire2.enableFirestorePersistence"),RN=new o.OlP("angularfire2.firestore.persistenceSettings"),E3=new o.OlP("angularfire2.firestore.settings"),T3=new o.OlP("angularfire2.firestore.use-emulator");function ON(n,t=(e=>e)){return{query:t(n),ref:n}}let PN=(()=>{class n{constructor(e,i,r,s,u,h,p,y,E,I,M,P,B,Q,be,et,nt){this.schedulers=p;const it=(0,wi.on)(e,h,i),rt=E;I&&F_(it,h,M,B,Q,be,P,et),[this.firestore,this.persistenceEnabled$]=(0,wi.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const kt=h.runOutsideAngular(()=>it.firestore());if(s&&kt.settings(s),rt&&kt.useEmulator(...rt),r&&!fa(u)){const Pt=()=>{try{return(0,xn.D)(kt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(tn){return"undefined"!=typeof console&&console.warn(tn),bt(!1)}};return[kt,h.runOutsideAngular(Pt)]}return[kt,bt(!1)]},[s,rt,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:u}=ON(r,i),h=this.schedulers.ngZone.run(()=>s);return new AN(h,u,this)}collectionGroup(e,i){const r=i||(u=>u),s=this.firestore.collectionGroup(e);return new C3(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new MN(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(wi.Dh),o.LFG(wi.xv,8),o.LFG(kN,8),o.LFG(E3,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(_n.HU),o.LFG(RN,8),o.LFG(T3,8),o.LFG(Mp,8),o.LFG(O_,8),o.LFG(Lw,8),o.LFG(P_,8),o.LFG(N_,8),o.LFG(Rh,8),o.LFG(Vw,8),o.LFG(Fw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),I3=(()=>{class n{constructor(){kh.Z.registerVersion("angularfire",_n.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:kN,useValue:!0},{provide:RN,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[PN]}),n})(),S3=(()=>{class n{constructor(e){this.firestore=e}read_All_Stars(){return this.firestore.collection("stars").snapshotChanges()}create_Star(e){return this.firestore.collection("stars").add(e)}update_Star(e,i){this.firestore.doc("stars/"+e).update(i)}delete_Star(e){this.firestore.doc("stars/"+e).delete()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(PN))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D3=(()=>{class n{constructor(){}get_All_Values(){return[{name:"SYMBOL",value:"symbol"},{name:"STORY",value:"story"},{name:"COLOR",value:"color"},{name:"BODY PART",value:"bodypart"}]}get_All_Stars(){return[{name:"ASWINI",value:"aswini"},{name:"MAGAM",value:"magam"},{name:"MOOLAM",value:"moolam"}]}get_All_Signs(){return[{name:"ASWINI",value:"aswini"},{name:"MAGAM",value:"magam"},{name:"MOOLAM",value:"moolam"}]}get_All_Planets(){return[{name:"ASWINI",value:"aswini"},{name:"MAGAM",value:"magam"},{name:"MOOLAM",value:"moolam"}]}get_All_Houses(){return[{name:"ASWINI",value:"aswini"},{name:"MAGAM",value:"magam"},{name:"MOOLAM",value:"moolam"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ae=(()=>{class n{static addClass(e,i){e.classList?e.classList.add(i):e.className+=" "+i}static addMultipleClasses(e,i){if(e.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,i){e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,i){return e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return e?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==e)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(e,i){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var u=0;u<r.length;u++){if(r[u]==e)return s;r[u].attributes&&r[u].attributes[i]&&1==r[u].nodeType&&s++}return-1}static relativePosition(e,i){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=i.offsetHeight,u=i.getBoundingClientRect(),h=this.getViewport();let p,y;u.top+s+r.height>h.height?(p=-1*r.height,e.style.transformOrigin="bottom",u.top+p<0&&(p=-1*u.top)):(p=s,e.style.transformOrigin="top"),y=r.width>h.width?-1*u.left:u.left+r.width>h.width?-1*(u.left+r.width-h.width):0,e.style.top=p+"px",e.style.left=y+"px"}static absolutePosition(e,i){let P,B,r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,u=r.width,h=i.offsetHeight,p=i.offsetWidth,y=i.getBoundingClientRect(),E=this.getWindowScrollTop(),I=this.getWindowScrollLeft(),M=this.getViewport();y.top+h+s>M.height?(P=y.top+E-s,e.style.transformOrigin="bottom",P<0&&(P=E)):(P=h+y.top+E,e.style.transformOrigin="top"),B=y.left+u>M.width?Math.max(0,y.left+I+p-u):y.left+I,e.style.top=P+"px",e.style.left=B+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,u=h=>{let p=window.getComputedStyle(h,null);return s.test(p.getPropertyValue("overflow"))||s.test(p.getPropertyValue("overflowX"))||s.test(p.getPropertyValue("overflowY"))};for(let h of r){let p=1===h.nodeType&&h.dataset.scrollselectors;if(p){let y=p.split(",");for(let E of y){let I=this.findSingle(h,E);I&&u(I)&&i.push(I)}}9!==h.nodeType&&u(h)&&i.push(h)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,u=getComputedStyle(e).getPropertyValue("paddingTop"),h=u?parseFloat(u):0,p=e.getBoundingClientRect(),E=i.getBoundingClientRect().top+document.body.scrollTop-(p.top+document.body.scrollTop)-s-h,I=e.scrollTop,M=e.clientHeight,P=this.getOuterHeight(i);E<0?e.scrollTop=I+E:E+P>M&&(e.scrollTop=I+E-M+P)}static fadeIn(e,i){e.style.opacity=0;let r=+new Date,s=0,u=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(u)||setTimeout(u,16))};u()}static fadeOut(e,i){var r=1,h=50/i;let p=setInterval(()=>{(r-=h)<=0&&(r=0,clearInterval(p)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(u){return-1!==[].indexOf.call(document.querySelectorAll(u),this)}).call(e,i)}static getOuterWidth(e,i){let r=e.offsetWidth;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(e,i){let r=e.offsetHeight;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let e=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,r){e[i].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})();class TM{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=ae.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let Jy=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let i=this.getInk();if(!i||"none"===getComputedStyle(i,null).display)return;if(ae.removeClass(i,"p-ink-active"),!ae.getHeight(i)&&!ae.getWidth(i)){let h=Math.max(ae.getOuterWidth(this.el.nativeElement),ae.getOuterHeight(this.el.nativeElement));i.style.height=h+"px",i.style.width=h+"px"}let r=ae.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-ae.getWidth(i)/2,u=e.pageY-r.top+document.body.scrollLeft-ae.getHeight(i)/2;i.style.top=u+"px",i.style.left=s+"px",ae.addClass(i,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&ae.removeClass(e,"p-ink-active")}onAnimationEnd(e){ae.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),ae.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Ph,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),Vg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei]]}),n})();const NN=["container"],x3=function(n,t,e,i){return{"pi-info-circle":n,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":i}};function A3(n,t){if(1&n&&(o.ynx(0),o._UZ(1,"span",6),o.TgZ(2,"div",7)(3,"div",8),o._uU(4),o.qZA(),o.TgZ(5,"div",9),o._uU(6),o.qZA()(),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Tol("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),o.Q6J("ngClass",o.l5B(5,x3,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),o.xp6(3),o.Oqu(e.message.summary),o.xp6(2),o.Oqu(e.message.detail)}}function M3(n,t){1&n&&o.GkF(0)}function k3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",10),o.NdJ("click",function(r){return o.CHM(e),o.oxw().onCloseIconClick(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw().onCloseIconClick(r)}),o._UZ(1,"span",11),o.qZA()}}const R3=function(n){return[n,"p-toast-message"]},O3=function(n,t,e,i){return{showTransformParams:n,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:i}},P3=function(n){return{value:"visible",params:n}},N3=function(n){return{$implicit:n}};function F3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-toastItem",3),o.NdJ("onClose",function(r){return o.CHM(e),o.oxw().onMessageClose(r)})("@toastAnimation.start",function(r){return o.CHM(e),o.oxw().onAnimationStart(r)})("@toastAnimation.done",function(r){return o.CHM(e),o.oxw().onAnimationEnd(r)}),o.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=o.oxw();o.Q6J("message",e)("index",i)("template",r.template)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}let L3=(()=>{class n{constructor(e){this.zone=e,this.onClose=new o.vpe}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-toastItem"]],viewQuery:function(e,i){if(1&e&&o.Gf(NN,5),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.NdJ("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()}),o.TgZ(2,"div",2),o.YNc(3,A3,7,10,"ng-container",3),o.YNc(4,M3,1,0,"ng-container",4),o.YNc(5,k3,2,0,"button",5),o.qZA()()),2&e&&(o.Tol(i.message.styleClass),o.Q6J("ngClass",o.VKq(10,R3,"p-toast-message-"+i.message.severity))("@messageState",o.VKq(17,P3,o.l5B(12,O3,i.showTransformOptions,i.hideTransformOptions,i.showTransitionOptions,i.hideTransitionOptions))),o.uIk("id",i.message.id),o.xp6(2),o.Q6J("ngClass",i.message.contentStyleClass),o.xp6(1),o.Q6J("ngIf",!i.template),o.xp6(1),o.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",o.VKq(19,N3,i.message)),o.xp6(1),o.Q6J("ngIf",!1!==i.message.closable))},directives:[kn,on,Ds,Jy],encapsulation:2,data:{animation:[$r("messageState",[Bo("visible",ui({transform:"translateY(0)",opacity:1})),ln("void => *",[ui({transform:"{{showTransformParams}}",opacity:0}),ds("{{showTransitionParams}}")]),ln("* => void",[ds("{{hideTransitionParams}}",ui({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),n})(),V3=(()=>{class n{constructor(e,i,r){this.messageService=e,this.cd=i,this.config=r,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new o.vpe,this.id=kp()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const i=e.filter(r=>this.canAdd(r));this.add(i)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let i=this.key===e.key;return i&&this.preventOpenDuplicates&&(i=!this.containsMessage(this.messages,e)),i&&this.preventDuplicates&&(i=!this.containsMessage(this.messagesArchieve,e)),i}containsMessage(e,i){return!!e&&null!=e.find(r=>r.summary===i.summary&&r.detail==i.detail&&r.severity===i.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&Rr.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&ct.isEmpty(this.messages)&&Rr.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let i in this.breakpoints){let r="";for(let s in this.breakpoints[i])r+=s+":"+this.breakpoints[i][s]+" !important;";e+=`\n                    @media screen and (max-width: ${i}) {\n                        .p-toast[${this.id}] {\n                           ${r}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Rr.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Uw),o.Y36(o.sBO),o.Y36(Ph))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-toast"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Hu,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&o.Gf(NN,5),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.YNc(2,F3,1,8,"p-toastItem",2),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass","p-toast p-component p-toast-"+i.position)("ngStyle",i.style),o.xp6(2),o.Q6J("ngForOf",i.messages))},directives:[L3,kn,Ki,Cn],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[$r("toastAnimation",[ln(":enter, :leave",[Hd("@*",ba())])])]},changeDetection:0}),n})(),B3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei,Vg],Ba]}),n})(),IM=(()=>{class n{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,ae.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&ae.addClass(e,i);let r=this.getIconClass();r&&ae.addMultipleClasses(e,r);let s=ae.findSingle(this.el.nativeElement,".p-button-label");s?this.el.nativeElement.insertBefore(e,s):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=ae.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=ae.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(ae.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),n})(),Bg=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei,Vg]]}),n})();const H3=["content"];function j3(n,t){1&n&&o.GkF(0)}function z3(n,t){if(1&n&&(o.TgZ(0,"div",10),o.YNc(1,j3,1,0,"ng-container",11),o.qZA()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngTemplateOutlet",e.headerTemplate)}}function G3(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw(4);o.xp6(1),o.Oqu(e.option("header"))}}const $3=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function W3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",16),o.NdJ("click",function(r){return o.CHM(e),o.oxw(4).close(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(4).close(r)}),o._UZ(1,"span",17),o.qZA()}2&n&&o.Q6J("ngClass",o.DdM(1,$3))}function q3(n,t){if(1&n&&(o.TgZ(0,"div",10),o.YNc(1,G3,2,1,"span",12),o.TgZ(2,"div",13),o.YNc(3,W3,2,2,"button",14),o.qZA()()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngIf",e.option("header")),o.xp6(2),o.Q6J("ngIf",e.closable)}}function K3(n,t){if(1&n&&o._UZ(0,"i",1),2&n){const e=o.oxw(3);o.Tol(e.option("icon")),o.Q6J("ngClass","p-confirm-dialog-icon")}}function Z3(n,t){1&n&&o.GkF(0)}function Y3(n,t){if(1&n&&(o.TgZ(0,"div",18),o.Hsn(1),o.YNc(2,Z3,1,0,"ng-container",11),o.qZA()),2&n){const e=o.oxw(3);o.xp6(2),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}function Q3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",20),o.NdJ("click",function(){return o.CHM(e),o.oxw(4).reject()}),o.qZA()}if(2&n){const e=o.oxw(4);o.Tol(e.option("rejectButtonStyleClass")),o.Q6J("icon",e.option("rejectIcon"))("label",e.rejectButtonLabel)("ngClass","p-confirm-dialog-reject"),o.uIk("aria-label",e.rejectAriaLabel)}}function J3(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",20),o.NdJ("click",function(){return o.CHM(e),o.oxw(4).accept()}),o.qZA()}if(2&n){const e=o.oxw(4);o.Tol(e.option("acceptButtonStyleClass")),o.Q6J("icon",e.option("acceptIcon"))("label",e.acceptButtonLabel)("ngClass","p-confirm-dialog-accept"),o.uIk("aria-label",e.acceptAriaLabel)}}function X3(n,t){if(1&n&&(o.TgZ(0,"div",18),o.YNc(1,Q3,1,6,"button",19),o.YNc(2,J3,1,6,"button",19),o.qZA()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngIf",e.option("rejectVisible")),o.xp6(1),o.Q6J("ngIf",e.option("acceptVisible"))}}const ej=function(n){return{"p-dialog p-confirm-dialog p-component":!0,"p-dialog-rtl":n}},tj=function(n,t){return{transform:n,transition:t}},nj=function(n){return{value:"visible",params:n}};function ij(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",3),o.NdJ("mousedown",function(){return o.CHM(e),o.oxw(2).moveOnTop()})("@animation.start",function(r){return o.CHM(e),o.oxw(2).onAnimationStart(r)})("@animation.done",function(r){return o.CHM(e),o.oxw(2).onAnimationEnd(r)}),o.YNc(1,z3,2,1,"div",4),o.YNc(2,q3,4,2,"div",4),o.TgZ(3,"div",5,6),o.YNc(5,K3,1,3,"i",7),o._UZ(6,"span",8),o.qZA(),o.YNc(7,Y3,3,1,"div",9),o.YNc(8,X3,3,2,"div",9),o.qZA()}if(2&n){const e=o.oxw(2);o.Tol(e.styleClass),o.Q6J("ngClass",o.VKq(11,ej,e.rtl))("ngStyle",e.style)("@animation",o.VKq(16,nj,o.WLB(13,tj,e.transformOptions,e.transitionOptions))),o.xp6(1),o.Q6J("ngIf",e.headerTemplate),o.xp6(1),o.Q6J("ngIf",!e.headerTemplate),o.xp6(3),o.Q6J("ngIf",e.option("icon")),o.xp6(1),o.Q6J("innerHTML",e.option("message"),o.oJD),o.xp6(1),o.Q6J("ngIf",e.footer||e.footerTemplate),o.xp6(1),o.Q6J("ngIf",!e.footer&&!e.footerTemplate)}}function rj(n,t){if(1&n&&(o.TgZ(0,"div",1),o.YNc(1,ij,9,18,"div",2),o.qZA()),2&n){const e=o.oxw();o.Tol(e.maskStyleClass),o.Q6J("ngClass",e.getMaskClass()),o.xp6(1),o.Q6J("ngIf",e.visible)}}const sj=[[["p-footer"]]],oj=["p-footer"],aj=Ps([ui({transform:"{{transform}}",opacity:0}),ds("{{transition}}",ui({transform:"none",opacity:1}))]),lj=Ps([ds("{{transition}}",ui({transform:"{{transform}}",opacity:0}))]);let uj=(()=>{class n{constructor(e,i,r,s,u,h){this.el=e,this.renderer=i,this.confirmationService=r,this.zone=s,this.cd=u,this.config=h,this.acceptIcon="pi pi-check",this.acceptVisible=!0,this.rejectIcon="pi pi-times",this.rejectVisible=!0,this.closeOnEscape=!0,this.blockScroll=!0,this.closable=!0,this.autoZIndex=!0,this.baseZIndex=0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.focusTrap=!0,this.defaultFocus="accept",this.onHide=new o.vpe,this._position="center",this.transformOptions="scale(0.7)",this.id=kp(),this.subscription=this.confirmationService.requireConfirmation$.subscribe(p=>{p?p.key===this.key&&(this.confirmation=p,this.confirmationOptions={message:this.confirmation.message||this.message,icon:this.confirmation.icon||this.icon,header:this.confirmation.header||this.header,rejectVisible:null==this.confirmation.rejectVisible?this.rejectVisible:this.confirmation.rejectVisible,acceptVisible:null==this.confirmation.acceptVisible?this.acceptVisible:this.confirmation.acceptVisible,acceptLabel:this.confirmation.acceptLabel||this.acceptLabel,rejectLabel:this.confirmation.rejectLabel||this.rejectLabel,acceptIcon:this.confirmation.acceptIcon||this.acceptIcon,rejectIcon:this.confirmation.rejectIcon||this.rejectIcon,acceptButtonStyleClass:this.confirmation.acceptButtonStyleClass||this.acceptButtonStyleClass,rejectButtonStyleClass:this.confirmation.rejectButtonStyleClass||this.rejectButtonStyleClass,defaultFocus:this.confirmation.defaultFocus||this.defaultFocus,blockScroll:!1===this.confirmation.blockScroll||!0===this.confirmation.blockScroll?this.confirmation.blockScroll:this.blockScroll,closeOnEscape:!1===this.confirmation.closeOnEscape||!0===this.confirmation.closeOnEscape?this.confirmation.closeOnEscape:this.closeOnEscape,dismissableMask:!1===this.confirmation.dismissableMask||!0===this.confirmation.dismissableMask?this.confirmation.dismissableMask:this.dismissableMask},this.confirmation.accept&&(this.confirmation.acceptEvent=new o.vpe,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new o.vpe,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"top-left":case"bottom-left":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"top-right":case"bottom-right":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}option(e){const i=this.confirmationOptions||this;if(i.hasOwnProperty(e))return i[e]}onAnimationStart(e){if("visible"===e.toState){this.container=e.element,this.wrapper=this.container.parentElement,this.contentContainer=ae.findSingle(this.container,".p-dialog-content"),this.container.setAttribute(this.id,""),this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.enableModality();const i=this.getElementToFocus();i&&i.focus()}}onAnimationEnd(e){"void"===e.toState&&this.onOverlayHide()}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":default:return ae.findSingle(this.container,".p-confirm-dialog-accept");case"reject":return ae.findSingle(this.container,".p-confirm-dialog-reject");case"close":return ae.findSingle(this.container,".p-dialog-header-close");case"none":return null}}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):ae.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.wrapper&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}enableModality(){this.option("blockScroll")&&ae.addClass(document.body,"p-overflow-hidden"),this.option("dismissableMask")&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)}))}disableModality(){this.maskVisible=!1,this.option("blockScroll")&&ae.removeClass(document.body,"p-overflow-hidden"),this.dismissableMask&&this.unbindMaskClickListener(),this.container&&!this.cd.destroyed&&this.cd.detectChanges()}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let i in this.breakpoints)e+=`\n                    @media screen and (max-width: ${i}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[i]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}close(e){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(Uu.CANCEL),this.hide(Uu.CANCEL),e.preventDefault()}hide(e){this.onHide.emit(e),this.visible=!1,this.confirmation=null,this.confirmationOptions=null}moveOnTop(){this.autoZIndex&&(Rr.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}getMaskClass(){let e={"p-dialog-mask p-component-overlay":!0,"p-dialog-mask-scrollblocker":this.blockScroll};return e[this.getPositionClass().toString()]=!0,e}getPositionClass(){const i=["left","right","top","top-left","top-right","bottom","bottom-left","bottom-right"].find(r=>r===this.position);return i?`p-dialog-${i}`:""}bindGlobalListeners(){(this.option("closeOnEscape")&&this.closable||this.focusTrap&&!this.documentEscapeListener)&&(this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",i=>{if(27==i.which&&this.option("closeOnEscape")&&this.closable&&parseInt(this.container.style.zIndex)===Rr.get(this.container)&&this.visible&&this.close(i),9===i.which&&this.focusTrap){i.preventDefault();let r=ae.getFocusableElements(this.container);if(r&&r.length>0)if(r[0].ownerDocument.activeElement){let s=r.indexOf(r[0].ownerDocument.activeElement);i.shiftKey?-1==s||0===s?r[r.length-1].focus():r[s-1].focus():-1==s||s===r.length-1?r[0].focus():r[s+1].focus()}else r[0].focus()}}))}unbindGlobalListeners(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}onOverlayHide(){this.container&&this.autoZIndex&&Rr.clear(this.container),this.disableModality(),this.unbindGlobalListeners(),this.container=null}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.restoreAppend(),this.onOverlayHide(),this.subscription.unsubscribe(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle()}accept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(Uu.ACCEPT)}reject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(Uu.REJECT),this.hide(Uu.REJECT)}get acceptButtonLabel(){return this.option("acceptLabel")||this.config.getTranslation(ws.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.config.getTranslation(ws.REJECT)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Bw),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(Ph))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-confirmDialog"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,sT,5),o.Suo(r,Hu,4)),2&e){let s;o.iGM(s=o.CRH())&&(i.footer=s.first),o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&o.Gf(H3,5),2&e){let r;o.iGM(r=o.CRH())&&(i.contentViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:"acceptVisible",rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:"rejectVisible",acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",blockScroll:"blockScroll",rtl:"rtl",closable:"closable",appendTo:"appendTo",key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",transitionOptions:"transitionOptions",focusTrap:"focusTrap",defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position"},outputs:{onHide:"onHide"},ngContentSelectors:oj,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngClass","ngStyle","class","mousedown",4,"ngIf"],[3,"ngClass","ngStyle","mousedown"],["class","p-dialog-header",4,"ngIf"],[1,"p-dialog-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-dialog-message",3,"innerHTML"],["class","p-dialog-footer",4,"ngIf"],[1,"p-dialog-header"],[4,"ngTemplateOutlet"],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button",3,"ngClass","click","keydown.enter"],[1,"pi","pi-times"],[1,"p-dialog-footer"],["type","button","pRipple","","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],["type","button","pRipple","","pButton","",3,"icon","label","ngClass","click"]],template:function(e,i){1&e&&(o.F$t(sj),o.YNc(0,rj,2,4,"div",0)),2&e&&o.Q6J("ngIf",i.maskVisible)},directives:[on,kn,Ki,Ds,Jy,IM],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translate(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0px!important;left:0px!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[$r("animation",[ln("void => visible",[Ho(aj)]),ln("visible => void",[Ho(lj)])])]},changeDetection:0}),n})(),cj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei,Bg,Vg],Bg,Ba]}),n})();function rS(n,t=0){return function hj(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}var pj=N(1144);const gj=["addListener","removeListener"],mj=["addEventListener","removeEventListener"],_j=["on","off"];function sS(n,t,e,i){if((0,pr.m)(e)&&(i=e,e=void 0),i)return sS(n,t,e).pipe(ht(i));const[r,s]=function wj(n){return(0,pr.m)(n.addEventListener)&&(0,pr.m)(n.removeEventListener)}(n)?mj.map(u=>h=>n[u](t,h,e)):function yj(n){return(0,pr.m)(n.addListener)&&(0,pr.m)(n.removeListener)}(n)?gj.map(FN(n,t)):function vj(n){return(0,pr.m)(n.on)&&(0,pr.m)(n.off)}(n)?_j.map(FN(n,t)):[];if(!r&&(0,pj.z)(n))return(0,mr.z)(u=>sS(u,t,e))((0,po.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new v.y(u=>{const h=(...p)=>u.next(1<p.length?p:p[0]);return r(h),()=>s(h)})}function FN(n,t){return e=>i=>n[e](t,i)}var LN=N(4408);const E0={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=E0;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new ip.w0(()=>null==e?void 0:e(r))},requestAnimationFrame(...n){const{delegate:t}=E0;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=E0;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var VN=N(7565);const Ej=new class Cj extends VN.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class bj extends LN.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=E0.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(E0.cancelAnimationFrame(e),t._scheduled=void 0)}});let SM,Tj=1;const oS={};function BN(n){return n in oS&&(delete oS[n],!0)}const Ij={setImmediate(n){const t=Tj++;return oS[t]=!0,SM||(SM=Promise.resolve()),SM.then(()=>BN(t)&&n()),t},clearImmediate(n){BN(n)}},{setImmediate:Sj,clearImmediate:Dj}=Ij,aS={setImmediate(...n){const{delegate:t}=aS;return((null==t?void 0:t.setImmediate)||Sj)(...n)},clearImmediate(n){const{delegate:t}=aS;return((null==t?void 0:t.clearImmediate)||Dj)(n)},delegate:void 0},Mj=new class Aj extends VN.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class xj extends LN.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=aS.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(aS.clearImmediate(e),t._scheduled=void 0)}});function UN(n){return!!n&&(n instanceof v.y||(0,pr.m)(n.lift)&&(0,pr.m)(n.subscribe))}var Rj=N(3532);function DM(n,t=Rp.z){return function kj(n){return(0,Fi.e)((t,e)=>{let i=!1,r=null,s=null,u=!1;const h=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const y=r;r=null,e.next(y)}u&&e.complete()},p=()=>{s=null,u&&e.complete()};t.subscribe((0,rn.x)(e,y=>{i=!0,r=y,s||(0,po.Xf)(n(y)).subscribe(s=(0,rn.x)(e,h,p))},()=>{u=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>function Pj(n=0,t,e=Rp.P){let i=-1;return null!=t&&((0,Rj.K)(t)?e=t:i=t),new v.y(r=>{let s=function Oj(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let u=0;return e.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,t))}var HN=N(5032);function xM(n){return(0,Fi.e)((t,e)=>{(0,po.Xf)(n).subscribe((0,rn.x)(e,()=>e.complete(),HN.Z)),!e.closed&&t.subscribe(e)})}let AM;try{AM="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){AM=!1}let lS,Ug,jN=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function ki(n){return n===Mo}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!AM)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.Lbi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I0(){if("object"!=typeof document||!document)return 0;if(null==lS){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),lS=0,0===n.scrollLeft&&(n.scrollLeft=1,lS=0===n.scrollLeft?1:2),n.remove()}return lS}const Vj=new o.OlP("cdk-dir-doc",{providedIn:"root",factory:function Bj(){return(0,o.f3M)(de)}}),Uj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let GN=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new o.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function Hj(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Uj.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Vj,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();class Gj extends class jj{}{constructor(t){super(),this._data=t}connect(){return UN(this._data)?this._data:bt(this._data)}disconnect(){}}class $j{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(t,e,i,r,s){t.forEachOperation((u,h,p)=>{let y,E;null==u.previousIndex?(y=this._insertView(()=>i(u,h,p),p,e,r(u)),E=y?1:0):null==p?(this._detachAndCacheView(h,e),E=3):(y=this._moveView(h,p,e,r(u)),E=2),s&&s({context:null==y?void 0:y.context,operation:E,record:u})})}detach(){for(const t of this._viewCache)t.destroy();this._viewCache=[]}_insertView(t,e,i,r){const s=this._insertViewFromCache(e,i);if(s)return void(s.context.$implicit=r);const u=t();return i.createEmbeddedView(u.templateRef,u.context,u.index)}_detachAndCacheView(t,e){const i=e.detach(t);this._maybeCacheView(i,e)}_moveView(t,e,i,r){const s=i.get(t);return i.move(s,e),s.context.$implicit=r,s}_maybeCacheView(t,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(t);else{const i=e.indexOf(t);-1===i?t.destroy():e.remove(i)}}_insertViewFromCache(t,e){const i=this._viewCache.pop();return i&&e.insert(i,t),i||null}}const WN=new o.OlP("_ViewRepeater"),Wj=["contentWrapper"],qj=["*"],qN=new o.OlP("VIRTUAL_SCROLL_STRATEGY");class Kj{constructor(t,e,i){this._scrolledIndexChange=new dn.x,this.scrolledIndexChange=this._scrolledIndexChange.pipe(L_()),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,i){this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const t=this._viewport.getRenderedRange(),e={start:t.start,end:t.end},i=this._viewport.getViewportSize(),r=this._viewport.getDataLength();let s=this._viewport.measureScrollOffset(),u=this._itemSize>0?s/this._itemSize:0;if(e.end>r){const p=Math.ceil(i/this._itemSize),y=Math.max(0,Math.min(u,r-p));u!=y&&(u=y,s=y*this._itemSize,e.start=Math.floor(u)),e.end=Math.max(0,Math.min(r,e.start+p))}const h=s-e.start*this._itemSize;if(h<this._minBufferPx&&0!=e.start){const p=Math.ceil((this._maxBufferPx-h)/this._itemSize);e.start=Math.max(0,e.start-p),e.end=Math.min(r,Math.ceil(u+(i+this._minBufferPx)/this._itemSize))}else{const p=e.end*this._itemSize-(s+i);if(p<this._minBufferPx&&e.end!=r){const y=Math.ceil((this._maxBufferPx-p)/this._itemSize);y>0&&(e.end=Math.min(r,e.end+y),e.start=Math.max(0,Math.floor(u-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(u))}}function Zj(n){return n._scrollStrategy}let KN=(()=>{class n{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new Kj(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=rS(e)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=rS(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=rS(e)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[o._Bn([{provide:qN,useFactory:Zj,deps:[(0,o.Gpc)(()=>n)]}]),o.TTD]}),n})(),ZN=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new dn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new v.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(DM(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):bt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Zo(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=function fj(n){return n instanceof o.SBq?n.nativeElement:n}(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>sS(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(jN),o.LFG(de,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YN=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new dn.x,this._elementScrolled=new v.y(u=>this.ngZone.runOutsideAngular(()=>sS(this.elementRef.nativeElement,"scroll").pipe(xM(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=I0()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==I0()?e.left=e.right:1==I0()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;!function Fj(){if(null==Ug){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ug=!1,Ug;if("scrollBehavior"in document.documentElement.style)Ug=!0;else{const n=Element.prototype.scrollTo;Ug=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ug}()?(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left)):i.scrollTo(e)}measureScrollOffset(e){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==e?e=u?r:i:"end"==e&&(e=u?i:r),u&&2==I0()?e==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:u&&1==I0()?e==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(ZN),o.Y36(o.R0b),o.Y36(GN,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),Jj=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new dn.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(DM(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(jN),o.LFG(o.R0b),o.LFG(de,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const e6="undefined"!=typeof requestAnimationFrame?Ej:Mj;let S0=(()=>{class n extends YN{constructor(e,i,r,s,u,h,p){super(e,h,r,u),this.elementRef=e,this._changeDetectorRef=i,this._scrollStrategy=s,this._detachedSubject=new dn.x,this._renderedRangeSubject=new dn.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new v.y(y=>this._scrollStrategy.scrolledIndexChange.subscribe(E=>Promise.resolve().then(()=>this.ngZone.run(()=>y.next(E))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=ip.w0.EMPTY,this._viewportChanges=p.change().subscribe(()=>{this.checkViewportSize()})}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=function dj(n){return null!=n&&"false"!=`${n}`}(e)}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe(Uc(null),DM(0,e6)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(xM(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function Xj(n,t){return n.start==t.start&&n.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){const s="horizontal"==this.orientation,u=s?"X":"Y";let p=`translate${u}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e=this.appendOnly&&"to-start"===i?0:e,"to-end"===i&&(p+=` translate${u}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=p&&(this._renderedContentTransform=p,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollTo(r)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){return super.measureScrollOffset(e||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const e=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?e.clientWidth:e.clientHeight}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of e)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(qN,8),o.Y36(GN,8),o.Y36(ZN),o.Y36(Jj))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,i){if(1&e&&o.Gf(Wj,7),2&e){let r;o.iGM(r=o.CRH())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[o._Bn([{provide:YN,useExisting:n}]),o.qOj],ngContentSelectors:qj,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"div",0,1),o.Hsn(2),o.qZA(),o._UZ(3,"div",2)),2&e&&(o.xp6(3),o.Udp("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),n})();function QN(n,t,e){if(!e.getBoundingClientRect)return 0;const r=e.getBoundingClientRect();return"horizontal"===n?"start"===t?r.left:r.right:"start"===t?r.top:r.bottom}let JN=(()=>{class n{constructor(e,i,r,s,u,h){this._viewContainerRef=e,this._template=i,this._differs=r,this._viewRepeater=s,this._viewport=u,this.viewChange=new dn.x,this._dataSourceChanges=new dn.x,this.dataStream=this._dataSourceChanges.pipe(Uc(null),Op(),gr(([p,y])=>this._changeDataSource(p,y)),vs(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new dn.x,this.dataStream.subscribe(p=>{this._data=p,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(xM(this._destroyed)).subscribe(p=>{this._renderedRange=p,this.viewChange.observers.length&&h.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,function zj(n){return n&&"function"==typeof n.connect}(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new Gj(UN(e)?e:Array.from(e||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(i,r)=>e(i+(this._renderedRange?this._renderedRange.start:0),r):void 0}set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=rS(e)}measureRangeSize(e,i){if(e.start>=e.end)return 0;const r=e.start-this._renderedRange.start,s=e.end-e.start;let u,h;for(let p=0;p<s;p++){const y=this._viewContainerRef.get(p+r);if(y&&y.rootNodes.length){u=h=y.rootNodes[0];break}}for(let p=s-1;p>-1;p--){const y=this._viewContainerRef.get(p+r);if(y&&y.rootNodes.length){h=y.rootNodes[y.rootNodes.length-1];break}}return u&&h?QN(i,"end",h)-QN(i,"start",u):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){!this._renderedRange||(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,i)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,i):i)),this._needsUpdate=!0)}_changeDataSource(e,i){return e&&e.disconnect(this),this._needsUpdate=!0,i?i.connect(this):bt()}_updateContext(){const e=this._data.length;let i=this._viewContainerRef.length;for(;i--;){const r=this._viewContainerRef.get(i);r.context.index=this._renderedRange.start+i,r.context.count=e,this._updateComputedContextProperties(r.context),r.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(s,u,h)=>this._getEmbeddedViewArgs(s,h),s=>s.item),e.forEachIdentityChange(s=>{this._viewContainerRef.get(s.currentIndex).context.$implicit=s.item});const i=this._data.length;let r=this._viewContainerRef.length;for(;r--;){const s=this._viewContainerRef.get(r);s.context.index=this._renderedRange.start+r,s.context.count=i,this._updateComputedContextProperties(s.context)}}_updateComputedContextProperties(e){e.first=0===e.index,e.last=e.index===e.count-1,e.even=e.index%2==0,e.odd=!e.even}_getEmbeddedViewArgs(e,i){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:i}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(WN),o.Y36(S0,4),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[o._Bn([{provide:WN,useClass:$j}])]}),n})(),XN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),uS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[$N,XN],$N,XN]}),n})(),eF=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Hg=(()=>{class n extends eF{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const Ws=new o.OlP("NgValueAccessor"),r6={provide:Ws,useExisting:(0,o.Gpc)(()=>D0),multi:!0},o6=new o.OlP("CompositionEventMode");let D0=(()=>{class n extends eF{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function s6(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(o6,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([r6]),o.qOj]}),n})();const Ts=new o.OlP("NgValidators"),gf=new o.OlP("NgAsyncValidators");function dF(n){return null!=n}function hF(n){const t=(0,o.QGY)(n)?(0,xn.D)(n):n;return(0,o.CqO)(t),t}function fF(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function pF(n,t){return t.map(e=>e(n))}function gF(n){return n.map(t=>function l6(n){return!n.validate}(t)?t:e=>t.validate(e))}function kM(n){return null!=n?function mF(n){if(!n)return null;const t=n.filter(dF);return 0==t.length?null:function(e){return fF(pF(e,t))}}(gF(n)):null}function RM(n){return null!=n?function _F(n){if(!n)return null;const t=n.filter(dF);return 0==t.length?null:function(e){return function t6(...n){const t=(0,fl.jO)(n),{args:e,keys:i}=O(n),r=new v.y(s=>{const{length:u}=e;if(!u)return void s.complete();const h=new Array(u);let p=u,y=u;for(let E=0;E<u;E++){let I=!1;(0,po.Xf)(e[E]).subscribe((0,rn.x)(s,M=>{I||(I=!0,y--),h[E]=M},()=>p--,void 0,()=>{(!p||!I)&&(y||s.next(i?qn(i,h):h),s.complete())}))}});return t?r.pipe(ht(t)):r}(pF(e,t).map(hF)).pipe((0,we.U)(fF))}}(gF(n)):null}function yF(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function OM(n){return n?Array.isArray(n)?n:[n]:[]}function dS(n,t){return Array.isArray(n)?n.includes(t):n===t}function bF(n,t){const e=OM(t);return OM(n).forEach(r=>{dS(e,r)||e.push(r)}),e}function CF(n,t){return OM(t).filter(e=>!dS(n,e))}class EF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=kM(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=RM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class yd extends EF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qs extends EF{get formDirective(){return null}get path(){return null}}class TF{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}let hS=(()=>{class n extends TF{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(yd,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[o.qOj]}),n})(),IF=(()=>{class n extends TF{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(qs,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[o.qOj]}),n})();function x0(n,t){FM(n,t),t.valueAccessor.writeValue(n.value),function m6(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&DF(n,t)})}(n,t),function y6(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function _6(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&DF(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function g6(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function mS(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function FM(n,t){const e=function vF(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(yF(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function wF(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(yF(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();mS(t._rawValidators,r),mS(t._rawAsyncValidators,r)}function DF(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function BM(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const A0="VALID",yS="INVALID",ev="PENDING",M0="DISABLED";function HM(n){return(vS(n)?n.validators:n)||null}function kF(n){return Array.isArray(n)?kM(n):n||null}function jM(n,t){return(vS(t)?t.asyncValidators:n)||null}function RF(n){return Array.isArray(n)?RM(n):n||null}function vS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const zM=n=>n instanceof $M;function PF(n){return(n=>n instanceof LF)(n)?n.value:n.getRawValue()}function NF(n,t){const e=zM(n),i=n.controls;if(!(e?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[t])throw new o.vHH(1001,"")}function FF(n,t){zM(n),n._forEachChild((i,r)=>{if(void 0===t[r])throw new o.vHH(1002,"")})}class GM{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=kF(this._rawValidators),this._composedAsyncValidatorFn=RF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===A0}get invalid(){return this.status===yS}get pending(){return this.status==ev}get disabled(){return this.status===M0}get enabled(){return this.status!==M0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=kF(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=RF(t)}addValidators(t){this.setValidators(bF(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(bF(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(CF(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(CF(t,this._rawAsyncValidators))}hasValidator(t){return dS(this._rawValidators,t)}hasAsyncValidator(t){return dS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ev,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=M0,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=A0,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===A0||this.status===ev)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?M0:A0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ev,this._hasOwnPendingAsyncValidator=!0;const e=hF(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function C6(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=zM(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof T6)(i)&&i.at(r)||null}),i}(this,t,".")}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?M0:this.errors?yS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ev)?ev:this._anyControlsHaveStatus(yS)?yS:A0}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){vS(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class LF extends GM{constructor(t=null,e,i){super(HM(e),jM(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vS(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){BM(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){BM(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class $M extends GM{constructor(t,e,i){super(HM(e),jM(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){FF(this,t),Object.keys(t).forEach(i=>{NF(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=PF(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class T6 extends GM{constructor(t,e,i){super(HM(e),jM(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){FF(this,t),t.forEach((i,r)=>{NF(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>PF(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const I6={provide:qs,useExisting:(0,o.Gpc)(()=>wS)},k0=(()=>Promise.resolve(null))();let wS=(()=>{class n extends qs{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new $M({},kM(e),RM(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){k0.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),x0(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){k0.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){k0.then(()=>{const i=this._findContainer(e.path),r=new $M({});(function xF(n,t){FM(n,t)})(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){k0.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){k0.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,function MF(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ts,10),o.Y36(gf,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([I6]),o.qOj]}),n})();const D6={provide:yd,useExisting:(0,o.Gpc)(()=>jg)},UF=(()=>Promise.resolve(null))();let jg=(()=>{class n extends yd{constructor(e,i,r,s,u){super(),this._changeDetectorRef=u,this.control=new LF,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function VM(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===D0?e=s:function b6(n){return Object.getPrototypeOf(n.constructor)===Hg}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function LM(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){x0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){UF.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;UF.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(e){return this._parent?function pS(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(qs,9),o.Y36(Ts,10),o.Y36(gf,10),o.Y36(Ws,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([D6]),o.qOj,o.TTD]}),n})(),HF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),zF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),J6=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[zF]]}),n})(),bS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[J6]}),n})(),X6=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r,this.escape=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions=Object.assign(Object.assign({},this._tooltipOptions),e.tooltipOptions.currentValue),this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?ae.appendChild(this.container,this.el.nativeElement):ae.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block"}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),ae.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Rr.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Rr.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+ae.getWindowScrollLeft(),top:e.top+ae.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),i=e.left+ae.getOuterWidth(this.el.nativeElement),r=e.top+(ae.getOuterHeight(this.el.nativeElement)-ae.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),i=e.left-ae.getOuterWidth(this.container),r=e.top+(ae.getOuterHeight(this.el.nativeElement)-ae.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),i=e.left+(ae.getOuterWidth(this.el.nativeElement)-ae.getOuterWidth(this.container))/2,r=e.top-ae.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),i=e.left+(ae.getOuterWidth(this.el.nativeElement)-ae.getOuterWidth(this.container))/2,r=e.top+ae.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions=Object.assign(Object.assign({},this._tooltipOptions),e)}getOption(e){return this._tooltipOptions[e]}getTarget(e){return ae.hasClass(e,"p-inputwrapper")?ae.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let e=this.container.getBoundingClientRect(),i=e.top,r=e.left,s=ae.getOuterWidth(this.container),u=ae.getOuterHeight(this.container),h=ae.getViewport();return r+s>h.width||r<0||i<0||i+u>h.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new TM(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):ae.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Rr.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Ph))},n.\u0275dir=o.lG2({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[o.TTD]}),n})(),ez=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei]]}),n})();function tz(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.label||"empty")}}function nz(n,t){1&n&&o.GkF(0)}const aL=function(n){return{height:n}},iz=function(n,t){return{"p-dropdown-item":!0,"p-highlight":n,"p-disabled":t}},JM=function(n){return{$implicit:n}},rz=["container"],sz=["filter"],oz=["in"],az=["editableInput"];function lz(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.label||"empty")}}function uz(n,t){1&n&&o.GkF(0)}const cz=function(n){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":n}};function dz(n,t){if(1&n&&(o.TgZ(0,"span",12),o.YNc(1,lz,2,1,"ng-container",13),o.YNc(2,uz,1,0,"ng-container",14),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngClass",o.VKq(9,cz,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),o.uIk("id",e.labelId),o.xp6(1),o.Q6J("ngIf",!e.selectedItemTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",o.VKq(11,JM,e.selectedOption))}}const hz=function(n){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":n}};function fz(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngClass",o.VKq(2,hz,null==e.placeholder||0===e.placeholder.length)),o.xp6(1),o.Oqu(e.placeholder||"empty")}}function pz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"input",16,17),o.NdJ("click",function(){return o.CHM(e),o.oxw().onEditableInputClick()})("input",function(r){return o.CHM(e),o.oxw().onEditableInputChange(r)})("focus",function(r){return o.CHM(e),o.oxw().onEditableInputFocus(r)})("blur",function(r){return o.CHM(e),o.oxw().onInputBlur(r)}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("disabled",e.disabled),o.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function gz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",18),o.NdJ("click",function(r){return o.CHM(e),o.oxw().clear(r)}),o.qZA()}}function mz(n,t){1&n&&o.GkF(0)}function _z(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",26)(1,"div",27),o.NdJ("click",function(r){return r.stopPropagation()}),o.TgZ(2,"input",28,29),o.NdJ("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){return o.CHM(e),o.oxw(2).onKeydown(r,!1)})("input",function(r){return o.CHM(e),o.oxw(2).onFilterInputChange(r)}),o.qZA(),o._UZ(4,"span",30),o.qZA()()}if(2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("value",e.filterValue||""),o.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function yz(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.xp6(1),o.Oqu(i.getOptionGroupLabel(e)||"empty")}}function vz(n,t){1&n&&o.GkF(0)}function wz(n,t){1&n&&o.GkF(0)}const lL=function(n,t){return{$implicit:n,selectedOption:t}};function bz(n,t){if(1&n&&(o.TgZ(0,"li",32),o.YNc(1,yz,2,1,"span",13),o.YNc(2,vz,1,0,"ng-container",14),o.qZA(),o.YNc(3,wz,1,0,"ng-container",14)),2&n){const e=t.$implicit;o.oxw(2);const i=o.MAs(8),r=o.oxw();o.xp6(1),o.Q6J("ngIf",!r.groupTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",r.groupTemplate)("ngTemplateOutletContext",o.VKq(5,JM,e)),o.xp6(1),o.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",o.WLB(7,lL,r.getOptionGroupChildren(e),r.selectedOption))}}function Cz(n,t){if(1&n&&(o.ynx(0),o.YNc(1,bz,4,10,"ng-template",31),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e.optionsToDisplay)}}function Ez(n,t){1&n&&o.GkF(0)}function Tz(n,t){if(1&n&&(o.ynx(0),o.YNc(1,Ez,1,0,"ng-container",14),o.BQk()),2&n){o.oxw();const e=o.MAs(8),i=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",o.WLB(2,lL,i.optionsToDisplay,i.selectedOption))}}function Iz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-dropdownItem",35),o.NdJ("onClick",function(r){return o.CHM(e),o.oxw(4).onItemClick(r)}),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(2).selectedOption,r=o.oxw(2);o.Q6J("option",e)("selected",i==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function Sz(n,t){if(1&n&&(o.ynx(0),o.YNc(1,Iz,1,5,"ng-template",31),o.BQk()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngForOf",e)}}function Dz(n,t){if(1&n){const e=o.EpF();o.ynx(0),o.TgZ(1,"p-dropdownItem",35),o.NdJ("onClick",function(r){return o.CHM(e),o.oxw(5).onItemClick(r)}),o.qZA(),o.BQk()}if(2&n){const e=t.$implicit,i=o.oxw(3).selectedOption,r=o.oxw(2);o.xp6(1),o.Q6J("option",e)("selected",i==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function xz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"cdk-virtual-scroll-viewport",37,38),o.NdJ("scrolledIndexChange",function(){return o.CHM(e),o.oxw(4).scrollToSelectedVirtualScrollElement()}),o.YNc(2,Dz,2,5,"ng-container",39),o.qZA()}if(2&n){const e=o.oxw(2).$implicit,i=o.oxw(2);o.Q6J("ngStyle",o.VKq(3,aL,i.scrollHeight))("itemSize",i.itemSize),o.xp6(2),o.Q6J("cdkVirtualForOf",e)}}function Az(n,t){if(1&n&&o.YNc(0,xz,3,5,"cdk-virtual-scroll-viewport",36),2&n){const e=o.oxw(3);o.Q6J("ngIf",e.virtualScroll&&e.optionsToDisplay&&e.optionsToDisplay.length)}}function Mz(n,t){if(1&n&&(o.YNc(0,Sz,2,1,"ng-container",33),o.YNc(1,Az,1,1,"ng-template",null,34,o.W1O)),2&n){const e=o.MAs(2),i=o.oxw(2);o.Q6J("ngIf",!i.virtualScroll)("ngIfElse",e)}}function kz(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(3);o.xp6(1),o.hij(" ",e.emptyFilterMessageLabel," ")}}function Rz(n,t){1&n&&o.GkF(0,null,41)}function Oz(n,t){if(1&n&&(o.TgZ(0,"li",40),o.YNc(1,kz,2,1,"ng-container",33),o.YNc(2,Rz,2,0,"ng-container",20),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),o.xp6(1),o.Q6J("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function Pz(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(3);o.xp6(1),o.hij(" ",e.emptyMessageLabel," ")}}function Nz(n,t){1&n&&o.GkF(0,null,42)}function Fz(n,t){if(1&n&&(o.TgZ(0,"li",40),o.YNc(1,Pz,2,1,"ng-container",33),o.YNc(2,Nz,2,0,"ng-container",20),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),o.xp6(1),o.Q6J("ngTemplateOutlet",e.emptyTemplate)}}function Lz(n,t){1&n&&o.GkF(0)}const Vz=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},Bz=function(n){return{value:"visible",params:n}},Uz=function(n){return{"p-dropdown-virtualscroll":n}};function Hz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",19),o.NdJ("click",function(r){return o.CHM(e),o.oxw().onOverlayClick(r)})("@overlayAnimation.start",function(r){return o.CHM(e),o.oxw().onOverlayAnimationStart(r)})("@overlayAnimation.start",function(r){return o.CHM(e),o.oxw().onOverlayAnimationEnd(r)}),o.YNc(1,mz,1,0,"ng-container",20),o.YNc(2,_z,5,4,"div",21),o.TgZ(3,"div",22)(4,"ul",23),o.YNc(5,Cz,2,1,"ng-container",13),o.YNc(6,Tz,2,5,"ng-container",13),o.YNc(7,Mz,3,2,"ng-template",null,24,o.W1O),o.YNc(9,Oz,3,3,"li",25),o.YNc(10,Fz,3,3,"li",25),o.qZA()(),o.YNc(11,Lz,1,0,"ng-container",20),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.panelStyleClass),o.Q6J("ngClass","p-dropdown-panel p-component")("@overlayAnimation",o.VKq(19,Bz,o.WLB(16,Vz,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),o.xp6(1),o.Q6J("ngTemplateOutlet",e.headerTemplate),o.xp6(1),o.Q6J("ngIf",e.filter),o.xp6(1),o.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),o.xp6(1),o.Q6J("ngClass",o.VKq(21,Uz,e.virtualScroll)),o.uIk("id",e.listId),o.xp6(1),o.Q6J("ngIf",e.group),o.xp6(1),o.Q6J("ngIf",!e.group),o.xp6(3),o.Q6J("ngIf",e.filterValue&&e.isEmpty()),o.xp6(1),o.Q6J("ngIf",!e.filterValue&&e.isEmpty()),o.xp6(1),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}const jz=function(n,t,e,i){return{"p-dropdown p-component":!0,"p-disabled":n,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":i}},zz={provide:Ws,useExisting:(0,o.Gpc)(()=>XM),multi:!0};let Gz=(()=>{class n{constructor(){this.onClick=new o.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.TgZ(0,"li",0),o.NdJ("click",function(s){return i.onOptionClick(s)}),o.YNc(1,tz,2,1,"span",1),o.YNc(2,nz,1,0,"ng-container",2),o.qZA()),2&e&&(o.Q6J("ngStyle",o.VKq(8,aL,i.itemSize+"px"))("id",i.selected?"p-highlighted-option":"")("ngClass",o.WLB(10,iz,i.selected,i.disabled)),o.uIk("aria-label",i.label)("aria-selected",i.selected),o.xp6(1),o.Q6J("ngIf",!i.template),o.xp6(1),o.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",o.VKq(13,JM,i.option)))},directives:[Jy,Ki,kn,on,Ds],encapsulation:2}),n})(),XM=(()=>{class n{constructor(e,i,r,s,u,h,p){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.filterService=u,this.config=h,this.overlayService=p,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new o.vpe,this.onFilter=new o.vpe,this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onClick=new o.vpe,this.onShow=new o.vpe,this.onHide=new o.vpe,this.onClear=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.viewPortOffsetTop=0,this.id=kp()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list"}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),this.selectedOption||(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(ws.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(ws.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?ct.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ct.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?ct.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?ct.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ct.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const i=e.option;this.isOptionDisabled(i)||(this.selectItem(e.originalEvent,i),this.accessibleViewChild.nativeElement.focus()),setTimeout(()=>{this.hide()},150)}selectItem(e,i){this.selectedOption!=i&&(this.selectedOption=i,this.value=this.getOptionValue(i),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}),this.virtualScroll&&setTimeout(()=>{this.viewPortOffsetTop=this.viewPort?this.viewPort.measureScrollOffset():0},1))}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.virtualScroll&&this.updateVirtualScrollSelectedIndex(!0),this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){if(this.virtualScroll&&this.viewPort){let i=this.viewPort.getRenderedRange();this.updateVirtualScrollSelectedIndex(!1),(i.start>this.virtualScrollSelectedIndex||i.end<this.virtualScrollSelectedIndex)&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)}ae.findSingle(this.overlay,"li.p-highlight")&&ae.scrollInView(this.itemsWrapper,ae.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1}}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus(),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return ae.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=ae.findSingle(this.overlay,this.virtualScroll?".cdk-virtual-scroll-viewport":".p-dropdown-items-wrapper"),this.appendOverlay(),this.autoZIndex&&Rr.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length&&!this.virtualScroll){let r=ae.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");r&&r.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){"void"===e.toState&&Rr.clear(e.element)}scrollToSelectedVirtualScrollElement(){this.virtualAutoScrolled||(this.viewPortOffsetTop?this.viewPort.scrollToOffset(this.viewPortOffsetTop):this.virtualScrollSelectedIndex>-1&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)),this.virtualAutoScrolled=!0}updateVirtualScrollSelectedIndex(e){this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&(e&&(this.viewPortOffsetTop=0),this.virtualScrollSelectedIndex=this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay))}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):ae.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=ae.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.virtualScroll&&(this.virtualAutoScrolled=!1),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?ae.absolutePosition(this.overlay,this.containerViewChild.nativeElement):ae.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}findNextEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}onKeydown(e,i){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let u=this.optionsToDisplay[r.groupIndex-1];u&&(this.selectItem(e,this.getOptionGroupChildren(u)[this.getOptionGroupChildren(u).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:i&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:i&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const i=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=i,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+i:i,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let i;return this.searchValue&&(i=this.searchOptionInRange(e,this.optionsToDisplay.length),i||(i=this.searchOptionInRange(0,e))),i}searchOptionInRange(e,i){for(let r=e;r<i;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let u=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(u).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(u))return u}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let u=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(u).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(u))return u}}return null}findOptionIndex(e,i){let r=-1;if(i)for(let s=0;s<i.length;s++)if(null==e&&null==this.getOptionValue(i[s])||ct.equals(e,this.getOptionValue(i[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,i){let r,s;if(i)for(let u=0;u<i.length&&(r=u,s=this.findOptionIndex(e,this.getOptionGroupChildren(i[u])),-1===s);u++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,i,r){if(this.group&&!r){let s;if(i&&i.length)for(let u of i)if(s=this.findOption(e,this.getOptionGroupChildren(u),!0),s)break;return s}{let s=this.findOptionIndex(e,i);return-1!=s?i[s]:null}}onFilterInputChange(e){let i=e.target.value;i&&i.length?(this._filterValue=i,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let i=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&i.push(Object.assign(Object.assign({},r),{[this.optionGroupChildren]:s}))}this.optionsToDisplay=i}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?ae.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():ae.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",i=>{!this.preventDocumentDefault&&this.isOutsideClicked(i)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!ae.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new TM(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Rr.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(rT),o.Y36(Ph),o.Y36(Hw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-dropdown"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Hu,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(rz,5),o.Gf(sz,5),o.Gf(oz,5),o.Gf(S0,5),o.Gf(az,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.filterViewChild=r.first),o.iGM(r=o.CRH())&&(i.accessibleViewChild=r.first),o.iGM(r=o.CRH())&&(i.viewPort=r.first),o.iGM(r=o.CRH())&&(i.editableInputViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused||i.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",virtualScroll:"virtualScroll",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear"},features:[o._Bn([zz])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",4,"ngIf"],[1,"p-dropdown-items-wrapper"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["itemslist",""],["class","p-dropdown-empty-message",4,"ngIf"],[1,"p-dropdown-header"],[1,"p-dropdown-filter-container",3,"click"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],[3,"option","selected","label","disabled","template","onClick"],[3,"ngStyle","itemSize","scrolledIndexChange",4,"ngIf"],[3,"ngStyle","itemSize","scrolledIndexChange"],["viewport",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"p-dropdown-empty-message"],["emptyFilter",""],["empty",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.NdJ("click",function(s){return i.onMouseclick(s)}),o.TgZ(2,"div",2)(3,"input",3,4),o.NdJ("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)})("keydown",function(s){return i.onKeydown(s,!0)}),o.qZA()(),o.YNc(5,dz,3,13,"span",5),o.YNc(6,fz,2,4,"span",6),o.YNc(7,pz,2,4,"input",7),o.YNc(8,gz,1,0,"i",8),o.TgZ(9,"div",9),o._UZ(10,"span",10),o.qZA(),o.YNc(11,Hz,12,23,"div",11),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.l5B(20,jz,i.disabled,i.overlayVisible,i.focused,i.showClear&&!i.disabled))("ngStyle",i.style),o.xp6(3),o.Q6J("disabled",i.disabled),o.uIk("id",i.inputId)("placeholder",i.placeholder)("aria-label",i.ariaLabel)("aria-expanded",!1)("aria-labelledby",i.ariaLabelledBy)("tabindex",i.tabindex)("autofocus",i.autofocus)("aria-activedescendant",i.overlayVisible?i.labelId:null),o.xp6(2),o.Q6J("ngIf",!i.editable&&null!=i.label),o.xp6(1),o.Q6J("ngIf",!i.editable&&null==i.label),o.xp6(1),o.Q6J("ngIf",i.editable),o.xp6(1),o.Q6J("ngIf",null!=i.value&&i.showClear&&!i.disabled),o.xp6(1),o.uIk("aria-expanded",i.overlayVisible),o.xp6(1),o.Q6J("ngClass",i.dropdownIcon),o.xp6(1),o.Q6J("ngIf",i.overlayVisible))},directives:[Gz,S0,kn,Ki,on,X6,Ds,Cn,KN,JN],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[$r("overlayAnimation",[ln(":enter",[ui({opacity:0,transform:"scaleY(0.8)"}),ds("{{showTransitionParams}}")]),ln(":leave",[ds("{{hideTransitionParams}}",ui({opacity:0}))])])]},changeDetection:0}),n})(),CS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei,Ba,uS,ez,Vg],Ba,uS]}),n})(),uL=(()=>{class n{constructor(e,i,r){this.el=e,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(jg,8),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i.onInput(s)}),2&e&&o.ekj("p-filled",i.filled)}}),n})(),ek=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei]]}),n})(),$z=(()=>{class n{constructor(e,i,r,s){this.el=e,this.ngModel=i,this.control=r,this.cd=s,this.onResize=new o.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(e){this.autoResize&&this.resize(e)}onBlur(e){this.autoResize&&this.resize(e)}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(jg,8),o.Y36(yd,8),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i.onInput(s)})("focus",function(s){return i.onFocus(s)})("blur",function(s){return i.onBlur(s)}),2&e&&o.ekj("p-filled",i.filled)("p-inputtextarea-resizable",i.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),n})(),Wz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei]]}),n})();const qz=["input"];function Kz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",6),o.NdJ("click",function(){return o.CHM(e),o.oxw().clear()}),o.qZA()}}const cL=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},dL=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function Zz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",7)(1,"button",8),o.NdJ("mousedown",function(r){return o.CHM(e),o.oxw().onUpButtonMouseDown(r)})("mouseup",function(){return o.CHM(e),o.oxw().onUpButtonMouseUp()})("mouseleave",function(){return o.CHM(e),o.oxw().onUpButtonMouseLeave()})("keydown",function(r){return o.CHM(e),o.oxw().onUpButtonKeyDown(r)})("keyup",function(){return o.CHM(e),o.oxw().onUpButtonKeyUp()}),o.qZA(),o.TgZ(2,"button",8),o.NdJ("mousedown",function(r){return o.CHM(e),o.oxw().onDownButtonMouseDown(r)})("mouseup",function(){return o.CHM(e),o.oxw().onDownButtonMouseUp()})("mouseleave",function(){return o.CHM(e),o.oxw().onDownButtonMouseLeave()})("keydown",function(r){return o.CHM(e),o.oxw().onDownButtonKeyDown(r)})("keyup",function(){return o.CHM(e),o.oxw().onDownButtonKeyUp()}),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Tol(e.incrementButtonClass),o.Q6J("ngClass",o.DdM(10,cL))("icon",e.incrementButtonIcon)("disabled",e.disabled),o.xp6(1),o.Tol(e.decrementButtonClass),o.Q6J("ngClass",o.DdM(11,dL))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function Yz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",8),o.NdJ("mousedown",function(r){return o.CHM(e),o.oxw().onUpButtonMouseDown(r)})("mouseup",function(){return o.CHM(e),o.oxw().onUpButtonMouseUp()})("mouseleave",function(){return o.CHM(e),o.oxw().onUpButtonMouseLeave()})("keydown",function(r){return o.CHM(e),o.oxw().onUpButtonKeyDown(r)})("keyup",function(){return o.CHM(e),o.oxw().onUpButtonKeyUp()}),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.incrementButtonClass),o.Q6J("ngClass",o.DdM(5,cL))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function Qz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",8),o.NdJ("mousedown",function(r){return o.CHM(e),o.oxw().onDownButtonMouseDown(r)})("mouseup",function(){return o.CHM(e),o.oxw().onDownButtonMouseUp()})("mouseleave",function(){return o.CHM(e),o.oxw().onDownButtonMouseLeave()})("keydown",function(r){return o.CHM(e),o.oxw().onDownButtonKeyDown(r)})("keyup",function(){return o.CHM(e),o.oxw().onDownButtonKeyUp()}),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.decrementButtonClass),o.Q6J("ngClass",o.DdM(5,dL))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const Jz=function(n,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":n,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},Xz={provide:Ws,useExisting:(0,o.Gpc)(()=>hL),multi:!0};let hL=(()=>{class n{constructor(e,i){this.el=e,this.cd=i,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new o.vpe,this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onKeyDown=new o.vpe,this.onClear=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),i=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>i.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,Object.assign(Object.assign({},this.getOptions()),{useGrouping:!1}));return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let i=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(i){if("-"===i)return i;let r=+i;return isNaN(r)?null:r}return null}repeat(e,i,r){if(this.readonly)return;let s=i||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,i){let r=this.step*i,s=this.parseValue(this.input.nativeElement.value)||0,u=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(u).length||(this.updateInput(u,null,"spin",null),this.updateModel(e,u),this.handleOnInput(e,s,u))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let i=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,u=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(s.charAt(i-1))||e.preventDefault();break;case 39:this.isNumeralChar(s.charAt(i))||e.preventDefault();break;case 13:u=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(u),this.input.nativeElement.setAttribute("aria-valuenow",u),this.updateModel(e,u);break;case 8:if(e.preventDefault(),i===r){const h=s.charAt(i-1),{decimalCharIndex:p,decimalCharIndexWithoutPrefix:y}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(h)){const E=this.getDecimalLength(s);if(this._group.test(h))this._group.lastIndex=0,u=s.slice(0,i-2)+s.slice(i-1);else if(this._decimal.test(h))this._decimal.lastIndex=0,E?this.input.nativeElement.setSelectionRange(i-1,i-1):u=s.slice(0,i-1)+s.slice(i);else if(p>0&&i>p){const I=this.isDecimalMode()&&(this.minFractionDigits||0)<E?"":"0";u=s.slice(0,i-1)+I+s.slice(i)}else 1===y?(u=s.slice(0,i-1)+"0"+s.slice(i),u=this.parseValue(u)>0?u:""):u=s.slice(0,i-1)+s.slice(i)}this.updateValue(e,u,null,"delete-single")}else u=this.deleteRange(s,i,r),this.updateValue(e,u,null,"delete-range");break;case 46:if(e.preventDefault(),i===r){const h=s.charAt(i),{decimalCharIndex:p,decimalCharIndexWithoutPrefix:y}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(h)){const E=this.getDecimalLength(s);if(this._group.test(h))this._group.lastIndex=0,u=s.slice(0,i)+s.slice(i+2);else if(this._decimal.test(h))this._decimal.lastIndex=0,E?this.input.nativeElement.setSelectionRange(i+1,i+1):u=s.slice(0,i)+s.slice(i+1);else if(p>0&&i>p){const I=this.isDecimalMode()&&(this.minFractionDigits||0)<E?"":"0";u=s.slice(0,i)+I+s.slice(i+1)}else 1===y?(u=s.slice(0,i)+"0"+s.slice(i+1),u=this.parseValue(u)>0?u:""):u=s.slice(0,i)+s.slice(i+1)}this.updateValue(e,u,null,"delete-back-single")}else u=this.deleteRange(s,i,r),this.updateValue(e,u,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let i=e.which||e.keyCode,r=String.fromCharCode(i);const s=this.isDecimalSign(r),u=this.isMinusSign(r);(48<=i&&i<=57||u||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:u})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let i=(e.clipboardData||window.clipboardData).getData("Text");if(i){let r=this.parseValue(i);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let i=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:i,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){const i=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const u=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:i,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:u}}insert(e,i,r={isDecimalSign:!1,isMinusSign:!1}){const s=i.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let u=this.input.nativeElement.selectionStart,h=this.input.nativeElement.selectionEnd,p=this.input.nativeElement.value.trim();const{decimalCharIndex:y,minusCharIndex:E,suffixCharIndex:I,currencyCharIndex:M}=this.getCharIndexes(p);let P;if(r.isMinusSign)0===u&&(P=p,(-1===E||0!==h)&&(P=this.insertText(p,i,0,h)),this.updateValue(e,P,i,"insert"));else if(r.isDecimalSign)y>0&&u===y?this.updateValue(e,p,i,"insert"):(y>u&&y<h||-1===y&&this.maxFractionDigits)&&(P=this.insertText(p,i,u,h),this.updateValue(e,P,i,"insert"));else{const B=this.numberFormat.resolvedOptions().maximumFractionDigits,Q=u!==h?"range-insert":"insert";if(y>0&&u>y){if(u+i.length-(y+1)<=B){const be=M>=u?M-1:I>=u?I:p.length;P=p.slice(0,u)+i+p.slice(u+i.length,be)+p.slice(be),this.updateValue(e,P,i,Q)}}else P=this.insertText(p,i,u,h),this.updateValue(e,P,i,Q)}}insertText(e,i,r,s){if(2===("."===i?i:i.split(".")).length){const h=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,h>0?e.slice(0,r)+this.formatValue(i)+e.slice(s):e||this.formatValue(i)}return s-r===e.length?this.formatValue(i):0===r?i+e.slice(s):s===e.length?e.slice(0,r)+i:e.slice(0,r)+i+e.slice(s)}deleteRange(e,i,r){let s;return s=r-i===e.length?"":0===i?e.slice(r):r===e.length?e.slice(0,i):e.slice(0,i)+e.slice(r),s}initCursor(){let e=this.input.nativeElement.selectionStart,i=this.input.nativeElement.value,r=i.length,s=null,u=(this.prefixChar||"").length;i=i.replace(this._prefix,""),e-=u;let h=i.charAt(e);if(this.isNumeralChar(h))return e+u;let p=e-1;for(;p>=0;){if(h=i.charAt(p),this.isNumeralChar(h)){s=p+u;break}p--}if(null!==s)this.input.nativeElement.setSelectionRange(s+1,s+1);else{for(p=e;p<r;){if(h=i.charAt(p),this.isNumeralChar(h)){s=p+u;break}p++}null!==s&&this.input.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,i,r,s){let u=this.input.nativeElement.value,h=null;null!=i&&(h=this.parseValue(i),h=h||this.allowEmpty?h:0,this.updateInput(h,r,s,i),this.handleOnInput(e,u,h))}handleOnInput(e,i,r){this.isValueChanged(i,r)&&this.onInput.emit({originalEvent:e,value:r})}isValueChanged(e,i){return null===i&&null!==e||null!=i&&i!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,i,r,s){i=i||"";let u=this.input.nativeElement.value,h=this.formatValue(e),p=u.length;if(h!==s&&(h=this.concatValues(h,s)),0===p){this.input.nativeElement.value=h,this.input.nativeElement.setSelectionRange(0,0);const E=this.initCursor()+i.length;this.input.nativeElement.setSelectionRange(E,E)}else{let y=this.input.nativeElement.selectionStart,E=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<h.length)return;this.input.nativeElement.value=h;let I=h.length;if("range-insert"===r){const M=this.parseValue((u||"").slice(0,y)),B=(null!==M?M.toString():"").split("").join(`(${this.groupChar})?`),Q=new RegExp(B,"g");Q.test(h);const be=i.split("").join(`(${this.groupChar})?`),et=new RegExp(be,"g");et.test(h.slice(Q.lastIndex)),E=Q.lastIndex+et.lastIndex,this.input.nativeElement.setSelectionRange(E,E)}else if(I===p)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(E+1,E+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(E-1,E-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(E,E);else if("delete-back-single"===r){let M=u.charAt(E-1),P=u.charAt(E),B=p-I,Q=this._group.test(P);Q&&1===B?E+=1:!Q&&this.isNumeralChar(M)&&(E+=-1*B+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(E,E)}else if("-"===u&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const P=this.initCursor()+i.length+1;this.input.nativeElement.setSelectionRange(P,P)}else E+=I-p,this.input.nativeElement.setSelectionRange(E,E)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,i){if(e&&i){let r=i.search(this._decimal);return this._decimal.lastIndex=0,-1!==r?e.split(this._decimal)[0]+i.slice(r):e}return e}getDecimalLength(e){if(e){const i=e.split(this._decimal);if(2===i.length)return i[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let i=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(i),this.input.nativeElement.setAttribute("aria-valuenow",i),this.updateModel(e,i),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,i){this.value!==i&&(this.value=i,this.onModelChange(i)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-inputNumber"]],viewQuery:function(e,i){if(1&e&&o.Gf(qz,5),2&e){let r;o.iGM(r=o.CRH())&&(i.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused)("p-inputnumber-clearable",i.showClear&&"vertical"!=i.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[o._Bn([Xz]),o.TTD],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,i){1&e&&(o.TgZ(0,"span",0)(1,"input",1,2),o.NdJ("input",function(s){return i.onUserInput(s)})("keydown",function(s){return i.onInputKeyDown(s)})("keypress",function(s){return i.onInputKeyPress(s)})("paste",function(s){return i.onPaste(s)})("click",function(){return i.onInputClick()})("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)}),o.qZA(),o.YNc(3,Kz,1,0,"i",3),o.YNc(4,Zz,3,12,"span",4),o.YNc(5,Yz,1,6,"button",5),o.YNc(6,Qz,1,6,"button",5),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.kEZ(28,Jz,i.showButtons&&"stacked"===i.buttonLayout,i.showButtons&&"horizontal"===i.buttonLayout,i.showButtons&&"vertical"===i.buttonLayout))("ngStyle",i.style),o.xp6(1),o.Tol(i.inputStyleClass),o.Q6J("ngClass","p-inputnumber-input")("ngStyle",i.inputStyle)("value",i.formattedValue())("disabled",i.disabled)("readonly",i.readonly),o.uIk("placeholder",i.placeholder)("title",i.title)("id",i.inputId)("size",i.size)("name",i.name)("autocomplete",i.autocomplete)("maxlength",i.maxlength)("tabindex",i.tabindex)("aria-label",i.ariaLabel)("aria-required",i.ariaRequired)("required",i.required)("min",i.min)("max",i.max),o.xp6(2),o.Q6J("ngIf","vertical"!=i.buttonLayout&&i.showClear&&i.value),o.xp6(1),o.Q6J("ngIf",i.showButtons&&"stacked"===i.buttonLayout),o.xp6(1),o.Q6J("ngIf",i.showButtons&&"stacked"!==i.buttonLayout),o.xp6(1),o.Q6J("ngIf",i.showButtons&&"stacked"!==i.buttonLayout))},directives:[kn,Ki,uL,on,IM],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),tk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei,ek,Bg]]}),n})();function eG(n,t){1&n&&o.GkF(0)}const nk=function(n){return{$implicit:n}};function tG(n,t){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,eG,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",o.VKq(2,nk,e.paginatorState))}}function nG(n,t){if(1&n&&(o.TgZ(0,"span",17),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.currentPageReport)}}const ES=function(n){return{"p-disabled":n}};function iG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",18),o.NdJ("click",function(r){return o.CHM(e),o.oxw(2).changePageToFirst(r)}),o._UZ(1,"span",19),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("disabled",e.isFirstPage()||e.empty())("ngClass",o.VKq(2,ES,e.isFirstPage()||e.empty()))}}const rG=function(n){return{"p-highlight":n}};function sG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",22),o.NdJ("click",function(r){const u=o.CHM(e).$implicit;return o.oxw(3).onPageLinkClick(r,u-1)}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(3);o.Q6J("ngClass",o.VKq(2,rG,e-1==i.getPage())),o.xp6(1),o.Oqu(e)}}function oG(n,t){if(1&n&&(o.TgZ(0,"span",20),o.YNc(1,sG,2,4,"button",21),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e.pageLinks)}}function aG(n,t){if(1&n&&o._uU(0),2&n){const e=o.oxw(3);o.Oqu(e.currentPageReport)}}function lG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-dropdown",23),o.NdJ("onChange",function(r){return o.CHM(e),o.oxw(2).onPageDropdownChange(r)}),o.YNc(1,aG,1,1,"ng-template",24),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function uG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(r){return o.CHM(e),o.oxw(2).changePageToLast(r)}),o._UZ(1,"span",26),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("disabled",e.isLastPage()||e.empty())("ngClass",o.VKq(2,ES,e.isLastPage()||e.empty()))}}function cG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-inputNumber",27),o.NdJ("ngModelChange",function(r){return o.CHM(e),o.oxw(2).changePage(r-1)}),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("ngModel",e.currentPage())("disabled",e.empty())}}function dG(n,t){1&n&&o.GkF(0)}function hG(n,t){if(1&n&&o.YNc(0,dG,1,0,"ng-container",16),2&n){const e=t.$implicit,i=o.oxw(4);o.Q6J("ngTemplateOutlet",i.dropdownItemTemplate)("ngTemplateOutletContext",o.VKq(2,nk,e))}}function fG(n,t){1&n&&(o.ynx(0),o.YNc(1,hG,1,4,"ng-template",30),o.BQk())}function pG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-dropdown",28),o.NdJ("ngModelChange",function(r){return o.CHM(e),o.oxw(2).rows=r})("onChange",function(r){return o.CHM(e),o.oxw(2).onRppChange(r)}),o.YNc(1,fG,2,0,"ng-container",29),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),o.xp6(1),o.Q6J("ngIf",e.dropdownItemTemplate)}}function gG(n,t){1&n&&o.GkF(0)}function mG(n,t){if(1&n&&(o.TgZ(0,"div",31),o.YNc(1,gG,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",o.VKq(2,nk,e.paginatorState))}}function _G(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1),o.YNc(1,tG,2,4,"div",2),o.YNc(2,nG,2,1,"span",3),o.YNc(3,iG,2,4,"button",4),o.TgZ(4,"button",5),o.NdJ("click",function(r){return o.CHM(e),o.oxw().changePageToPrev(r)}),o._UZ(5,"span",6),o.qZA(),o.YNc(6,oG,2,1,"span",7),o.YNc(7,lG,2,5,"p-dropdown",8),o.TgZ(8,"button",9),o.NdJ("click",function(r){return o.CHM(e),o.oxw().changePageToNext(r)}),o._UZ(9,"span",10),o.qZA(),o.YNc(10,uG,2,4,"button",11),o.YNc(11,cG,1,2,"p-inputNumber",12),o.YNc(12,pG,2,6,"p-dropdown",13),o.YNc(13,mG,2,4,"div",14),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.styleClass),o.Q6J("ngStyle",e.style)("ngClass","p-paginator p-component"),o.xp6(1),o.Q6J("ngIf",e.templateLeft),o.xp6(1),o.Q6J("ngIf",e.showCurrentPageReport),o.xp6(1),o.Q6J("ngIf",e.showFirstLastIcon),o.xp6(1),o.Q6J("disabled",e.isFirstPage()||e.empty())("ngClass",o.VKq(17,ES,e.isFirstPage()||e.empty())),o.xp6(2),o.Q6J("ngIf",e.showPageLinks),o.xp6(1),o.Q6J("ngIf",e.showJumpToPageDropdown),o.xp6(1),o.Q6J("disabled",e.isLastPage()||e.empty())("ngClass",o.VKq(19,ES,e.isLastPage()||e.empty())),o.xp6(2),o.Q6J("ngIf",e.showFirstLastIcon),o.xp6(1),o.Q6J("ngIf",e.showJumpToPageInput),o.xp6(1),o.Q6J("ngIf",e.rowsPerPageOptions),o.xp6(1),o.Q6J("ngIf",e.templateRight)}}let yG=(()=>{class n{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new o.vpe,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),i=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-i/2)),s=Math.min(e-1,r+i-1);return r=Math.max(0,r-(this.pageLinkSize-(s-r+1))),[r,s]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let s=e[0];s<=r;s++)this.pageLinks.push(s+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let s=0;s<this.getPageCount();s++)this.pageItems.push({label:String(s+1),value:s})}}changePage(e){var i=this.getPageCount();if(e>=0&&e<i){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:i};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,i){this.changePage(i),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[o.TTD],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,i){1&e&&o.YNc(0,_G,14,21,"div",0),2&e&&o.Q6J("ngIf",!!i.alwaysShow||i.pageLinks&&i.pageLinks.length>1)},directives:[XM,hL,on,Ki,kn,Ds,Jy,Cn,hS,jg,Hu],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),vG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei,CS,tk,bS,Ba,Vg],CS,tk,bS,Ba]}),n})();function wG(n,t){if(1&n&&o._UZ(0,"span",8),2&n){const e=o.oxw(2).$implicit;o.Tol(e.icon),o.Q6J("ngClass","p-button-icon p-button-icon-left")}}function bG(n,t){if(1&n&&(o.ynx(0),o.YNc(1,wG,1,3,"span",6),o.TgZ(2,"span",7),o._uU(3),o.qZA(),o.BQk()),2&n){const e=o.oxw().$implicit,i=o.oxw();o.xp6(1),o.Q6J("ngIf",e.icon),o.xp6(2),o.Oqu(i.getOptionLabel(e))}}function CG(n,t){1&n&&o.GkF(0)}const EG=function(n,t){return{$implicit:n,index:t}};function TG(n,t){if(1&n&&o.YNc(0,CG,1,0,"ng-container",9),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw();o.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",o.WLB(2,EG,i,r))}}const IG=function(n,t,e){return{"p-highlight":n,"p-disabled":t,"p-button-icon-only":e}};function SG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2,3),o.NdJ("click",function(r){const s=o.CHM(e),u=s.$implicit,h=s.index;return o.oxw().onItemClick(r,u,h)})("keydown.enter",function(r){const s=o.CHM(e),u=s.$implicit,h=s.index;return o.oxw().onItemClick(r,u,h)})("blur",function(){return o.CHM(e),o.oxw().onBlur()}),o.YNc(2,bG,4,2,"ng-container",4),o.YNc(3,TG,1,5,"ng-template",null,5,o.W1O),o.qZA()}if(2&n){const e=t.$implicit,i=o.MAs(4),r=o.oxw();o.Tol(e.styleClass),o.Q6J("ngClass",o.kEZ(10,IG,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),o.uIk("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),o.xp6(2),o.Q6J("ngIf",!r.itemTemplate)("ngIfElse",i)}}const DG={provide:Ws,useExisting:(0,o.Gpc)(()=>xG),multi:!0};let xG=(()=>{class n{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new o.vpe,this.onChange=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?ct.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ct.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?ct.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,i,r){if(!this.disabled&&!this.isOptionDisabled(i)){if(this.multiple)this.isSelected(i)?this.removeOption(i):this.value=[...this.value||[],this.getOptionValue(i)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let s=this.getOptionValue(i);this.value!==s&&(this.value=this.getOptionValue(i),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:i,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(i=>!ct.equals(i,this.getOptionValue(e),this.dataKey))}isSelected(e){let i=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(ct.equals(s,r,this.dataKey)){i=!0;break}}else i=ct.equals(this.getOptionValue(e),this.value,this.dataKey);return i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-selectButton"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,o.Rgc,5),2&e){let s;o.iGM(s=o.CRH())&&(i.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[o._Bn([DG])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,SG,5,14,"div",1),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",i.style),o.xp6(1),o.Q6J("ngForOf",i.options))},directives:[kn,Ki,Cn,Jy,on,Ds],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),n})(),AG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei,Vg]]}),n})();const MG=function(n,t,e){return{"p-checkbox-label-active":n,"p-disabled":t,"p-checkbox-label-focus":e}};function kG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"label",7),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(),u=o.MAs(3);return s.onClick(r,u)}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("ngClass",o.kEZ(3,MG,null!=e.value,e.disabled,e.focused)),o.uIk("for",e.inputId),o.xp6(1),o.Oqu(e.label)}}const RG=function(n,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":n,"p-checkbox-focused":t}},OG=function(n,t,e){return{"p-highlight":n,"p-disabled":t,"p-focus":e}},PG={provide:Ws,useExisting:(0,o.Gpc)(()=>NG),multi:!0};let NG=(()=>{class n{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,i){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,i.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[o._Bn([PG])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),o.NdJ("keyup",function(u){return i.onKeyup(u)})("keydown",function(u){return i.onKeydown(u)})("focus",function(){return i.onFocus()})("blur",function(){return i.onBlur()}),o.qZA()(),o.TgZ(4,"div",4),o.NdJ("click",function(u){o.CHM(r);const h=o.MAs(3);return i.onClick(u,h)}),o._UZ(5,"span",5),o.qZA()(),o.YNc(6,kG,2,7,"label",6)}2&e&&(o.Tol(i.styleClass),o.Q6J("ngStyle",i.style)("ngClass",o.WLB(14,RG,i.disabled,i.focused)),o.xp6(2),o.Q6J("name",i.name)("readonly",i.readonly)("disabled",i.disabled),o.uIk("id",i.inputId)("tabindex",i.tabindex)("aria-labelledby",i.ariaLabelledBy),o.xp6(2),o.Q6J("ngClass",o.kEZ(17,OG,null!=i.value,i.disabled,i.focused)),o.uIk("aria-checked",!0===i.value),o.xp6(1),o.Q6J("ngClass",!0===i.value?i.checkboxTrueIcon:!1===i.value?i.checkboxFalseIcon:""),o.xp6(1),o.Q6J("ngIf",i.label))},directives:[Ki,kn,on],encapsulation:2,changeDetection:0}),n})(),FG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei]]}),n})();const LG=["container"],VG=["inputfield"],BG=["contentWrapper"];function UG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",8),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).clear()}),o.qZA()}}function HG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(r){o.CHM(e),o.oxw();const s=o.MAs(1);return o.oxw().onButtonClick(r,s)}),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("icon",e.icon)("disabled",e.disabled),o.uIk("aria-label",e.iconAriaLabel)}}function jG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"input",4,5),o.NdJ("focus",function(r){return o.CHM(e),o.oxw().onInputFocus(r)})("keydown",function(r){return o.CHM(e),o.oxw().onInputKeydown(r)})("click",function(){return o.CHM(e),o.oxw().onInputClick()})("blur",function(r){return o.CHM(e),o.oxw().onInputBlur(r)})("input",function(r){return o.CHM(e),o.oxw().onUserInput(r)}),o.qZA(),o.YNc(2,UG,1,0,"i",6),o.YNc(3,HG,1,3,"button",7)}if(2&n){const e=o.oxw();o.Tol(e.inputStyleClass),o.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),o.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),o.xp6(2),o.Q6J("ngIf",e.showClear&&!e.disabled&&null!=e.value),o.xp6(1),o.Q6J("ngIf",e.showIcon)}}function zG(n,t){1&n&&o.GkF(0)}function GG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",30),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(4).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(4).onPrevButtonClick(r)}),o._UZ(1,"span",31),o.qZA()}}function $G(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",32),o.NdJ("click",function(r){return o.CHM(e),o.oxw(4).switchToMonthView(r)})("keydown",function(r){return o.CHM(e),o.oxw(4).onContainerButtonKeydown(r)}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.Q6J("disabled",i.switchViewButtonDisabled()),o.xp6(1),o.hij(" ",i.getMonthName(e.month)," ")}}function WG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(r){return o.CHM(e),o.oxw(4).switchToYearView(r)})("keydown",function(r){return o.CHM(e),o.oxw(4).onContainerButtonKeydown(r)}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.Q6J("disabled",i.switchViewButtonDisabled()),o.xp6(1),o.hij(" ",i.getYear(e)," ")}}function qG(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(5);o.xp6(1),o.AsE("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function KG(n,t){1&n&&o.GkF(0)}const fL=function(n){return{$implicit:n}};function ZG(n,t){if(1&n&&(o.TgZ(0,"span",34),o.YNc(1,qG,2,2,"ng-container",13),o.YNc(2,KG,1,0,"ng-container",35),o.qZA()),2&n){const e=o.oxw(4);o.xp6(1),o.Q6J("ngIf",!e.decadeTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",o.VKq(3,fL,e.yearPickerValues))}}function YG(n,t){if(1&n&&(o.TgZ(0,"th",41)(1,"span"),o._uU(2),o.qZA()()),2&n){const e=o.oxw(5);o.xp6(2),o.Oqu(e.getTranslation("weekHeader"))}}function QG(n,t){if(1&n&&(o.TgZ(0,"th",42)(1,"span"),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e)}}function JG(n,t){if(1&n&&(o.TgZ(0,"td",45)(1,"span",46),o._uU(2),o.qZA()()),2&n){const e=o.oxw().index,i=o.oxw(2).$implicit;o.xp6(2),o.hij(" ",i.weekNumbers[e]," ")}}function XG(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e.day)}}function e$(n,t){1&n&&o.GkF(0)}const t$=function(n,t){return{"p-highlight":n,"p-disabled":t}};function n$(n,t){if(1&n){const e=o.EpF();o.ynx(0),o.TgZ(1,"span",48),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw().$implicit;return o.oxw(6).onDateSelect(r,s)})("keydown",function(r){o.CHM(e);const s=o.oxw().$implicit,u=o.oxw(3).index;return o.oxw(3).onDateCellKeydown(r,s,u)}),o.YNc(2,XG,2,1,"ng-container",13),o.YNc(3,e$,1,0,"ng-container",35),o.qZA(),o.BQk()}if(2&n){const e=o.oxw().$implicit,i=o.oxw(6);o.xp6(1),o.Q6J("ngClass",o.WLB(4,t$,i.isSelected(e),!e.selectable)),o.xp6(1),o.Q6J("ngIf",!i.dateTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",i.dateTemplate)("ngTemplateOutletContext",o.VKq(7,fL,e))}}const i$=function(n,t){return{"p-datepicker-other-month":n,"p-datepicker-today":t}};function r$(n,t){if(1&n&&(o.TgZ(0,"td",47),o.YNc(1,n$,4,9,"ng-container",13),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(6);o.Q6J("ngClass",o.WLB(2,i$,e.otherMonth,e.today)),o.xp6(1),o.Q6J("ngIf",!e.otherMonth||i.showOtherMonths)}}function s$(n,t){if(1&n&&(o.TgZ(0,"tr"),o.YNc(1,JG,3,1,"td",43),o.YNc(2,r$,2,5,"td",44),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(5);o.xp6(1),o.Q6J("ngIf",i.showWeek),o.xp6(1),o.Q6J("ngForOf",e)}}function o$(n,t){if(1&n&&(o.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),o.YNc(4,YG,3,1,"th",38),o.YNc(5,QG,3,1,"th",39),o.qZA()(),o.TgZ(6,"tbody"),o.YNc(7,s$,3,2,"tr",40),o.qZA()()()),2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.xp6(4),o.Q6J("ngIf",i.showWeek),o.xp6(1),o.Q6J("ngForOf",i.weekDays),o.xp6(2),o.Q6J("ngForOf",e.dates)}}function a$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",20)(1,"div",21),o.YNc(2,GG,2,0,"button",22),o.TgZ(3,"div",23),o.YNc(4,$G,2,2,"button",24),o.YNc(5,WG,2,2,"button",25),o.YNc(6,ZG,3,5,"span",26),o.qZA(),o.TgZ(7,"button",27),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(3).onNextButtonClick(r)}),o._UZ(8,"span",28),o.qZA()(),o.YNc(9,o$,8,3,"div",29),o.qZA()}if(2&n){const e=t.index,i=o.oxw(3);o.xp6(2),o.Q6J("ngIf",0===e),o.xp6(2),o.Q6J("ngIf","date"===i.currentView),o.xp6(1),o.Q6J("ngIf","year"!==i.currentView),o.xp6(1),o.Q6J("ngIf","year"===i.currentView),o.xp6(1),o.Udp("display",1===i.numberOfMonths||e===i.numberOfMonths-1?"inline-flex":"none"),o.xp6(2),o.Q6J("ngIf","date"===i.currentView)}}const pL=function(n){return{"p-highlight":n}};function l$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",51),o.NdJ("click",function(r){const u=o.CHM(e).index;return o.oxw(4).onMonthSelect(r,u)})("keydown",function(r){const u=o.CHM(e).index;return o.oxw(4).onMonthCellKeydown(r,u)}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=o.oxw(4);o.Q6J("ngClass",o.VKq(2,pL,r.isMonthSelected(i))),o.xp6(1),o.hij(" ",e," ")}}function u$(n,t){if(1&n&&(o.TgZ(0,"div",49),o.YNc(1,l$,2,4,"span",50),o.qZA()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",e.monthPickerValues())}}function c$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",54),o.NdJ("click",function(r){const u=o.CHM(e).$implicit;return o.oxw(4).onYearSelect(r,u)})("keydown",function(r){const u=o.CHM(e).$implicit;return o.oxw(4).onYearCellKeydown(r,u)}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(4);o.Q6J("ngClass",o.VKq(2,pL,i.isYearSelected(e))),o.xp6(1),o.hij(" ",e," ")}}function d$(n,t){if(1&n&&(o.TgZ(0,"div",52),o.YNc(1,c$,2,4,"span",53),o.qZA()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",e.yearPickerValues())}}function h$(n,t){if(1&n&&(o.ynx(0),o.TgZ(1,"div",16),o.YNc(2,a$,10,7,"div",17),o.qZA(),o.YNc(3,u$,2,1,"div",18),o.YNc(4,d$,2,1,"div",19),o.BQk()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.months),o.xp6(1),o.Q6J("ngIf","month"===e.currentView),o.xp6(1),o.Q6J("ngIf","year"===e.currentView)}}function f$(n,t){1&n&&(o.ynx(0),o._uU(1,"0"),o.BQk())}function p$(n,t){1&n&&(o.ynx(0),o._uU(1,"0"),o.BQk())}function g$(n,t){if(1&n&&(o.TgZ(0,"div",60)(1,"span"),o._uU(2),o.qZA()()),2&n){const e=o.oxw(3);o.xp6(2),o.Oqu(e.timeSeparator)}}function m$(n,t){1&n&&(o.ynx(0),o._uU(1,"0"),o.BQk())}function _$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",65)(1,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(3).incrementSecond(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(3).incrementSecond(r)})("mousedown",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseDown(r,2,1)})("mouseup",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(3).onTimePickerElementMouseLeave()}),o._UZ(2,"span",58),o.qZA(),o.TgZ(3,"span"),o.YNc(4,m$,2,0,"ng-container",13),o._uU(5),o.qZA(),o.TgZ(6,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(3).decrementSecond(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(3).decrementSecond(r)})("mousedown",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseDown(r,2,-1)})("mouseup",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(3).onTimePickerElementMouseLeave()}),o._UZ(7,"span",59),o.qZA()()}if(2&n){const e=o.oxw(3);o.xp6(4),o.Q6J("ngIf",e.currentSecond<10),o.xp6(1),o.Oqu(e.currentSecond)}}function y$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",66)(1,"button",67),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(3).toggleAMPM(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(3).toggleAMPM(r)}),o._UZ(2,"span",58),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA(),o.TgZ(5,"button",67),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(3).toggleAMPM(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(3).toggleAMPM(r)}),o._UZ(6,"span",59),o.qZA()()}if(2&n){const e=o.oxw(3);o.xp6(4),o.Oqu(e.pm?"PM":"AM")}}function v$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",55)(1,"div",56)(2,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(2).incrementHour(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(2).incrementHour(r)})("mousedown",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseDown(r,0,1)})("mouseup",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(2).onTimePickerElementMouseLeave()}),o._UZ(3,"span",58),o.qZA(),o.TgZ(4,"span"),o.YNc(5,f$,2,0,"ng-container",13),o._uU(6),o.qZA(),o.TgZ(7,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(2).decrementHour(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(2).decrementHour(r)})("mousedown",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseDown(r,0,-1)})("mouseup",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(2).onTimePickerElementMouseLeave()}),o._UZ(8,"span",59),o.qZA()(),o.TgZ(9,"div",60)(10,"span"),o._uU(11),o.qZA()(),o.TgZ(12,"div",61)(13,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(2).incrementMinute(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(2).incrementMinute(r)})("mousedown",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseDown(r,1,1)})("mouseup",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(2).onTimePickerElementMouseLeave()}),o._UZ(14,"span",58),o.qZA(),o.TgZ(15,"span"),o.YNc(16,p$,2,0,"ng-container",13),o._uU(17),o.qZA(),o.TgZ(18,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(2).decrementMinute(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(2).decrementMinute(r)})("mousedown",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseDown(r,1,-1)})("mouseup",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(2).onTimePickerElementMouseLeave()}),o._UZ(19,"span",59),o.qZA()(),o.YNc(20,g$,3,1,"div",62),o.YNc(21,_$,8,2,"div",63),o.YNc(22,y$,7,1,"div",64),o.qZA()}if(2&n){const e=o.oxw(2);o.xp6(5),o.Q6J("ngIf",e.currentHour<10),o.xp6(1),o.Oqu(e.currentHour),o.xp6(5),o.Oqu(e.timeSeparator),o.xp6(5),o.Q6J("ngIf",e.currentMinute<10),o.xp6(1),o.Oqu(e.currentMinute),o.xp6(3),o.Q6J("ngIf",e.showSeconds),o.xp6(1),o.Q6J("ngIf",e.showSeconds),o.xp6(1),o.Q6J("ngIf","12"==e.hourFormat)}}const gL=function(n){return[n]};function w$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",68)(1,"button",69),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(2).onTodayButtonClick(r)}),o.qZA(),o.TgZ(2,"button",69),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(2).onClearButtonClick(r)}),o.qZA()()}if(2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("label",e.getTranslation("today"))("ngClass",o.VKq(4,gL,e.todayButtonStyleClass)),o.xp6(1),o.Q6J("label",e.getTranslation("clear"))("ngClass",o.VKq(6,gL,e.clearButtonStyleClass))}}function b$(n,t){1&n&&o.GkF(0)}const C$=function(n,t,e,i,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":n,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":i,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},mL=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},E$=function(n){return{value:"visibleTouchUI",params:n}},T$=function(n){return{value:"visible",params:n}};function I$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",10,11),o.NdJ("@overlayAnimation.start",function(r){return o.CHM(e),o.oxw().onOverlayAnimationStart(r)})("@overlayAnimation.done",function(r){return o.CHM(e),o.oxw().onOverlayAnimationDone(r)})("click",function(r){return o.CHM(e),o.oxw().onOverlayClick(r)}),o.Hsn(2),o.YNc(3,zG,1,0,"ng-container",12),o.YNc(4,h$,5,3,"ng-container",13),o.YNc(5,v$,23,8,"div",14),o.YNc(6,w$,3,8,"div",15),o.Hsn(7,1),o.YNc(8,b$,1,0,"ng-container",12),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.panelStyleClass),o.Q6J("ngStyle",e.panelStyle)("ngClass",o.HTZ(11,C$,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?o.VKq(21,E$,o.WLB(18,mL,e.showTransitionOptions,e.hideTransitionOptions)):o.VKq(26,T$,o.WLB(23,mL,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),o.xp6(3),o.Q6J("ngTemplateOutlet",e.headerTemplate),o.xp6(1),o.Q6J("ngIf",!e.timeOnly),o.xp6(1),o.Q6J("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),o.xp6(1),o.Q6J("ngIf",e.showButtonBar),o.xp6(2),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}const S$=[[["p-header"]],[["p-footer"]]],D$=function(n,t,e,i){return{"p-calendar":!0,"p-calendar-w-btn":n,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":i}},x$=["p-header","p-footer"],A$={provide:Ws,useExisting:(0,o.Gpc)(()=>M$),multi:!0};let M$=(()=>{class n{constructor(e,i,r,s,u,h){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.config=u,this.overlayService=h,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onClose=new o.vpe,this.onSelect=new o.vpe,this.onClear=new o.vpe,this.onInput=new o.vpe,this.onTodayClick=new o.vpe,this.onClearClick=new o.vpe,this.onMonthChange=new o.vpe,this.onYearChange=new o.vpe,this.onClickOutside=new o.vpe,this.onShow=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(p,y){return"12"==this.hourFormat?12===p?y?12:0:y?p+12:p:p}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const i=e||new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.initTime(i),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const i=e.split(":"),r=parseInt(i[0]),s=parseInt(i[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=kp();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=ae.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,i){this.yearOptions=[];for(let r=e;r<=i;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),i=this.getTranslation(ws.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(i[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let i=0;i<=11;i++)e.push(this.config.getTranslation("monthNamesShort")[i]);return e}yearPickerValues(){let e=[],i=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(i+r);return e}createMonths(e,i){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,u=i;s>11&&(s=s%11-1,u=i+1),this.months.push(this.createMonth(s,u))}}getWeekNumber(e){let i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));let r=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((r-i.getTime())/864e5)/7)+1}createMonth(e,i){let r=[],s=this.getFirstDayOfMonthIndex(e,i),u=this.getDaysCountInMonth(e,i),h=this.getDaysCountInPrevMonth(e,i),p=1,y=new Date,E=[],I=Math.ceil((u+s)/7);for(let M=0;M<I;M++){let P=[];if(0==M){for(let Q=h-s+1;Q<=h;Q++){let be=this.getPreviousMonthAndYear(e,i);P.push({day:Q,month:be.month,year:be.year,otherMonth:!0,today:this.isToday(y,Q,be.month,be.year),selectable:this.isSelectable(Q,be.month,be.year,!0)})}let B=7-P.length;for(let Q=0;Q<B;Q++)P.push({day:p,month:e,year:i,today:this.isToday(y,p,e,i),selectable:this.isSelectable(p,e,i,!1)}),p++}else for(let B=0;B<7;B++){if(p>u){let Q=this.getNextMonthAndYear(e,i);P.push({day:p-u,month:Q.month,year:Q.year,otherMonth:!0,today:this.isToday(y,p-u,Q.month,Q.year),selectable:this.isSelectable(p-u,Q.month,Q.year,!0)})}else P.push({day:p,month:e,year:i,today:this.isToday(y,p,e,i),selectable:this.isSelectable(p,e,i,!1)});p++}this.showWeek&&E.push(this.getWeekNumber(new Date(P[0].year,P[0].month,P[0].day))),r.push(P)}return{month:e,year:i,dates:r,weekNumbers:E}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,i){!this.disabled&&i.selectable?(this.isMultipleSelection()&&this.isSelected(i)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,i)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(i)&&this.selectDate(i),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,i){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:i,day:1,selectable:!0}):(this.currentMonth=i,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,i){"year"===this.view?this.onDateSelect(e,{year:i,month:0,day:1,selectable:!0}):(this.currentYear=i,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let i=0;i<this.value.length;i++)e+=this.formatDateTime(this.value[i]),i!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let i=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?i=this.formatTime(e):(i=this.formatDate(e,this.getDateFormat()),this.showTime&&(i+=" "+this.formatTime(e)))),i}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let i=new Date(e.year,e.month,e.day);if(this.showTime&&(i.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),i.setMinutes(this.currentMinute),i.setSeconds(this.currentSecond)),this.minDate&&this.minDate>i&&(i=this.minDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.maxDate&&this.maxDate<i&&(i=this.maxDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.isSingleSelection())this.updateModel(i);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,i]:[i]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&i.getTime()>=r.getTime()?s=i:(r=i,s=null),this.updateModel([r,s])}else this.updateModel([i,null]);this.onSelect.emit(i)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let i=null;this.value&&(i=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(i)}}getFirstDayOfMonthIndex(e,i){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(i);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,i){return 32-this.daylightSavingAdjust(new Date(i,e,32)).getDate()}getDaysCountInPrevMonth(e,i){let r=this.getPreviousMonthAndYear(e,i);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,i){let r,s;return 0===e?(r=11,s=i-1):(r=e-1,s=i),{month:r,year:s}}getNextMonthAndYear(e,i){let r,s;return 11===e?(r=0,s=i+1):(r=e+1,s=i),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let i=!1;for(let r of this.value)if(i=this.isDateEquals(r,e),i)break;return i}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getMonth()===e&&i.getFullYear()===this.currentYear}return!1}isYearSelected(e){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getFullYear()===e}return!1}isDateEquals(e,i){return!!(e&&e instanceof Date)&&e.getDate()===i.day&&e.getMonth()===i.month&&e.getFullYear()===i.year}isDateBetween(e,i,r){if(e&&i){let u=new Date(r.year,r.month,r.day);return e.getTime()<=u.getTime()&&i.getTime()>=u.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,i,r,s){return e.getDate()===i&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,i,r,s){let u=!0,h=!0,p=!0,y=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>i||this.minDate.getMonth()===i&&this.minDate.getDate()>e))&&(u=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<i||this.maxDate.getMonth()===i&&this.maxDate.getDate()<e))&&(h=!1),this.disabledDates&&(p=!this.isDateDisabled(e,i,r)),this.disabledDays&&(y=!this.isDayDisabled(e,i,r)),u&&h&&p&&y)}isDateDisabled(e,i,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===i&&s.getDate()===e)return!0;return!1}isDayDisabled(e,i,r){if(this.disabledDays){let u=new Date(r,i,e).getDay();return-1!==this.disabledDays.indexOf(u)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,i){this.overlayVisible?this.hideOverlay():(i.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(ae.getFocusableElements(this.contentViewChild.nativeElement).forEach(i=>i.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,i,r){const s=e.currentTarget,u=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let h=ae.index(u),p=u.parentElement.nextElementSibling;p?ae.hasClass(p.children[h].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(p.children[h].children[0].tabIndex="0",p.children[h].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let h=ae.index(u),p=u.parentElement.previousElementSibling;if(p){let y=p.children[h].children[0];ae.hasClass(y,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(y.tabIndex="0",y.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let h=u.previousElementSibling;if(h){let p=h.children[0];ae.hasClass(p,"p-disabled")||ae.hasClass(p.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(p.tabIndex="0",p.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let h=u.nextElementSibling;if(h){let p=h.children[0];ae.hasClass(p,"p-disabled")?this.navigateToMonth(!1,r):(p.tabIndex="0",p.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,u=ae.index(r);let h=s[40===e.which?u+3:u-3];h&&(h.tabIndex="0",h.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let h=r.previousElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let h=r.nextElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,i),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,u=ae.index(r);let h=s[40===e.which?u+2:u-2];h&&(h.tabIndex="0",h.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let h=r.previousElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let h=r.nextElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,i){if(e)if(1===this.numberOfMonths||0===i)this.navigationState={backward:!0},this.navBackward(event);else{let s=ae.find(this.contentViewChild.nativeElement.children[i-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),u=s[s.length-1];u.tabIndex="0",u.focus()}else if(1===this.numberOfMonths||i===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=ae.findSingle(this.contentViewChild.nativeElement.children[i+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?ae.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():ae.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let i;i=ae.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),i&&i.length>0&&(e=i[i.length-1])}else e=ae.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.currentView){let i=ae.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=ae.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");i.forEach(s=>s.tabIndex=-1),e=r||i[0],0===i.length&&ae.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(u=>u.tabIndex=-1)}else if("year"===this.currentView){let i=ae.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=ae.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");i.forEach(s=>s.tabIndex=-1),e=r||i[0],0===i.length&&ae.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(u=>u.tabIndex=-1)}else if(e=ae.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){let i=ae.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");e=i||ae.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{e.focus()},1),this.preventFocus=!1)}trapFocus(e){let i=ae.getFocusableElements(this.contentViewChild.nativeElement);if(i&&i.length>0)if(i[0].ownerDocument.activeElement){let r=i.indexOf(i[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)i[i.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else i[r-1].focus();else if(-1==r||r===i.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();i[0].focus()}else i[r+1].focus()}else i[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,i,r,s){let u=this.value;const h=this.convertTo24Hour(e,s);this.isRangeSelection()&&(u=this.value[1]||this.value[0]),this.isMultipleSelection()&&(u=this.value[this.value.length-1]);const p=u?u.toDateString():null;return!(this.minDate&&p&&this.minDate.toDateString()===p&&(this.minDate.getHours()>h||this.minDate.getHours()===h&&(this.minDate.getMinutes()>i||this.minDate.getMinutes()===i&&this.minDate.getSeconds()>r))||this.maxDate&&p&&this.maxDate.toDateString()===p&&(this.maxDate.getHours()<h||this.maxDate.getHours()===h&&(this.maxDate.getMinutes()<i||this.maxDate.getMinutes()===i&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,i,r){this.disabled||(this.repeat(e,null,i,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,i,r,s){let u=i||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},u),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let i=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?i=i<0?24+i:i:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),i=i<=0?12+i:i),this.validateTime(i,this.currentMinute,this.currentSecond,r)&&(this.currentHour=i,this.pm=r),e.preventDefault()}incrementMinute(e){let i=this.currentMinute+this.stepMinute;i=i>59?i-60:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}decrementMinute(e){let i=this.currentMinute-this.stepMinute;i=i<0?60+i:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}incrementSecond(e){let i=this.currentSecond+this.stepSecond;i=i>59?i-60:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}decrementSecond(e){let i=this.currentSecond-this.stepSecond;i=i<0?60+i:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const i=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,i)&&(this.pm=i,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let i=e.target.value;try{let r=this.parseValueFromString(i);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch(r){this.updateModel(this.keepInvalid?i:null)}this.filled=null!=i&&i.length,this.onInput.emit(e)}isValidSelection(e){let i=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(i=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(i=e.length>1&&e[1]>e[0]),i}parseValueFromString(e){if(!e||0===e.trim().length)return null;let i;if(this.isSingleSelection())i=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);i=[];for(let s of r)i.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");i=[];for(let s=0;s<r.length;s++)i[s]=this.parseDateTime(r[s].trim())}return i}parseDateTime(e){let i,r=e.split(" ");if(this.timeOnly)i=new Date,this.populateTime(i,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let u="12"==this.hourFormat?r.pop():null,h=r.pop();i=this.parseDate(r.join(" "),s),this.populateTime(i,h,u)}else i=this.parseDate(e,s)}return i}populateTime(e,i,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(i);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&ct.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let i=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?Rr.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Rr.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Rr.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):ae.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=ae.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=ae.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=ae.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",ae.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):ae.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),ae.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),ae.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(ae.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){document.body.removeChild(this.mask);let i,e=document.body.children;for(let r=0;r<e.length;r++)if(ae.hasClass(e[r],"p-datepicker-mask-scrollblocker")){i=!0;break}i||ae.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch(i){this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(ws.FIRST_DAY_OF_WEEK)}formatDate(e,i){if(!e)return"";let r;const s=E=>{const I=r+1<i.length&&i.charAt(r+1)===E;return I&&r++,I},u=(E,I,M)=>{let P=""+I;if(s(E))for(;P.length<M;)P="0"+P;return P},h=(E,I,M,P)=>s(E)?P[I]:M[I];let p="",y=!1;if(e)for(r=0;r<i.length;r++)if(y)"'"!==i.charAt(r)||s("'")?p+=i.charAt(r):y=!1;else switch(i.charAt(r)){case"d":p+=u("d",e.getDate(),2);break;case"D":p+=h("D",e.getDay(),this.getTranslation(ws.DAY_NAMES_SHORT),this.getTranslation(ws.DAY_NAMES));break;case"o":p+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":p+=u("m",e.getMonth()+1,2);break;case"M":p+=h("M",e.getMonth(),this.getTranslation(ws.MONTH_NAMES_SHORT),this.getTranslation(ws.MONTH_NAMES));break;case"y":p+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":p+=e.getTime();break;case"!":p+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?p+="'":y=!0;break;default:p+=i.charAt(r)}return p}formatTime(e){if(!e)return"";let i="",r=e.getHours(),s=e.getMinutes(),u=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),i+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,i+=":",i+=s<10?"0"+s:s,this.showSeconds&&(i+=":",i+=u<10?"0"+u:u),"12"==this.hourFormat&&(i+=e.getHours()>11?" PM":" AM"),i}parseTime(e){let i=e.split(":");if(i.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(i[0]),u=parseInt(i[1]),h=this.showSeconds?parseInt(i[2]):null;if(isNaN(s)||isNaN(u)||s>23||u>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(h)||h>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:u,second:h}}parseDate(e,i){if(null==i||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,u,B,h=0,p="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),y=-1,E=-1,I=-1,M=-1,P=!1,Q=it=>{let rt=r+1<i.length&&i.charAt(r+1)===it;return rt&&r++,rt},be=it=>{let rt=Q(it),kt="@"===it?14:"!"===it?20:"y"===it&&rt?4:"o"===it?3:2,tn=new RegExp("^\\d{"+("y"===it?kt:1)+","+kt+"}"),Yn=e.substring(h).match(tn);if(!Yn)throw"Missing number at position "+h;return h+=Yn[0].length,parseInt(Yn[0],10)},et=(it,rt,kt)=>{let Pt=-1,tn=Q(it)?kt:rt,Yn=[];for(let ji=0;ji<tn.length;ji++)Yn.push([ji,tn[ji]]);Yn.sort((ji,Zs)=>-(ji[1].length-Zs[1].length));for(let ji=0;ji<Yn.length;ji++){let Zs=Yn[ji][1];if(e.substr(h,Zs.length).toLowerCase()===Zs.toLowerCase()){Pt=Yn[ji][0],h+=Zs.length;break}}if(-1!==Pt)return Pt+1;throw"Unknown name at position "+h},nt=()=>{if(e.charAt(h)!==i.charAt(r))throw"Unexpected literal at position "+h;h++};for("month"===this.view&&(I=1),r=0;r<i.length;r++)if(P)"'"!==i.charAt(r)||Q("'")?nt():P=!1;else switch(i.charAt(r)){case"d":I=be("d");break;case"D":et("D",this.getTranslation(ws.DAY_NAMES_SHORT),this.getTranslation(ws.DAY_NAMES));break;case"o":M=be("o");break;case"m":E=be("m");break;case"M":E=et("M",this.getTranslation(ws.MONTH_NAMES_SHORT),this.getTranslation(ws.MONTH_NAMES));break;case"y":y=be("y");break;case"@":B=new Date(be("@")),y=B.getFullYear(),E=B.getMonth()+1,I=B.getDate();break;case"!":B=new Date((be("!")-this.ticksTo1970)/1e4),y=B.getFullYear(),E=B.getMonth()+1,I=B.getDate();break;case"'":Q("'")?nt():P=!0;break;default:nt()}if(h<e.length&&(u=e.substr(h),!/^\s+/.test(u)))throw"Extra/unparsed characters found in date: "+u;if(-1===y?y=(new Date).getFullYear():y<100&&(y+=(new Date).getFullYear()-(new Date).getFullYear()%100+(y<=p?0:-100)),M>-1)for(E=1,I=M;s=this.getDaysCountInMonth(y,E-1),!(I<=s);)E++,I-=s;if(B=this.daylightSavingAdjust(new Date(y,E-1,I)),B.getFullYear()!==y||B.getMonth()+1!==E||B.getDate()!==I)throw"Invalid date";return B}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let i=new Date,r={day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),otherMonth:i.getMonth()!==this.currentMonth||i.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let i=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<i.length;r++){let{breakpoint:s,numMonths:u}=i[r],h=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${u}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let p=u;p<this.numberOfMonths;p++)h+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${p+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${h}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",i=>{this.isOutsideClicked(i)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(i),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new TM(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return ae.hasClass(e.target,"p-datepicker-prev")||ae.hasClass(e.target,"p-datepicker-prev-icon")||ae.hasClass(e.target,"p-datepicker-next")||ae.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!ae.isAndroid()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Rr.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(Ph),o.Y36(Hw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-calendar"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Hu,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(LG,5),o.Gf(VG,5),o.Gf(BG,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.inputfieldViewChild=r.first),o.iGM(r=o.CRH())&&(i.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-calendar-clearable",i.showClear&&!i.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[o._Bn([A$])],ngContentSelectors:x$,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,i){1&e&&(o.F$t(S$),o.TgZ(0,"span",0,1),o.YNc(2,jG,4,17,"ng-template",2),o.YNc(3,I$,9,28,"div",3),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.l5B(6,D$,i.showIcon,i.timeOnly,i.disabled,i.focus))("ngStyle",i.style),o.xp6(2),o.Q6J("ngIf",!i.inline),o.xp6(1),o.Q6J("ngIf",i.inline||i.overlayVisible))},directives:[kn,Ki,on,IM,Jy,Ds,Cn],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[$r("overlayAnimation",[Bo("visibleTouchUI",ui({transform:"translate(-50%,-50%)",opacity:1})),ln("void => visible",[ui({opacity:0,transform:"scaleY(0.8)"}),ds("{{showTransitionParams}}",ui({opacity:1,transform:"*"}))]),ln("visible => void",[ds("{{hideTransitionParams}}",ui({opacity:0}))]),ln("void => visibleTouchUI",[ui({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),ds("{{showTransitionParams}}")]),ln("visibleTouchUI => void",[ds("{{hideTransitionParams}}",ui({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),n})(),k$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei,Bg,Ba,Vg],Bg,Ba]}),n})();const R$=["container"],O$=["resizeHelper"],P$=["reorderIndicatorUp"],N$=["reorderIndicatorDown"],F$=["wrapper"],L$=["table"],V$=["tableHeader"];function B$(n,t){if(1&n&&(o.TgZ(0,"div",14),o._UZ(1,"i"),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Tol("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function U$(n,t){1&n&&o.GkF(0)}function H$(n,t){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,U$,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.captionTemplate)}}function j$(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-paginator",17),o.NdJ("onPageChange",function(r){return o.CHM(e),o.oxw().onPageChange(r)}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function z$(n,t){1&n&&o.GkF(0)}function G$(n,t){1&n&&o.GkF(0)}function $$(n,t){if(1&n&&o._UZ(0,"tbody",25),2&n){const e=o.oxw(2);o.Q6J("value",e.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",e.frozenBodyTemplate)("frozen",!0)}}function W$(n,t){1&n&&o.GkF(0)}const mf=function(n){return{$implicit:n}};function q$(n,t){if(1&n&&(o.TgZ(0,"tfoot",26),o.YNc(1,W$,1,0,"ng-container",20),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.footerGroupedTemplate||e.footerTemplate)("ngTemplateOutletContext",o.VKq(2,mf,e.columns))}}function K$(n,t){if(1&n&&(o.TgZ(0,"table",18,19),o.YNc(2,z$,1,0,"ng-container",20),o.TgZ(3,"thead",21),o.YNc(4,G$,1,0,"ng-container",20),o.qZA(),o.YNc(5,$$,1,5,"tbody",22),o._UZ(6,"tbody",23),o.YNc(7,q$,2,4,"tfoot",24),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),o.uIk("id",e.id+"-table"),o.xp6(2),o.Q6J("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",o.VKq(12,mf,e.columns)),o.xp6(2),o.Q6J("ngTemplateOutlet",e.headerGroupedTemplate||e.headerTemplate)("ngTemplateOutletContext",o.VKq(14,mf,e.columns)),o.xp6(1),o.Q6J("ngIf",e.frozenValue||e.frozenBodyTemplate),o.xp6(1),o.Q6J("value",e.dataToRender)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate),o.xp6(1),o.Q6J("ngIf",e.footerGroupedTemplate||e.footerTemplate)}}function Z$(n,t){1&n&&o.GkF(0)}function Y$(n,t){1&n&&o.GkF(0)}function Q$(n,t){if(1&n&&o._UZ(0,"tbody",25),2&n){const e=o.oxw(2);o.Q6J("value",e.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate)("frozen",!0)}}function J$(n,t){1&n&&o.GkF(0)}function X$(n,t){if(1&n&&(o.TgZ(0,"tfoot",26),o.YNc(1,J$,1,0,"ng-container",20),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.footerGroupedTemplate||e.footerTemplate)("ngTemplateOutletContext",o.VKq(2,mf,e.columns))}}function e4(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"cdk-virtual-scroll-viewport",27),o.NdJ("scrolledIndexChange",function(r){return o.CHM(e),o.oxw().onScrollIndexChange(r)}),o.TgZ(1,"table",18,19),o.YNc(3,Z$,1,0,"ng-container",20),o.TgZ(4,"thead",21,28),o.YNc(6,Y$,1,0,"ng-container",20),o.qZA(),o.YNc(7,Q$,1,5,"tbody",22),o._UZ(8,"tbody",23),o.YNc(9,X$,2,4,"tfoot",24),o.qZA()()}if(2&n){const e=o.oxw();o.Udp("height","flex"!==e.scrollHeight?e.scrollHeight:void 0),o.Q6J("itemSize",e.virtualRowHeight)("minBufferPx",e.minBufferPx)("maxBufferPx",e.maxBufferPx),o.xp6(1),o.Q6J("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),o.uIk("id",e.id+"-table"),o.xp6(2),o.Q6J("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",o.VKq(17,mf,e.columns)),o.xp6(3),o.Q6J("ngTemplateOutlet",e.headerGroupedTemplate||e.headerTemplate)("ngTemplateOutletContext",o.VKq(19,mf,e.columns)),o.xp6(1),o.Q6J("ngIf",e.frozenValue||e.frozenBodyTemplate),o.xp6(1),o.Q6J("value",e.dataToRender)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate),o.xp6(1),o.Q6J("ngIf",e.footerGroupedTemplate||e.footerTemplate)}}function t4(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-paginator",29),o.NdJ("onPageChange",function(r){return o.CHM(e),o.oxw().onPageChange(r)}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function n4(n,t){1&n&&o.GkF(0)}function r4(n,t){if(1&n&&(o.TgZ(0,"div",30),o.YNc(1,n4,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.summaryTemplate)}}function s4(n,t){1&n&&o._UZ(0,"div",31,32)}function o4(n,t){1&n&&o._UZ(0,"span",33,34)}function a4(n,t){1&n&&o._UZ(0,"span",35,36)}const l4=function(n,t,e,i,r,s,u,h,p,y,E,I,M,P){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":n,"p-datatable-auto-layout":t,"p-datatable-resizable":e,"p-datatable-resizable-fit":i,"p-datatable-scrollable":r,"p-datatable-scrollable-vertical":s,"p-datatable-scrollable-horizontal":u,"p-datatable-scrollable-both":h,"p-datatable-flex-scrollable":p,"p-datatable-responsive-stack":y,"p-datatable-responsive-scroll":E,"p-datatable-responsive":I,"p-datatable-grouped-header":M,"p-datatable-grouped-footer":P}},u4=function(n){return{height:n}},c4=["pTableBody",""];function d4(n,t){1&n&&o.GkF(0)}const TS=function(n,t,e,i,r){return{$implicit:n,rowIndex:t,columns:e,editing:i,frozen:r}};function h4(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,d4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",o.qbA(2,TS,i,s.dt.paginator?s.dt.first+r:r,s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function f4(n,t){1&n&&o.GkF(0)}function p4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,f4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.template)("ngTemplateOutletContext",o.qbA(2,TS,i,s.dt.paginator?s.dt.first+r:r,s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function g4(n,t){1&n&&o.GkF(0)}const m4=function(n,t,e,i,r,s,u){return{$implicit:n,rowIndex:t,columns:e,editing:i,frozen:r,rowgroup:s,rowspan:u}};function _4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,g4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.template)("ngTemplateOutletContext",o.Hh0(2,m4,i,s.dt.paginator?s.dt.first+r:r,s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen,s.shouldRenderRowspan(s.value,i,r),s.calculateRowGroupSize(s.value,i,r)))}}function y4(n,t){1&n&&o.GkF(0)}function v4(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,y4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",o.qbA(2,TS,i,s.dt.paginator?s.dt.first+r:r,s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function w4(n,t){if(1&n&&(o.YNc(0,h4,2,8,"ng-container",2),o.YNc(1,p4,2,8,"ng-container",0),o.YNc(2,_4,2,10,"ng-container",0),o.YNc(3,v4,2,8,"ng-container",2)),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,i)),o.xp6(1),o.Q6J("ngIf","rowspan"!==r.dt.rowGroupMode),o.xp6(1),o.Q6J("ngIf","rowspan"===r.dt.rowGroupMode),o.xp6(1),o.Q6J("ngIf",r.dt.groupFooterTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,i))}}function b4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,w4,4,4,"ng-template",1),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function C4(n,t){1&n&&o.GkF(0)}function E4(n,t){if(1&n&&o.YNc(0,C4,1,0,"ng-container",4),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngTemplateOutlet",e?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",o.qbA(2,TS,e,r.dt.paginator?r.dt.first+i:i,r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen))}}function T4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,E4,1,8,"ng-template",5),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("cdkVirtualForOf",e.dt.filteredValue||e.dt.value)("cdkVirtualForTrackBy",e.dt.rowTrackBy)("cdkVirtualForTemplateCacheSize",0)}}function I4(n,t){1&n&&o.GkF(0)}const IS=function(n,t,e,i,r,s){return{$implicit:n,rowIndex:t,columns:e,expanded:i,editing:r,frozen:s}};function S4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,I4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.template)("ngTemplateOutletContext",o.HTZ(2,IS,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.dt.isRowExpanded(i),"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function D4(n,t){1&n&&o.GkF(0)}function x4(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,D4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",o.HTZ(2,IS,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.dt.isRowExpanded(i),"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function A4(n,t){1&n&&o.GkF(0)}function M4(n,t){1&n&&o.GkF(0)}function k4(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,M4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(2),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",o.HTZ(2,IS,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.dt.isRowExpanded(i),"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}const _L=function(n,t,e,i){return{$implicit:n,rowIndex:t,columns:e,frozen:i}};function R4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,A4,1,0,"ng-container",4),o.YNc(2,k4,2,9,"ng-container",2),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.expandedRowTemplate)("ngTemplateOutletContext",o.l5B(3,_L,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.frozen)),o.xp6(1),o.Q6J("ngIf",s.dt.groupFooterTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,i,r))}}function O4(n,t){if(1&n&&(o.YNc(0,S4,2,9,"ng-container",0),o.YNc(1,x4,2,9,"ng-container",2),o.YNc(2,R4,3,8,"ng-container",0)),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngIf",!r.dt.groupHeaderTemplate),o.xp6(1),o.Q6J("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,i)),o.xp6(1),o.Q6J("ngIf",r.dt.isRowExpanded(e))}}function P4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,O4,3,3,"ng-template",1),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function N4(n,t){1&n&&o.GkF(0)}function F4(n,t){1&n&&o.GkF(0)}function L4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,F4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",o.l5B(2,_L,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.frozen))}}function V4(n,t){if(1&n&&(o.YNc(0,N4,1,0,"ng-container",4),o.YNc(1,L4,2,7,"ng-container",0)),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngTemplateOutlet",r.template)("ngTemplateOutletContext",o.HTZ(3,IS,e,r.dt.paginator?r.dt.first+i:i,r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),o.xp6(1),o.Q6J("ngIf",r.dt.isRowExpanded(e))}}function B4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,V4,2,10,"ng-template",1),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function U4(n,t){1&n&&o.GkF(0)}const yL=function(n,t){return{$implicit:n,frozen:t}};function H4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,U4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",o.WLB(2,yL,e.columns,e.frozen))}}function j4(n,t){1&n&&o.GkF(0)}function z4(n,t){if(1&n&&(o.ynx(0),o.YNc(1,j4,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",o.WLB(2,yL,e.columns,e.frozen))}}let SS=(()=>{class n{constructor(){this.sortSource=new dn.x,this.selectionSource=new dn.x,this.contextMenuSource=new dn.x,this.valueSource=new dn.x,this.totalRecordsSource=new dn.x,this.columnsSource=new dn.x,this.resetSource=new dn.x,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ik=(()=>{class n{constructor(e,i,r,s,u,h){this.el=e,this.zone=i,this.tableService=r,this.cd=s,this.filterService=u,this.overlayService=h,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new o.vpe,this.selectionChange=new o.vpe,this.contextMenuSelectionChange=new o.vpe,this.contextMenuSelectionMode="separate",this.rowTrackBy=(p,y)=>y,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.virtualRowHeight=28,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new o.vpe,this.onRowUnselect=new o.vpe,this.onPage=new o.vpe,this.onSort=new o.vpe,this.onFilter=new o.vpe,this.onLazyLoad=new o.vpe,this.onRowExpand=new o.vpe,this.onRowCollapse=new o.vpe,this.onContextMenuSelect=new o.vpe,this.onColResize=new o.vpe,this.onColReorder=new o.vpe,this.onRowReorder=new o.vpe,this.onEditInit=new o.vpe,this.onEditComplete=new o.vpe,this.onEditCancel=new o.vpe,this.onHeaderCheckboxToggle=new o.vpe,this.sortFunction=new o.vpe,this.firstChange=new o.vpe,this.rowsChange=new o.vpe,this.onStateSave=new o.vpe,this.onStateRestore=new o.vpe,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=kp(),this.virtualScrollInitialized=!1}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths(),this.scrollable&&this.virtualScroll&&(this.virtualScrollSubscription=this.virtualScrollBody.renderedRangeStream.subscribe(e=>{this.tableHeaderViewChild.nativeElement.style.top=e.start*this.virtualRowHeight*-1+"px"}))}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get dataToRender(){let e=this.filteredValue||this.value;return e?this.paginator&&!this.lazy?e.slice(this.first,this.first+this.rows):e:[]}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(ct.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(ct.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let i=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=i.metaKey||i.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,i=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&i){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:i}):(this.value.sort((s,u)=>{let h=ct.resolveFieldData(s,e),p=ct.resolveFieldData(u,e),y=null;return y=null==h&&null!=p?-1:null!=h&&null==p?1:null==h&&null==p?0:"string"==typeof h&&"string"==typeof p?h.localeCompare(p):h<p?-1:h>p?1:0,i*y}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:i};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,i)=>this.multisortField(e,i,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,i,r,s){let u=ct.resolveFieldData(e,r[s].field),h=ct.resolveFieldData(i,r[s].field),p=null;if(null==u&&null!=h)p=-1;else if(null!=u&&null==h)p=1;else if(null==u&&null==h)p=0;else if("string"==typeof u||u instanceof String){if(u.localeCompare&&u!=h)return r[s].order*u.localeCompare(h)}else p=u<h?-1:1;return u==h?r.length-1>s?this.multisortField(e,i,r,s+1):0:r[s].order*p}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let i=0;i<this.multiSortMeta.length;i++)if(this.multiSortMeta[i].field===e)return this.multiSortMeta[i];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let i=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){i=!0;break}return i}}handleRowClick(e){let i=e.originalEvent.target,r=i.nodeName,s=i.parentElement&&i.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!ae.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let u=e.rowData,h=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)ae.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=h,this.selectRange(e.originalEvent,h);else{let p=this.isSelected(u);if(!p&&!this.isRowSelectable(u,h))return;let y=!this.rowTouched&&this.metaKeySelection,E=this.dataKey?String(ct.resolveFieldData(u,this.dataKey)):null;if(this.anchorRowIndex=h,this.rangeRowIndex=h,y){let I=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(p&&I){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let M=this.findIndexInSelection(u);this._selection=this.selection.filter((P,B)=>B!=M),this.selectionChange.emit(this.selection),E&&delete this.selectionKeys[E]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:u,type:"row"})}else this.isSingleSelectionMode()?(this._selection=u,this.selectionChange.emit(u),E&&(this.selectionKeys={},this.selectionKeys[E]=1)):this.isMultipleSelectionMode()&&(I?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,u],this.selectionChange.emit(this.selection),E&&(this.selectionKeys[E]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h})}else if("single"===this.selectionMode)p?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h})):(this._selection=u,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h}),E&&(this.selectionKeys={},this.selectionKeys[E]=1));else if("multiple"===this.selectionMode)if(p){let I=this.findIndexInSelection(u);this._selection=this.selection.filter((M,P)=>P!=I),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h}),E&&delete this.selectionKeys[E]}else this._selection=this.selection?[...this.selection,u]:[u],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h}),E&&(this.selectionKeys[E]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const i=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=i,this.contextMenuSelectionChange.emit(i),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:i,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(i);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let s=this.isSelected(i),u=this.dataKey?String(ct.resolveFieldData(i,this.dataKey)):null;if(!s){if(!this.isRowSelectable(i,r))return;this.isSingleSelectionMode()?(this.selection=i,this.selectionChange.emit(i),u&&(this.selectionKeys={},this.selectionKeys[u]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,i]:[i],this.selectionChange.emit(this.selection),u&&(this.selectionKeys[u]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:i,index:e.rowIndex})}}}selectRange(e,i){let r,s;this.anchorRowIndex>i?(r=i,s=this.anchorRowIndex):this.anchorRowIndex<i?(r=this.anchorRowIndex,s=i):(r=i,s=i),this.lazy&&this.paginator&&(r-=this.first,s-=this.first);let u=[];for(let h=r;h<=s;h++){let p=this.filteredValue?this.filteredValue[h]:this.value[h];if(!this.isSelected(p)){if(!this.isRowSelectable(p,i))continue;u.push(p),this._selection=[...this.selection,p];let y=this.dataKey?String(ct.resolveFieldData(p,this.dataKey)):null;y&&(this.selectionKeys[y]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:u,type:"row"})}clearSelectionRange(e){let i,r;this.rangeRowIndex>this.anchorRowIndex?(i=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(i=this.rangeRowIndex,r=this.anchorRowIndex):(i=this.rangeRowIndex,r=this.rangeRowIndex);for(let s=i;s<=r;s++){let u=this.value[s],h=this.findIndexInSelection(u);this._selection=this.selection.filter((y,E)=>E!=h);let p=this.dataKey?String(ct.resolveFieldData(u,this.dataKey)):null;p&&delete this.selectionKeys[p],this.onRowUnselect.emit({originalEvent:e,data:u,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[ct.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let i=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){i=r;break}return i}isRowSelectable(e,i){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:i}))}toggleRowWithRadio(e,i){if(this.preventSelectionSetterPropagation=!0,this.selection!=i){if(!this.isRowSelectable(i,e.rowIndex))return;this._selection=i,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(ct.resolveFieldData(i,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,i){this.selection=this.selection||[];let r=this.isSelected(i),s=this.dataKey?String(ct.resolveFieldData(i,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let u=this.findIndexInSelection(i);this._selection=this.selection.filter((h,p)=>p!=u),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"checkbox"}),s&&delete this.selectionKeys[s]}else{if(!this.isRowSelectable(i,e.rowIndex))return;this._selection=this.selection?[...this.selection,i]:[i],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"checkbox"}),s&&(this.selectionKeys[s]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,i){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:i});else{const r=this.selectionPageOnly?this.dataToRender:this.filteredValue||this.value||[];let s=this.selectionPageOnly&&this._selection?this._selection.filter(u=>!r.some(h=>this.equals(u,h))):[];i&&(s=this.frozenValue?[...s,...this.frozenValue,...r]:[...s,...r],s=this.rowSelectable?s.filter((u,h)=>this.rowSelectable({data:u,index:h})):s),this._selection=s,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:i}),this.isStateful()&&this.saveState()}}equals(e,i){return"equals"===this.compareSelectionBy?e===i:ct.equals(e,i,this.dataKey)}filter(e,i,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[i]&&delete this.filters[i]:this.filters[i]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,i){this.filter(e,"global",i)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let i=0;i<this.value.length;i++){let h,r=!0,s=!1,u=!1;for(let p in this.filters)if(this.filters.hasOwnProperty(p)&&"global"!==p){u=!0;let y=p,E=this.filters[y];if(Array.isArray(E)){for(let I of E)if(r=this.executeLocalFilter(y,this.value[i],I),I.operator===jw.OR&&r||I.operator===jw.AND&&!r)break}else r=this.executeLocalFilter(y,this.value[i],E);if(!r)break}if(this.filters.global&&!s&&e)for(let p=0;p<e.length&&(s=this.filterService.filters[this.filters.global.matchMode](ct.resolveFieldData(this.value[i],e[p].field||e[p]),this.filters.global.value,this.filterLocale),!s);p++);h=this.filters.global?u?u&&r&&s:s:u&&r,h&&this.filteredValue.push(this.value[i])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,i,r){let s=r.value,u=r.matchMode||_r.STARTS_WITH,h=ct.resolveFieldData(i,e);return this.filterService.filters[u](h,s,this.filterLocale)}hasFilter(){let e=!0;for(let i in this.filters)if(this.filters.hasOwnProperty(i)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let i,r="",s=this.columns;e&&e.selectionOnly?i=this.selection||[]:(i=this.filteredValue||this.value,this.frozenValue&&(i=i?[...this.frozenValue,...i]:this.frozenValue));for(let p=0;p<s.length;p++){let y=s[p];!1!==y.exportable&&y.field&&(r+='"'+this.getExportHeader(y)+'"',p<s.length-1&&(r+=this.csvSeparator))}i.forEach((p,y)=>{r+="\n";for(let E=0;E<s.length;E++){let I=s[E];if(!1!==I.exportable&&I.field){let M=ct.resolveFieldData(p,I.field);M=null!=M?this.exportFunction?this.exportFunction({data:M,field:I.field}):String(M).replace(/"/g,'""'):"",r+='"'+M+'"',E<s.length-1&&(r+=this.csvSeparator)}}});let u=new Blob([r],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");h.style.display="none",document.body.appendChild(h),void 0!==h.download?(h.setAttribute("href",URL.createObjectURL(u)),h.setAttribute("download",this.exportFilename+".csv"),h.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(h)}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScrollBody&&this.virtualScrollBody.scrollToIndex(e)}onScrollIndexChange(e){this.lazy&&(this.virtualScrollTimeout&&clearTimeout(this.virtualScrollTimeout),this.virtualScrollTimeout=setTimeout(()=>{let i=Math.floor(e/this.rows),r=0===i?0:(i-1)*this.rows,s=0===i?2*this.rows:3*this.rows;i!==this.virtualPage&&(this.virtualPage=i,this.lazyLoadOnInit||this.virtualScrollInitialized?this.onLazyLoad.emit({first:r,rows:s,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta}):this.virtualScrollInitialized=!0)},this.virtualScrollDelay))}scrollTo(e){this.virtualScrollBody?this.virtualScrollBody.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,i,r,s){this.editingCell=e,this.editingCellData=i,this.editingCellField=r,this.editingCellRowIndex=s,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===ae.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(ae.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let i=String(ct.resolveFieldData(e,this.dataKey));this.editingRowKeys[i]=!0}saveRowEdit(e,i){if(0===ae.find(i,".ng-invalid.ng-dirty").length){let r=String(ct.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let i=String(ct.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[i]}toggleRow(e,i){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(ct.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:i,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:i,data:e})),i&&i.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(ct.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(ct.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let i=ae.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-i+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let i=ae.getOffset(this.containerViewChild.nativeElement).left;ae.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-i+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let h=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&h>15&&this.resizeTableCells(r,h)}else if("expand"===this.columnResizeMode){let u=this.tableViewChild.nativeElement.offsetWidth+e;this.tableViewChild.nativeElement.style.width=u+"px",this.tableViewChild.nativeElement.style.minWidth=u+"px",this.resizeTableCells(r,null)}this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",ae.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,i){let r=ae.index(this.resizeColumnElement),s=[];const u=ae.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");ae.find(u,"tr > th").forEach(y=>s.push(ae.getOuterWidth(y))),this.destroyStyleElement(),this.createStyleElement();let p="";s.forEach((y,E)=>{let I=E===r?e:i&&E===r+1?i:y;p+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${E+1}),\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${E+1}),\n                #${this.id} .p-datatable-tfoot > tr > td:nth-child(${E+1}) {\n                    ${this.scrollable?`flex: 1 1 ${I}px !important`:`width: ${I}px !important`}\n                }\n            `}),this.styleElement.innerHTML=p}onColumnDragStart(e,i){this.reorderIconWidth=ae.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=ae.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=i,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,i){if(this.reorderableColumns&&this.draggedColumn&&i){e.preventDefault();let r=ae.getOffset(this.containerViewChild.nativeElement),s=ae.getOffset(i);if(this.draggedColumn!=i){let u=ae.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),h=ae.indexWithinGroup(i,"preorderablecolumn"),p=s.left-r.left,E=s.left+i.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+i.offsetHeight+"px",e.pageX>E?(this.reorderIndicatorUpViewChild.nativeElement.style.left=p+i.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=p+i.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=p-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=p-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),h-u==1&&-1===this.dropPosition||h-u==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,i){if(e.preventDefault(),this.draggedColumn){let r=ae.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=ae.indexWithinGroup(i,"preorderablecolumn"),u=r!=s;u&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(u=!1),u&&s<r&&1===this.dropPosition&&(s+=1),u&&s>r&&-1===this.dropPosition&&(s-=1),u&&(ct.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,i){this.rowDragging=!0,this.draggedRowIndex=i,e.dataTransfer.setData("text","b")}onRowDragOver(e,i,r){if(this.rowDragging&&this.draggedRowIndex!==i){let s=ae.getOffset(r).top+ae.getWindowScrollTop(),u=e.pageY,h=s+ae.getOuterHeight(r)/2,p=r.previousElementSibling;u<h?(ae.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=i,p?ae.addClass(p,"p-datatable-dragpoint-bottom"):ae.addClass(r,"p-datatable-dragpoint-top")):(p?ae.removeClass(p,"p-datatable-dragpoint-bottom"):ae.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=i+1,ae.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,i){let r=i.previousElementSibling;r&&ae.removeClass(r,"p-datatable-dragpoint-bottom"),ae.removeClass(i,"p-datatable-dragpoint-bottom"),ae.removeClass(i,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,i){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;ct.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,i),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let i={};this.paginator&&(i.first=this.first,i.rows=this.rows),this.sortField&&(i.sortField=this.sortField,i.sortOrder=this.sortOrder),this.multiSortMeta&&(i.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(i.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(i),this.reorderableColumns&&this.saveColumnOrder(i),this.selection&&(i.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(i.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(i)),this.onStateSave.emit(i)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const i=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(i){let u=JSON.parse(i,function(u,h){return"string"==typeof h&&r.test(h)?new Date(h):h});this.paginator&&(void 0!==this.first&&(this.first=u.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=u.rows,this.rowsChange.emit(this.rows))),u.sortField&&(this.restoringSort=!0,this._sortField=u.sortField,this._sortOrder=u.sortOrder),u.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=u.multiSortMeta),u.filters&&(this.restoringFilter=!0,this.filters=u.filters),this.resizableColumns&&(this.columnWidthsState=u.columnWidths,this.tableWidthState=u.tableWidth),u.expandedRowKeys&&(this.expandedRowKeys=u.expandedRowKeys),u.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(u.selection)),this.stateRestored=!0,this.onStateRestore.emit(u)}}saveColumnWidths(e){let i=[];ae.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(s=>i.push(ae.getOuterWidth(s))),e.columnWidths=i.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=ae.getOuterWidth(this.tableViewChild.nativeElement)+"px")}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&(this.tableViewChild.nativeElement.style.width=this.tableWidthState,this.tableViewChild.nativeElement.style.minWidth=this.tableWidthState,this.containerViewChild.nativeElement.style.width=this.tableWidthState),ct.isNotEmpty(e)){this.createStyleElement();let i="";e.forEach((r,s)=>{i+=`\n                        #${this.id} .p-datatable-thead > tr > th:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tbody > tr > td:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tfoot > tr > td:nth-child(${s+1}) {\n                            ${this.scrollable?`flex: 1 1 ${r}px !important`:`width: ${r}px !important`}\n                        }\n                    `}),this.styleElement.innerHTML=i}}}saveColumnOrder(e){if(this.columns){let i=[];this.columns.map(r=>{i.push(r.field||r.key)}),e.columnOrder=i}}restoreColumnOrder(){const i=this.getStorage().getItem(this.stateKey);if(i){let s=JSON.parse(i).columnOrder;if(s){let u=[];s.map(h=>{let p=this.findColumnByKey(h);p&&u.push(p)}),this.columnOrderStateRestored=!0,this.columns=u}}}findColumnByKey(e){if(!this.columns)return null;for(let i of this.columns)if(i.key===e||i.field===e)return i}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.virtualScrollInitialized=null,this.virtualScrollSubscription&&this.virtualScrollSubscription.unsubscribe(),this.destroyStyleElement(),this.destroyResponsiveStyle()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(SS),o.Y36(o.sBO),o.Y36(rT),o.Y36(Hw))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-table"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Hu,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(R$,5),o.Gf(O$,5),o.Gf(P$,5),o.Gf(N$,5),o.Gf(F$,5),o.Gf(L$,5),o.Gf(V$,5),o.Gf(S0,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.resizeHelperViewChild=r.first),o.iGM(r=o.CRH())&&(i.reorderIndicatorUpViewChild=r.first),o.iGM(r=o.CRH())&&(i.reorderIndicatorDownViewChild=r.first),o.iGM(r=o.CRH())&&(i.wrapperViewChild=r.first),o.iGM(r=o.CRH())&&(i.tableViewChild=r.first),o.iGM(r=o.CRH())&&(i.tableHeaderViewChild=r.first),o.iGM(r=o.CRH())&&(i.virtualScrollBody=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollDelay:"virtualScrollDelay",virtualRowHeight:"virtualRowHeight",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[o._Bn([SS]),o.TTD],decls:14,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],["role","table","class","p-datatable-table",3,"ngClass","ngStyle",4,"ngIf"],["tabindex","0","class","p-datatable-virtual-scrollable-body",3,"itemSize","height","minBufferPx","maxBufferPx","scrolledIndexChange",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"value","pTableBody","pTableBodyTemplate"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["tabindex","0",1,"p-datatable-virtual-scrollable-body",3,"itemSize","minBufferPx","maxBufferPx","scrolledIndexChange"],["tableHeader",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.YNc(2,B$,2,2,"div",2),o.YNc(3,H$,2,1,"div",3),o.YNc(4,j$,1,17,"p-paginator",4),o.TgZ(5,"div",5,6),o.YNc(7,K$,8,16,"table",7),o.YNc(8,e4,10,21,"cdk-virtual-scroll-viewport",8),o.qZA(),o.YNc(9,t4,1,17,"p-paginator",9),o.YNc(10,r4,2,1,"div",10),o.YNc(11,s4,2,0,"div",11),o.YNc(12,o4,2,0,"span",12),o.YNc(13,a4,2,0,"span",13),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngStyle",i.style)("ngClass",o.rFY(16,l4,[i.rowHover||i.selectionMode,i.autoLayout,i.resizableColumns,i.resizableColumns&&"fit"===i.columnResizeMode,i.scrollable,i.scrollable&&"vertical"===i.scrollDirection,i.scrollable&&"horizontal"===i.scrollDirection,i.scrollable&&"both"===i.scrollDirection,i.scrollable&&"flex"===i.scrollHeight,"stack"===i.responsiveLayout,"scroll"===i.responsiveLayout,i.responsive,null!=i.headerGroupedTemplate,null!=i.footerGroupedTemplate])),o.uIk("id",i.id),o.xp6(2),o.Q6J("ngIf",i.loading&&i.showLoader),o.xp6(1),o.Q6J("ngIf",i.captionTemplate),o.xp6(1),o.Q6J("ngIf",i.paginator&&("top"===i.paginatorPosition||"both"==i.paginatorPosition)),o.xp6(1),o.Q6J("ngStyle",o.VKq(31,u4,i.scrollHeight)),o.xp6(2),o.Q6J("ngIf",!i.virtualScroll),o.xp6(1),o.Q6J("ngIf",i.virtualScroll),o.xp6(1),o.Q6J("ngIf",i.paginator&&("bottom"===i.paginatorPosition||"both"==i.paginatorPosition)),o.xp6(1),o.Q6J("ngIf",i.summaryTemplate),o.xp6(1),o.Q6J("ngIf",i.resizableColumns),o.xp6(1),o.Q6J("ngIf",i.reorderableColumns),o.xp6(1),o.Q6J("ngIf",i.reorderableColumns))},directives:function(){return[yG,pW,S0,Ki,kn,on,Ds,KN]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;min-width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper>table,.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-thead,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot{display:block}.p-datatable-scrollable .p-datatable-thead>tr,.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-thead>tr>th,.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-thead,.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-virtual-scrollable-body>.cdk-virtual-scroll-content-wrapper>.p-datatable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th .p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td{display:table-cell}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-thead>tr>th,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}cdk-virtual-scroll-viewport{outline:0 none}\n"],encapsulation:2}),n})(),pW=(()=>{class n{constructor(e,i,r,s){this.dt=e,this.tableService=i,this.cd=r,this.el=s,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}shouldRenderRowGroupHeader(e,i,r){let s=ct.resolveFieldData(i,this.dt.groupRowsBy),u=e[r-1];return!u||s!==ct.resolveFieldData(u,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,i,r){let s=ct.resolveFieldData(i,this.dt.groupRowsBy),u=e[r+1];return!u||s!==ct.resolveFieldData(u,this.dt.groupRowsBy)}shouldRenderRowspan(e,i,r){let s=ct.resolveFieldData(i,this.dt.groupRowsBy),u=e[r-1];return!u||s!==ct.resolveFieldData(u,this.dt.groupRowsBy)}calculateRowGroupSize(e,i,r){let s=ct.resolveFieldData(i,this.dt.groupRowsBy),u=s,h=0;for(;s===u;){h++;let p=e[++r];if(!p)break;u=ct.resolveFieldData(p,this.dt.groupRowsBy)}return 1===h?null:h}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=ae.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=ae.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ik),o.Y36(SS),o.Y36(o.sBO),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows"},attrs:c4,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkVirtualFor","",3,"cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"]],template:function(e,i){1&e&&(o.YNc(0,b4,2,2,"ng-container",0),o.YNc(1,T4,2,3,"ng-container",0),o.YNc(2,P4,2,2,"ng-container",0),o.YNc(3,B4,2,2,"ng-container",0),o.YNc(4,H4,2,5,"ng-container",0),o.YNc(5,z4,2,5,"ng-container",0)),2&e&&(o.Q6J("ngIf",!i.dt.expandedRowTemplate&&!i.dt.virtualScroll),o.xp6(1),o.Q6J("ngIf",!i.dt.expandedRowTemplate&&i.dt.virtualScroll),o.xp6(1),o.Q6J("ngIf",i.dt.expandedRowTemplate&&!(i.frozen&&i.dt.frozenExpandedRowTemplate)),o.xp6(1),o.Q6J("ngIf",i.dt.frozenExpandedRowTemplate&&i.frozen),o.xp6(1),o.Q6J("ngIf",i.dt.loading),o.xp6(1),o.Q6J("ngIf",i.dt.isEmpty()&&!i.dt.loading))},directives:[on,Cn,Ds,JN],encapsulation:2}),n})(),gW=(()=>{class n{constructor(e,i){this.dt=e,this.tableService=i,this.isEnabled()&&(this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.selected=this.dt.isSelected(this.data)}))}ngOnInit(){this.isEnabled()&&(this.selected=this.dt.isSelected(this.data))}onClick(e){this.isEnabled()&&this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onTouchEnd(e){this.isEnabled()&&this.dt.handleRowTouchEnd(e)}onArrowDownKeyDown(e){if(!this.isEnabled())return;const r=this.findNextSelectableRow(e.currentTarget);r&&r.focus(),e.preventDefault()}onArrowUpKeyDown(e){if(!this.isEnabled())return;const r=this.findPrevSelectableRow(e.currentTarget);r&&r.focus(),e.preventDefault()}onEnterKeyDown(e){!this.isEnabled()||this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onPageDownKeyDown(){this.dt.virtualScroll&&this.dt.virtualScrollBody.elementRef.nativeElement.focus()}onSpaceKeydown(){this.dt.virtualScroll&&!this.dt.editingCell&&this.dt.virtualScrollBody.elementRef.nativeElement.focus()}findNextSelectableRow(e){let i=e.nextElementSibling;return i?ae.hasClass(i,"p-selectable-row")?i:this.findNextSelectableRow(i):null}findPrevSelectableRow(e){let i=e.previousElementSibling;return i?ae.hasClass(i,"p-selectable-row")?i:this.findPrevSelectableRow(i):null}isEnabled(){return!0!==this.pSelectableRowDisabled}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ik),o.Y36(SS))},n.\u0275dir=o.lG2({type:n,selectors:[["","pSelectableRow",""]],hostAttrs:[1,"p-element"],hostVars:5,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s)})("touchend",function(s){return i.onTouchEnd(s)})("keydown.arrowdown",function(s){return i.onArrowDownKeyDown(s)})("keydown.arrowup",function(s){return i.onArrowUpKeyDown(s)})("keydown.enter",function(s){return i.onEnterKeyDown(s)})("keydown.shift.enter",function(s){return i.onEnterKeyDown(s)})("keydown.meta.enter",function(s){return i.onEnterKeyDown(s)})("keydown.pagedown",function(){return i.onPageDownKeyDown()})("keydown.pageup",function(){return i.onPageDownKeyDown()})("keydown.home",function(){return i.onPageDownKeyDown()})("keydown.end",function(){return i.onPageDownKeyDown()})("keydown.space",function(){return i.onSpaceKeydown()}),2&e&&(o.uIk("tabindex",i.isEnabled()?0:void 0),o.ekj("p-selectable-row",i.isEnabled())("p-highlight",i.selected))},inputs:{data:["pSelectableRow","data"],index:["pSelectableRowIndex","index"],pSelectableRowDisabled:"pSelectableRowDisabled"}}),n})(),mW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[ei,vG,ek,CS,uS,bS,Bg,AG,k$,tk,FG],Ba,uS]}),n})();const _W=["StarTable"];function yW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",12)(1,"input",13),o.NdJ("ngModelChange",function(r){return o.CHM(e),o.oxw().value=r}),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngModel",e.value)}}function vW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",3)(1,"textarea",14),o.NdJ("ngModelChange",function(r){return o.CHM(e),o.oxw().csvalues=r}),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngModel",e.csvalues)}}function wW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",12)(1,"button",15),o.NdJ("click",function(){return o.CHM(e),o.oxw().create_Star()}),o._uU(2,"+ Create"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("disabled",!e.star||!e.type||!e.csvalues)}}function bW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",12)(1,"button",15),o.NdJ("click",function(){return o.CHM(e),o.oxw().Update_Star()}),o._uU(2," Update"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("disabled",!e.star||!e.type||!e.value)}}function CW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",12)(1,"button",15),o.NdJ("click",function(){return o.CHM(e),o.oxw().confirmDelete()}),o._uU(2," Delete"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("disabled",!e.star||!e.type||!e.value)}}function EW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",12)(1,"button",15),o.NdJ("click",function(){return o.CHM(e),o.oxw().cancel_Star()}),o._uU(2," Cancel"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("disabled",!e.star||!e.type||!e.value)}}function TW(n,t){if(1&n&&(o.TgZ(0,"th"),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e.header," ")}}function IW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"th",18)(1,"input",19,20),o.NdJ("input",function(){const s=o.CHM(e).$implicit,u=o.MAs(2);return o.oxw(2),o.MAs(17).filter(u.value,s.field,"contains")}),o.qZA()()}2&n&&o.Q6J("ngSwitch",t.$implicit.field)}function SW(n,t){if(1&n&&(o.TgZ(0,"tr"),o.YNc(1,TW,2,1,"th",16),o.qZA(),o.TgZ(2,"tr"),o.YNc(3,IW,3,1,"th",17),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngForOf",e),o.xp6(2),o.Q6J("ngForOf",e)}}function DW(n,t){if(1&n&&(o.TgZ(0,"tr",21)(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA()()),2&n){const e=t.$implicit;o.Q6J("pSelectableRow",e),o.xp6(2),o.Oqu(e.star),o.xp6(2),o.Oqu(e.type),o.xp6(2),o.Oqu(e.value)}}const xW=function(){return{width:"50vw"}},AW=function(){return["star","type","value"]};let MW=(()=>{class n{constructor(e,i,r,s){this.starService=e,this.confirmationService=i,this.messageService=r,this.generalService=s,this.selecteForEditorDel=!1}ngOnInit(){this.cols=[{field:"star",header:"Star"},{field:"type",header:"Type"},{field:"value",header:"Value"}],this.read_All_Star(),this.allStars=this.generalService.get_All_Stars(),this.allValues=this.generalService.get_All_Values()}onRowSelect(e){this.idToEditorDelete=this.selectedStar.id,this.star=this.selectedStar.star,this.type=this.selectedStar.type,this.value=this.selectedStar.value,this.selecteForEditorDel=!0}cancel_Star(){this.selectedStar=null,this.star="",this.type="",this.value="",this.selecteForEditorDel=!1}get_All_Stars(){}read_All_Star(){this.starService.read_All_Stars().subscribe(e=>{this.starList=e.map(i=>({id:i.payload.doc.id,isEdit:!1,star:i.payload.doc.data().star,type:i.payload.doc.data().type,value:i.payload.doc.data().value}))})}confirmDelete(){this.confirmationService.confirm({message:"Do you want to delete this record?",header:"Delete Confirmation",icon:"pi pi-info-circle",accept:()=>{console.log(this.idToEditorDelete),this.Delete_Star()},reject:()=>{this.cancel_Star()}})}create_Star(){let e={};e.star=this.star,e.type=this.type;for(var i=this.csvalues.split(","),r=0;r<i.length;r++)e.value=i[r],this.starService.create_Star(e).then(s=>{console.log("success")}).catch(s=>{this.messageService.add({severity:"error",closable:!1,summary:"some error occured",detail:s})});this.messageService.add({severity:"success",closable:!1,summary:"Star added",detail:"Star added to database"}),this.cancel_Star()}Update_Star(){let e={};e.star=this.star,e.type=this.type,e.value=this.value,this.starService.update_Star(this.idToEditorDelete,e),this.messageService.add({severity:"success",closable:!1,summary:"Star updated",detail:this.selectedStar.id+" is updated"}),this.cancel_Star()}Delete_Star(){this.starService.delete_Star(this.idToEditorDelete),this.messageService.add({severity:"success",closable:!1,summary:"Star deleted",detail:this.selectedStar.id+" is deleted"}),this.cancel_Star()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(S3),o.Y36(Bw),o.Y36(Uw),o.Y36(D3))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-star"]],viewQuery:function(e,i){if(1&e&&o.Gf(_W,5),2&e){let r;o.iGM(r=o.CRH())&&(i.StarTable=r.first)}},features:[o._Bn([Uw,Bw])],decls:20,vars:21,consts:[[1,"container"],[3,"baseZIndex"],[1,"row",2,"margin-top","25px"],[1,"col-md-4"],["optionValue","value","optionLabel","name",3,"options","ngModel","ngModelChange"],["class","col-md-3",4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"card",2,"margin-top","25px"],["selectionMode","single","dataKey","id","responsiveLayout","scroll",3,"columns","paginator","rows","value","globalFilterFields","selection","onRowSelect","selectionChange"],["StarTable",""],["pTemplate","header"],["pTemplate","body"],[1,"col-md-3"],["type","text","pInputText","","placeholder","value",1,"top20",3,"ngModel","ngModelChange"],["pInputTextarea","",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[4,"ngFor","ngForOf"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["pInputText","","type","text",3,"input"],["colInput",""],[3,"pSelectableRow"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"p-toast")(2,"p-confirmDialog",1),o.TgZ(3,"div",2)(4,"div",3)(5,"p-dropdown",4),o.NdJ("ngModelChange",function(s){return i.star=s}),o.qZA()(),o.TgZ(6,"div",3)(7,"p-dropdown",4),o.NdJ("ngModelChange",function(s){return i.type=s}),o.qZA()(),o.YNc(8,yW,2,1,"div",5),o.YNc(9,vW,2,1,"div",6),o.qZA(),o.TgZ(10,"div",2),o.YNc(11,wW,3,1,"div",5),o.YNc(12,bW,3,1,"div",5),o.YNc(13,CW,3,1,"div",5),o.YNc(14,EW,3,1,"div",5),o.qZA(),o.TgZ(15,"div",7)(16,"p-table",8,9),o.NdJ("onRowSelect",function(s){return i.onRowSelect(s)})("selectionChange",function(s){return i.selectedStar=s}),o.YNc(18,SW,4,2,"ng-template",10),o.YNc(19,DW,7,4,"ng-template",11),o.qZA()()()),2&e&&(o.xp6(2),o.Akn(o.DdM(19,xW)),o.Q6J("baseZIndex",1e4),o.xp6(3),o.Q6J("options",i.allStars)("ngModel",i.star),o.xp6(2),o.Q6J("options",i.allValues)("ngModel",i.type),o.xp6(1),o.Q6J("ngIf",i.selecteForEditorDel),o.xp6(1),o.Q6J("ngIf",!i.selecteForEditorDel),o.xp6(2),o.Q6J("ngIf",!i.selecteForEditorDel),o.xp6(1),o.Q6J("ngIf",i.selecteForEditorDel),o.xp6(1),o.Q6J("ngIf",i.selecteForEditorDel),o.xp6(1),o.Q6J("ngIf",i.selecteForEditorDel),o.xp6(2),o.Q6J("columns",i.cols)("paginator",!0)("rows",5)("value",i.starList)("globalFilterFields",o.DdM(20,AW))("selection",i.selectedStar))},directives:[V3,uj,XM,hS,jg,on,D0,uL,$z,ik,Hu,Cn,qi,gW],styles:[".top20[_ngcontent-%COMP%]{margin-top:20px!important}"]}),n})();const kW=function(n){return{active:n}};function RW(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"li",8),o.NdJ("click",function(r){const u=o.CHM(e).$implicit;return o.oxw().listClick(r,u)}),o.TgZ(1,"a",9),o._UZ(2,"i",3),o.TgZ(3,"span",3),o._uU(4),o.qZA()()()}if(2&n){const e=t.$implicit,i=o.oxw();o.Q6J("ngClass",o.VKq(4,kW,i.selectedItem==e.name)),o.xp6(1),o.Q6J("routerLink",e.link),o.xp6(1),o.uIk("data-feather",e.icon),o.xp6(2),o.Oqu(e.name)}}function OW(n,t){1&n&&(o.TgZ(0,"div",1)(1,"a",2)(2,"span",3),o._uU(3,"Pranavam"),o.qZA()()())}let PW=(()=>{class n{constructor(e){this._authService=e,this.menuItems=[{name:"Dashboard",icon:"sliders",link:"dashboard"},{name:"Star",icon:"activity",link:"star"}],this.selectedItem="Dashboard",this.canShow=!1,this._authService.isAuthExpose.subscribe(i=>this.canShow=i)}ngOnInit(){}listClick(e,i){this.selectedItem=i.name}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Bu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-menu"]],decls:10,vars:2,consts:[["id","sidebar",1,"sidebar","js-sidebar"],[1,"sidebar-content","js-simplebar"],["href","index.html",1,"sidebar-brand"],[1,"align-middle"],[1,"sidebar-nav"],[1,"sidebar-header"],["class","sidebar-item",3,"ngClass","click",4,"ngFor","ngForOf"],["class","sidebar-content js-simplebar",4,"ngIf"],[1,"sidebar-item",3,"ngClass","click"],["routerLinkActive","active",1,"sidebar-link",3,"routerLink"]],template:function(e,i){1&e&&(o.TgZ(0,"nav",0)(1,"div",1)(2,"a",2)(3,"span",3),o._uU(4,"Pranavam"),o.qZA()(),o.TgZ(5,"ul",4)(6,"li",5),o._uU(7," Pages "),o.qZA(),o.YNc(8,RW,5,6,"li",6),o.qZA()(),o.YNc(9,OW,4,0,"div",7),o.qZA()),2&e&&(o.xp6(8),o.Q6J("ngForOf",i.menuItems),o.xp6(1),o.Q6J("ngIf",!i.canShow))},directives:[Cn,kn,mp,qD,on],styles:[""]}),n})(),NW=(()=>{class n{constructor(e){this._authService=e}ngOnInit(){}signOut(){this._authService.SignOut()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Bu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-topbar"]],decls:15,vars:0,consts:[[1,"navbar","navbar-expand","navbar-light","navbar-bg"],[1,"sidebar-toggle","js-sidebar-toggle"],[1,"hamburger","align-self-center"],[1,"navbar-collapse","collapse"],[1,"navbar-nav","navbar-align"],[1,"nav-item","dropdown"],["href","#","data-bs-toggle","dropdown",1,"nav-icon","dropdown-toggle","d-inline-block","d-sm-none"],["data-feather","settings",1,"align-middle"],["href","#","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle","d-none","d-sm-inline-block"],["src","../assets/img/avatars/avatar.jpg","alt","Charles Hall",1,"avatar","img-fluid","rounded","me-1"],[1,"text-dark"],[1,"dropdown-menu","dropdown-menu-end"],["href","#",1,"dropdown-item",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"nav",0)(1,"a",1),o._UZ(2,"i",2),o.qZA(),o.TgZ(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),o._UZ(7,"i",7),o.qZA(),o.TgZ(8,"a",8),o._UZ(9,"img",9),o.TgZ(10,"span",10),o._uU(11,"Charles Hall"),o.qZA()(),o.TgZ(12,"div",11)(13,"a",12),o.NdJ("click",function(){return i.signOut()}),o._uU(14,"Log out"),o.qZA()()()()()())},styles:[""]}),n})(),FW=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-footer"]],decls:23,vars:0,consts:[[1,"footer"],[1,"container-fluid"],[1,"row","text-muted"],[1,"col-6","text-start"],[1,"mb-0"],["href","https://adminkit.io/","target","_blank",1,"text-muted"],[1,"col-6","text-end"],[1,"list-inline"],[1,"list-inline-item"]],template:function(e,i){1&e&&(o.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4)(5,"a",5)(6,"strong"),o._uU(7,"Pranavam"),o.qZA()(),o._uU(8," \xa9 "),o.qZA()(),o.TgZ(9,"div",6)(10,"ul",7)(11,"li",8)(12,"a",5),o._uU(13,"Support"),o.qZA()(),o.TgZ(14,"li",8)(15,"a",5),o._uU(16,"Help Center"),o.qZA()(),o.TgZ(17,"li",8)(18,"a",5),o._uU(19,"Privacy"),o.qZA()(),o.TgZ(20,"li",8)(21,"a",5),o._uU(22,"Terms"),o.qZA()()()()()()())},styles:[""]}),n})(),LW=(()=>{class n{constructor(e){this._authService=e,this.canShow=!1,this._authService.isAuthExpose.subscribe(i=>this.canShow=i)}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Bu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-main"]],decls:7,vars:0,consts:[[1,"wrapper"],[1,"main"],[1,"content"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"app-menu"),o.TgZ(2,"div",1),o._UZ(3,"app-topbar"),o.TgZ(4,"main",2),o._UZ(5,"router-outlet"),o.qZA(),o._UZ(6,"app-footer"),o.qZA()())},directives:[PW,NW,u_,FW],styles:[""]}),n})(),vL=(()=>{class n{constructor(e){this.authenticationService=e}ngOnInit(){}signIn(){this.authenticationService.signIn(this.email,this.password),this.email="",this.password=""}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Bu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-signin"]],decls:22,vars:2,consts:[[1,"container","d-flex","flex-column"],[1,"row","vh-100"],[1,"col-sm-10","col-md-8","col-lg-6","mx-auto","d-table","h-100"],[1,"d-table-cell","align-middle"],[1,"text-center","mt-4"],[1,"lead"],[1,"card"],[1,"card-body"],[1,"m-sm-4"],[1,"mb-3"],[1,"form-label"],["type","email","name","email","placeholder","Enter your email",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","Enter your password",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],[1,"text-center","mt-3"],["type","submit",1,"btn","btn-lg","btn-primary",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p",5),o._uU(6," Sign in to your account to continue "),o.qZA()(),o.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"form")(11,"div",9)(12,"label",10),o._uU(13,"Email"),o.qZA(),o.TgZ(14,"input",11),o.NdJ("ngModelChange",function(s){return i.email=s}),o.qZA()(),o.TgZ(15,"div",9)(16,"label",10),o._uU(17,"Password"),o.qZA(),o.TgZ(18,"input",12),o.NdJ("ngModelChange",function(s){return i.password=s}),o.qZA()(),o.TgZ(19,"div",13)(20,"button",14),o.NdJ("click",function(){return i.signIn()}),o._uU(21,"Sign in"),o.qZA()()()()()()()()()()),2&e&&(o.xp6(14),o.Q6J("ngModel",i.email),o.xp6(4),o.Q6J("ngModel",i.password))},directives:[HF,IF,wS,D0,hS,jg],styles:[""]}),n})(),VW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[b_.forRoot([{path:"pranavam",component:LW,canActivate:[Oh],children:[{path:"dashboard",component:kx,canActivate:[Oh]},{path:"star",component:MW,canActivate:[Oh]}]},{path:"",component:vL},{path:"login",component:vL},{path:"**",redirectTo:"pages/notfound"}])],b_]}),n})(),BW=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},directives:[u_],styles:[".p-inputtext{width:200px!important;min-height:40px!important}  .p-dropdown{margin-top:20px;width:200px!important;height:40px;padding:0}[_nghost-%COMP%]     .p-dropdown{width:14rem}[_nghost-%COMP%]     .p-hidden-accessible{display:none}textarea[_ngcontent-%COMP%]{height:99px}"]}),n})();const wL="@firebase/database";let rk="";function CL(n){rk=n}class jW{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,F.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,F.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class zW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,F.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const EL=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new jW(t)}}catch(t){}return new zW},Gg=EL("localStorage"),sk=EL("sessionStorage"),tv=new yo.Yd("@firebase/database"),TL=function(){let n=1;return function(){return n++}}(),IL=function(n){const t=(0,F.dS)(n),e=new F.gQ;e.update(t);const i=e.digest();return F.US.encodeByteArray(i)},R0=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=R0.apply(null,i):t+="object"==typeof i?(0,F.Pz)(i):i,t+=" "}return t};let $g=null,SL=!0;const DL=function(n,t){(0,F.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(tv.logLevel=yo.in.VERBOSE,$g=tv.log.bind(tv),t&&sk.set("logging_enabled",!0)):"function"==typeof n?$g=n:($g=null,sk.remove("logging_enabled"))},Vr=function(...n){if(!0===SL&&(SL=!1,null===$g&&!0===sk.get("logging_enabled")&&DL(!0)),$g){const t=R0.apply(null,n);$g(t)}},O0=function(n){return function(...t){Vr(n,...t)}},ok=function(...n){const t="FIREBASE INTERNAL ERROR: "+R0(...n);tv.error(t)},ic=function(...n){const t=`FIREBASE FATAL ERROR: ${R0(...n)}`;throw tv.error(t),new Error(t)},Is=function(...n){const t="FIREBASE WARNING: "+R0(...n);tv.warn(t)},DS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vd="[MIN_NAME]",rc="[MAX_NAME]",Wg=function(n,t){if(n===t)return 0;if(n===vd||t===rc)return-1;if(t===vd||n===rc)return 1;{const e=xS(n),i=xS(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},WW=function(n,t){return n===t?0:n<t?-1:1},P0=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(t))},ak=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,F.Pz)(t[i]),e+=":",e+=ak(n[t[i]]);return e+="}",e},xL=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function Br(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const AL=function(n){(0,F.hu)(!DS(n),"Invalid JSON number");const i=1023;let r,s,u,h,p;0===n?(s=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=h+i,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const E=y.join("");let I="";for(p=0;p<64;p+=8){let M=parseInt(E.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),I+=M}return I.toLowerCase()},YW=new RegExp("^-?(0*)\\d{1,10}$"),ML=-2147483648,lk=2147483647,xS=function(n){if(YW.test(n)){const t=Number(n);if(t>=ML&&t<=lk)return t}return null},nv=function(n){try{n()}catch(t){setTimeout(()=>{throw Is("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},N0=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class JW{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class XW{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Vr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(t)}}let F0=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const NL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,VL="websocket",BL="long_polling";class ck{constructor(t,e,i,r,s=!1,u="",h=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gg.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Gg.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function UL(n,t,e){let i;if((0,F.hu)("string"==typeof t,"typeof type must == string"),(0,F.hu)("object"==typeof e,"typeof params must == object"),t===VL)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==BL)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function eq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return Br(e,(s,u)=>{r.push(s+"="+u)}),i+r.join("&")}class tq{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,F.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,F.p$)(this.counters_)}}const dk={},hk={};function fk(n){const t=n.toString();return dk[t]||(dk[t]=new tq),dk[t]}class iq{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&nv(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class _f{constructor(t,e,i,r,s,u,h){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=O0(t),this.stats_=fk(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),UL(e,BL,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new iq(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pk((...s)=>{const[u,h,p,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&NL.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_f.forceAllow_=!0}static forceDisallow(){_f.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!_f.forceAllow_&&(_f.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,F.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,F.h$)(e),r=xL(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,F.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class pk{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=TL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=pk.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Vr("frame writing exception"),h.stack&&Vr(h.stack),Vr(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Vr("No IE domain setting required")}catch(e){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,F.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Vr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let MS=null;"undefined"!=typeof MozWebSocket?MS=MozWebSocket:"undefined"!=typeof WebSocket&&(MS=WebSocket);let iv=(()=>{class n{constructor(e,i,r,s,u,h,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=O0(this.connId),this.stats_=fk(i),this.connURL=n.connectionURL_(i,h,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,u){const h={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&NL.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),s&&(h.ac=s),u&&(h.p=u),UL(e,VL,h)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gg.set("previous_websocket_failure",!0);try{let r;if((0,F.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${rk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,p=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;p&&(u.proxy={origin:p})}this.mySock=new MS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==MS&&!n.forceDisallow_}static previouslyFailed(){return Gg.isInMemoryStorage||!0===Gg.get("previous_websocket_failure")}markConnectionHealthy(){Gg.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,F.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,F.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=xL(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),qL=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[_f,iv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=iv&&iv.isAvailable();let r=i&&!iv.previouslyFailed();if(e.webSocketOnly&&(i||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[iv];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class e2{constructor(t,e,i,r,s,u,h,p,y,E){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=O0("c:"+this.id+":"),this.transportManager_=new qL(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=N0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=P0("t",t),i=P0("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=P0("t",t),i=P0("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=P0("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?ok("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ok("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),N0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):N0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class t2{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class n2{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,F.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,F.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class kS extends n2{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new kS}getInitialEvent(t){return(0,F.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Tn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function yn(){return new Tn("")}function Qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function yf(n){return n.pieces_.length-n.pieceNum_}function Nn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Tn(n.pieces_,t)}function mk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function L0(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function o2(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Tn(t,0)}function oi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Tn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Tn(e,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function Ks(n,t){const e=Qt(n),i=Qt(t);if(null===e)return t;if(e===i)return Ks(Nn(n),Nn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Iq(n,t){const e=L0(n,0),i=L0(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Wg(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function _k(n,t){if(yf(n)!==yf(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function $a(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(yf(n)>yf(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class Sq{constructor(t,e){this.errorPrefix_=e,this.parts_=L0(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,F.ug)(this.parts_[i]);a2(this)}}function a2(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qg(n))}function qg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class yk extends n2{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new yk}getInitialEvent(t){return(0,F.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const V0=1e3;let OS,Kg=(()=>{class n extends t2{constructor(e,i,r,s,u,h,p,y){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=O0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=V0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yk.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&kS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,u={r:s,a:e,b:i};this.log_((0,F.Pz)(u)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new F.BH,r={p:e._path.toString(),q:e._queryObject},s={action:"g",request:r,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(r.p,p,!1,null),i.resolve(p)):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||s!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),i.promise}listen(e,i,r,s){this.initConnection_();const u=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(h).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const u={p:r};e.tag&&(u.q=i._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest("q",u,p=>{const y=p.d,E=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(r,s),e.onComplete&&e.onComplete(E,y))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,F.r3)(e,"w")){const r=(0,F.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,F.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,F.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const u=s.s,h=s.d||"error";this.authToken_===e&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const u={p:e};s&&(u.q=r,u.t=s),this.sendRequest("n",u)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const u={p:i,d:r};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,u){this.initConnection_();const h={p:i,d:r};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:e,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,F.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):ok("Unrecognized action received from server: "+(0,F.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=V0,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=V0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=V0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ie.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),u=e.id+":"+n.nextConnectionId_++,h=e.lastSessionId;let p=!1,y=null;const E=function(){y?y.close():(p=!0,s())};e.realtime_={close:E,sendRequest:function(P){(0,F.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,B]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);p?Vr("getToken() completed but was canceled"):(Vr("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=B&&B.token,y=new e2(u,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,Q=>{Is(Q+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(P){e.log_("Failed to get token: "+P),p||(e.repoInfo_.nodeAdmin&&Is(P),E())}}})()}interrupt(e){Vr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=V0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(u=>ak(u)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Tn(e).toString();let s;if(this.listens.has(r)){const u=this.listens.get(r);s=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Vr("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Vr("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,F.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+rk.replace(/\./g,"-")]=1,(0,F.uI)()?e["framework.cordova"]=1:(0,F.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=kS.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new en(t,e)}}class RS{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new en(vd,t),r=new en(vd,e);return 0!==this.compare(i,r)}minPost(){return en.MIN}}class c2 extends RS{static get __EMPTY_NODE(){return OS}static set __EMPTY_NODE(t){OS=t}compare(t,e){return Wg(t.name,e.name)}isDefinedOn(t){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return en.MIN}maxPost(){return new en(rc,OS)}makePost(t,e){return(0,F.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new en(t,OS)}toString(){return".key"}}const sc=new c2;class PS{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!t.isEmpty();)if(t=t,u=e?i(t.key,e):1,r&&(u*=-1),u<0)t=this.isReverse_?t.left:t.right;else{if(0===u){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let wk,Rl=(()=>{class n{constructor(e,i,r,s,u){this.key=e,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Eo.EMPTY_NODE,this.right=null!=u?u:Eo.EMPTY_NODE}copy(e,i,r,s,u){return new n(null!=e?e:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===u?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Eo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Eo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Eo{constructor(t,e=Eo.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Eo(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Rl.BLACK,null,null))}remove(t){return new Eo(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Rl.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new PS(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new PS(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new PS(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new PS(this.root_,null,this.comparator_,!0,t)}}function Nq(n,t){return Wg(n.name,t.name)}function vk(n,t){return Wg(n,t)}Eo.EMPTY_NODE=new class Pq{copy(t,e,i,r,s){return this}insert(t,e,i){return new Rl(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const d2=function(n){return"number"==typeof n?"number:"+AL(n):"string:"+n},h2=function(n){if(n.isLeafNode()){const t=n.val();(0,F.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,F.r3)(t,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===wk||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===wk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let f2,p2,g2,rv=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),h2(this.priorityNode_)}static set __childrenNodeConstructor(e){f2=e}static get __childrenNodeConstructor(){return f2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Jt(e)?this:".priority"===Qt(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=Qt(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,F.hu)(".priority"!==r||1===yf(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Nn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+d2(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?AL(this.value_):this.value_,this.lazyHash_=IL(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return(0,F.hu)(s>=0,"Unknown leaf type: "+i),(0,F.hu)(u>=0,"Unknown leaf type: "+r),s===u?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Un=new class Bq extends RS{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Wg(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return en.MIN}maxPost(){return new en(rc,new rv("[PRIORITY-POST]",g2))}makePost(t,e){const i=p2(t);return new en(e,new rv("[PRIORITY-POST]",i))}toString(){return".priority"}},Uq=Math.log(2);class Hq{constructor(t){this.count=parseInt(Math.log(t+1)/Uq,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const NS=function(n,t,e,i){n.sort(t);const r=function(p,y){const E=y-p;let I,M;if(0===E)return null;if(1===E)return I=n[p],M=e?e(I):I,new Rl(M,I.node,Rl.BLACK,null,null);{const P=parseInt(E/2,10)+p,B=r(p,P),Q=r(P+1,y);return I=n[P],M=e?e(I):I,new Rl(M,I.node,Rl.BLACK,B,Q)}},h=function(p){let y=null,E=null,I=n.length;const M=function(B,Q){const be=I-B,et=I;I-=B;const nt=r(be+1,et),it=n[be],rt=e?e(it):it;P(new Rl(rt,it.node,Q,null,nt))},P=function(B){y?(y.left=B,y=B):(E=B,y=B)};for(let B=0;B<p.count;++B){const Q=p.nextBitIsOne(),be=Math.pow(2,p.count-(B+1));Q?M(be,Rl.BLACK):(M(be,Rl.BLACK),M(be,Rl.RED))}return E}(new Hq(n.length));return new Eo(i||t,h)};let bk;const sv={};class wd{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,F.hu)(sv&&Un,"ChildrenNode.ts has not been loaded"),bk=bk||new wd({".priority":sv},{".priority":Un}),bk}get(t){const e=(0,F.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Eo?e:null}hasIndex(t){return(0,F.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,F.hu)(t!==sc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(en.Wrap);let h,u=s.getNext();for(;u;)r=r||t.isDefinedOn(u.node),i.push(u),u=s.getNext();h=r?NS(i,t.getCompare()):sv;const p=t.toString(),y=Object.assign({},this.indexSet_);y[p]=t;const E=Object.assign({},this.indexes_);return E[p]=h,new wd(E,y)}addToIndexes(t,e){const i=(0,F.UI)(this.indexes_,(r,s)=>{const u=(0,F.DV)(this.indexSet_,s);if((0,F.hu)(u,"Missing index implementation for "+s),r===sv){if(u.isDefinedOn(t.node)){const h=[],p=e.getIterator(en.Wrap);let y=p.getNext();for(;y;)y.name!==t.name&&h.push(y),y=p.getNext();return h.push(t),NS(h,u.getCompare())}return sv}{const h=e.get(t.name);let p=r;return h&&(p=p.remove(new en(t.name,h))),p.insert(t,t.node)}});return new wd(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,F.UI)(this.indexes_,r=>{if(r===sv)return r;{const s=e.get(t.name);return s?r.remove(new en(t.name,s)):r}});return new wd(i,this.indexSet_)}}let B0,Ht=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&h2(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return B0||(B0=new n(new Eo(vk),null,wd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||B0}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?B0:i}}getChild(e){const i=Qt(e);return null===i?this:this.getImmediateChild(i).getChild(Nn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,F.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new en(e,i);let s,u;i.isEmpty()?(s=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),u=this.indexMap_.addToIndexes(r,this.children_));const h=s.isEmpty()?B0:this.priorityNode_;return new n(s,h,u)}}updateChild(e,i){const r=Qt(e);if(null===r)return i;{(0,F.hu)(".priority"!==Qt(e)||1===yf(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Nn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,u=!0;if(this.forEachChild(Un,(h,p)=>{i[h]=p.val(e),r++,u&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):u=!1}),!e&&u&&s<2*r){const h=[];for(const p in i)h[p]=i[p];return h}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+d2(this.getPriority().val())+":"),this.forEachChild(Un,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":IL(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const u=s.getPredecessorKey(new en(e,i));return u?u.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new en(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new en(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,en.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,e)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,en.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,e)>0;)s.getNext(),u=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===U0?-1:0}withIndex(e){if(e===sc||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===sc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Un),s=i.getIterator(Un);let u=r.getNext(),h=s.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=r.getNext(),h=s.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(e){return e===sc?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const U0=new class jq extends Ht{constructor(){super(new Eo(vk),Ht.EMPTY_NODE,wd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Ht.EMPTY_NODE}isEmpty(){return!1}};function di(n,t=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,F.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new rv(n,di(t));if(n instanceof Array){let e=Ht.EMPTY_NODE;return Br(n,(i,r)=>{if((0,F.r3)(n,i)&&"."!==i.substring(0,1)){const s=di(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(di(t))}{const e=[];let i=!1;if(Br(n,(u,h)=>{if("."!==u.substring(0,1)){const p=di(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new en(u,p)))}}),0===e.length)return Ht.EMPTY_NODE;const s=NS(e,Nq,u=>u.name,vk);if(i){const u=NS(e,Un.getCompare());return new Ht(s,di(t),new wd({".priority":u},{".priority":Un}))}return new Ht(s,di(t),wd.Default)}}Object.defineProperties(en,{MIN:{value:new en(vd,Ht.EMPTY_NODE)},MAX:{value:new en(rc,U0)}}),c2.__EMPTY_NODE=Ht.EMPTY_NODE,rv.__childrenNodeConstructor=Ht,function Fq(n){wk=n}(U0),function Vq(n){g2=n}(U0),function Lq(n){p2=n}(di);class Ck extends RS{constructor(t){super(),this.indexPath_=t,(0,F.hu)(!Jt(t)&&".priority"!==Qt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Wg(t.name,e.name):s}makePost(t,e){const i=di(t),r=Ht.EMPTY_NODE.updateChild(this.indexPath_,i);return new en(e,r)}maxPost(){const t=Ht.EMPTY_NODE.updateChild(this.indexPath_,U0);return new en(rc,t)}toString(){return L0(this.indexPath_,0).join("/")}}const Ek=new class Gq extends RS{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Wg(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(t,e){const i=di(t);return new en(e,i)}toString(){return".value"}},ov="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$q=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=ov.charAt(e%64),e=Math.floor(e/64);(0,F.hu)(0===e,"Cannot push at time == 0");let u=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)u+=ov.charAt(t[r]);return(0,F.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),y2=function(n){if(n===""+lk)return"-";const t=xS(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let u=0;u<e.length;u++)e[u]=n.charAt(u);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return rc;const s=ov.charAt(ov.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},v2=function(n){if(n===""+ML)return vd;const t=xS(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+lk:(delete e[e.length-1],e.join("")):(e[e.length-1]=ov.charAt(ov.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function w2(n){return{type:"value",snapshotNode:n}}function av(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function H0(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function j0(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class Ik{constructor(t){this.index_=t}updateChild(t,e,i,r,s,u){(0,F.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=u&&(i.isEmpty()?t.hasChild(e)?u.trackChildChange(H0(e,h)):(0,F.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(av(e,i)):u.trackChildChange(j0(e,i,h))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(Un,(r,s)=>{e.hasChild(r)||i.trackChildChange(H0(r,s))}),e.isLeafNode()||e.forEachChild(Un,(r,s)=>{if(t.hasChild(r)){const u=t.getImmediateChild(r);u.equals(s)||i.trackChildChange(j0(r,s,u))}else i.trackChildChange(av(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class z0{constructor(t){this.indexedFilter_=new Ik(t.getIndex()),this.index_=t.getIndex(),this.startPost_=z0.getStartPost_(t),this.endPost_=z0.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,u){return this.matches(new en(e,i))||(i=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,u)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Ht.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Ht.EMPTY_NODE);const s=this;return e.forEachChild(Un,(u,h)=>{s.matches(new en(u,h))||(r=r.updateImmediateChild(u,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class qq{constructor(t){this.rangedFilter_=new z0(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,u){return this.rangedFilter_.matches(new en(e,i))||(i=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,u):this.fullLimitUpdateChild_(t,e,i,s,u)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=Ht.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(h.name,h.node),u++}}else{let s,u,h,p;if(r=e.withIndex(this.index_),r=r.updatePriority(Ht.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const I=this.index_.getCompare();h=(M,P)=>I(P,M)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,E=!1;for(;p.hasNext();){const I=p.getNext();!E&&h(s,I)<=0&&(E=!0),E&&y<this.limit_&&h(I,u)<=0?y++:r=r.updateImmediateChild(I.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let u;if(this.reverse_){const I=this.index_.getCompare();u=(M,P)=>I(P,M)}else u=this.index_.getCompare();const h=t;(0,F.hu)(h.numChildren()===this.limit_,"");const p=new en(e,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(h.hasChild(e)){const I=h.getImmediateChild(e);let M=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===e||h.hasChild(M.name));)M=r.getChildAfterChild(this.index_,M,this.reverse_);const P=null==M?1:u(M,p);if(E&&!i.isEmpty()&&P>=0)return null!=s&&s.trackChildChange(j0(e,i,I)),h.updateImmediateChild(e,i);{null!=s&&s.trackChildChange(H0(e,I));const Q=h.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=s&&s.trackChildChange(av(M.name,M.node)),Q.updateImmediateChild(M.name,M.node)):Q}}return i.isEmpty()?t:E&&u(y,p)>=0?(null!=s&&(s.trackChildChange(H0(y.name,y.node)),s.trackChildChange(av(e,i))),h.updateImmediateChild(e,i).updateImmediateChild(y.name,Ht.EMPTY_NODE)):t}}class FS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Un}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Un}copy(){const t=new FS;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Sk(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function Dk(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function LS(n,t){const e=n.copy();return e.index_=t,e}function b2(n){const t={};if(n.isDefault())return t;let e;return n.index_===Un?e="$priority":n.index_===Ek?e="$value":n.index_===sc?e="$key":((0,F.hu)(n.index_ instanceof Ck,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,F.Pz)(e),n.startSet_&&(t.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function C2(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Un&&(t.i=n.index_.toString()),t}class VS extends t2{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=O0("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,F.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const u=VS.getListenId_(t,i),h={};this.listens_[u]=h;const p=b2(t._queryParams);this.restRequest_(s+".json",p,(y,E)=>{let I=E;if(404===y&&(I=null,y=null),null===y&&this.onDataUpdate_(s,I,!1,i),(0,F.DV)(this.listens_,u)===h){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(M,null)}})}unlisten(t,e){const i=VS.getListenId_(t,e);delete this.listens_[i]}get(t){const e=b2(t._queryParams),i=t._path.toString(),r=new F.BH;return this.restRequest_(i+".json",e,(s,u)=>{let h=u;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,F.xO)(e);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,F.cI)(h.responseText)}catch(y){Is("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,p)}else 401!==h.status&&404!==h.status&&Is("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}class Xq{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function BS(){return{value:null,children:new Map}}function lv(n,t,e){if(Jt(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=Qt(t);n.children.has(i)||n.children.set(i,BS()),lv(n.children.get(i),t=Nn(t),e)}}function xk(n,t){if(Jt(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Un,(i,r)=>{lv(n,new Tn(i),r)}),xk(n,t)}}if(n.children.size>0){const e=Qt(t);return t=Nn(t),n.children.has(e)&&xk(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function Ak(n,t,e){null!==n.value?e(t,n.value):function eK(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{Ak(r,new Tn(t.toString()+"/"+i),e)})}class tK{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Br(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class rK{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new tK(t);const i=1e4+2e4*Math.random();N0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Br(t,(r,s)=>{s>0&&(0,F.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),N0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Wa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Wa||(Wa={})),Wa))();function Rk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class US{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Wa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Tn(t));return new US(yn(),e,this.revert)}}return(0,F.hu)(Qt(this.path)===t,"operationForChild called for unrelated child."),new US(Nn(this.path),this.affectedTree,this.revert)}}class G0{constructor(t,e){this.source=t,this.path=e,this.type=Wa.LISTEN_COMPLETE}operationForChild(t){return Jt(this.path)?new G0(this.source,yn()):new G0(this.source,Nn(this.path))}}class Zg{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Wa.OVERWRITE}operationForChild(t){return Jt(this.path)?new Zg(this.source,yn(),this.snap.getImmediateChild(t)):new Zg(this.source,Nn(this.path),this.snap)}}class uv{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Wa.MERGE}operationForChild(t){if(Jt(this.path)){const e=this.children.subtree(new Tn(t));return e.isEmpty()?null:e.value?new Zg(this.source,yn(),e.value):new uv(this.source,yn(),e)}return(0,F.hu)(Qt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new uv(this.source,Nn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vf{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Jt(t))return this.isFullyInitialized()&&!this.filtered_;const e=Qt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class sK{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function $0(n,t,e,i,r,s){const u=i.filter(h=>h.type===e);u.sort((h,p)=>function lK(n,t,e){if(null==t.childName||null==e.childName)throw(0,F.g5)("Should only compare child_ events.");const i=new en(t.childName,t.snapshotNode),r=new en(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,h,p)),u.forEach(h=>{const p=function aK(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,h,s);r.forEach(y=>{y.respondsTo(h.type)&&t.push(y.createEvent(p,n.query_))})})}function HS(n,t){return{eventCache:n,serverCache:t}}function W0(n,t,e,i){return HS(new vf(t,e,i),n.serverCache)}function T2(n,t,e,i){return HS(n.eventCache,new vf(t,e,i))}function jS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Yg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Ok;class Hn{constructor(t,e=(()=>(Ok||(Ok=new Eo(WW)),Ok))()){this.value=t,this.children=e}static fromObject(t){let e=new Hn(null);return Br(t,(i,r)=>{e=e.set(new Tn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:yn(),value:this.value};if(Jt(t))return null;{const i=Qt(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Nn(t),e);return null!=s?{path:oi(new Tn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Jt(t))return this;{const e=Qt(t),i=this.children.get(e);return null!==i?i.subtree(Nn(t)):new Hn(null)}}set(t,e){if(Jt(t))return new Hn(e,this.children);{const i=Qt(t),s=(this.children.get(i)||new Hn(null)).set(Nn(t),e),u=this.children.insert(i,s);return new Hn(this.value,u)}}remove(t){if(Jt(t))return this.children.isEmpty()?new Hn(null):new Hn(null,this.children);{const e=Qt(t),i=this.children.get(e);if(i){const r=i.remove(Nn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new Hn(null):new Hn(this.value,s)}return this}}get(t){if(Jt(t))return this.value;{const e=Qt(t),i=this.children.get(e);return i?i.get(Nn(t)):null}}setTree(t,e){if(Jt(t))return e;{const i=Qt(t),s=(this.children.get(i)||new Hn(null)).setTree(Nn(t),e);let u;return u=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Hn(this.value,u)}}fold(t){return this.fold_(yn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(oi(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,yn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(Jt(t))return null;{const s=Qt(t),u=this.children.get(s);return u?u.findOnPath_(Nn(t),oi(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,yn(),e)}foreachOnPath_(t,e,i){if(Jt(t))return this;{this.value&&i(e,this.value);const r=Qt(t),s=this.children.get(r);return s?s.foreachOnPath_(Nn(t),oi(e,r),i):new Hn(null)}}foreach(t){this.foreach_(yn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(oi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Ol{constructor(t){this.writeTree_=t}static empty(){return new Ol(new Hn(null))}}function q0(n,t,e){if(Jt(t))return new Ol(new Hn(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const u=Ks(r,t);return s=s.updateChild(u,e),new Ol(n.writeTree_.set(r,s))}{const r=new Hn(e),s=n.writeTree_.setTree(t,r);return new Ol(s)}}}function Pk(n,t,e){let i=n;return Br(e,(r,s)=>{i=q0(i,oi(t,r),s)}),i}function I2(n,t){if(Jt(t))return Ol.empty();{const e=n.writeTree_.setTree(t,new Hn(null));return new Ol(e)}}function Nk(n,t){return null!=Qg(n,t)}function Qg(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Ks(e.path,t)):null}function S2(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Un,(i,r)=>{t.push(new en(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new en(i,r.value))}),t}function wf(n,t){if(Jt(t))return n;{const e=Qg(n,t);return new Ol(null!=e?new Hn(e):n.writeTree_.subtree(t))}}function Fk(n){return n.writeTree_.isEmpty()}function cv(n,t){return D2(yn(),n.writeTree_,t)}function D2(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,F.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=D2(oi(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(oi(n,".priority"),i)),e}}function zS(n,t){return R2(t,n)}function pK(n,t){if(n.snap)return $a(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&$a(oi(n.path,e),t))return!0;return!1}function mK(n){return n.visible}function x2(n,t,e){let i=Ol.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const u=s.path;let h;if(s.snap)$a(e,u)?(h=Ks(e,u),i=q0(i,h,s.snap)):$a(u,e)&&(h=Ks(u,e),i=q0(i,yn(),s.snap.getChild(h)));else{if(!s.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if($a(e,u))h=Ks(e,u),i=Pk(i,h,s.children);else if($a(u,e))if(h=Ks(u,e),Jt(h))i=Pk(i,yn(),s.children);else{const p=(0,F.DV)(s.children,Qt(h));if(p){const y=p.getChild(Nn(h));i=q0(i,yn(),y)}}}}}return i}function A2(n,t,e,i,r){if(i||r){const s=wf(n.visibleWrites,t);return!r&&Fk(s)?e:r||null!=e||Nk(s,yn())?cv(x2(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&($a(y.path,t)||$a(t,y.path))},t),e||Ht.EMPTY_NODE):null}{const s=Qg(n.visibleWrites,t);if(null!=s)return s;{const u=wf(n.visibleWrites,t);return Fk(u)?e:null!=e||Nk(u,yn())?cv(u,e||Ht.EMPTY_NODE):null}}}function GS(n,t,e,i){return A2(n.writeTree,n.treePath,t,e,i)}function Lk(n,t){return function _K(n,t,e){let i=Ht.EMPTY_NODE;const r=Qg(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Un,(s,u)=>{i=i.updateImmediateChild(s,u)}),i;if(e){const s=wf(n.visibleWrites,t);return e.forEachChild(Un,(u,h)=>{const p=cv(wf(s,new Tn(u)),h);i=i.updateImmediateChild(u,p)}),S2(s).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return S2(wf(n.visibleWrites,t)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,t)}function M2(n,t,e,i){return function yK(n,t,e,i,r){(0,F.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=oi(t,e);if(Nk(n.visibleWrites,s))return null;{const u=wf(n.visibleWrites,s);return Fk(u)?r.getChild(e):cv(u,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function $S(n,t){return function wK(n,t){return Qg(n.visibleWrites,t)}(n.writeTree,oi(n.treePath,t))}function Vk(n,t,e){return function vK(n,t,e,i){const r=oi(t,e),s=Qg(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?cv(wf(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function k2(n,t){return R2(oi(n.treePath,t),n.writeTree)}function R2(n,t){return{treePath:n,writeTree:t}}class TK{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,F.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,j0(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,H0(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,av(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,F.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,j0(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const O2=new class IK{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class Bk{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vk(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yg(this.viewCache_),s=function EK(n,t,e,i,r,s){return function bK(n,t,e,i,r,s,u){let h;const p=wf(n.visibleWrites,t),y=Qg(p,yn());if(null!=y)h=y;else{if(null==e)return[];h=cv(p,e)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const E=[],I=u.getCompare(),M=s?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let P=M.getNext();for(;P&&E.length<r;)0!==I(P,i)&&E.push(P),P=M.getNext();return E}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function P2(n,t,e,i,r,s){const u=t.eventCache;if(null!=$S(i,e))return t;{let h,p;if(Jt(e))if((0,F.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=Yg(t),I=Lk(i,y instanceof Ht?y:Ht.EMPTY_NODE);h=n.filter.updateFullNode(t.eventCache.getNode(),I,s)}else{const y=GS(i,Yg(t));h=n.filter.updateFullNode(t.eventCache.getNode(),y,s)}else{const y=Qt(e);if(".priority"===y){(0,F.hu)(1===yf(e),"Can't have a priority with additional path components");const E=u.getNode();p=t.serverCache.getNode();const I=M2(i,e,E,p);h=null!=I?n.filter.updatePriority(E,I):u.getNode()}else{const E=Nn(e);let I;if(u.isCompleteForChild(y)){p=t.serverCache.getNode();const M=M2(i,e,u.getNode(),p);I=null!=M?u.getNode().getImmediateChild(y).updateChild(E,M):u.getNode().getImmediateChild(y)}else I=Vk(i,y,t.serverCache);h=null!=I?n.filter.updateChild(u.getNode(),y,I,E,r,s):u.getNode()}}return W0(t,h,u.isFullyInitialized()||Jt(e),n.filter.filtersNodes())}}function WS(n,t,e,i,r,s,u,h){const p=t.serverCache;let y;const E=u?n.filter:n.filter.getIndexedFilter();if(Jt(e))y=E.updateFullNode(p.getNode(),i,null);else if(E.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(e,i);y=E.updateFullNode(p.getNode(),P,null)}else{const P=Qt(e);if(!p.isCompleteForPath(e)&&yf(e)>1)return t;const B=Nn(e),be=p.getNode().getImmediateChild(P).updateChild(B,i);y=".priority"===P?E.updatePriority(p.getNode(),be):E.updateChild(p.getNode(),P,be,B,O2,null)}const I=T2(t,y,p.isFullyInitialized()||Jt(e),E.filtersNodes());return P2(n,I,e,r,new Bk(r,I,s),h)}function Uk(n,t,e,i,r,s,u){const h=t.eventCache;let p,y;const E=new Bk(r,t,s);if(Jt(e))y=n.filter.updateFullNode(t.eventCache.getNode(),i,u),p=W0(t,y,!0,n.filter.filtersNodes());else{const I=Qt(e);if(".priority"===I)y=n.filter.updatePriority(t.eventCache.getNode(),i),p=W0(t,y,h.isFullyInitialized(),h.isFiltered());else{const M=Nn(e),P=h.getNode().getImmediateChild(I);let B;if(Jt(M))B=i;else{const Q=E.getCompleteChild(I);B=null!=Q?".priority"===mk(M)&&Q.getChild(o2(M)).isEmpty()?Q:Q.updateChild(M,i):Ht.EMPTY_NODE}p=P.equals(B)?t:W0(t,n.filter.updateChild(h.getNode(),I,B,M,E,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function N2(n,t){return n.eventCache.isCompleteForChild(t)}function F2(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function Hk(n,t,e,i,r,s,u,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,p=t;y=Jt(e)?i:new Hn(null).setTree(e,i);const E=t.serverCache.getNode();return y.children.inorderTraversal((I,M)=>{if(E.hasChild(I)){const B=F2(0,t.serverCache.getNode().getImmediateChild(I),M);p=WS(n,p,new Tn(I),B,r,s,u,h)}}),y.children.inorderTraversal((I,M)=>{const P=!t.serverCache.isCompleteForChild(I)&&void 0===M.value;if(!E.hasChild(I)&&!P){const Q=F2(0,t.serverCache.getNode().getImmediateChild(I),M);p=WS(n,p,new Tn(I),Q,r,s,u,h)}}),p}class PK{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Ik(i.getIndex()),s=function Kq(n){return n.loadsAllData()?new Ik(n.getIndex()):n.hasLimit()?new qq(n):new z0(n)}(i);this.processor_=function SK(n){return{filter:n}}(s);const u=e.serverCache,h=e.eventCache,p=r.updateFullNode(Ht.EMPTY_NODE,u.getNode(),null),y=s.updateFullNode(Ht.EMPTY_NODE,h.getNode(),null),E=new vf(p,u.isFullyInitialized(),r.filtersNodes()),I=new vf(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=HS(I,E),this.eventGenerator_=new sK(this.query_)}get query(){return this.query_}}function LK(n,t){const e=Yg(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Jt(t)&&!e.getImmediateChild(Qt(t)).isEmpty())?e.getChild(t):null}function L2(n){return 0===n.eventRegistrations_.length}function V2(n,t,e){const i=[];if(e){(0,F.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(e,r);u&&i.push(u)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(u)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function B2(n,t,e,i){t.type===Wa.MERGE&&null!==t.source.queryId&&((0,F.hu)(Yg(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(jS(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function xK(n,t,e,i,r){const s=new TK;let u,h;if(e.type===Wa.OVERWRITE){const y=e;y.source.fromUser?u=Uk(n,t,y.path,y.snap,i,r,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered()&&!Jt(y.path),u=WS(n,t,y.path,y.snap,i,r,h,s))}else if(e.type===Wa.MERGE){const y=e;y.source.fromUser?u=function MK(n,t,e,i,r,s,u){let h=t;return i.foreach((p,y)=>{const E=oi(e,p);N2(t,Qt(E))&&(h=Uk(n,h,E,y,r,s,u))}),i.foreach((p,y)=>{const E=oi(e,p);N2(t,Qt(E))||(h=Uk(n,h,E,y,r,s,u))}),h}(n,t,y.path,y.children,i,r,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered(),u=Hk(n,t,y.path,y.children,i,r,h,s))}else if(e.type===Wa.ACK_USER_WRITE){const y=e;u=y.revert?function OK(n,t,e,i,r,s){let u;if(null!=$S(i,e))return t;{const h=new Bk(i,t,r),p=t.eventCache.getNode();let y;if(Jt(e)||".priority"===Qt(e)){let E;if(t.serverCache.isFullyInitialized())E=GS(i,Yg(t));else{const I=t.serverCache.getNode();(0,F.hu)(I instanceof Ht,"serverChildren would be complete if leaf node"),E=Lk(i,I)}E=E,y=n.filter.updateFullNode(p,E,s)}else{const E=Qt(e);let I=Vk(i,E,t.serverCache);null==I&&t.serverCache.isCompleteForChild(E)&&(I=p.getImmediateChild(E)),y=null!=I?n.filter.updateChild(p,E,I,Nn(e),h,s):t.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Ht.EMPTY_NODE,Nn(e),h,s):p,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(u=GS(i,Yg(t)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=t.serverCache.isFullyInitialized()||null!=$S(i,yn()),W0(t,y,u,n.filter.filtersNodes())}}(n,t,y.path,i,r,s):function kK(n,t,e,i,r,s,u){if(null!=$S(r,e))return t;const h=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(Jt(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return WS(n,t,e,p.getNode().getChild(e),r,s,h,u);if(Jt(e)){let y=new Hn(null);return p.getNode().forEachChild(sc,(E,I)=>{y=y.set(new Tn(E),I)}),Hk(n,t,e,y,r,s,h,u)}return t}{let y=new Hn(null);return i.foreach((E,I)=>{const M=oi(e,E);p.isCompleteForPath(M)&&(y=y.set(E,p.getNode().getChild(M)))}),Hk(n,t,e,y,r,s,h,u)}}(n,t,y.path,y.affectedTree,i,r,s)}else{if(e.type!==Wa.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+e.type);u=function RK(n,t,e,i,r){const s=t.serverCache;return P2(n,T2(t,s.getNode(),s.isFullyInitialized()||Jt(e),s.isFiltered()),e,i,O2,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function AK(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=jS(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(w2(jS(t)))}}(t,u,p),{viewCache:u,changes:p}}(n.processor_,r,t,e,i);return function DK(n,t){(0,F.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,F.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,U2(n,s.changes,s.viewCache.eventCache.getNode(),null)}function U2(n,t,e,i){return function oK(n,t,e,i){const r=[],s=[];return t.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function Wq(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(u.childName,u.snapshotNode))}),$0(n,r,"child_removed",t,i,e),$0(n,r,"child_added",t,i,e),$0(n,r,"child_moved",s,i,e),$0(n,r,"child_changed",t,i,e),$0(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let qS,ZS;class H2{constructor(){this.views=new Map}}function jk(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,F.hu)(null!=s,"SyncTree gave us an op for an invalid query."),B2(s,t,e,i)}{let s=[];for(const u of n.views.values())s=s.concat(B2(u,t,e,i));return s}}function j2(n,t,e,i,r){const u=n.views.get(t._queryIdentifier);if(!u){let h=GS(e,r?i:null),p=!1;h?p=!0:i instanceof Ht?(h=Lk(e,i),p=!1):(h=Ht.EMPTY_NODE,p=!1);const y=HS(new vf(h,p,!1),new vf(i,r,!1));return new PK(t,y)}return u}function z2(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function bf(n,t){let e=null;for(const i of n.views.values())e=e||LK(i,t);return e}function G2(n,t){return t._queryParams.loadsAllData()?KS(n):n.views.get(t._queryIdentifier)}function $2(n,t){return null!=G2(n,t)}function Cf(n){return null!=KS(n)}function KS(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let qK=1;class W2{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Hn(null),this.pendingWriteTree_=function CK(){return{visibleWrites:Ol.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zk(n,t,e,i,r){return function cK(n,t,e,i,r){(0,F.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=q0(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?dv(n,new Zg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Ef(n,t,e=!1){const i=function hK(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function fK(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);(0,F.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=e&&pK(h,i.path)?r=!1:$a(i.path,h.path)&&(s=!0)),u--}return!!r&&(s?(function gK(n){n.visibleWrites=x2(n.allWrites,mK,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=I2(n.visibleWrites,i.path):Br(i.children,p=>{n.visibleWrites=I2(n.visibleWrites,oi(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new Hn(null);return null!=i.snap?s=s.set(yn(),!0):Br(i.children,u=>{s=s.set(new Tn(u),!0)}),dv(n,new US(i.path,s,e))}return[]}function K0(n,t,e){return dv(n,new Zg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function Gk(n,t,e,i){const r=t._path,s=n.syncPointTree_.get(r);let u=[];if(s&&("default"===t._queryIdentifier||$2(s,t))){const h=function GK(n,t,e,i){const r=t._queryIdentifier,s=[];let u=[];const h=Cf(n);if("default"===r)for(const[p,y]of n.views.entries())u=u.concat(V2(y,e,i)),L2(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(r);p&&(u=u.concat(V2(p,e,i)),L2(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Cf(n)&&s.push(new(function HK(){return(0,F.hu)(qS,"Reference.ts has not been loaded"),qS}())(t._repo,t._path)),{removed:s,events:u}}(s,t,e,i);(function jK(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=h.removed;u=h.events;const y=-1!==p.findIndex(I=>I._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(r,(I,M)=>Cf(M));if(y&&!E){const I=n.syncPointTree_.subtree(r);if(!I.isEmpty()){const M=function t5(n){return n.fold((t,e,i)=>{if(e&&Cf(e))return[KS(e)];{let r=[];return e&&(r=z2(e)),Br(i,(s,u)=>{r=r.concat(u)}),r}})}(I);for(let P=0;P<M.length;++P){const B=M[P],Q=B.query,be=Y2(n,B);n.listenProvider_.startListening(Z0(Q),QS(n,Q),be.hashFn,be.onComplete)}}}!E&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(Z0(t),null):p.forEach(I=>{const M=n.queryToTagMap.get(JS(I));n.listenProvider_.stopListening(Z0(I),M)})),function n5(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=JS(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return u}function q2(n,t,e){const i=t._path;let r=null,s=!1;n.syncPointTree_.foreachOnPath(i,(I,M)=>{const P=Ks(I,i);r=r||bf(M,P),s=s||Cf(M)});let h,u=n.syncPointTree_.get(i);u?(s=s||Cf(u),r=r||bf(u,yn())):(u=new H2,n.syncPointTree_=n.syncPointTree_.set(i,u)),null!=r?h=!0:(h=!1,r=Ht.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((M,P)=>{const B=bf(P,yn());B&&(r=r.updateImmediateChild(M,B))}));const p=$2(u,t);if(!p&&!t._queryParams.loadsAllData()){const I=JS(t);(0,F.hu)(!n.queryToTagMap.has(I),"View does not exist, but we have a tag");const M=function r5(){return qK++}();n.queryToTagMap.set(I,M),n.tagToQueryMap.set(M,I)}let E=function zK(n,t,e,i,r,s){const u=j2(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,u),function VK(n,t){n.eventRegistrations_.push(t)}(u,e),function BK(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Un,(s,u)=>{i.push(av(s,u))}),e.isFullyInitialized()&&i.push(w2(e.getNode())),U2(n,i,e.getNode(),t)}(u,e)}(u,t,e,zS(n.pendingWriteTree_,i),r,h);if(!p&&!s){const I=G2(u,t);E=E.concat(function s5(n,t,e){const i=t._path,r=QS(n,t),s=Y2(n,e),u=n.listenProvider_.startListening(Z0(t),r,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,F.hu)(!Cf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,E,I)=>{if(!Jt(y)&&E&&Cf(E))return[KS(E).query];{let M=[];return E&&(M=M.concat(z2(E).map(P=>P.query))),Br(I,(P,B)=>{M=M.concat(B)}),M}});for(let y=0;y<p.length;++y){const E=p[y];n.listenProvider_.stopListening(Z0(E),QS(n,E))}}return u}(n,t,I))}return E}function YS(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(u,h)=>{const y=bf(h,Ks(u,t));if(y)return y});return A2(r,t,s,e,!0)}function dv(n,t){return K2(t,n.syncPointTree_,null,zS(n.pendingWriteTree_,yn()))}function K2(n,t,e,i){if(Jt(n.path))return Z2(n,t,e,i);{const r=t.get(yn());null==e&&null!=r&&(e=bf(r,yn()));let s=[];const u=Qt(n.path),h=n.operationForChild(u),p=t.children.get(u);if(p&&h){const y=e?e.getImmediateChild(u):null,E=k2(i,u);s=s.concat(K2(h,p,y,E))}return r&&(s=s.concat(jk(r,n,i,e))),s}}function Z2(n,t,e,i){const r=t.get(yn());null==e&&null!=r&&(e=bf(r,yn()));let s=[];return t.children.inorderTraversal((u,h)=>{const p=e?e.getImmediateChild(u):null,y=k2(i,u),E=n.operationForChild(u);E&&(s=s.concat(Z2(E,h,p,y)))}),r&&(s=s.concat(jk(r,n,i,e))),s}function Y2(n,t){const e=t.query,i=QS(n,e);return{hashFn:()=>(function NK(n){return n.viewCache_.serverCache.getNode()}(t)||Ht.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function QK(n,t,e){const i=$k(n,e);if(i){const r=Wk(i),s=r.path,u=r.queryId,h=Ks(s,t);return qk(n,s,new G0(Rk(u),h))}return[]}(n,e._path,i):function YK(n,t){return dv(n,new G0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function ZW(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return Gk(n,e,null,s)}}}}function QS(n,t){const e=JS(t);return n.queryToTagMap.get(e)}function JS(n){return n._path.toString()+"$"+n._queryIdentifier}function $k(n,t){return n.tagToQueryMap.get(t)}function Wk(n){const t=n.indexOf("$");return(0,F.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Tn(n.substr(0,t))}}function qk(n,t,e){const i=n.syncPointTree_.get(t);return(0,F.hu)(i,"Missing sync point for query tag that we're tracking"),jk(i,e,zS(n.pendingWriteTree_,t),null)}function Z0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function WK(){return(0,F.hu)(ZS,"Reference.ts has not been loaded"),ZS}())(n._repo,n._path):n}class Kk{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Kk(e)}node(){return this.node_}}class Zk{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=oi(this.path_,t);return new Zk(this.syncTree_,e)}node(){return YS(this.syncTree_,this.path_)}}const Q2=function(n,t,e){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?a5(n[".sv"],t,e):"object"==typeof n[".sv"]?l5(n[".sv"],t):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},a5=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},l5=function(n,t,e){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,F.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,F.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},J2=function(n,t,e,i){return Qk(t,new Zk(e,n),i)},Yk=function(n,t,e){return Qk(n,new Kk(t),e)};function Qk(n,t,e){const i=n.getPriority().val(),r=Q2(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const u=n,h=Q2(u.getValue(),t,e);return h!==u.getValue()||r!==u.getPriority().val()?new rv(h,di(r)):n}{const u=n;return s=u,r!==u.getPriority().val()&&(s=s.updatePriority(new rv(r))),u.forEachChild(Un,(h,p)=>{const y=Qk(p,t.getImmediateChild(h),e);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class Jk{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function XS(n,t){let e=t instanceof Tn?t:new Tn(t),i=n,r=Qt(e);for(;null!==r;){const s=(0,F.DV)(i.node.children,r)||{children:{},childCount:0};i=new Jk(r,i,s),e=Nn(e),r=Qt(e)}return i}function Jg(n){return n.node.value}function Xk(n,t){n.node.value=t,eR(n)}function X2(n){return n.node.childCount>0}function eD(n,t){Br(n.node.children,(e,i)=>{t(new Jk(e,n,i))})}function eV(n,t,e,i){e&&!i&&t(n),eD(n,r=>{eV(r,t,!0,i)}),e&&i&&t(n)}function Y0(n){return new Tn(null===n.parent?n.name:Y0(n.parent)+"/"+n.name)}function eR(n){null!==n.parent&&function d5(n,t,e){const i=function u5(n){return void 0===Jg(n)&&!X2(n)}(e),r=(0,F.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,eR(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,eR(n))}(n.parent,n.name,n)}const h5=/[\[\].#$\/\u0000-\u001F\u007F]/,f5=/[\[\].#$\u0000-\u001F\u007F]/,tR=10485760,tD=function(n){return"string"==typeof n&&0!==n.length&&!h5.test(n)},tV=function(n){return"string"==typeof n&&0!==n.length&&!f5.test(n)},Q0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!DS(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},oc=function(n,t,e,i){i&&void 0===t||J0((0,F.gK)(n,"value"),t,e)},J0=function(n,t,e){const i=e instanceof Tn?new Sq(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+qg(i));if("function"==typeof t)throw new Error(n+"contains a function "+qg(i)+" with contents = "+t.toString());if(DS(t))throw new Error(n+"contains "+t.toString()+" "+qg(i));if("string"==typeof t&&t.length>tR/3&&(0,F.ug)(t)>tR)throw new Error(n+"contains a string greater than "+tR+" utf8 bytes "+qg(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(Br(t,(u,h)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!tD(u)))throw new Error(n+" contains an invalid key ("+u+") "+qg(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Dq(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,F.ug)(t),a2(n)})(i,u),J0(n,h,i),function xq(n){const t=n.parts_.pop();n.byteLength_-=(0,F.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+qg(i)+" in addition to actual children.")}},nV=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,F.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];Br(t,(u,h)=>{const p=new Tn(u);if(J0(r,h,oi(e,p)),".priority"===mk(p)&&!Q0(h))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=L0(i);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!tD(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Iq);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&$a(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},nR=function(n,t,e){if(!e||void 0!==t){if(DS(t))throw new Error((0,F.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Q0(t))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},X0=function(n,t,e,i){if(!(i&&void 0===e||tD(e)))throw new Error((0,F.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},eC=function(n,t,e,i){if(!(i&&void 0===e||tV(e)))throw new Error((0,F.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qa=function(n,t){if(".info"===Qt(t))throw new Error(n+" failed = Can't modify data under /.info/")},iV=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!tD(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),tV(n)}(e))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class _5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function nD(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!_k(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function iR(n,t,e){nD(n,e),rV(n,i=>_k(i,t))}function Ka(n,t,e){nD(n,e),rV(n,i=>$a(i,t)||$a(t,i))}function rV(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(y5(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function y5(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();$g&&Vr("event: "+e.toString()),nv(i)}}}const sV="repo_interrupt";class w5{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=BS(),this.transactionQueueTree_=new Jk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oV(n){const e=n.infoData_.getNode(new Tn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function tC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:oV(n)})}function aV(n,t,e,i,r){n.dataUpdateCount++;const s=new Tn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let u=[];if(r)if(i){const p=(0,F.UI)(e,y=>di(y));u=function XK(n,t,e,i){const r=$k(n,i);if(r){const s=Wk(r),u=s.path,h=s.queryId,p=Ks(u,t),y=Hn.fromObject(e);return qk(n,u,new uv(Rk(h),p,y))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=di(e);u=function JK(n,t,e,i){const r=$k(n,i);if(null!=r){const s=Wk(r),u=s.path,h=s.queryId,p=Ks(u,t);return qk(n,u,new Zg(Rk(h),p,e))}return[]}(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,F.UI)(e,y=>di(y));u=function ZK(n,t,e){const i=Hn.fromObject(e);return dv(n,new uv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=di(e);u=K0(n.serverSyncTree_,s,p)}let h=s;u.length>0&&(h=fv(n,s)),Ka(n.eventQueue_,h,u)}function lV(n,t){rR(n,"connected",t),!1===t&&function I5(n){hv(n,"onDisconnectEvents");const t=tC(n),e=BS();Ak(n.onDisconnect_,yn(),(r,s)=>{const u=J2(r,s,n.serverSyncTree_,t);lv(e,r,u)});let i=[];Ak(e,yn(),(r,s)=>{i=i.concat(K0(n.serverSyncTree_,r,s));const u=lR(n,r);fv(n,u)}),n.onDisconnect_=BS(),Ka(n.eventQueue_,yn(),i)}(n)}function rR(n,t,e){const i=new Tn("/.info/"+t),r=di(e);n.infoData_.updateSnapshot(i,r);const s=K0(n.infoSyncTree_,i,r);Ka(n.eventQueue_,i,s)}function iD(n){return n.nextWriteId_++}function sR(n,t,e,i,r){hv(n,"set",{path:t.toString(),value:e,priority:i});const s=tC(n),u=di(e,i),h=YS(n.serverSyncTree_,t),p=Yk(u,h,s),y=iD(n),E=zk(n.serverSyncTree_,t,p,y,!0);nD(n.eventQueue_,E),n.server_.put(t.toString(),u.val(!0),(M,P)=>{const B="ok"===M;B||Is("set at "+t+" failed: "+M);const Q=Ef(n.serverSyncTree_,y,!B);Ka(n.eventQueue_,t,Q),Tf(0,r,M,P)});const I=lR(n,t);fv(n,I),Ka(n.eventQueue_,I,[])}function S5(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&xk(n.onDisconnect_,t),Tf(0,e,i,r)})}function uV(n,t,e,i){const r=di(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,u)=>{"ok"===s&&lv(n.onDisconnect_,t,r),Tf(0,i,s,u)})}function oR(n,t,e){let i;i=".info"===Qt(t._path)?Gk(n.infoSyncTree_,t,e):Gk(n.serverSyncTree_,t,e),iR(n.eventQueue_,t._path,i)}function cV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(sV)}function hv(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Vr(e,...t)}function Tf(n,t,e,i){t&&nv(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const u=new Error(s);u.code=r,t(u)}})}function aR(n,t,e){return YS(n.serverSyncTree_,t,e)||Ht.EMPTY_NODE}function rD(n,t=n.transactionQueueTree_){if(t||sD(n,t),Jg(t)){const e=hV(n,t);(0,F.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function R5(n,t,e){const i=e.map(y=>y.currentWriteId),r=aR(n,t,i);let s=r;const u=r.hash();for(let y=0;y<e.length;y++){const E=e[y];(0,F.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const I=Ks(t,E.path);s=s.updateChild(I,E.currentOutputSnapshotRaw)}const h=s.val(!0),p=t;n.server_.put(p.toString(),h,y=>{hv(n,"transaction put response",{path:p.toString(),status:y});let E=[];if("ok"===y){const I=[];for(let M=0;M<e.length;M++)e[M].status=2,E=E.concat(Ef(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&I.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();sD(n,XS(n.transactionQueueTree_,t)),rD(n,n.transactionQueueTree_),Ka(n.eventQueue_,t,E);for(let M=0;M<I.length;M++)nv(I[M])}else{if("datastale"===y)for(let I=0;I<e.length;I++)e[I].status=3===e[I].status?4:0;else{Is("transaction at "+p.toString()+" failed: "+y);for(let I=0;I<e.length;I++)e[I].status=4,e[I].abortReason=y}fv(n,t)}},u)}(n,Y0(t),e)}else X2(t)&&eD(t,e=>{rD(n,e)})}function fv(n,t){const e=dV(n,t),i=Y0(e);return function O5(n,t,e){if(0===t.length)return;const i=[];let r=[];const u=t.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const p=t[h],y=Ks(e,p.path);let I,E=!1;if((0,F.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,I=p.abortReason,r=r.concat(Ef(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,I="maxretry",r=r.concat(Ef(n.serverSyncTree_,p.currentWriteId,!0));else{const M=aR(n,p.path,u);p.currentInputSnapshot=M;const P=t[h].update(M.val());if(void 0!==P){J0("transaction failed: Data returned ",P,p.path);let B=di(P);"object"==typeof P&&null!=P&&(0,F.r3)(P,".priority")||(B=B.updatePriority(M.getPriority()));const be=p.currentWriteId,et=tC(n),nt=Yk(B,M,et);p.currentOutputSnapshotRaw=B,p.currentOutputSnapshotResolved=nt,p.currentWriteId=iD(n),u.splice(u.indexOf(be),1),r=r.concat(zk(n.serverSyncTree_,p.path,nt,p.currentWriteId,p.applyLocally)),r=r.concat(Ef(n.serverSyncTree_,be,!0))}else E=!0,I="nodata",r=r.concat(Ef(n.serverSyncTree_,p.currentWriteId,!0))}Ka(n.eventQueue_,e,r),r=[],E&&(t[h].status=2,setTimeout(t[h].unwatcher,Math.floor(0)),t[h].onComplete&&i.push("nodata"===I?()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot):()=>t[h].onComplete(new Error(I),!1,null)))}sD(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)nv(i[h]);rD(n,n.transactionQueueTree_)}(n,hV(n,e),i),i}function dV(n,t){let e,i=n.transactionQueueTree_;for(e=Qt(t);null!==e&&void 0===Jg(i);)i=XS(i,e),e=Qt(t=Nn(t));return i}function hV(n,t){const e=[];return fV(n,t,e),e.sort((i,r)=>i.order-r.order),e}function fV(n,t,e){const i=Jg(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);eD(t,r=>{fV(n,r,e)})}function sD(n,t){const e=Jg(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,Xk(t,e.length>0?e:void 0)}eD(t,i=>{sD(n,i)})}function lR(n,t){const e=Y0(dV(n,t)),i=XS(n.transactionQueueTree_,t);return function c5(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{uR(n,r)}),uR(n,i),eV(i,r=>{uR(n,r)}),e}function uR(n,t){const e=Jg(t);if(e){const i=[];let r=[],s=-1;for(let u=0;u<e.length;u++)3===e[u].status||(1===e[u].status?((0,F.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,e[u].status=3,e[u].abortReason="set"):((0,F.hu)(0===e[u].status,"Unexpected transaction status in abort"),e[u].unwatcher(),r=r.concat(Ef(n.serverSyncTree_,e[u].currentWriteId,!0)),e[u].onComplete&&i.push(e[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Xk(t,void 0):e.length=s+1,Ka(n.eventQueue_,Y0(t),r);for(let u=0;u<i.length;u++)nv(i[u])}}const cR=function(n,t){const e=F5(n),i=e.namespace;return"firebase.com"===e.domain&&ic(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&ic("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ck(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Tn(e.pathString)}},F5=function(n){let t="",e="",i="",r="",s="",u=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),t=n.substring(0,Math.min(E,I)),E<I&&(r=function P5(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}t+="/"+r}return t}(n.substring(E,I)));const M=function N5(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Is(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,I)));y=t.indexOf(":"),y>=0?(u="https"===h||"wss"===h,p=parseInt(t.substring(y+1),10)):y=t.length;const P=t.slice(0,y);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const B=t.indexOf(".");i=t.substring(0,B).toLowerCase(),e=t.substring(B+1),s=i}"ns"in M&&(s=M.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:u,scheme:h,pathString:r,namespace:s}};class pV{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class gV{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class mV{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class _V{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new F.BH;return S5(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){qa("OnDisconnect.remove",this._path);const t=new F.BH;return uV(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){qa("OnDisconnect.set",this._path),oc("OnDisconnect.set",t,this._path,!1);const e=new F.BH;return uV(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){qa("OnDisconnect.setWithPriority",this._path),oc("OnDisconnect.setWithPriority",t,this._path,!1),nR("OnDisconnect.setWithPriority",e,!1);const i=new F.BH;return function D5(n,t,e,i,r){const s=di(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(u,h)=>{"ok"===u&&lv(n.onDisconnect_,t,s),Tf(0,r,u,h)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){qa("OnDisconnect.update",this._path),nV("OnDisconnect.update",t,this._path,!1);const e=new F.BH;return function x5(n,t,e,i){if((0,F.xb)(e))return Vr("onDisconnect().update() called with empty data.  Don't do anything."),void Tf(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&Br(e,(u,h)=>{const p=di(h);lv(n.onDisconnect_,oi(t,u),p)}),Tf(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class To{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return Jt(this._path)?null:mk(this._path)}get ref(){return new Za(this._repo,this._path)}get _queryIdentifier(){const t=C2(this._queryParams),e=ak(t);return"{}"===e?"default":e}get _queryObject(){return C2(this._queryParams)}isEqual(t){if(!((t=(0,F.m9)(t))instanceof To))return!1;const e=this._repo===t._repo,i=_k(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Tq(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function oD(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function If(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===sc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vd)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==rc)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===Un){if(null!=t&&!Q0(t)||null!=e&&!Q0(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof Ck||n.getIndex()===Ek,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function aD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Za extends To{constructor(t,e){super(t,e,new FS,!1)}get parent(){const t=o2(this._path);return null===t?null:new Za(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Xg{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Tn(t),i=em(this.ref,t);return new Xg(this._node.getChild(e),i,Un)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Xg(r,em(this.ref,i),Un)))}hasChild(t){const e=new Tn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yV(n,t){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==t?em(n._root,t):n._root}function vV(n,t){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const e=cR(t,n._repo.repoInfo_.nodeAdmin);iV("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&ic("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),yV(n,e.path.toString())}function em(n,t){return null===Qt((n=(0,F.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),eC("child","path",e,!1)):eC("child","path",t,!1),new Za(n._repo,oi(n._path,t));var e}function dR(n,t){n=(0,F.m9)(n),qa("set",n._path),oc("set",t,n._path,!1);const e=new F.BH;return sR(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function H5(n,t){nV("update",t,n._path,!1);const e=new F.BH;return function T5(n,t,e,i){hv(n,"update",{path:t.toString(),value:e});let r=!0;const s=tC(n),u={};if(Br(e,(h,p)=>{r=!1,u[h]=J2(oi(t,h),di(p),n.serverSyncTree_,s)}),r)Vr("update() called with empty data.  Don't do anything."),Tf(0,i,"ok",void 0);else{const h=iD(n),p=function KK(n,t,e,i){!function dK(n,t,e,i){(0,F.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=Pk(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Hn.fromObject(e);return dv(n,new uv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,u,h);nD(n.eventQueue_,p),n.server_.merge(t.toString(),e,(y,E)=>{const I="ok"===y;I||Is("update at "+t+" failed: "+y);const M=Ef(n.serverSyncTree_,h,!I),P=M.length>0?fv(n,t):t;Ka(n.eventQueue_,P,M),Tf(0,i,y,E)}),Br(e,y=>{const E=lR(n,oi(t,y));fv(n,E)}),Ka(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function j5(n){return function E5(n,t){const e=function e5(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(y,E)=>{const I=Ks(y,e);i=i||bf(E,I)});let r=n.syncPointTree_.get(e);r?i=i||bf(r,yn()):(r=new H2,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,u=s?new vf(i,!0,!1):null;return function FK(n){return jS(n.viewCache_)}(j2(r,t,zS(n.pendingWriteTree_,t._path),s?u.getNode():Ht.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(i=>{const r=di(i).withIndex(t._queryParams.getIndex()),s=K0(n.serverSyncTree_,t._path,r);return iR(n.eventQueue_,t._path,s),Promise.resolve(r)},i=>(hv(n,"get for query "+(0,F.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,F.m9)(n))._repo,n).then(t=>new Xg(t,new Za(n._repo,n._path),n._queryParams.getIndex()))}class lD{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new pV("value",this,new Xg(t.snapshotNode,new Za(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new gV(this,t,e):null}matches(t){return t instanceof lD&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class uD{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new gV(this,t,e):null}createEvent(t,e){(0,F.hu)(null!=t.childName,"Child events should have a childName.");const i=em(new Za(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new pV(t.type,this,new Xg(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof uD&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function nC(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,y=(E,I)=>{oR(n._repo,n,h),p(E,I)};y.userCallback=e.userCallback,y.context=e.context,e=y}const u=new mV(e,s||void 0),h="value"===t?new lD(u):new uD(t,u);return function A5(n,t,e){let i;i=".info"===Qt(t._path)?q2(n.infoSyncTree_,t,e):q2(n.serverSyncTree_,t,e),iR(n.eventQueue_,t._path,i)}(n._repo,n,h),()=>oR(n._repo,n,h)}function hR(n,t,e,i){return nC(n,"value",t,e,i)}function wV(n,t,e,i){return nC(n,"child_added",t,e,i)}function bV(n,t,e,i){return nC(n,"child_changed",t,e,i)}function CV(n,t,e,i){return nC(n,"child_moved",t,e,i)}function EV(n,t,e,i){return nC(n,"child_removed",t,e,i)}function TV(n,t,e){let i=null;const r=e?new mV(e):null;"value"===t?i=new lD(r):t&&(i=new uD(t,r)),oR(n._repo,n,i)}class Pl{}class IV extends Pl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){oc("endAt",this._value,t._path,!0);const e=Dk(t._queryParams,this._value,this._key);if(aD(e),If(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new To(t._repo,t._path,e,t._orderByCalled)}}class G5 extends Pl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){oc("endBefore",this._value,t._path,!1);const e=function Jq(n,t,e){let i,r;return n.index_===sc?("string"==typeof t&&(t=v2(t)),r=Dk(n,t,e)):(i=null==e?vd:v2(e),r=Dk(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(aD(e),If(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new To(t._repo,t._path,e,t._orderByCalled)}}class SV extends Pl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){oc("startAt",this._value,t._path,!0);const e=Sk(t._queryParams,this._value,this._key);if(aD(e),If(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new To(t._repo,t._path,e,t._orderByCalled)}}class q5 extends Pl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){oc("startAfter",this._value,t._path,!1);const e=function Qq(n,t,e){let i;if(n.index_===sc)"string"==typeof t&&(t=y2(t)),i=Sk(n,t,e);else{let r;r=null==e?rc:y2(e),i=Sk(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(aD(e),If(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new To(t._repo,t._path,e,t._orderByCalled)}}class Z5 extends Pl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new To(t._repo,t._path,function Zq(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Q5 extends Pl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new To(t._repo,t._path,function Yq(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class X5 extends Pl{constructor(t){super(),this._path=t}_apply(t){oD(t,"orderByChild");const e=new Tn(this._path);if(Jt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Ck(e),r=LS(t._queryParams,i);return If(r),new To(t._repo,t._path,r,!0)}}class tZ extends Pl{_apply(t){oD(t,"orderByKey");const e=LS(t._queryParams,sc);return If(e),new To(t._repo,t._path,e,!0)}}class iZ extends Pl{_apply(t){oD(t,"orderByPriority");const e=LS(t._queryParams,Un);return If(e),new To(t._repo,t._path,e,!0)}}class sZ extends Pl{_apply(t){oD(t,"orderByValue");const e=LS(t._queryParams,Ek);return If(e),new To(t._repo,t._path,e,!0)}}class aZ extends Pl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(oc("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new IV(this._value,this._key)._apply(new SV(this._value,this._key)._apply(t))}}function Nl(n,...t){let e=(0,F.m9)(n);for(const i of t)e=i._apply(e);return e}(function UK(n){(0,F.hu)(!qS,"__referenceConstructor has already been defined"),qS=n})(Za),function $K(n){(0,F.hu)(!ZS,"__referenceConstructor has already been defined"),ZS=n}(Za);const fR={};function xV(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||ic("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,u=cR(s,r),h=u.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,u=cR(s,r),h=u.repoInfo):p=!u.repoInfo.secure;const E=r&&p?new F0(F0.OWNER):new XW(n.name,n.options,t);iV("Invalid Firebase Database URL",u),Jt(u.path)||ic("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function hZ(n,t,e,i){let r=fR[t.name];r||(r={},fR[t.name]=r);let s=r[n.toURLString()];return s&&ic("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new w5(n,false,e,i),r[n.toURLString()]=s,s}(h,n,E,new JW(n.name,e));return new pZ(I,n)}class pZ{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function b5(n,t,e){if(n.stats_=fk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new VS(n.repoInfo_,(i,r,s,u)=>{aV(n,i,r,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>lV(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Kg(n.repoInfo_,t,(i,r,s,u)=>{aV(n,i,r,s,u)},i=>{lV(n,i)},i=>{!function C5(n,t){Br(t,(e,i)=>{rR(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function nq(n,t){const e=n.toString();return hk[e]||(hk[e]=t()),hk[e]}(n.repoInfo_,()=>new rK(n.stats_,n.server_)),n.infoData_=new Xq,n.infoSyncTree_=new W2({startListening:(i,r,s,u)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=K0(n.infoSyncTree_,i._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),rR(n,"connected",!1),n.serverSyncTree_=new W2({startListening:(i,r,s,u)=>(n.server_.listen(i,s,r,(h,p)=>{const y=u(h,p);Ka(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Za(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function dZ(n,t){const e=fR[t];(!e||e[n.key]!==n)&&ic(`Database ${t}(${n.repoInfo_}) has already been deleted.`),cV(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&ic("Cannot call "+t+" on a deleted database.")}}function AV(){qL.IS_TRANSPORT_INITIALIZED&&Is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function gZ(){AV(),_f.forceDisallow()}function mZ(){AV(),iv.forceDisallow(),_f.forceAllow()}function wZ(n,t){DL(n,t)}const CZ={".sv":"timestamp"};class IZ{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Kg.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Kg.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function bZ(n){CL(_o.SDK_VERSION),(0,_o._registerComponent)(new bl.wA("database",(t,{instanceIdentifier:e})=>xV(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,_o.registerVersion)(wL,"0.13.0",n),(0,_o.registerVersion)(wL,"0.13.0","esm2017")}();const AZ=new yo.Yd("@firebase/database-compat"),MV=function(n){AZ.warn("FIREBASE WARNING: "+n)};class RZ{constructor(t){this._delegate=t}cancel(t){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,MV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class OZ{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Sf{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),eC("DataSnapshot.child","path",t,!1),new Sf(this._database,this._delegate.child(t))}hasChild(t){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),eC("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Sf(this._database,e)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new aa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Xr{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",e,!1);const u=Xr.getCancelAndContextArgs_("Query.on",i,r),h=(y,E)=>{e.call(u.context,new Sf(this.database,y),E)};h.userCallback=e,h.context=u.context;const p=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(t){case"value":return hR(this._delegate,h,p),e;case"child_added":return wV(this._delegate,h,p),e;case"child_removed":return EV(this._delegate,h,p),e;case"child_changed":return bV(this._delegate,h,p),e;case"child_moved":return CV(this._delegate,h,p),e;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,F.Wj)("Query.off","callback",e,!0),(0,F.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,TV(this._delegate,t,r)}else TV(this._delegate,t)}get(){return j5(this._delegate).then(t=>new Sf(this.database,t))}once(t,e,i,r){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",e,!0);const s=Xr.getCancelAndContextArgs_("Query.once",i,r),u=new F.BH,h=(y,E)=>{const I=new Sf(this.database,y);e&&e.call(s.context,I,E),u.resolve(I)};h.userCallback=e,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),u.reject(y)};switch(t){case"value":hR(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":wV(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":EV(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":bV(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":CV(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(t){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Xr(this.database,Nl(this._delegate,function Y5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Z5(n)}(t)))}limitToLast(t){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Xr(this.database,Nl(this._delegate,function J5(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Q5(n)}(t)))}orderByChild(t){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Xr(this.database,Nl(this._delegate,function eZ(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return eC("orderByChild","path",n,!1),new X5(n)}(t)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Xr(this.database,Nl(this._delegate,function nZ(){return new tZ}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Xr(this.database,Nl(this._delegate,function rZ(){return new iZ}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Xr(this.database,Nl(this._delegate,function oZ(){return new sZ}()))}startAt(t=null,e){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Xr(this.database,Nl(this._delegate,function W5(n=null,t){return X0("startAt","key",t,!0),new SV(n,t)}(t,e)))}startAfter(t=null,e){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Xr(this.database,Nl(this._delegate,function K5(n,t){return X0("startAfter","key",t,!0),new q5(n,t)}(t,e)))}endAt(t=null,e){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Xr(this.database,Nl(this._delegate,function z5(n,t){return X0("endAt","key",t,!0),new IV(n,t)}(t,e)))}endBefore(t=null,e){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Xr(this.database,Nl(this._delegate,function $5(n,t){return X0("endBefore","key",t,!0),new G5(n,t)}(t,e)))}equalTo(t,e){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Xr(this.database,Nl(this._delegate,function lZ(n,t){return X0("equalTo","key",t,!0),new aZ(n,t)}(t,e)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Xr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,F.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,F.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,F.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new aa(this.database,new Za(this._delegate._repo,this._delegate._path))}}class aa extends Xr{constructor(t,e){super(t,new To(e._repo,e._path,new FS,!1)),this.database=t,this._delegate=e}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new aa(this.database,em(this._delegate,t))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new aa(this.database,t):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new aa(this.database,this._delegate.root)}set(t,e){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",e,!0);const i=dR(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,MV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qa("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",e,!0);const i=H5(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function U5(n,t,e){if(qa("setWithPriority",n._path),oc("setWithPriority",t,n._path,!1),nR("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new F.BH;return sR(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",t,!0);const e=function V5(n){return qa("remove",n._path),dR(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,F.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function SZ(n,t,e){var i;if(n=(0,F.m9)(n),qa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==e?void 0:e.applyLocally)||void 0===i||i,s=new F.BH,h=hR(n,()=>{});return function k5(n,t,e,i,r,s){hv(n,"transaction on "+t);const u={path:t,update:e,onComplete:i,status:null,order:TL(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=aR(n,t,void 0);u.currentInputSnapshot=h;const p=u.update(h.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{J0("transaction failed: Data returned ",p,u.path),u.status=0;const y=XS(n.transactionQueueTree_,t),E=Jg(y)||[];let I;E.push(u),Xk(y,E),"object"==typeof p&&null!==p&&(0,F.r3)(p,".priority")?(I=(0,F.DV)(p,".priority"),(0,F.hu)(Q0(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(YS(n.serverSyncTree_,t)||Ht.EMPTY_NODE).getPriority().val();const M=tC(n),P=di(p,I),B=Yk(P,h,M);u.currentOutputSnapshotRaw=P,u.currentOutputSnapshotResolved=B,u.currentWriteId=iD(n);const Q=zk(n.serverSyncTree_,t,B,u.currentWriteId,u.applyLocally);Ka(n.eventQueue_,t,Q),rD(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,y,E)=>{let I=null;p?s.reject(p):(I=new Xg(E,new Za(n._repo,n._path),Un),s.resolve(new IZ(y,I)))},h,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new OZ(s.committed,new Sf(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",e,!0);const i=function B5(n,t){n=(0,F.m9)(n),qa("setPriority",n._path),nR("setPriority",t,!1);const e=new F.BH;return sR(n._repo,oi(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",e,!0);const i=function L5(n,t){n=(0,F.m9)(n),qa("push",n._path),oc("push",t,n._path,!0);const e=oV(n._repo),i=$q(e),r=em(n,i),s=em(n,i);let u;return u=null!=t?dR(s,t).then(()=>s):Promise.resolve(s),r.then=u.then.bind(u),r.catch=u.then.bind(u,void 0),r}(this._delegate,t),r=i.then(u=>new aa(this.database,u));e&&r.then(()=>e(null),u=>e(u));const s=new aa(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return qa("Reference.onDisconnect",this._delegate._path),new RZ(new _V(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class iC{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:gZ,forceLongPolling:mZ}}useEmulator(t,e,i={}){!function _Z(n,t,e,i={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ic("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&ic('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new F0(F0.OWNER);else if(i.mockUserToken){const u="string"==typeof i.mockUserToken?i.mockUserToken:(0,F.Sg)(i.mockUserToken,n.app.options.projectId);s=new F0(u)}!function cZ(n,t,e,i){n.repoInfo_=new ck(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,F.Dv)("database.ref",0,1,arguments.length),t instanceof aa){const e=vV(this._delegate,t.toString());return new aa(this,e)}{const e=yV(this._delegate,t);return new aa(this,e)}}refFromURL(t){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const i=vV(this._delegate,t);return new aa(this,i)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function yZ(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),cV(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function vZ(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function M5(n){n.persistentConnection_&&n.persistentConnection_.resume(sV)}(n._repo)}(this._delegate)}}iC.ServerValue={TIMESTAMP:function EZ(){return CZ}(),increment:n=>function TZ(n){return{".sv":{increment:n}}}(n)};var NZ=Object.freeze({__proto__:null,initStandalone:function PZ({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){CL(e);const u=new bl.zt("auth-internal",new bl.H0("database-standalone"));return u.setComponent(new bl.wA("auth-internal",()=>i,"PRIVATE")),{instance:new iC(xV(n,u,void 0,t,s),n),namespace:r}}});const FZ=iC.ServerValue;function kV(n){return null==n}function RV(n){return"function"==typeof n.set}function OV(n,t){return RV(t)?t:n.ref(t)}function PV(n,t){if(function VZ(n){return"string"==typeof n}(n))return t.stringCase();if(RV(n))return t.firebaseCase();if(function BZ(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function rC(n,t,e="on",i=Rp.z){return new v.y(r=>{let s=null;return s=n[e](t,(u,h)=>{i.schedule(()=>{r.next({snapshot:u,prevKey:h})}),"once"===e&&i.schedule(()=>r.complete())},u=>{i.schedule(()=>r.error(u))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,we.U)(r=>{const{snapshot:s,prevKey:u}=r;let h=null;return s.exists()&&(h=s.key),{type:t,payload:s,prevKey:u,key:h}}),(0,yp.B)())}function NV(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function jZ(n,t){const{payload:e,prevKey:i,key:r}=t,s=NV(n,r),u=function HZ(n,t){if(kV(t))return 0;{const e=NV(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let h=null;t.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(u,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(u,0,t)}return n;case"child_removed":return n.filter(h=>h.payload.key!==e.key);case"child_changed":return n.map(h=>h.payload.key===r?t:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function FV(n){return(kV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function LV(n,t,e){return function UZ(n,t,e){return rC(n,"value","once",e).pipe(gr(i=>{const r=[bt(i)];return t.forEach(s=>r.push(rC(n,s,"on",e))),(0,mo.T)(...r).pipe(Us(jZ,[]))}),L_())}(n,t=FV(t),e)}function VV(n,t,e){const i=(t=FV(t)).map(r=>rC(n,r,"on",e));return(0,mo.T)(...i)}function BV(n,t){return function(i,r){return PV(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function WZ(n){return function(e){return e?PV(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function UV(n,t){return function(){return rC(n,"value","on",t)}}!function LZ(n){n.INTERNAL.registerComponent(new bl.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new iC(r,i)},"PUBLIC").setServiceProps({Reference:aa,Query:Xr,Database:iC,DataSnapshot:Sf,enableLogging:wZ,INTERNAL:NZ,ServerValue:FZ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(aT.Z);const ZZ=new o.OlP("angularfire2.realtimeDatabaseURL"),YZ=new o.OlP("angularfire2.database.use-emulator");let QZ=(()=>{class n{constructor(e,i,r,s,u,h,p,y,E,I,M,P,B,Q,be){this.schedulers=h;const et=p,nt=(0,wi.on)(e,u,i);y&&F_(nt,u,E,M,P,B,I,Q),this.database=(0,wi.cc)(`${nt.name}.database.${r}`,"AngularFireDatabase",nt.name,()=>{const it=u.runOutsideAngular(()=>nt.database(r||void 0));return et&&it.useEmulator(...et),it},[et])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>OV(this.database,e));let s=r;return i&&(s=i(r)),function qZ(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:BV(i,"update"),set:BV(i,"set"),push:r=>i.push(r),remove:WZ(i),snapshotChanges:r=>LV(n,r,e).pipe(_n.iC),stateChanges:r=>VV(n,r,e).pipe(_n.iC),auditTrail:r=>function zZ(n,t,e){return function $Z(n,t,e){return function GZ(n,t){return rC(n,"value","on",t).pipe((0,we.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function UW(...n){const t=(0,fl.jO)(n);return(0,Fi.e)((e,i)=>{const r=n.length,s=new Array(r);let u=n.map(()=>!1),h=!1;for(let p=0;p<r;p++)(0,po.Xf)(n[p]).subscribe((0,rn.x)(i,y=>{s[p]=y,!h&&!u[p]&&(u[p]=!0,(h=u.every(he.y))&&(u=null))},HN.Z));e.subscribe((0,rn.x)(i,p=>{if(h){const y=[p,...s];i.next(t?t(...y):y)}}))})}(t),(0,we.U)(([r,s])=>{const u=r.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),function HW(n){return(0,Fi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,rn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,we.U)(r=>r.actions))}(n,VV(n,t).pipe(Us((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(_n.iC),valueChanges:(r,s)=>LV(n,r,e).pipe((0,we.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),_n.iC)}}(s,this)}object(e){return function KZ(n,t){return{query:n,snapshotChanges:()=>UV(n,t.schedulers.outsideAngular)().pipe(_n.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>UV(n,t.schedulers.outsideAngular)().pipe(_n.iC,(0,we.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>OV(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(wi.Dh),o.LFG(wi.xv,8),o.LFG(ZZ,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(_n.HU),o.LFG(YZ,8),o.LFG(Mp,8),o.LFG(O_,8),o.LFG(Lw,8),o.LFG(P_,8),o.LFG(N_,8),o.LFG(Rh,8),o.LFG(Vw,8),o.LFG(Fw,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),JZ=(()=>{class n{constructor(){kh.Z.registerVersion("angularfire",_n.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[QZ]}),n})();const HV_firebaseConfig={apiKey:"AIzaSyBubQfS5FkzpTBdeJF3WgQmCk3XRIX2muE",authDomain:"pranavam-759d0.firebaseapp.com",projectId:"pranavam-759d0",storageBucket:"pranavam-759d0.appspot.com",messagingSenderId:"1036267670449",appId:"1:1036267670449:web:78a97a16efd91192044b90"};let XZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[BW]}),n.\u0275inj=o.cJS({providers:[Oh],imports:[[_a,Um,VW,bS,wi.hO.initializeApp(HV_firebaseConfig),I3,JZ,mW,Bg,B3,Mx,Wz,CS,cj,ek]]}),n})();(0,o.G48)(),Kl().bootstrapModule(XZ).catch(n=>console.error(n))},5867:(Qe,Ce,N)=>{N.d(Ce,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=N(9681);(0,o.registerVersion)("firebase","9.8.2","app")},127:(Qe,Ce,N)=>{N.d(Ce,{Z:()=>o.Z});var o=N(3942);o.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Qe,Ce,N)=>{N.r(Ce);var o=N(5861),ee=N(3942),L=N(2090),ce=N(9681),re=N(655),_e=N(1877),de=N(4859);const Fe=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new _e.Yd("@firebase/auth");function Ye(v,...g){We.logLevel<=_e.in.ERROR&&We.error(`Auth (${ce.SDK_VERSION}): ${v}`,...g)}function Me(v,...g){throw je(v,...g)}function Te(v,...g){return je(v,...g)}function Se(v,g,_){const b=Object.assign(Object.assign({},Ue()),{[g]:_});return new L.LL("auth","Firebase",b).create(g,{appName:v.name})}function He(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Me(v,"argument-error"),Se(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(v,...g){if("string"!=typeof v){const _=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(_,...b)}return ge.create(v,...g)}function G(v,g,..._){if(!v)throw je(g,..._)}function Ee(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Ye(g),new Error(g)}function Y(v,g){v||Ee(g)}const se=new Map;function ne(v){Y(v instanceof Function,"Expected a class definition");let g=se.get(v);return g?(Y(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,se.set(v,g),g)}function Le(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function gt(){return"http:"===qt()||"https:"===qt()}function qt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class cn{constructor(g,_){this.shortDelay=g,this.longDelay=_,Y(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function jt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fn(v,g){Y(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class hn{static initialize(g,_,b){this.fetchImpl=g,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zi=new cn(3e4,6e4);function Xt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function zt(v,g,_,b){return es.apply(this,arguments)}function es(){return(es=(0,o.Z)(function*(v,g,_,b,x={}){return wr(v,x,(0,o.Z)(function*(){let O={},Z={};b&&("GET"===g?Z=b:O={body:JSON.stringify(b)});const he=(0,L.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),we=yield v._getAdditionalHeaders();return we["Content-Type"]="application/json",v.languageCode&&(we["X-Firebase-Locale"]=v.languageCode),hn.fetch()(Qs(v,v.config.apiHost,_,he),Object.assign({method:g,headers:we,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function wr(v,g,_){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,o.Z)(function*(v,g,_){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},nn),g);try{const x=new ar(v),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const Z=yield O.json();if("needConfirmation"in Z)throw Hr(v,"account-exists-with-different-credential",Z);if(O.ok&&!("errorMessage"in Z))return Z;{const he=O.ok?Z.errorMessage:Z.error.message,[we,Xe]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===we)throw Hr(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===we)throw Hr(v,"email-already-in-use",Z);if("USER_DISABLED"===we)throw Hr(v,"user-disabled",Z);const mt=b[we]||we.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Se(v,mt,Xe);Me(v,mt)}}catch(x){if(x instanceof L.ZR)throw x;Me(v,"network-request-failed")}})).apply(this,arguments)}function Gi(v,g,_,b){return ts.apply(this,arguments)}function ts(){return(ts=(0,o.Z)(function*(v,g,_,b,x={}){const O=yield zt(v,g,_,b,x);return"mfaPendingCredential"in O&&Me(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Qs(v,g,_,b){const x=`${g}${_}?${b}`;return v.config.emulator?Fn(v.config,x):`${v.config.apiScheme}://${x}`}class ar{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(Te(this.auth,"network-request-failed")),zi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hr(v,g,_){const b={appName:v.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const x=Te(v,g,b);return x.customData._tokenResponse=_,x}function br(){return(br=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Mn(v,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Js(v,g){return lr.apply(this,arguments)}function lr(){return(lr=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ai(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Io(){return(Io=(0,o.Z)(function*(v,g=!1){const _=(0,L.m9)(v),b=yield _.getIdToken(g),x=ut(b);G(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,Z=null==O?void 0:O.sign_in_provider;return{claims:x,token:b,authTime:ai(Kt(x.auth_time)),issuedAtTime:ai(Kt(x.iat)),expirationTime:ai(Kt(x.exp)),signInProvider:Z||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Kt(v){return 1e3*Number(v)}function ut(v){const[g,_,b]=v.split(".");if(void 0===g||void 0===_||void 0===b)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,L.tV)(_);return x?JSON.parse(x):(Ye("Failed to decode base64 JWT payload"),null)}catch(x){return Ye("Caught error parsing JWT payload as JSON",x),null}}function Si(v,g){return Er.apply(this,arguments)}function Er(){return(Er=(0,o.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(b){throw b instanceof L.ZR&&$t(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function $t({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class So{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),b)}iteration(){var g=this;return(0,o.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Di{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ai(this.lastLoginAt),this.creationTime=ai(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xi(v){return H.apply(this,arguments)}function H(){return(H=(0,o.Z)(function*(v){var g;const _=v.auth,b=yield v.getIdToken(),x=yield Si(v,Js(_,{idToken:b}));G(null==x?void 0:x.users.length,_,"internal-error");const O=x.users[0];v._notifyReloadListener(O);const Z=(null===(g=O.providerUserInfo)||void 0===g?void 0:g.length)?W(O.providerUserInfo):[],he=xe(v.providerData,Z),mt=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==he?void 0:he.length)),ht={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:he,metadata:new Di(O.createdAt,O.lastLoginAt),isAnonymous:mt};Object.assign(v,ht)})).apply(this,arguments)}function K(){return(K=(0,o.Z)(function*(v){const g=(0,L.m9)(v);yield xi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function xe(v,g){return[...v.filter(b=>!g.some(x=>x.providerId===b.providerId)),...g]}function W(v){return v.map(g=>{var{providerId:_}=g,b=(0,re._T)(g,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Pe(){return(Pe=(0,o.Z)(function*(v,g){const _=yield wr(v,{},(0,o.Z)(function*(){const b=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:O}=v.config,Z=Qs(v,x,"/v1/token",`key=${O}`),he=yield v._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",hn.fetch()(Z,{method:"POST",headers:he,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){G(g.idToken,"internal-error"),G(void 0!==g.idToken,"internal-error"),G(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function Ct(v){const g=ut(v);return G(g,"internal-error"),G(void 0!==g.exp,"internal-error"),G(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var b=this;return(0,o.Z)(function*(){return G(!b.accessToken||b.refreshToken,g,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var b=this;return(0,o.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:Z}=yield function te(v,g){return Pe.apply(this,arguments)}(g,_);b.updateTokensAndExpiration(x,O,Number(Z))})()}updateTokensAndExpiration(g,_,b){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,_){const{refreshToken:b,accessToken:x,expirationTime:O}=_,Z=new Je;return b&&(G("string"==typeof b,"internal-error",{appName:g}),Z.refreshToken=b),x&&(G("string"==typeof x,"internal-error",{appName:g}),Z.accessToken=x),O&&(G("number"==typeof O,"internal-error",{appName:g}),Z.expirationTime=O),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Je,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function yt(v,g){G("string"==typeof v||void 0===v,"internal-error",{appName:g})}class xt{constructor(g){var{uid:_,auth:b,stsTokenManager:x}=g,O=(0,re._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new So(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Di(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,o.Z)(function*(){const b=yield Si(_,_.stsTokenManager.getToken(_.auth,g));return G(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(g){return function Cr(v){return Io.apply(this,arguments)}(this,g)}reload(){return function q(v){return K.apply(this,arguments)}(this)}_assign(g){this!==g&&(G(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new xt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var b=this;return(0,o.Z)(function*(){let x=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield xi(b)),yield b.auth._persistUserIfCurrent(b),x&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,o.Z)(function*(){const _=yield g.getIdToken();return yield Si(g,function vt(v,g){return br.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var b,x,O,Z,he,we,Xe,mt;const ht=null!==(b=_.displayName)&&void 0!==b?b:void 0,qn=null!==(x=_.email)&&void 0!==x?x:void 0,rn=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Du=null!==(Z=_.photoURL)&&void 0!==Z?Z:void 0,tp=null!==(he=_.tenantId)&&void 0!==he?he:void 0,Hm=null!==(we=_._redirectEventId)&&void 0!==we?we:void 0,ka=null!==(Xe=_.createdAt)&&void 0!==Xe?Xe:void 0,pr=null!==(mt=_.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:pl,emailVerified:jm,isAnonymous:gl,providerData:xu,stsTokenManager:zm}=_;G(pl&&zm,g,"internal-error");const np=Je.fromJSON(this.name,zm);G("string"==typeof pl,g,"internal-error"),yt(ht,g.name),yt(qn,g.name),G("boolean"==typeof jm,g,"internal-error"),G("boolean"==typeof gl,g,"internal-error"),yt(rn,g.name),yt(Du,g.name),yt(tp,g.name),yt(Hm,g.name),yt(ka,g.name),yt(pr,g.name);const po=new xt({uid:pl,auth:g,email:qn,emailVerified:jm,displayName:ht,isAnonymous:gl,photoURL:Du,phoneNumber:rn,tenantId:tp,stsTokenManager:np,createdAt:ka,lastLoginAt:pr});return xu&&Array.isArray(xu)&&(po.providerData=xu.map(Gm=>Object.assign({},Gm))),Hm&&(po._redirectEventId=Hm),po}static _fromIdTokenResponse(g,_,b=!1){return(0,o.Z)(function*(){const x=new Je;x.updateFromServerResponse(_);const O=new xt({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:b});return yield xi(O),O})()}}const It=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,b){var x=this;return(0,o.Z)(function*(){x.storage[_]=b})()}_get(_){var b=this;return(0,o.Z)(function*(){const x=b.storage[_];return void 0===x?null:x})()}_remove(_){var b=this;return(0,o.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return v.type="NONE",v})();function Qn(v,g,_){return`firebase:${v}:${g}:${_}`}class $i{constructor(g,_,b){this.persistence=g,this.auth=_,this.userKey=b;const{config:x,name:O}=this.auth;this.fullUserKey=Qn(this.userKey,x.apiKey,O),this.fullPersistenceKey=Qn("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,o.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?xt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,o.Z)(function*(){if(_.persistence===g)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,b="authUser"){return(0,o.Z)(function*(){if(!_.length)return new $i(ne(It),g,b);const x=(yield Promise.all(_.map(function(){var Xe=(0,o.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=x[0]||ne(It);const Z=Qn(b,g.config.apiKey,g.name);let he=null;for(const Xe of _)try{const mt=yield Xe._get(Z);if(mt){const ht=xt._fromJSON(g,mt);Xe!==O&&(he=ht),O=Xe;break}}catch(mt){}const we=x.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&we.length?(O=we[0],he&&(yield O._set(Z,he.toJSON())),yield Promise.all(_.map(function(){var Xe=(0,o.Z)(function*(mt){if(mt!==O)try{yield mt._remove(Z)}catch(ht){}});return function(mt){return Xe.apply(this,arguments)}}())),new $i(O,g,b)):new $i(O,g,b)})()}}function Fl(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Jn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Ya(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ss(g))return"Blackberry";if(Xn(g))return"Webos";if(Ll(g))return"Safari";if((g.includes("chrome/")||Qa(g))&&!g.includes("edge/"))return"Chrome";if(Wi(g))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Ya(v=(0,L.z$)()){return/firefox\//i.test(v)}function Ll(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Qa(v=(0,L.z$)()){return/crios\//i.test(v)}function Jn(v=(0,L.z$)()){return/iemobile/i.test(v)}function Wi(v=(0,L.z$)()){return/android/i.test(v)}function Ss(v=(0,L.z$)()){return/blackberry/i.test(v)}function Xn(v=(0,L.z$)()){return/webos/i.test(v)}function ur(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Xs(v=(0,L.z$)()){return ur(v)||Wi(v)||Xn(v)||Ss(v)||/windows phone/i.test(v)||Jn(v)}function ua(v,g=[]){let _;switch(v){case"Browser":_=Fl((0,L.z$)());break;case"Worker":_=`${Fl((0,L.z$)())}-${v}`;break;default:_=v}const b=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${ce.SDK_VERSION}/${b}`}class cr{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const b=O=>new Promise((Z,he)=>{try{Z(g(O))}catch(we){he(we)}});b.onAbort=_,this.queue.push(b);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,o.Z)(function*(){if(_.auth.currentUser===g)return;const b=[];try{for(const x of _.queue)yield x(g),x.onAbort&&b.push(x.onAbort)}catch(x){b.reverse();for(const O of b)try{O()}catch(Z){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:x.message})}})()}}class qe{constructor(g,_,b){this.app=g,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fn(this),this.idTokenSubscription=new fn(this),this.beforeStateQueue=new cr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(g,_){var b=this;return _&&(this._popupRedirectResolver=ne(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var x,O;if(!b._deleted&&(b.persistenceManager=yield $i.create(b,g),!b._deleted)){if(null===(x=b._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(Z){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(O=b.currentUser)||void 0===O?void 0:O.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,o.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,o.Z)(function*(){var b;const x=yield _.assertedPersistence.getCurrentUser();let O=x,Z=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,we=null==O?void 0:O._redirectEventId,Xe=yield _.tryRedirectSignIn(g);(!he||he===we)&&(null==Xe?void 0:Xe.user)&&(O=Xe.user,Z=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(Z)try{yield _.beforeStateQueue.runMiddleware(O)}catch(he){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,o.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(x){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,o.Z)(function*(){try{yield xi(g)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ke(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,o.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,o.Z)(function*(){const b=g?(0,L.m9)(g):null;return b&&G(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(g,_=!1){var b=this;return(0,o.Z)(function*(){if(!b._deleted)return g&&G(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,o.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,o.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(ne(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,_,b){return this.registerStateListener(this.authStateSubscription,g,_,b)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,b){return this.registerStateListener(this.idTokenSubscription,g,_,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var b=this;return(0,o.Z)(function*(){const x=yield b.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const b=g&&ne(g)||_._popupRedirectResolver;G(b,_,"argument-error"),_.redirectPersistenceManager=yield $i.create(_,[ne(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,o.Z)(function*(){var b,x;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,o.Z)(function*(){if(g===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,b,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Z,this,"internal-error"),Z.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,b,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ua(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,o.Z)(function*(){var _;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(b["X-Firebase-Client"]=x),b})()}}function pt(v){return(0,L.m9)(v)}class fn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ns(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function is(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class jr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Ee("not implemented")}_getIdTokenResponse(g){return Ee("not implemented")}_linkToIdToken(g,_){return Ee("not implemented")}_getReauthenticationResolver(g){return Ee("not implemented")}}function Bn(v,g){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:resetPassword",Xt(v,g))})).apply(this,arguments)}function Xa(v,g){return kn.apply(this,arguments)}function kn(){return(kn=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Vl(v,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:update",Xt(v,g))})).apply(this,arguments)}function xo(){return(xo=(0,o.Z)(function*(v,g){return Gi(v,"POST","/v1/accounts:signInWithPassword",Xt(v,g))})).apply(this,arguments)}function to(v,g){return on.apply(this,arguments)}function on(){return(on=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:sendOobCode",Xt(v,g))})).apply(this,arguments)}function gn(v,g){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,o.Z)(function*(v,g){return to(v,g)})).apply(this,arguments)}function el(v,g){return qi.apply(this,arguments)}function qi(){return(qi=(0,o.Z)(function*(v,g){return to(v,g)})).apply(this,arguments)}function rs(v,g){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,o.Z)(function*(v,g){return to(v,g)})).apply(this,arguments)}function Cd(v,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,o.Z)(function*(v,g){return to(v,g)})).apply(this,arguments)}function Ki(){return(Ki=(0,o.Z)(function*(v,g){return Gi(v,"POST","/v1/accounts:signInWithEmailLink",Xt(v,g))})).apply(this,arguments)}function Ed(){return(Ed=(0,o.Z)(function*(v,g){return Gi(v,"POST","/v1/accounts:signInWithEmailLink",Xt(v,g))})).apply(this,arguments)}class Ai extends jr{constructor(g,_,b,x=null){super("password",b),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new Ai(g,_,"password")}static _fromEmailAndCode(g,_,b=null){return new Ai(g,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,o.Z)(function*(){switch(_.signInMethod){case"password":return function Cn(v,g){return xo.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function os(v,g){return Ki.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Me(g,"internal-error")}})()}_linkToIdToken(g,_){var b=this;return(0,o.Z)(function*(){switch(b.signInMethod){case"password":return Xa(g,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Ds(v,g){return Ed.apply(this,arguments)}(g,{idToken:_,email:b._email,oobCode:b._password});default:Me(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function no(v,g){return Td.apply(this,arguments)}function Td(){return(Td=(0,o.Z)(function*(v,g){return Gi(v,"POST","/v1/accounts:signInWithIdp",Xt(v,g))})).apply(this,arguments)}class xs extends jr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new xs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Me("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:x}=_,O=(0,re._T)(_,["providerId","signInMethod"]);if(!b||!x)return null;const Z=new xs(b,x);return Z.idToken=O.idToken||void 0,Z.accessToken=O.accessToken||void 0,Z.secret=O.secret,Z.nonce=O.nonce,Z.pendingToken=O.pendingToken||null,Z}_getIdTokenResponse(g){return no(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,no(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,no(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,L.xO)(_)}return g}}function sm(v,g){return Id.apply(this,arguments)}function Id(){return(Id=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:sendVerificationCode",Xt(v,g))})).apply(this,arguments)}function io(){return(io=(0,o.Z)(function*(v,g){return Gi(v,"POST","/v1/accounts:signInWithPhoneNumber",Xt(v,g))})).apply(this,arguments)}function Sd(){return(Sd=(0,o.Z)(function*(v,g){const _=yield Gi(v,"POST","/v1/accounts:signInWithPhoneNumber",Xt(v,g));if(_.temporaryProof)throw Hr(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const am={USER_NOT_FOUND:"user-not-found"};function Dd(){return(Dd=(0,o.Z)(function*(v,g){return Gi(v,"POST","/v1/accounts:signInWithPhoneNumber",Xt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),am)})).apply(this,arguments)}class ca extends jr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new ca({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new ca({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function lc(v,g){return io.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function om(v,g){return Sd.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function lm(v,g){return Dd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:b,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:b,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:b,phoneNumber:x,temporaryProof:O}=g;return b||_||x||O?new ca({verificationId:_,verificationCode:b,phoneNumber:x,temporaryProof:O}):null}}class Hl{constructor(g){var _,b,x,O,Z,he;const we=(0,L.zd)((0,L.pd)(g)),Xe=null!==(_=we.apiKey)&&void 0!==_?_:null,mt=null!==(b=we.oobCode)&&void 0!==b?b:null,ht=function Af(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=we.mode)&&void 0!==x?x:null);G(Xe&&mt&&ht,"argument-error"),this.apiKey=Xe,this.operation=ht,this.code=mt,this.continueUrl=null!==(O=we.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Z=we.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(he=we.tenantId)&&void 0!==he?he:null}static parseLink(g){const _=function tl(v){const g=(0,L.zd)((0,L.pd)(v)).link,_=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,b=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(b?(0,L.zd)((0,L.pd)(b)).link:null)||b||_||g||v}(g);try{return new Hl(_)}catch(b){return null}}}let Ad=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,b){return Ai._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const x=Hl.parseLink(b);return G(x,"argument-error"),Ai._fromEmailAndCode(_,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Mi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ao extends Mi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class as extends Ao{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return G("providerId"in _&&"signInMethod"in _,"argument-error"),xs._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return G(g.idToken||g.accessToken,"argument-error"),xs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return as.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return as.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:x,pendingToken:O,nonce:Z,providerId:he}=g;if(!b&&!x&&!_&&!O||!he)return null;try{return new as(he)._credential({idToken:_,accessToken:b,nonce:Z,pendingToken:O})}catch(we){return null}}}let da=(()=>{class v extends Ao{constructor(){super("facebook.com")}static credential(_){return xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(b){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Md=(()=>{class v extends Ao{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:x}=_;if(!b&&!x)return null;try{return v.credential(b,x)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Mf=(()=>{class v extends Ao{constructor(){super("github.com")}static credential(_){return xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(b){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Mo extends jr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return no(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,no(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,no(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:x,pendingToken:O}=_;return b&&x&&O&&b===x?new Mo(b,O):null}static _create(g,_){return new Mo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zi extends Mi{constructor(g){G(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Zi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Zi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Mo.fromJSON(g);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:b}=g;if(!_||!b)return null;try{return Mo._create(b,_)}catch(x){return null}}}let kd=(()=>{class v extends Ao{constructor(){super("twitter.com")}static credential(_,b){return xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:x}=_;if(!b||!x)return null;try{return v.credential(b,x)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ki(v,g){return fa.apply(this,arguments)}function fa(){return(fa=(0,o.Z)(function*(v,g){return Gi(v,"POST","/v1/accounts:signUp",Xt(v,g))})).apply(this,arguments)}class Tr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,b,x=!1){return(0,o.Z)(function*(){const O=yield xt._fromIdTokenResponse(g,b,x),Z=uc(b);return new Tr({user:O,providerId:Z,_tokenResponse:b,operationType:_})})()}static _forOperation(g,_,b){return(0,o.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const x=uc(b);return new Tr({user:g,providerId:x,_tokenResponse:b,operationType:_})})()}}function uc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function cc(){return(cc=(0,o.Z)(function*(v){var g;const _=pt(v);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Tr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield ki(_,{returnSecureToken:!0}),x=yield Tr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class pa extends L.ZR{constructor(g,_,b,x){var O;super(_.code,_.message),this.operationType=b,this.user=x,Object.setPrototypeOf(this,pa.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,_,b,x){return new pa(g,_,b,x)}}function dc(v,g,_,b){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?pa._fromErrorAndOperation(v,O,g,b):O})}function ls(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function mn(){return(mn=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v);yield an(!0,_,g);const{providerUserInfo:b}=yield Mn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=ls(b||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function nl(v,g){return ko.apply(this,arguments)}function ko(){return(ko=(0,o.Z)(function*(v,g,_=!1){const b=yield Si(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return Tr._forOperation(v,"link",b)})).apply(this,arguments)}function an(v,g,_){return il.apply(this,arguments)}function il(){return(il=(0,o.Z)(function*(v,g,_){yield xi(g);const x=!1===v?"provider-already-linked":"no-such-provider";G(ls(g.providerData).has(_)===v,g.auth,x)})).apply(this,arguments)}function jl(v,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,o.Z)(function*(v,g,_=!1){const{auth:b}=v,x="reauthenticate";try{const O=yield Si(v,dc(b,x,g,v),_);G(O.idToken,b,"internal-error");const Z=ut(O.idToken);G(Z,b,"internal-error");const{sub:he}=Z;return G(v.uid===he,b,"user-mismatch"),Tr._forOperation(v,x,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Me(b,"user-mismatch"),O}})).apply(this,arguments)}function pi(v,g){return hc.apply(this,arguments)}function hc(){return(hc=(0,o.Z)(function*(v,g,_=!1){const b="signIn",x=yield dc(v,b,g),O=yield Tr._fromIdTokenResponse(v,b,x);return _||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Sn(v,g){return us.apply(this,arguments)}function us(){return(us=(0,o.Z)(function*(v,g){return pi(pt(v),g)})).apply(this,arguments)}function gi(v,g){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v);return yield an(!1,_,g.providerId),nl(_,g)})).apply(this,arguments)}function As(v,g){return rl.apply(this,arguments)}function rl(){return(rl=(0,o.Z)(function*(v,g){return jl((0,L.m9)(v),g)})).apply(this,arguments)}function zr(v,g){return cs.apply(this,arguments)}function cs(){return(cs=(0,o.Z)(function*(v,g){return Gi(v,"POST","/v1/accounts:signInWithCustomToken",Xt(v,g))})).apply(this,arguments)}function wt(){return(wt=(0,o.Z)(function*(v,g){const _=pt(v),b=yield zr(_,{token:g,returnSecureToken:!0}),x=yield Tr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class so{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?fc._fromServerResponse(g,_):Me(g,"internal-error")}}class fc extends so{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new fc(_)}}function sl(v,g,_){var b;G((null===(b=_.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),G(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function zl(){return(zl=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),x={requestType:"PASSWORD_RESET",email:g};_&&sl(b,x,_),yield el(b,x)})).apply(this,arguments)}function gc(){return(gc=(0,o.Z)(function*(v,g,_){yield Bn((0,L.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function ke(){return(ke=(0,o.Z)(function*(v,g){yield Vl((0,L.m9)(v),{oobCode:g})})).apply(this,arguments)}function Gt(v,g){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v),b=yield Bn(_,{oobCode:g}),x=b.requestType;switch(G(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(b.mfaInfo,_,"internal-error");default:G(b.email,_,"internal-error")}let O=null;return b.mfaInfo&&(O=so._fromServerResponse(pt(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function $l(){return($l=(0,o.Z)(function*(v,g){const{data:_}=yield Gt((0,L.m9)(v),g);return _.email})).apply(this,arguments)}function Ir(){return(Ir=(0,o.Z)(function*(v,g,_){const b=pt(v),x=yield ki(b,{returnSecureToken:!0,email:g,password:_}),O=yield Tr._fromIdTokenResponse(b,"signIn",x);return yield b._updateCurrentUser(O.user),O})).apply(this,arguments)}function yc(){return(yc=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),x={requestType:"EMAIL_SIGNIN",email:g};G(_.handleCodeInApp,b,"argument-error"),_&&sl(b,x,_),yield rs(b,x)})).apply(this,arguments)}function Ms(){return(Ms=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),x=Ad.credentialWithLink(g,_||Le());return G(x._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Sn(b,x)})).apply(this,arguments)}function Ri(v,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:createAuthUri",Xt(v,g))})).apply(this,arguments)}function oo(){return(oo=(0,o.Z)(function*(v,g){const b={identifier:g,continueUri:gt()?Le():"http://localhost"},{signinMethods:x}=yield Ri((0,L.m9)(v),b);return x||[]})).apply(this,arguments)}function vc(){return(vc=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&sl(_.auth,x,g);const{email:O}=yield gn(_.auth,x);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function Kl(){return(Kl=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&sl(b.auth,O,_);const{email:Z}=yield Cd(b.auth,O);Z!==v.email&&(yield v.reload())})).apply(this,arguments)}function wc(v,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,o.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Yl(){return(Yl=(0,o.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const b=(0,L.m9)(v),O={idToken:yield b.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Z=yield Si(b,wc(b.auth,O));b.displayName=Z.displayName||null,b.photoURL=Z.photoUrl||null;const he=b.providerData.find(({providerId:we})=>"password"===we);he&&(he.displayName=b.displayName,he.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Ql(v,g,_){return No.apply(this,arguments)}function No(){return(No=(0,o.Z)(function*(v,g,_){const{auth:b}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const Z=yield Si(v,Xa(b,O));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class ya{constructor(g,_,b={}){this.isNewUser=g,this.providerId=_,this.profile=b}}class Ld extends ya{constructor(g,_,b,x){super(g,_,b),this.username=x}}class Jl extends ya{constructor(g,_){super(g,"facebook.com",_)}}class hr extends Ld{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Rf extends ya{constructor(g,_){super(g,"google.com",_)}}class bc extends Ld{constructor(g,_,b){super(g,"twitter.com",_,b)}}function li(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Fd(v){var g,_;if(!v)return null;const{providerId:b}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&(null==v?void 0:v.idToken)){const Z=null===(_=null===(g=ut(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Z)return new ya(O,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!b)return null;switch(b){case"facebook.com":return new Jl(O,x);case"github.com":return new hr(O,x);case"google.com":return new Rf(O,x);case"twitter.com":return new bc(O,x,v.screenName||null);case"custom":case"anonymous":return new ya(O,null);default:return new ya(O,b,x)}}(_)}class ks{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new ks("enroll",g)}static _fromMfaPendingCredential(g){return new ks("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,b;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return ks._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(b=g.multiFactorSession)||void 0===b?void 0:b.idToken)return ks._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Lo{constructor(g,_,b){this.session=g,this.hints=_,this.signInResolver=b}static _fromError(g,_){const b=pt(g),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(he=>so._fromServerResponse(b,he));G(x.mfaPendingCredential,b,"internal-error");const Z=ks._fromMfaPendingCredential(x.mfaPendingCredential);return new Lo(Z,O,function(){var he=(0,o.Z)(function*(we){const Xe=yield we._process(b,Z);delete x.mfaInfo,delete x.mfaPendingCredential;const mt=Object.assign(Object.assign({},x),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(_.operationType){case"signIn":const ht=yield Tr._fromIdTokenResponse(b,_.operationType,mt);return yield b._updateCurrentUser(ht.user),ht;case"reauthenticate":return G(_.user,b,"internal-error"),Tr._forOperation(_.user,_.operationType,mt);default:Me(b,"internal-error")}});return function(we){return he.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,o.Z)(function*(){return _.signInResolver(g)})()}}function Bd(v,g){return zt(v,"POST","/v2/accounts/mfaEnrollment:start",Xt(v,g))}class va{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>so._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new va(g)}getSession(){var g=this;return(0,o.Z)(function*(){return ks._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var b=this;return(0,o.Z)(function*(){const x=g,O=yield b.getSession(),Z=yield Si(b.user,x._process(b.user.auth,O,_));return yield b.user._updateTokensIfNecessary(Z),b.user.reload()})()}unenroll(g){var _=this;return(0,o.Z)(function*(){const b="string"==typeof g?g:g.uid,x=yield _.user.getIdToken(),O=yield Si(_.user,function Vo(v,g){return zt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(v,g))}(_.user.auth,{idToken:x,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Z})=>Z!==b),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const Xl=new WeakMap,Rs="__sak";class eu{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Rs,"1"),this.storage.removeItem(Rs),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const $r=(()=>{class v extends eu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fm(){const v=(0,L.z$)();return Ll(v)||ur(v)}()&&function fi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Xs(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const x=this.storage.getItem(b),O=this.localCache[b];x!==O&&_(b,O,x)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((he,we,Xe)=>{this.notifyListeners(he,Xe)});const x=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(x);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!b)return}const O=()=>{const he=this.storage.getItem(x);!b&&this.localCache[x]===he||this.notifyListeners(x,he)},Z=this.storage.getItem(x);!function Ja(){return(0,L.w1)()&&10===document.documentMode}()||Z===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,b){this.localCache[_]=b;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var x=()=>super._set,O=this;return(0,o.Z)(function*(){yield x().call(O,_,b),O.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,x=this;return(0,o.Z)(function*(){const O=yield b().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var b=()=>super._remove,x=this;return(0,o.Z)(function*(){yield b().call(x,_),delete x.localCache[_]})()}}return v.type="LOCAL",v})(),Os=(()=>{class v extends eu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return v.type="SESSION",v})();let ui=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(O=>O.isListeningto(_));if(b)return b;const x=new v(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,o.Z)(function*(){const x=_,{eventId:O,eventType:Z,data:he}=x.data,we=b.handlersMap[Z];if(!(null==we?void 0:we.size))return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:Z});const Xe=Array.from(we).map(function(){var ht=(0,o.Z)(function*(qn){return qn(x.origin,he)});return function(qn){return ht.apply(this,arguments)}}()),mt=yield function wa(v){return Promise.all(v.map(function(){var g=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return g.apply(this,arguments)}}()))}(Xe);x.ports[0].postMessage({status:"done",eventId:O,eventType:Z,response:mt})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Bo(v="",g=10){let _="";for(let b=0;b<g;b++)_+=Math.floor(10*Math.random());return v+_}class Uo{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,b=50){var x=this;return(0,o.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Z,he;return new Promise((we,Xe)=>{const mt=Bo("",20);O.port1.start();const ht=setTimeout(()=>{Xe(new Error("unsupported_event"))},b);he={messageChannel:O,onMessage(qn){const rn=qn;if(rn.data.eventId===mt)switch(rn.data.status){case"ack":clearTimeout(ht),Z=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),we(rn.data.response);break;default:clearTimeout(ht),clearTimeout(Z),Xe(new Error("invalid_response"))}}},x.handlers.add(he),O.port1.addEventListener("message",he.onMessage),x.target.postMessage({eventType:g,eventId:mt,data:_},[O.port2])}).finally(()=>{he&&x.removeMessageHandler(he)})})()}}function ln(){return window}function ba(){return void 0!==ln().WorkerGlobalScope&&"function"==typeof ln().importScripts}function Hd(){return(Hd=(0,o.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Ca="firebaseLocalStorageDb",hs="firebaseLocalStorage",Ft="fbase_key";class fs{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function mi(v,g){return v.transaction([hs],g?"readwrite":"readonly").objectStore(hs)}function nu(){const v=indexedDB.open(Ca,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(hs,{keyPath:Ft})}catch(x){_(x)}}),v.addEventListener("success",(0,o.Z)(function*(){const b=v.result;b.objectStoreNames.contains(hs)?g(b):(b.close(),yield function al(){const v=indexedDB.deleteDatabase(Ca);return new fs(v).toPromise()}(),g(yield nu()))}))})}function Ea(v,g,_){return ll.apply(this,arguments)}function ll(){return(ll=(0,o.Z)(function*(v,g,_){const b=mi(v,!0).put({[Ft]:g,value:_});return new fs(b).toPromise()})).apply(this,arguments)}function ao(){return(ao=(0,o.Z)(function*(v,g){const _=mi(v,!1).get(g),b=yield new fs(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function iu(v,g){const _=mi(v,!0).delete(g);return new fs(_).toPromise()}const ul=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield nu()),_.db})()}_withRetries(_){var b=this;return(0,o.Z)(function*(){let x=0;for(;;)try{const O=yield b._openDb();return yield _(O)}catch(O){if(x++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return ba()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=ui._getInstance(function Cc(){return ba()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,o.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,o.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var b,x;if(_.activeServiceWorker=yield function Ho(){return Hd.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Uo(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,o.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Pf(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield nu();return yield Ea(_,Rs,"1"),yield iu(_,Rs),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,o.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var x=this;return(0,o.Z)(function*(){return x._withPendingWrite((0,o.Z)(function*(){return yield x._withRetries(O=>Ea(O,_,b)),x.localCache[_]=b,x.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,o.Z)(function*(){const x=yield b._withRetries(O=>function Ec(v,g){return ao.apply(this,arguments)}(O,_));return b.localCache[_]=x,x})()}_remove(_){var b=this;return(0,o.Z)(function*(){return b._withPendingWrite((0,o.Z)(function*(){return yield b._withRetries(x=>iu(x,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const b=yield _._withRetries(Z=>{const he=mi(Z,!1).getAll();return new fs(he).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:Z,value:he}of b)O.add(Z),JSON.stringify(_.localCache[Z])!==JSON.stringify(he)&&(_.notifyListeners(Z,he),x.push(Z));for(const Z of Object.keys(_.localCache))_.localCache[Z]&&!O.has(Z)&&(_.notifyListeners(Z,null),x.push(Z));return x})()}notifyListeners(_,b){this.localCache[_]=b;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function ou(v,g){return zt(v,"POST","/v2/accounts/mfaSignIn:start",Xt(v,g))}function au(){return(au=(0,o.Z)(function*(v){return(yield zt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function lu(v){return new Promise((g,_)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=g,b.onerror=x=>{const O=Te("internal-error");O.customData=x,_(O)},b.type="text/javascript",b.charset="UTF-8",function cl(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(b)})}function Ns(v){return`__${v}${Math.floor(1e6*Math.random())}`}const uu=1e12;class Tc{constructor(g){this.auth=g,this.counter=uu,this._widgets=new Map}render(g,_){const b=this.counter;return this._widgets.set(b,new Ia(g,this.auth.name,_||{})),this.counter++,b}reset(g){var _;const b=g||uu;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(g){var _;return(null===(_=this._widgets.get(g||uu))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,o.Z)(function*(){var b;return null===(b=_._widgets.get(g||uu))||void 0===b||b.execute(),""})()}}class Ia{constructor(g,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;G(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zd(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<v;b++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gd=Ns("rcb"),Rn=new cn(3e4,6e4);class mv{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ln().grecaptcha}load(g,_=""){return G(function _m(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(ln().grecaptcha):new Promise((b,x)=>{const O=ln().setTimeout(()=>{x(Te(g,"network-request-failed"))},Rn.get());ln()[Gd]=()=>{ln().clearTimeout(O),delete ln()[Gd];const he=ln().grecaptcha;if(!he)return void x(Te(g,"internal-error"));const we=he.render;he.render=(Xe,mt)=>{const ht=we(Xe,mt);return this.counter++,ht},this.hostLanguage=_,b(he)},lu(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Gd,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Te(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!ln().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Nf{load(g){return(0,o.Z)(function*(){return new Tc(g)})()}clearedOneInstance(){}}const $d="recaptcha",ym={theme:"light",type:"image"};class vm{constructor(g,_=Object.assign({},ym),b){this.parameters=_,this.type=$d,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pt(b),this.isInvisible="invisible"===this.parameters.size,G("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;G(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Nf:new mv,this.validateStartingState()}verify(){var g=this;return(0,o.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(_)||new Promise(O=>{const Z=he=>{!he||(g.tokenChangeListeners.delete(Z),O(he))};g.tokenChangeListeners.add(Z),g.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof g)g(_);else if("string"==typeof g){const b=ln()[g];"function"==typeof b&&b(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,o.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,o.Z)(function*(){G(gt()&&!ba(),g.auth,"internal-error"),yield function cu(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function lo(v){return au.apply(this,arguments)}(g.auth);G(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wd{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=ca._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function jo(){return(jo=(0,o.Z)(function*(v,g,_){const b=pt(v),x=yield Oi(b,g,(0,L.m9)(_));return new Wd(x,O=>Sn(b,O))})).apply(this,arguments)}function Ic(){return(Ic=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);yield an(!1,b,"phone");const x=yield Oi(b.auth,g,(0,L.m9)(_));return new Wd(x,O=>gi(b,O))})).apply(this,arguments)}function _i(){return(_i=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),x=yield Oi(b.auth,g,(0,L.m9)(_));return new Wd(x,O=>As(b,O))})).apply(this,arguments)}function Oi(v,g,_){return yi.apply(this,arguments)}function yi(){return(yi=(0,o.Z)(function*(v,g,_){var b;const x=yield _.verify();try{let O;if(G("string"==typeof x,v,"argument-error"),G(_.type===$d,v,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const Z=O.session;if("phoneNumber"in O)return G("enroll"===Z.type,v,"internal-error"),(yield Bd(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{G("signin"===Z.type,v,"internal-error");const he=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return G(he,v,"missing-multi-factor-info"),(yield ou(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield sm(v,{phoneNumber:O.phoneNumber,recaptchaToken:x});return Z}}finally{_._reset()}})).apply(this,arguments)}function qr(){return(qr=(0,o.Z)(function*(v,g){yield nl((0,L.m9)(v),g)})).apply(this,arguments)}let Fs=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=pt(_)}verifyPhoneNumber(_,b){return Oi(this.auth,_,(0,L.m9)(b))}static credential(_,b){return ca._fromVerification(_,b)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:x}=_;return b&&x?ca._fromTokenResponse(b,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ps(v,g){return g?ne(g):(G(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Go extends jr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return no(g,this._buildIdpRequest())}_linkToIdToken(g,_){return no(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return no(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Ff(v){return pi(v.auth,new Go(v),v.bypassAuthState)}function qd(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),jl(_,new Go(v),v.bypassAuthState)}function $o(v){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,o.Z)(function*(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),nl(_,new Go(v),v.bypassAuthState)})).apply(this,arguments)}class du{constructor(g,_,b,x,O=!1){this.auth=g,this.resolver=b,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,o.Z)(function*(b,x){g.pendingPromise={resolve:b,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(b,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,o.Z)(function*(){const{urlResponse:b,sessionId:x,postBody:O,tenantId:Z,error:he,type:we}=g;if(he)return void _.reject(he);const Xe={auth:_.auth,requestUri:b,sessionId:x,tenantId:Z||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(we)(Xe))}catch(mt){_.reject(mt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ff;case"linkViaPopup":case"linkViaRedirect":return $o;case"reauthViaPopup":case"reauthViaRedirect":return qd;default:Me(this.auth,"internal-error")}}resolve(g){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sa=new cn(2e3,1e4);function gs(){return(gs=(0,o.Z)(function*(v,g,_){const b=pt(v);He(v,g,Mi);const x=ps(b,_);return new fu(b,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function hu(){return(hu=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);He(b.auth,g,Mi);const x=ps(b.auth,_);return new fu(b.auth,"reauthViaPopup",g,x,b).executeNotNull()})).apply(this,arguments)}function Ls(){return(Ls=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);He(b.auth,g,Mi);const x=ps(b.auth,_);return new fu(b.auth,"linkViaPopup",g,x,b).executeNotNull()})).apply(this,arguments)}let fu=(()=>{class v extends du{constructor(_,b,x,O,Z){super(_,b,O,Z),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const b=yield _.execute();return G(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,o.Z)(function*(){Y(1===_.filter.length,"Popup operations only handle one event");const b=Bo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Te(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,x;this.pollId=(null===(x=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Sa.get())};_()}}return v.currentPopupAction=null,v})();const ho=new Map;class Da extends du{constructor(g,_,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,o.Z)(function*(){let b=ho.get(_.auth._key());if(!b){try{const O=(yield function pu(v,g){return ms.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;b=()=>Promise.resolve(O)}catch(x){b=()=>Promise.reject(x)}ho.set(_.auth._key(),b)}return _.bypassAuthState||ho.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,b=this;return(0,o.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(b,g);if("unknown"!==g.type){if(g.eventId){const x=yield b.auth._redirectUserForId(g.eventId);if(x)return b.user=x,_().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function ms(){return(ms=(0,o.Z)(function*(v,g){const _=U(g),b=R(v);if(!(yield b._isAvailable()))return!1;const x="true"===(yield b._get(_));return yield b._remove(_),x})).apply(this,arguments)}function xa(v,g){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,o.Z)(function*(v,g){return R(v)._set(U(g),"true")})).apply(this,arguments)}function D(v,g){ho.set(v._key(),g)}function R(v){return ne(v._redirectPersistence)}function U(v){return Qn("pendingRedirect",v.config.apiKey,v.name)}function Oe(){return(Oe=(0,o.Z)(function*(v,g,_){const b=pt(v);He(v,g,Mi);const x=ps(b,_);return yield xa(x,b),x._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function dt(){return(dt=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);He(b.auth,g,Mi);const x=ps(b.auth,_);yield xa(x,b.auth);const O=yield Dr(b);return x._openRedirect(b.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function ni(){return(ni=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);He(b.auth,g,Mi);const x=ps(b.auth,_);yield an(!1,b,g.providerId),yield xa(x,b.auth);const O=yield Dr(b);return x._openRedirect(b.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function qo(){return(qo=(0,o.Z)(function*(v,g){return yield pt(v)._initializationPromise,Vs(v,g,!1)})).apply(this,arguments)}function Vs(v,g){return fr.apply(this,arguments)}function fr(){return(fr=(0,o.Z)(function*(v,g,_=!1){const b=pt(v),x=ps(b,g),Z=yield new Da(b,x,_).execute();return Z&&!_&&(delete Z.user._redirectEventId,yield b._persistUserIfCurrent(Z.user),yield b._setRedirectUser(null,g)),Z})).apply(this,arguments)}function Dr(v){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,o.Z)(function*(v){const g=Bo(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class wm{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(_=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function xc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yi(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var b;if(g.error&&!Yi(g)){const x=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(Te(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const b=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bf(g))}saveEventToCache(g){this.cachedEventUids.add(Bf(g)),this.lastProcessedEventTime=Date.now()}}function Bf(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Yi({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function gu(v){return mu.apply(this,arguments)}function mu(){return(mu=(0,o.Z)(function*(v,g={}){return zt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const _v=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_u=/^https?/;function bm(){return(bm=(0,o.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield gu(v);for(const _ of g)try{if(cD(_))return}catch(b){}Me(v,"unauthorized-domain")})).apply(this,arguments)}function cD(v){const g=Le(),{protocol:_,hostname:b}=new URL(g);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===b?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Z.hostname===b}if(!_u.test(_))return!1;if(_v.test(v))return b===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(b)}const Mc=new cn(3e4,6e4);function Cm(){const v=ln().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Kd=null;function Zd(v){return Kd=Kd||function aC(v){return new Promise((g,_)=>{var b,x,O;function Z(){Cm(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Cm(),_(Te(v,"network-request-failed"))},timeout:Mc.get()})}if(null===(x=null===(b=ln().gapi)||void 0===b?void 0:b.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(O=ln().gapi)||void 0===O?void 0:O.load)){const he=Ns("iframefcb");return ln()[he]=()=>{gapi.load?Z():_(Te(v,"network-request-failed"))},lu(`https://apis.google.com/js/api.js?onload=${he}`).catch(we=>_(we))}Z()}}).catch(g=>{throw Kd=null,g})}(v),Kd}const Yd=new cn(5e3,15e3),yu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Em(v){const g=v.config;G(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?Fn(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:v.name,v:ce.SDK_VERSION},x=Uf.get(v.config.apiHost);x&&(b.eid=x);const O=v._getFrameworks();return O.length&&(b.fw=O.join(",")),`${_}?${(0,L.xO)(b).slice(1)}`}function vu(){return vu=(0,o.Z)(function*(v){const g=yield Zd(v),_=ln().gapi;return G(_,v,"internal-error"),g.open({where:document.body,url:Em(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yu,dontclear:!0},b=>new Promise(function(){var x=(0,o.Z)(function*(O,Z){yield b.restyle({setHideOnLeave:!1});const he=Te(v,"network-request-failed"),we=ln().setTimeout(()=>{Z(he)},Yd.get());function Xe(){ln().clearTimeout(we),O(b)}b.ping(Xe).then(Xe,()=>{Z(he)})});return function(O,Z){return x.apply(this,arguments)}}()))}),vu.apply(this,arguments)}const Hf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ma{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function fo(v,g,_,b,x,O){G(v.config.authDomain,v,"auth-domain-config-required"),G(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:b,v:ce.SDK_VERSION,eventId:x};if(g instanceof Mi){g.setDefaultLanguage(v.languageCode),Z.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(Z.customParameters=JSON.stringify(g.getCustomParameters()));for(const[we,Xe]of Object.entries(O||{}))Z[we]=Xe}if(g instanceof Ao){const we=g.getScopes().filter(Xe=>""!==Xe);we.length>0&&(Z.scopes=we.join(","))}v.tenantId&&(Z.tid=v.tenantId);const he=Z;for(const we of Object.keys(he))void 0===he[we]&&delete he[we];return`${function Oc({config:v}){return v.emulator?Fn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(he).slice(1)}`}const Gf="webStorageSupport";class Pc extends class cC{constructor(g){this.factorId=g}_process(g,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,b);case"signin":return this._finalizeSignIn(g,_.credential);default:return Ee("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Pc(g)}_finalizeEnroll(g,_,b){return function dm(v,g){return zt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(v,g))}(g,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function jd(v,g){return zt(v,"POST","/v2/accounts/mfaSignIn:finalize",Xt(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dm=(()=>{class v{constructor(){}static assertion(_){return Pc._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var wu="@firebase/auth";class Am{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(b=>{var x;g((null===(x=b)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bu(){return window}function _s(){return(_s=(0,o.Z)(function*(v,g,_){var b;const{BuildInfo:x}=bu();Y(g.sessionId,"AuthEvent did not contain a session ID");const O=yield fC(g.sessionId),Z={};return ur()?Z.ibi=x.packageName:Wi()?Z.apn=x.packageName:Me(v,"operation-not-supported-in-this-environment"),x.displayName&&(Z.appDisplayName=x.displayName),Z.sessionId=O,fo(v,_,g.type,void 0,null!==(b=g.eventId)&&void 0!==b?b:void 0,Z)})).apply(this,arguments)}function Eu(){return(Eu=(0,o.Z)(function*(v){const{BuildInfo:g}=bu(),_={};ur()?_.iosBundleId=g.packageName:Wi()?_.androidPackageName=g.packageName:Me(v,"operation-not-supported-in-this-environment"),yield gu(v,_)})).apply(this,arguments)}function Rm(){return(Rm=(0,o.Z)(function*(v,g,_){const{cordova:b}=bu();let x=()=>{};try{yield new Promise((O,Z)=>{let he=null;function we(){var ht;O();const qn=null===(ht=b.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof qn&&qn(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Xe(){he||(he=window.setTimeout(()=>{Z(Te(v,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===(null==document?void 0:document.visibilityState)&&Xe()}g.addPassiveListener(we),document.addEventListener("resume",Xe,!1),Wi()&&document.addEventListener("visibilitychange",mt,!1),x=()=>{g.removePassiveListener(we),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",mt,!1),he&&window.clearTimeout(he)}})}finally{x()}})).apply(this,arguments)}function fC(v){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,o.Z)(function*(v){const g=eh(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function eh(v){if(Y(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let b=0;b<v.length;b++)_[b]=v.charCodeAt(b);return _}!function dC(v){(0,ce._registerComponent)(new de.wA("auth",(g,{options:_})=>{const b=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:O,authDomain:Z}=b.options;return((he,we)=>{G(O&&!O.includes(":"),"invalid-api-key",{appName:he.name}),G(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:he.name});const Xe={apiKey:O,authDomain:Z,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ua(v)},mt=new qe(he,we,Xe);return function ue(v,g){const _=(null==g?void 0:g.persistence)||[],b=(Array.isArray(_)?_:[_]).map(ne);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(b,null==g?void 0:g.popupRedirectResolver)}(mt,_),mt})(b,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,b)=>{g.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new de.wA("auth-internal",g=>{const _=pt(g.getProvider("auth").getImmediate());return new Am(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(wu,"0.20.2",function vv(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ce.registerVersion)(wu,"0.20.2","esm2017")}("Browser");class pC extends wm{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,o.Z)(function*(){yield g.initPromise})()}}function th(v){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,o.Z)(function*(v){const g=yield nh()._get(dl(v));return g&&(yield nh()._remove(dl(v))),g})).apply(this,arguments)}function Ev(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const b=Math.floor(Math.random()*g.length);v.push(g.charAt(b))}return v.join("")}function nh(){return ne($r)}function dl(v){return Qn("authEvent",v.config.apiKey,v.name)}function Tu(v){if(!(null==v?void 0:v.includes("?")))return{};const[g,..._]=v.split("?");return(0,L.zd)(_.join("?"))}function rh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function Fc(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function Nm(v=(0,L.z$)()){return!("file:"!==Fc()&&"ionic:"!==Fc()&&"capacitor:"!==Fc()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yf(){try{const v=self.localStorage,g=Bo();if(v)return v.setItem(g,"1"),v.removeItem(g),!function Zf(v=(0,L.z$)()){return function Qi(){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ii(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch(v){return Lc()&&(0,L.hl)()}return!1}function Lc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function vi(){return(function Pm(){return"http:"===Fc()||"https:"===Fc()}()||(0,L.ru)()||Nm())&&!function xv(){return(0,L.b$)()||(0,L.UG)()}()&&Yf()&&!Lc()}function hl(){return Nm()&&"undefined"!=typeof document}function Qf(){return(Qf=(0,o.Z)(function*(){return!!hl()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Ji={LOCAL:"local",NONE:"none",SESSION:"session"},Vc=G,ah="persistence";function lh(v){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,o.Z)(function*(v){yield v._initializationPromise;const g=Bc(),_=Qn(ah,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function Bc(){var v;try{return(null===(v=function Av(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(g){return null}}const uh=G;class Ko{constructor(){this.browserResolver=ne(class uC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Os,this._completeRedirectFn=Vs,this._overrideRedirectResult=D}_openPopup(g,_,b,x){var O=this;return(0,o.Z)(function*(){var Z;Y(null===(Z=O.eventManagers[g._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const he=fo(g,_,b,Le(),x);return function jf(v,g,_,b=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),Z=Math.max((window.screen.availWidth-b)/2,0).toString();let he="";const we=Object.assign(Object.assign({},Hf),{width:b.toString(),height:x.toString(),top:O,left:Z}),Xe=(0,L.z$)().toLowerCase();_&&(he=Qa(Xe)?"_blank":_),Ya(Xe)&&(g=g||"http://localhost",we.scrollbars="yes");const mt=Object.entries(we).reduce((qn,[rn,Du])=>`${qn}${rn}=${Du},`,"");if(function Do(v=(0,L.z$)()){var g;return ur(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Xe)&&"_self"!==he)return function zf(v,g){const _=document.createElement("a");_.href=v,_.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(g||"",he),new Ma(null);const ht=window.open(g||"",he,mt);G(ht,v,"popup-blocked");try{ht.focus()}catch(qn){}return new Ma(ht)}(g,he,Bo())})()}_openRedirect(g,_,b,x){var O=this;return(0,o.Z)(function*(){return yield O._originValidation(g),function Ps(v){ln().location.href=v}(fo(g,_,b,Le(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(Y(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(g);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(g){var _=this;return(0,o.Z)(function*(){const b=yield function lC(v){return vu.apply(this,arguments)}(g),x=new wm(g);return b.register("authEvent",O=>(G(null==O?void 0:O.authEvent,g,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=b,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Gf,{type:Gf},x=>{var O;const Z=null===(O=null==x?void 0:x[0])||void 0===O?void 0:O[Gf];void 0!==Z&&_(!!Z),Me(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ac(v){return bm.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Xs()||Ll()||ur()}}),this.cordovaResolver=ne(class ih{constructor(){this._redirectPersistence=Os,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vs,this._overrideRedirectResult=D}_initialize(g){var _=this;return(0,o.Z)(function*(){const b=g._key();let x=_.eventManagers.get(b);return x||(x=new pC(g),_.eventManagers.set(b,x),_.attachCallbackListeners(g,x)),x})()}_openPopup(g){Me(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,b,x){var O=this;return(0,o.Z)(function*(){!function hC(v){var g,_,b,x,O,Z,he,we,Xe,mt;const ht=bu();G("function"==typeof(null===(g=null==ht?void 0:ht.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(void 0!==(null===(_=null==ht?void 0:ht.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(O=null===(x=null===(b=null==ht?void 0:ht.cordova)||void 0===b?void 0:b.plugins)||void 0===x?void 0:x.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(we=null===(he=null===(Z=null==ht?void 0:ht.cordova)||void 0===Z?void 0:Z.plugins)||void 0===he?void 0:he.browsertab)||void 0===we?void 0:we.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(mt=null===(Xe=null==ht?void 0:ht.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===mt?void 0:mt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Z=yield O._initialize(g);yield Z.initialized(),Z.resetRedirect(),function S(){ho.clear()}(),yield O._originValidation(g);const he=function bv(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:Ev(),postBody:null,tenantId:v.tenantId,error:Te(v,"no-auth-event")}}(g,b,x);yield function Om(v,g){return nh()._set(dl(v),g)}(g,he);const we=yield function Mm(v,g,_){return _s.apply(this,arguments)}(g,he,_),Xe=yield function Wf(v){const{cordova:g}=bu();return new Promise(_=>{g.plugins.browsertab.isAvailable(b=>{let x=null;b?g.plugins.browsertab.openUrl(v):x=g.InAppBrowser.open(v,function bd(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(x)})})}(we);return function km(v,g,_){return Rm.apply(this,arguments)}(g,Z,Xe)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Cu(v){return Eu.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:b,handleOpenURL:x,BuildInfo:O}=bu(),Z=setTimeout((0,o.Z)(function*(){yield th(g),_.onEvent(rh())}),500),he=function(){var mt=(0,o.Z)(function*(ht){clearTimeout(Z);const qn=yield th(g);let rn=null;qn&&(null==ht?void 0:ht.url)&&(rn=function Cv(v,g){var _,b;const x=function xr(v){const g=Tu(v),_=g.link?decodeURIComponent(g.link):void 0,b=Tu(_).link,x=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Tu(x).link||x||b||_||v}(g);if(x.includes("/__/auth/callback")){const O=Tu(x),Z=O.firebaseError?function Tv(v){try{return JSON.parse(v)}catch(g){return null}}(decodeURIComponent(O.firebaseError)):null,he=null===(b=null===(_=null==Z?void 0:Z.code)||void 0===_?void 0:_.split("auth/"))||void 0===b?void 0:b[1],we=he?Te(he):null;return we?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:we,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(qn,ht.url)),_.onEvent(rn||rh())});return function(qn){return mt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,he);const we=x,Xe=`${O.packageName.toLowerCase()}://`;bu().handleOpenURL=function(){var mt=(0,o.Z)(function*(ht){if(ht.toLowerCase().startsWith(Xe)&&he({url:ht}),"function"==typeof we)try{we(ht)}catch(qn){console.error(qn)}});return function(ht){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Os,this._completeRedirectFn=Vs,this._overrideRedirectResult=D}_initialize(g){var _=this;return(0,o.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,b,x){var O=this;return(0,o.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,_,b,x)})()}_openRedirect(g,_,b,x){var O=this;return(0,o.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,_,b,x)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return hl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return uh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,o.Z)(function*(){if(g.underlyingResolver)return;const _=yield function Iu(){return Qf.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function ch(v){return v.unwrap()}function Rv(v){return Lm(v)}function Lm(v){const{_tokenResponse:g}=v instanceof L.ZR?v.customData:v;if(!g)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Fs.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let b;switch(_){case"google.com":b=Md;break;case"facebook.com":b=da;break;case"github.com":b=Mf;break;case"twitter.com":b=kd;break;default:const{oauthIdToken:x,oauthAccessToken:O,oauthTokenSecret:Z,pendingToken:he,nonce:we}=g;return O||Z||x||he?he?_.startsWith("saml.")?Mo._create(_,he):xs._fromParams({providerId:_,signInMethod:_,pendingToken:he,idToken:x,accessToken:O}):new as(_).credential({idToken:x,accessToken:O,rawNonce:we}):null}return v instanceof L.ZR?b.credentialFromError(v):b.credentialFromResult(v)}function Ar(v,g){return g.catch(_=>{throw _ instanceof L.ZR&&function dh(v,g){var _;const b=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Vm(v,function ti(v,g){var _;const b=(0,L.m9)(v),x=g;return G(g.customData.operationType,b,"argument-error"),G(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),Lo._fromError(b,x)}(v,g));else if(b){const x=Lm(g),O=g;x&&(O.credential=x,O.tenantId=b.tenantId||void 0,O.email=b.email||void 0,O.phoneNumber=b.phoneNumber||void 0)}}(v,_),_}).then(_=>{const x=_.user;return{operationType:_.operationType,credential:Rv(_),additionalUserInfo:li(_),user:Bs.getOrCreate(x)}})}function Xf(v,g){return ep.apply(this,arguments)}function ep(){return(ep=(0,o.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:b=>Ar(v,_.confirm(b))}})).apply(this,arguments)}class Vm{constructor(g,_){this.resolver=_,this.auth=function Fm(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Ar(ch(this.auth),this.resolver.resolveSignIn(g))}}class Bs{constructor(g){this._delegate=g,this.multiFactor=function hm(v){const g=(0,L.m9)(v);return Xl.has(g)||Xl.set(g,va._fromUser(g)),Xl.get(g)}(g)}static getOrCreate(g){return Bs.USER_MAP.has(g)||Bs.USER_MAP.set(g,new Bs(g)),Bs.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,o.Z)(function*(){return Ar(_.auth,gi(_._delegate,g))})()}linkWithPhoneNumber(g,_){var b=this;return(0,o.Z)(function*(){return Xf(b.auth,function Wr(v,g,_){return Ic.apply(this,arguments)}(b._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,o.Z)(function*(){return Ar(_.auth,function Dc(v,g,_){return Ls.apply(this,arguments)}(_._delegate,g,Ko))})()}linkWithRedirect(g){var _=this;return(0,o.Z)(function*(){return yield lh(pt(_.auth)),function Vt(v,g,_){return function Et(v,g,_){return ni.apply(this,arguments)}(v,g,_)}(_._delegate,g,Ko)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,o.Z)(function*(){return Ar(_.auth,As(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return Xf(this.auth,function Sc(v,g,_){return _i.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return Ar(this.auth,function Vf(v,g,_){return hu.apply(this,arguments)}(this._delegate,g,Ko))}reauthenticateWithRedirect(g){var _=this;return(0,o.Z)(function*(){return yield lh(pt(_.auth)),function tt(v,g,_){return function ot(v,g,_){return dt.apply(this,arguments)}(v,g,_)}(_._delegate,g,Ko)})()}sendEmailVerification(g){return function Gr(v,g){return vc.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,o.Z)(function*(){return yield function kf(v,g){return mn.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Pd(v,g){return Ql((0,L.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function Nd(v,g){return Ql((0,L.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function zo(v,g){return qr.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Zl(v,g){return Yl.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function ql(v,g,_){return Kl.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bs.USER_MAP=new WeakMap;const Su=G;let Bm=(()=>{class v{constructor(_,b){if(this.app=_,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=_.options;Su(x,"invalid-api-key",{appName:_.name}),Su(x,"invalid-api-key",{appName:_.name});const O="undefined"!=typeof window?Ko:void 0;this._delegate=b.initialize({options:{persistence:gC(x,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Fe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,b){!function dr(v,g,_){const b=pt(v);G(b._canInitEmulator,b,"emulator-config-failed"),G(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const x=!!(null==_?void 0:_.disableWarnings),O=ns(g),{host:Z,port:he}=function jn(v){const g=ns(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(b);if(x){const O=x[1];return{host:O,port:is(b.substr(O.length+1))}}{const[O,Z]=b.split(":");return{host:O,port:is(Z)}}}(g);b.config.emulator={url:`${O}//${Z}${null===he?"":`:${he}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Z,port:he,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function bn(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,b)}applyActionCode(_){return function ma(v,g){return ke.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Gt(this._delegate,_)}confirmPasswordReset(_,b){return function Gl(v,g,_){return gc.apply(this,arguments)}(this._delegate,_,b)}createUserWithEmailAndPassword(_,b){var x=this;return(0,o.Z)(function*(){return Ar(x._delegate,function Po(v,g,_){return Ir.apply(this,arguments)}(x._delegate,_,b))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Wl(v,g){return oo.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Od(v,g){const _=Hl.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,o.Z)(function*(){Su(vi(),_._delegate,"operation-not-supported-in-this-environment");const b=yield function Wn(v,g){return qo.apply(this,arguments)}(_._delegate,Ko);return b?Ar(_._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function sh(v,g){pt(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,b,x){const{next:O,error:Z,complete:he}=Um(_,b,x);return this._delegate.onAuthStateChanged(O,Z,he)}onIdTokenChanged(_,b,x){const{next:O,error:Z,complete:he}=Um(_,b,x);return this._delegate.onIdTokenChanged(O,Z,he)}sendSignInLinkToEmail(_,b){return function _c(v,g,_){return yc.apply(this,arguments)}(this._delegate,_,b)}sendPasswordResetEmail(_,b){return function pc(v,g,_){return zl.apply(this,arguments)}(this._delegate,_,b||void 0)}setPersistence(_){var b=this;return(0,o.Z)(function*(){let x;switch(function Mv(v,g){Vc(Object.values(Ji).includes(g),v,"invalid-persistence-type"),(0,L.b$)()?Vc(g!==Ji.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Vc(g===Ji.NONE,v,"unsupported-persistence-type"):Lc()?Vc(g===Ji.NONE||g===Ji.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Vc(g===Ji.NONE||Yf(),v,"unsupported-persistence-type")}(b._delegate,_),_){case Ji.SESSION:x=Os;break;case Ji.LOCAL:x=(yield ne(ul)._isAvailable())?ul:$r;break;case Ji.NONE:x=It;break;default:return Me("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Ar(this._delegate,function Rd(v){return cc.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Ar(this._delegate,Sn(this._delegate,_))}signInWithCustomToken(_){return Ar(this._delegate,function ga(v,g){return wt.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,b){return Ar(this._delegate,function mc(v,g,_){return Sn((0,L.m9)(v),Ad.credential(g,_))}(this._delegate,_,b))}signInWithEmailLink(_,b){return Ar(this._delegate,function um(v,g,_){return Ms.apply(this,arguments)}(this._delegate,_,b))}signInWithPhoneNumber(_,b){return Xf(this._delegate,function $n(v,g,_){return jo.apply(this,arguments)}(this._delegate,_,b))}signInWithPopup(_){var b=this;return(0,o.Z)(function*(){return Su(vi(),b._delegate,"operation-not-supported-in-this-environment"),Ar(b._delegate,function Lf(v,g,_){return gs.apply(this,arguments)}(b._delegate,_,Ko))})()}signInWithRedirect(_){var b=this;return(0,o.Z)(function*(){return Su(vi(),b._delegate,"operation-not-supported-in-this-environment"),yield lh(b._delegate),function J(v,g,_){return function oe(v,g,_){return Oe.apply(this,arguments)}(v,g,_)}(b._delegate,_,Ko)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function In(v,g){return $l.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ji,v})();function Um(v,g,_){let b=v;"function"!=typeof v&&({next:b,error:g,complete:_}=v);const x=b;return{next:Z=>x(Z&&Bs.getOrCreate(Z)),error:g,complete:_}}function gC(v,g){const _=function kv(v,g){const _=Bc();if(!_)return[];const b=Qn(ah,v,g);switch(_.getItem(b)){case Ji.NONE:return[It];case Ji.LOCAL:return[ul,Os];case Ji.SESSION:return[Os];default:return[]}}(v,g);if("undefined"!=typeof self&&!_.includes(ul)&&_.push(ul),"undefined"!=typeof window)for(const b of[$r,Os])_.includes(b)||_.push(b);return _.includes(It)||_.push(It),_}class xn{constructor(){this.providerId="phone",this._delegate=new Fs(ch(ee.Z.auth()))}static credential(g,_){return Fs.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}xn.PHONE_SIGN_IN_METHOD=Fs.PHONE_SIGN_IN_METHOD,xn.PROVIDER_ID=Fs.PROVIDER_ID;const fl=G;class bt{constructor(g,_,b=ee.Z.app()){var x;fl(null===(x=b.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new vm(g,_,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ni(v){v.INTERNAL.registerComponent(new de.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),b=g.getProvider("auth");return new Bm(_,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ad,FacebookAuthProvider:da,GithubAuthProvider:Mf,GoogleAuthProvider:Md,OAuthProvider:as,SAMLAuthProvider:Zi,PhoneAuthProvider:xn,PhoneMultiFactorGenerator:Dm,RecaptchaVerifier:bt,TwitterAuthProvider:kd,Auth:Bm,AuthCredential:jr,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.15")}(ee.Z)},8306:(Qe,Ce,N)=>{N.d(Ce,{y:()=>$});var o=N(930),ee=N(727),L=N(8822),ce=N(4671);var de=N(2416),le=N(576),pe=N(2806);let $=(()=>{class Re{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const ge=new Re;return ge.source=this,ge.operator=Ue,ge}subscribe(Ue,ge,De){const We=function $e(Re){return Re&&Re instanceof o.Lv||function ie(Re){return Re&&(0,le.m)(Re.next)&&(0,le.m)(Re.error)&&(0,le.m)(Re.complete)}(Re)&&(0,ee.Nn)(Re)}(Ue)?Ue:new o.Hp(Ue,ge,De);return(0,pe.x)(()=>{const{operator:Ye,source:Me}=this;We.add(Ye?Ye.call(We,Me):Me?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(ge){Ue.error(ge)}}forEach(Ue,ge){return new(ge=z(ge))((De,We)=>{const Ye=new o.Hp({next:Me=>{try{Ue(Me)}catch(Te){We(Te),Ye.unsubscribe()}},error:We,complete:De});this.subscribe(Ye)})}_subscribe(Ue){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Ue)}[L.L](){return this}pipe(...Ue){return function _e(Re){return 0===Re.length?ce.y:1===Re.length?Re[0]:function(Ue){return Re.reduce((ge,De)=>De(ge),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=z(Ue))((ge,De)=>{let We;this.subscribe(Ye=>We=Ye,Ye=>De(Ye),()=>ge(We))})}}return Re.create=Fe=>new Re(Fe),Re})();function z(Re){var Fe;return null!==(Fe=null!=Re?Re:de.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(Qe,Ce,N)=>{N.d(Ce,{x:()=>de});var o=N(8306),ee=N(727);const ce=(0,N(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=N(8737),_e=N(2806);let de=(()=>{class pe extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const ie=new le(this,this);return ie.operator=z,ie}_throwIfClosed(){if(this.closed)throw new ce}next(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(z)}})}error(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:ie}=this;for(;ie.length;)ie.shift().error(z)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:ie,isStopped:$e,observers:Re}=this;return ie||$e?ee.Lc:(this.currentObservers=null,Re.push(z),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(Re,z)}))}_checkFinalizedStatuses(z){const{hasError:ie,thrownError:$e,isStopped:Re}=this;ie?z.error($e):Re&&z.complete()}asObservable(){const z=new o.y;return z.source=this,z}}return pe.create=($,z)=>new le($,z),pe})();class le extends de{constructor($,z){super(),this.destination=$,this.source=z}next($){var z,ie;null===(ie=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===ie||ie.call(z,$)}error($){var z,ie;null===(ie=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===ie||ie.call(z,$)}complete(){var $,z;null===(z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===z||z.call($)}_subscribe($){var z,ie;return null!==(ie=null===(z=this.source)||void 0===z?void 0:z.subscribe($))&&void 0!==ie?ie:ee.Lc}}},930:(Qe,Ce,N)=>{N.d(Ce,{Hp:()=>Ue,Lv:()=>ie});var o=N(576),ee=N(727),L=N(2416),ce=N(7849),re=N(5032);const _e=pe("C",void 0,void 0);function pe(Me,Te,Se){return{kind:Me,value:Te,error:Se}}var $=N(3410),z=N(2806);class ie extends ee.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,ee.Nn)(Te)&&Te.add(this)):this.destination=Ye}static create(Te,Se,He){return new Ue(Te,Se,He)}next(Te){this.isStopped?We(function le(Me){return pe("N",Me,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?We(function de(Me){return pe("E",void 0,Me)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?We(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Re(Me,Te){return $e.call(Me,Te)}class Fe{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Te)}catch(He){ge(He)}}error(Te){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Te)}catch(He){ge(He)}else ge(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(Se){ge(Se)}}}class Ue extends ie{constructor(Te,Se,He){let je;if(super(),(0,o.m)(Te)||!Te)je={next:null!=Te?Te:void 0,error:null!=Se?Se:void 0,complete:null!=He?He:void 0};else{let G;this&&L.v.useDeprecatedNextContext?(G=Object.create(Te),G.unsubscribe=()=>this.unsubscribe(),je={next:Te.next&&Re(Te.next,G),error:Te.error&&Re(Te.error,G),complete:Te.complete&&Re(Te.complete,G)}):je=Te}this.destination=new Fe(je)}}function ge(Me){L.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Me):(0,ce.h)(Me)}function We(Me,Te){const{onStoppedNotification:Se}=L.v;Se&&$.z.setTimeout(()=>Se(Me,Te))}const Ye={closed:!0,next:re.Z,error:function De(Me){throw Me},complete:re.Z}},727:(Qe,Ce,N)=>{N.d(Ce,{Lc:()=>_e,w0:()=>re,Nn:()=>de});var o=N(576);const L=(0,N(3888).d)(pe=>function(z){pe(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((ie,$e)=>`${$e+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ce=N(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Re of z)Re.remove(this);else z.remove(this);const{initialTeardown:ie}=this;if((0,o.m)(ie))try{ie()}catch(Re){$=Re instanceof L?Re.errors:[Re]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Re of $e)try{le(Re)}catch(Fe){$=null!=$?$:[],Fe instanceof L?$=[...$,...Fe.errors]:$.push(Fe)}}if($)throw new L($)}}add($){var z;if($&&$!==this)if(this.closed)le($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push($)}}_hasParent($){const{_parentage:z}=this;return z===$||Array.isArray(z)&&z.includes($)}_addParent($){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push($),z):z?[z,$]:$}_removeParent($){const{_parentage:z}=this;z===$?this._parentage=null:Array.isArray(z)&&(0,ce.P)(z,$)}remove($){const{_finalizers:z}=this;z&&(0,ce.P)(z,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const _e=re.EMPTY;function de(pe){return pe instanceof re||pe&&"closed"in pe&&(0,o.m)(pe.remove)&&(0,o.m)(pe.add)&&(0,o.m)(pe.unsubscribe)}function le(pe){(0,o.m)(pe)?pe():pe.unsubscribe()}},2416:(Qe,Ce,N)=>{N.d(Ce,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Qe,Ce,N)=>{N.d(Ce,{E:()=>ee});const ee=new(N(8306).y)(re=>re.complete())},8996:(Qe,Ce,N)=>{N.d(Ce,{D:()=>Te});var o=N(8421),ee=N(5363),L=N(9468),_e=N(8306),le=N(2202),pe=N(576),$=N(9672);function ie(Se,He){if(!Se)throw new Error("Iterable cannot be null");return new _e.y(je=>{(0,$.f)(je,He,()=>{const G=Se[Symbol.asyncIterator]();(0,$.f)(je,He,()=>{G.next().then(Ee=>{Ee.done?je.complete():je.next(Ee.value)})},0,!0)})})}var $e=N(3670),Re=N(8239),Fe=N(1144),Ue=N(6495),ge=N(2206),De=N(4532),We=N(3260);function Te(Se,He){return He?function Me(Se,He){if(null!=Se){if((0,$e.c)(Se))return function ce(Se,He){return(0,o.Xf)(Se).pipe((0,L.R)(He),(0,ee.Q)(He))}(Se,He);if((0,Fe.z)(Se))return function de(Se,He){return new _e.y(je=>{let G=0;return He.schedule(function(){G===Se.length?je.complete():(je.next(Se[G++]),je.closed||this.schedule())})})}(Se,He);if((0,Re.t)(Se))return function re(Se,He){return(0,o.Xf)(Se).pipe((0,L.R)(He),(0,ee.Q)(He))}(Se,He);if((0,ge.D)(Se))return ie(Se,He);if((0,Ue.T)(Se))return function z(Se,He){return new _e.y(je=>{let G;return(0,$.f)(je,He,()=>{G=Se[le.h](),(0,$.f)(je,He,()=>{let Ee,Y;try{({value:Ee,done:Y}=G.next())}catch(se){return void je.error(se)}Y?je.complete():je.next(Ee)},0,!0)}),()=>(0,pe.m)(null==G?void 0:G.return)&&G.return()})}(Se,He);if((0,We.L)(Se))return function Ye(Se,He){return ie((0,We.Q)(Se),He)}(Se,He)}throw(0,De.z)(Se)}(Se,He):(0,o.Xf)(Se)}},8421:(Qe,Ce,N)=>{N.d(Ce,{Xf:()=>$e});var o=N(655),ee=N(1144),L=N(8239),ce=N(8306),re=N(3670),_e=N(2206),de=N(4532),le=N(6495),pe=N(3260),$=N(576),z=N(7849),ie=N(8822);function $e(Me){if(Me instanceof ce.y)return Me;if(null!=Me){if((0,re.c)(Me))return function Re(Me){return new ce.y(Te=>{const Se=Me[ie.L]();if((0,$.m)(Se.subscribe))return Se.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,ee.z)(Me))return function Fe(Me){return new ce.y(Te=>{for(let Se=0;Se<Me.length&&!Te.closed;Se++)Te.next(Me[Se]);Te.complete()})}(Me);if((0,L.t)(Me))return function Ue(Me){return new ce.y(Te=>{Me.then(Se=>{Te.closed||(Te.next(Se),Te.complete())},Se=>Te.error(Se)).then(null,z.h)})}(Me);if((0,_e.D)(Me))return De(Me);if((0,le.T)(Me))return function ge(Me){return new ce.y(Te=>{for(const Se of Me)if(Te.next(Se),Te.closed)return;Te.complete()})}(Me);if((0,pe.L)(Me))return function We(Me){return De((0,pe.Q)(Me))}(Me)}throw(0,de.z)(Me)}function De(Me){return new ce.y(Te=>{(function Ye(Me,Te){var Se,He,je,G;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Se=(0,o.KL)(Me);!(He=yield Se.next()).done;)if(Te.next(He.value),Te.closed)return}catch(Ee){je={error:Ee}}finally{try{He&&!He.done&&(G=Se.return)&&(yield G.call(Se))}finally{if(je)throw je.error}}Te.complete()})})(Me,Te).catch(Se=>Te.error(Se))})}},6451:(Qe,Ce,N)=>{N.d(Ce,{T:()=>_e});var o=N(8189),ee=N(8421),L=N(515),ce=N(3269),re=N(8996);function _e(...de){const le=(0,ce.yG)(de),pe=(0,ce._6)(de,1/0),$=de;return $.length?1===$.length?(0,ee.Xf)($[0]):(0,o.J)(pe)((0,re.D)($,le)):L.E}},5403:(Qe,Ce,N)=>{N.d(Ce,{x:()=>ee});var o=N(930);function ee(ce,re,_e,de,le){return new L(ce,re,_e,de,le)}class L extends o.Lv{constructor(re,_e,de,le,pe,$){super(re),this.onFinalize=pe,this.shouldUnsubscribe=$,this._next=_e?function(z){try{_e(z)}catch(ie){re.error(ie)}}:super._next,this._error=le?function(z){try{le(z)}catch(ie){re.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(z){re.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Qe,Ce,N)=>{N.d(Ce,{U:()=>L});var o=N(4482),ee=N(5403);function L(ce,re){return(0,o.e)((_e,de)=>{let le=0;_e.subscribe((0,ee.x)(de,pe=>{de.next(ce.call(re,pe,le++))}))})}},8189:(Qe,Ce,N)=>{N.d(Ce,{J:()=>L});var o=N(5577),ee=N(4671);function L(ce=1/0){return(0,o.z)(ee.y,ce)}},5577:(Qe,Ce,N)=>{N.d(Ce,{z:()=>le});var o=N(4004),ee=N(8421),L=N(4482),ce=N(9672),re=N(5403),de=N(576);function le(pe,$,z=1/0){return(0,de.m)($)?le((ie,$e)=>(0,o.U)((Re,Fe)=>$(ie,Re,$e,Fe))((0,ee.Xf)(pe(ie,$e))),z):("number"==typeof $&&(z=$),(0,L.e)((ie,$e)=>function _e(pe,$,z,ie,$e,Re,Fe,Ue){const ge=[];let De=0,We=0,Ye=!1;const Me=()=>{Ye&&!ge.length&&!De&&$.complete()},Te=He=>De<ie?Se(He):ge.push(He),Se=He=>{Re&&$.next(He),De++;let je=!1;(0,ee.Xf)(z(He,We++)).subscribe((0,re.x)($,G=>{null==$e||$e(G),Re?Te(G):$.next(G)},()=>{je=!0},void 0,()=>{if(je)try{for(De--;ge.length&&De<ie;){const G=ge.shift();Fe?(0,ce.f)($,Fe,()=>Se(G)):Se(G)}Me()}catch(G){$.error(G)}}))};return pe.subscribe((0,re.x)($,Te,()=>{Ye=!0,Me()})),()=>{null==Ue||Ue()}}(ie,$e,pe,z)))}},5363:(Qe,Ce,N)=>{N.d(Ce,{Q:()=>ce});var o=N(9672),ee=N(4482),L=N(5403);function ce(re,_e=0){return(0,ee.e)((de,le)=>{de.subscribe((0,L.x)(le,pe=>(0,o.f)(le,re,()=>le.next(pe),_e),()=>(0,o.f)(le,re,()=>le.complete(),_e),pe=>(0,o.f)(le,re,()=>le.error(pe),_e)))})}},3099:(Qe,Ce,N)=>{N.d(Ce,{B:()=>_e});var o=N(8996),ee=N(5698),L=N(7579),ce=N(930),re=N(4482);function _e(le={}){const{connector:pe=(()=>new L.x),resetOnError:$=!0,resetOnComplete:z=!0,resetOnRefCountZero:ie=!0}=le;return $e=>{let Re=null,Fe=null,Ue=null,ge=0,De=!1,We=!1;const Ye=()=>{null==Fe||Fe.unsubscribe(),Fe=null},Me=()=>{Ye(),Re=Ue=null,De=We=!1},Te=()=>{const Se=Re;Me(),null==Se||Se.unsubscribe()};return(0,re.e)((Se,He)=>{ge++,!We&&!De&&Ye();const je=Ue=null!=Ue?Ue:pe();He.add(()=>{ge--,0===ge&&!We&&!De&&(Fe=de(Te,ie))}),je.subscribe(He),Re||(Re=new ce.Hp({next:G=>je.next(G),error:G=>{We=!0,Ye(),Fe=de(Me,$,G),je.error(G)},complete:()=>{De=!0,Ye(),Fe=de(Me,z),je.complete()}}),(0,o.D)(Se).subscribe(Re))})($e)}}function de(le,pe,...$){return!0===pe?(le(),null):!1===pe?null:pe(...$).pipe((0,ee.q)(1)).subscribe(()=>le())}},9468:(Qe,Ce,N)=>{N.d(Ce,{R:()=>ee});var o=N(4482);function ee(L,ce=0){return(0,o.e)((re,_e)=>{_e.add(L.schedule(()=>re.subscribe(_e),ce))})}},5698:(Qe,Ce,N)=>{N.d(Ce,{q:()=>ce});var o=N(515),ee=N(4482),L=N(5403);function ce(re){return re<=0?()=>o.E:(0,ee.e)((_e,de)=>{let le=0;_e.subscribe((0,L.x)(de,pe=>{++le<=re&&(de.next(pe),re<=le&&de.complete())}))})}},8505:(Qe,Ce,N)=>{N.d(Ce,{b:()=>re});var o=N(576),ee=N(4482),L=N(5403),ce=N(4671);function re(_e,de,le){const pe=(0,o.m)(_e)||de||le?{next:_e,error:de,complete:le}:_e;return pe?(0,ee.e)(($,z)=>{var ie;null===(ie=pe.subscribe)||void 0===ie||ie.call(pe);let $e=!0;$.subscribe((0,L.x)(z,Re=>{var Fe;null===(Fe=pe.next)||void 0===Fe||Fe.call(pe,Re),z.next(Re)},()=>{var Re;$e=!1,null===(Re=pe.complete)||void 0===Re||Re.call(pe),z.complete()},Re=>{var Fe;$e=!1,null===(Fe=pe.error)||void 0===Fe||Fe.call(pe,Re),z.error(Re)},()=>{var Re,Fe;$e&&(null===(Re=pe.unsubscribe)||void 0===Re||Re.call(pe)),null===(Fe=pe.finalize)||void 0===Fe||Fe.call(pe)}))}):ce.y}},4408:(Qe,Ce,N)=>{N.d(Ce,{o:()=>re});var o=N(727);class ee extends o.w0{constructor(de,le){super()}schedule(de,le=0){return this}}const L={setInterval(_e,de,...le){const{delegate:pe}=L;return(null==pe?void 0:pe.setInterval)?pe.setInterval(_e,de,...le):setInterval(_e,de,...le)},clearInterval(_e){const{delegate:de}=L;return((null==de?void 0:de.clearInterval)||clearInterval)(_e)},delegate:void 0};var ce=N(8737);class re extends ee{constructor(de,le){super(de,le),this.scheduler=de,this.work=le,this.pending=!1}schedule(de,le=0){if(this.closed)return this;this.state=de;const pe=this.id,$=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId($,pe,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId($,this.id,le),this}requestAsyncId(de,le,pe=0){return L.setInterval(de.flush.bind(de,this),pe)}recycleAsyncId(de,le,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return le;L.clearInterval(le)}execute(de,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(de,le);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,le){let $,pe=!1;try{this.work(de)}catch(z){pe=!0,$=z||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:de,scheduler:le}=this,{actions:pe}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(pe,this),null!=de&&(this.id=this.recycleAsyncId(le,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(Qe,Ce,N)=>{N.d(Ce,{v:()=>L});var o=N(6063);class ee{constructor(re,_e=ee.now){this.schedulerActionCtor=re,this.now=_e}schedule(re,_e=0,de){return new this.schedulerActionCtor(this,re).schedule(de,_e)}}ee.now=o.l.now;class L extends ee{constructor(re,_e=ee.now){super(re,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:_e}=this;if(this._active)return void _e.push(re);let de;this._active=!0;do{if(de=re.execute(re.state,re.delay))break}while(re=_e.shift());if(this._active=!1,de){for(;re=_e.shift();)re.unsubscribe();throw de}}}},4986:(Qe,Ce,N)=>{N.d(Ce,{P:()=>ce,z:()=>L});var o=N(4408);const L=new(N(7565).v)(o.o),ce=L},6063:(Qe,Ce,N)=>{N.d(Ce,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(Qe,Ce,N)=>{N.d(Ce,{z:()=>o});const o={setTimeout(ee,L,...ce){const{delegate:re}=o;return(null==re?void 0:re.setTimeout)?re.setTimeout(ee,L,...ce):setTimeout(ee,L,...ce)},clearTimeout(ee){const{delegate:L}=o;return((null==L?void 0:L.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(Qe,Ce,N)=>{N.d(Ce,{h:()=>ee});const ee=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Qe,Ce,N)=>{N.d(Ce,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Qe,Ce,N)=>{N.d(Ce,{_6:()=>_e,jO:()=>ce,yG:()=>re});var o=N(576),ee=N(3532);function L(de){return de[de.length-1]}function ce(de){return(0,o.m)(L(de))?de.pop():void 0}function re(de){return(0,ee.K)(L(de))?de.pop():void 0}function _e(de,le){return"number"==typeof L(de)?de.pop():le}},8737:(Qe,Ce,N)=>{function o(ee,L){if(ee){const ce=ee.indexOf(L);0<=ce&&ee.splice(ce,1)}}N.d(Ce,{P:()=>o})},3888:(Qe,Ce,N)=>{function o(ee){const ce=ee(re=>{Error.call(re),re.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}N.d(Ce,{d:()=>o})},2806:(Qe,Ce,N)=>{N.d(Ce,{O:()=>ce,x:()=>L});var o=N(2416);let ee=null;function L(re){if(o.v.useDeprecatedSynchronousErrorHandling){const _e=!ee;if(_e&&(ee={errorThrown:!1,error:null}),re(),_e){const{errorThrown:de,error:le}=ee;if(ee=null,de)throw le}}else re()}function ce(re){o.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(Qe,Ce,N)=>{function o(ee,L,ce,re=0,_e=!1){const de=L.schedule(function(){ce(),_e?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(de),!_e)return de}N.d(Ce,{f:()=>o})},4671:(Qe,Ce,N)=>{function o(ee){return ee}N.d(Ce,{y:()=>o})},1144:(Qe,Ce,N)=>{N.d(Ce,{z:()=>o});const o=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Qe,Ce,N)=>{N.d(Ce,{D:()=>ee});var o=N(576);function ee(L){return Symbol.asyncIterator&&(0,o.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(Qe,Ce,N)=>{function o(ee){return"function"==typeof ee}N.d(Ce,{m:()=>o})},3670:(Qe,Ce,N)=>{N.d(Ce,{c:()=>L});var o=N(8822),ee=N(576);function L(ce){return(0,ee.m)(ce[o.L])}},6495:(Qe,Ce,N)=>{N.d(Ce,{T:()=>L});var o=N(2202),ee=N(576);function L(ce){return(0,ee.m)(null==ce?void 0:ce[o.h])}},8239:(Qe,Ce,N)=>{N.d(Ce,{t:()=>ee});var o=N(576);function ee(L){return(0,o.m)(null==L?void 0:L.then)}},3260:(Qe,Ce,N)=>{N.d(Ce,{L:()=>ce,Q:()=>L});var o=N(655),ee=N(576);function L(re){return(0,o.FC)(this,arguments,function*(){const de=re.getReader();try{for(;;){const{value:le,done:pe}=yield(0,o.qq)(de.read());if(pe)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(le)}}finally{de.releaseLock()}})}function ce(re){return(0,ee.m)(null==re?void 0:re.getReader)}},3532:(Qe,Ce,N)=>{N.d(Ce,{K:()=>ee});var o=N(576);function ee(L){return L&&(0,o.m)(L.schedule)}},4482:(Qe,Ce,N)=>{N.d(Ce,{A:()=>ee,e:()=>L});var o=N(576);function ee(ce){return(0,o.m)(null==ce?void 0:ce.lift)}function L(ce){return re=>{if(ee(re))return re.lift(function(_e){try{return ce(_e,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Qe,Ce,N)=>{function o(){}N.d(Ce,{Z:()=>o})},7849:(Qe,Ce,N)=>{N.d(Ce,{h:()=>L});var o=N(2416),ee=N(3410);function L(ce){ee.z.setTimeout(()=>{const{onUnhandledError:re}=o.v;if(!re)throw ce;re(ce)})}},4532:(Qe,Ce,N)=>{function o(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Ce,{z:()=>o})},655:(Qe,Ce,N)=>{function ce(Y,se){var ne={};for(var ve in Y)Object.prototype.hasOwnProperty.call(Y,ve)&&se.indexOf(ve)<0&&(ne[ve]=Y[ve]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(ve=Object.getOwnPropertySymbols(Y);ue<ve.length;ue++)se.indexOf(ve[ue])<0&&Object.prototype.propertyIsEnumerable.call(Y,ve[ue])&&(ne[ve[ue]]=Y[ve[ue]])}return ne}function le(Y,se,ne,ve){return new(ne||(ne=Promise))(function(Le,gt){function qt(cn){try{Ke(ve.next(cn))}catch(Fn){gt(Fn)}}function jt(cn){try{Ke(ve.throw(cn))}catch(Fn){gt(Fn)}}function Ke(cn){cn.done?Le(cn.value):function ue(Le){return Le instanceof ne?Le:new ne(function(gt){gt(Le)})}(cn.value).then(qt,jt)}Ke((ve=ve.apply(Y,se||[])).next())})}function ge(Y){return this instanceof ge?(this.v=Y,this):new ge(Y)}function De(Y,se,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,ve=ne.apply(Y,se||[]),Le=[];return ue={},gt("next"),gt("throw"),gt("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function gt(hn){ve[hn]&&(ue[hn]=function(nn){return new Promise(function(zi,Xt){Le.push([hn,nn,zi,Xt])>1||qt(hn,nn)})})}function qt(hn,nn){try{!function jt(hn){hn.value instanceof ge?Promise.resolve(hn.value.v).then(Ke,cn):Fn(Le[0][2],hn)}(ve[hn](nn))}catch(zi){Fn(Le[0][3],zi)}}function Ke(hn){qt("next",hn)}function cn(hn){qt("throw",hn)}function Fn(hn,nn){hn(nn),Le.shift(),Le.length&&qt(Le[0][0],Le[0][1])}}function Ye(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,se=Y[Symbol.asyncIterator];return se?se.call(Y):(Y=function ie(Y){var se="function"==typeof Symbol&&Symbol.iterator,ne=se&&Y[se],ve=0;if(ne)return ne.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ve>=Y.length&&(Y=void 0),{value:Y&&Y[ve++],done:!Y}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ne={},ve("next"),ve("throw"),ve("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function ve(Le){ne[Le]=Y[Le]&&function(gt){return new Promise(function(qt,jt){!function ue(Le,gt,qt,jt){Promise.resolve(jt).then(function(Ke){Le({value:Ke,done:qt})},gt)}(qt,jt,(gt=Y[Le](gt)).done,gt.value)})}}}N.d(Ce,{FC:()=>De,KL:()=>Ye,_T:()=>ce,mG:()=>le,qq:()=>ge})},5e3:(Qe,Ce,N)=>{N.d(Ce,{$8M:()=>lu,$Z:()=>S_,AFp:()=>Ut,AaK:()=>le,Akn:()=>Fa,AsE:()=>Oh,BQk:()=>Ah,CHM:()=>Oo,CRH:()=>Ib,CZH:()=>by,CqO:()=>x_,DdM:()=>Zp,EJc:()=>Hi,EpF:()=>AE,F$t:()=>OE,F4k:()=>Ip,FYo:()=>X_,FiY:()=>Dr,G48:()=>yI,Gf:()=>fy,GfV:()=>fb,GkF:()=>xw,Gpc:()=>z,HTZ:()=>zh,Hh0:()=>Gh,Hsn:()=>PE,JOm:()=>O,LFG:()=>ot,LSH:()=>rh,Lbi:()=>hI,MAs:()=>Ie,NdJ:()=>Sp,OlP:()=>Rn,Oqu:()=>ZE,PXZ:()=>Ty,Q6J:()=>D_,QGY:()=>Aw,Qsj:()=>db,R0b:()=>ra,RDi:()=>dc,Rgc:()=>qh,SBq:()=>Uh,Sil:()=>Ku,Suo:()=>Zh,TTD:()=>as,TgZ:()=>xh,Tol:()=>Sx,Udp:()=>WE,VKq:()=>_b,VLi:()=>pI,W1O:()=>nI,WLB:()=>On,X6Q:()=>oa,XFs:()=>vt,Xpm:()=>yt,Y36:()=>Dh,YKP:()=>ry,YNc:()=>cx,Yjl:()=>Qa,Yz7:()=>nn,ZZ4:()=>hd,_Bn:()=>zp,_UZ:()=>Dw,_Vd:()=>Qc,_c5:()=>SI,_uU:()=>Mp,aQg:()=>mg,c2e:()=>ig,cJS:()=>Xt,cg1:()=>Pp,dDg:()=>sa,deG:()=>mm,dqk:()=>$t,eFA:()=>Vb,ekj:()=>Ap,f3M:()=>Vt,g9A:()=>St,h0i:()=>Hh,hGG:()=>DI,hij:()=>Bu,iGM:()=>tI,ifc:()=>Kt,ip1:()=>dI,kEZ:()=>Yp,kL8:()=>Np,l5B:()=>HT,lG2:()=>Ll,n5z:()=>au,oAB:()=>$i,oJD:()=>ih,oxw:()=>RE,q4F:()=>LT,qLn:()=>dh,qOj:()=>vw,qZA:()=>Ep,qbA:()=>jT,rFY:()=>yb,sBO:()=>An,sIi:()=>_p,s_b:()=>td,soG:()=>Fb,tBr:()=>fr,tb:()=>qu,tp0:()=>Aa,uIk:()=>E_,vHH:()=>Fe,vpe:()=>vo,wAp:()=>Tt,xp6:()=>Xi,ynx:()=>Tp,z2F:()=>hg,zSh:()=>ow,zs3:()=>ea});var o=N(7579),ee=N(727),L=N(8306),ce=N(6451),re=N(3099);function _e(a){for(let l in a)if(a[l]===_e)return l;throw Error("Could not find renamed property on target object.")}function de(a,l){for(const c in l)l.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=l[c])}function le(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(le).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const c=l.indexOf("\n");return-1===c?l:l.substring(0,c)}function pe(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const $=_e({__forward_ref__:_e});function z(a){return a.__forward_ref__=z,a.toString=function(){return le(this())},a}function ie(a){return $e(a)?a():a}function $e(a){return"function"==typeof a&&a.hasOwnProperty($)&&a.__forward_ref__===z}class Fe extends Error{constructor(l,c){super(function Ue(a,l){return`NG0${Math.abs(a)}${l?": "+l:""}`}(l,c)),this.code=l}}function ge(a){return"string"==typeof a?a:null==a?"":String(a)}function De(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():ge(a)}function Te(a,l){const c=l?` in ${l}`:"";throw new Fe(-201,`No provider for ${De(a)} found${c}`)}function jt(a,l){null==a&&function Ke(a,l,c,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${c} ${d} ${l} <=Actual]`))}(l,a,null,"!=")}function nn(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Xt(a){return{providers:a.providers||[],imports:a.imports||[]}}function zt(a){return es(a,ts)||es(a,ar)}function es(a,l){return a.hasOwnProperty(l)?a[l]:null}function Gi(a){return a&&(a.hasOwnProperty(Qs)||a.hasOwnProperty(Hr))?a[Qs]:null}const ts=_e({\u0275prov:_e}),Qs=_e({\u0275inj:_e}),ar=_e({ngInjectableDef:_e}),Hr=_e({ngInjectorDef:_e});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let br;function Ln(a){const l=br;return br=a,l}function Js(a,l,c){const d=zt(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&vt.Optional?null:void 0!==l?l:void Te(le(a),"Injector")}function ai(a){return{toString:a}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),Kt=(()=>{return(a=Kt||(Kt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Kt;var a})();const ut="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,Si="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$t=ut||"undefined"!=typeof global&&global||Ct||Si,xi={},H=[],q=_e({\u0275cmp:_e}),K=_e({\u0275dir:_e}),xe=_e({\u0275pipe:_e}),W=_e({\u0275mod:_e}),te=_e({\u0275fac:_e}),Pe=_e({__NG_ELEMENT_ID__:_e});let Je=0;function yt(a){return ai(()=>{const c={},d={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||H,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Kt.Emulated,id:"c",styles:a.styles||H,_:null,setInput:null,schemas:a.schemas||null,tView:null},f=a.directives,m=a.features,w=a.pipes;return d.id+=Je++,d.inputs=Ya(a.inputs,c),d.outputs=Ya(a.outputs),m&&m.forEach(C=>C(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(wn):null,d.pipeDefs=w?()=>("function"==typeof w?w():w).map(It):null,d})}function wn(a){return Jn(a)||function Wi(a){return a[K]||null}(a)}function It(a){return function Ss(a){return a[xe]||null}(a)}const Qn={};function $i(a){return ai(()=>{const l={type:a.type,bootstrap:a.bootstrap||H,declarations:a.declarations||H,imports:a.imports||H,exports:a.exports||H,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(Qn[a.id]=a.type),l})}function Ya(a,l){if(null==a)return xi;const c={};for(const d in a)if(a.hasOwnProperty(d)){let f=a[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,l&&(l[f]=m)}return c}const Ll=yt;function Qa(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function Jn(a){return a[q]||null}function Xn(a,l){const c=a[W]||null;if(!c&&!0===l)throw new Error(`Type ${le(a)} does not have '\u0275mod' property.`);return c}function qi(a){return Array.isArray(a)&&"object"==typeof a[1]}function rs(a){return Array.isArray(a)&&!0===a[1]}function Ul(a){return 0!=(8&a.flags)}function Cd(a){return 2==(2&a.flags)}function ss(a){return 1==(1&a.flags)}function os(a){return null!==a.template}function Ki(a){return 0!=(512&a[2])}function Mi(a,l){return a.hasOwnProperty(te)?a[te]:null}class Ao{constructor(l,c,d){this.previousValue=l,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function as(){return da}function da(a){return a.type.prototype.ngOnChanges&&(a.setInput=Mf),Md}function Md(){const a=Mo(this),l=null==a?void 0:a.current;if(l){const c=a.previous;if(c===xi)a.previous=l;else for(let d in l)c[d]=l[d];a.current=null,this.ngOnChanges(l)}}function Mf(a,l,c,d){const f=Mo(a)||function ha(a,l){return a[ei]=l}(a,{previous:xi,current:null}),m=f.current||(f.current={}),w=f.previous,C=this.declaredInputs[c],T=w[C];m[C]=new Ao(T&&T.currentValue,l,w===xi),a[d]=l}as.ngInherit=!0;const ei="__ngSimpleChanges__";function Mo(a){return a[ei]||null}let pa;function dc(a){pa=a}function ls(){return void 0!==pa?pa:"undefined"!=typeof document?document:void 0}function mn(a){return!!a.listen}const nl={createRenderer:(a,l)=>ls()};function an(a){for(;Array.isArray(a);)a=a[0];return a}function ro(a,l){return an(l[a])}function pi(a,l){return an(l[a.index])}function Sn(a,l){return a.data[l]}function gi(a,l){const c=l[a];return qi(c)?c:c[0]}function Ro(a){return 4==(4&a[2])}function As(a){return 128==(128&a[2])}function zr(a,l){return null==l?null:a[l]}function cs(a){a[18]=0}function ga(a,l){a[5]+=l;let c=a,d=a[3];for(;null!==d&&(1===l&&1===c[5]||-1===l&&0===c[5]);)d[5]+=l,c=d,d=d[3]}const wt={lFrame:ya(null),bindingsEnabled:!0};function Gl(){return wt.bindingsEnabled}function ke(){return wt.lFrame.lView}function Gt(){return wt.lFrame.tView}function Oo(a){return wt.lFrame.contextLView=a,a[8]}function In(){let a=$l();for(;null!==a&&64===a.type;)a=a.parent;return a}function $l(){return wt.lFrame.currentTNode}function Ir(a,l){const c=wt.lFrame;c.currentTNode=a,c.isParent=l}function mc(){return wt.lFrame.isParent}function _c(){wt.lFrame.isParent=!1}function Ri(){const a=wt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function oo(){return wt.lFrame.bindingIndex++}function Gr(a){const l=wt.lFrame,c=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,c}function Kl(a,l){const c=wt.lFrame;c.bindingIndex=c.bindingRootIndex=a,_a(l)}function _a(a){wt.lFrame.currentDirectiveIndex=a}function Yl(){return wt.lFrame.currentQueryIndex}function Pd(a){wt.lFrame.currentQueryIndex=a}function Nd(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function Ql(a,l,c){if(c&vt.SkipSelf){let f=l,m=a;for(;!(f=f.parent,null!==f||c&vt.Host||(f=Nd(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;l=f,a=m}const d=wt.lFrame=Fd();return d.currentTNode=l,d.lView=a,!0}function No(a){const l=Fd(),c=a[1];wt.lFrame=l,l.currentTNode=c.firstChild,l.lView=a,l.tView=c,l.contextLView=a,l.bindingIndex=c.bindingStartIndex,l.inI18n=!1}function Fd(){const a=wt.lFrame,l=null===a?null:a.child;return null===l?ya(a):l}function ya(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function Ld(){const a=wt.lFrame;return wt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Jl=Ld;function hr(){const a=Ld();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function li(){return wt.lFrame.selectedIndex}function Fo(a){wt.lFrame.selectedIndex=a}function zn(){const a=wt.lFrame;return Sn(a.tView,a.selectedIndex)}function ol(a,l){for(let c=l.directiveStart,d=l.directiveEnd;c<d;c++){const m=a.data[c].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:C,ngAfterViewInit:T,ngAfterViewChecked:A,ngOnDestroy:k}=m;w&&(a.contentHooks||(a.contentHooks=[])).push(-c,w),C&&((a.contentHooks||(a.contentHooks=[])).push(c,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(c,C)),T&&(a.viewHooks||(a.viewHooks=[])).push(-c,T),A&&((a.viewHooks||(a.viewHooks=[])).push(c,A),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(c,A)),null!=k&&(a.destroyHooks||(a.destroyHooks=[])).push(c,k)}}function ks(a,l,c){Bd(a,l,3,c)}function Lo(a,l,c,d){(3&a[2])===c&&Bd(a,l,c,d)}function ti(a,l){let c=a[2];(3&c)===l&&(c&=2047,c+=1,a[2]=c)}function Bd(a,l,c,d){const m=null!=d?d:-1,w=l.length-1;let C=0;for(let T=void 0!==d?65535&a[18]:0;T<w;T++)if("number"==typeof l[T+1]){if(C=l[T],null!=d&&C>=d)break}else l[T]<0&&(a[18]+=65536),(C<m||-1==m)&&(dm(a,c,l,T),a[18]=(4294901760&a[18])+T+2),T++}function dm(a,l,c,d){const f=c[d]<0,m=c[d+1],C=a[f?-c[d]:c[d]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class va{constructor(l,c,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function $r(a,l,c){const d=mn(a);let f=0;for(;f<c.length;){const m=c[f];if("number"==typeof m){if(0!==m)break;f++;const w=c[f++],C=c[f++],T=c[f++];d?a.setAttribute(l,C,T,w):l.setAttributeNS(w,C,T)}else{const w=m,C=c[++f];Os(w)?d&&a.setProperty(l,w,C):d?a.setAttribute(l,w,C):l.setAttribute(w,C),f++}}return f}function ds(a){return 3===a||4===a||6===a}function Os(a){return 64===a.charCodeAt(0)}function wa(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let c=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?c=f:0===c||ui(a,c,f,null,-1===c||2===c?l[++d]:null)}}return a}function ui(a,l,c,d,f){let m=0,w=a.length;if(-1===l)w=-1;else for(;m<a.length;){const C=a[m++];if("number"==typeof C){if(C===l){w=-1;break}if(C>l){w=m-1;break}}}for(;m<a.length;){const C=a[m];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==f&&(a[m+1]=f));if(d===a[m+1])return void(a[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==w&&(a.splice(w,0,l),m=w+1),a.splice(m++,0,c),null!==d&&a.splice(m++,0,d),null!==f&&a.splice(m++,0,f)}function Bo(a){return-1!==a}function Uo(a){return 32767&a}function Ps(a,l){let c=function ln(a){return a>>16}(a),d=l;for(;c>0;)d=d[15],c--;return d}let ba=!0;function Ho(a){const l=ba;return ba=a,l}let Ca=0;function hs(a,l){const c=fs(a,l);if(-1!==c)return c;const d=l[1];d.firstCreatePass&&(a.injectorIndex=l.length,Ft(d.data,a),Ft(l,null),Ft(d.blueprint,null));const f=mi(a,l),m=a.injectorIndex;if(Bo(f)){const w=Uo(f),C=Ps(f,l),T=C[1].data;for(let A=0;A<8;A++)l[m+A]=C[w+A]|T[w+A]}return l[m+8]=f,m}function Ft(a,l){a.push(0,0,0,0,0,0,0,0,l)}function fs(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function mi(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let c=0,d=null,f=l;for(;null!==f;){const m=f[1],w=m.type;if(d=2===w?m.declTNode:1===w?f[6]:null,null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function al(a,l,c){!function tu(a,l,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Pe)&&(d=c[Pe]),null==d&&(d=c[Pe]=Ca++);const f=255&d;l.data[a+(f>>5)]|=1<<f}(a,l,c)}function Ea(a,l,c){if(c&vt.Optional)return a;Te(l,"NodeInjector")}function ll(a,l,c,d){if(c&vt.Optional&&void 0===d&&(d=null),0==(c&(vt.Self|vt.Host))){const f=a[9],m=Ln(void 0);try{return f?f.get(l,d,c&vt.Optional):Js(l,d,c&vt.Optional)}finally{Ln(m)}}return Ea(d,l,c)}function Ec(a,l,c,d=vt.Default,f){if(null!==a){const m=function ul(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Pe)?a[Pe]:void 0;return"number"==typeof l?l>=0?255&l:iu:l}(c);if("function"==typeof m){if(!Ql(l,a,d))return d&vt.Host?Ea(f,c,d):ll(l,c,d,f);try{const w=m(d);if(null!=w||d&vt.Optional)return w;Te(c)}finally{Jl()}}else if("number"==typeof m){let w=null,C=fs(a,l),T=-1,A=d&vt.Host?l[16][6]:null;for((-1===C||d&vt.SkipSelf)&&(T=-1===C?mi(a,l):l[C+8],-1!==T&&jd(d,!1)?(w=l[1],C=Uo(T),l=Ps(T,l)):C=-1);-1!==C;){const k=l[1];if(ou(m,C,k.data)){const V=gm(C,l,c,w,d,A);if(V!==ao)return V}T=l[C+8],-1!==T&&jd(d,l[1].data[C+8]===A)&&ou(m,C,l)?(w=k,C=Uo(T),l=Ps(T,l)):C=-1}}}return ll(l,c,d,f)}const ao={};function iu(){return new lo(In(),ke())}function gm(a,l,c,d,f,m){const w=l[1],C=w.data[a+8],k=ru(C,w,c,null==d?Cd(C)&&ba:d!=w&&0!=(3&C.type),f&vt.Host&&m===C);return null!==k?su(l,w,k,C):ao}function ru(a,l,c,d,f){const m=a.providerIndexes,w=l.data,C=1048575&m,T=a.directiveStart,k=m>>20,j=f?C+k:a.directiveEnd;for(let X=d?C:C+k;X<j;X++){const ye=w[X];if(X<T&&c===ye||X>=T&&ye.type===c)return X}if(f){const X=w[T];if(X&&os(X)&&X.type===c)return T}return null}function su(a,l,c,d){let f=a[c];const m=l.data;if(function Xl(a){return a instanceof va}(f)){const w=f;w.resolving&&function We(a,l){const c=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${a}${c}`)}(De(m[c]));const C=Ho(w.canSeeViewProviders);w.resolving=!0;const T=w.injectImpl?Ln(w.injectImpl):null;Ql(a,d,vt.Default);try{f=a[c]=w.factory(void 0,m,a,d),l.firstCreatePass&&c>=d.directiveStart&&function gv(a,l,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=l.type.prototype;if(d){const w=da(l);(c.preOrderHooks||(c.preOrderHooks=[])).push(a,w),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,w)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-a,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(a,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,m))}(c,m[c],l)}finally{null!==T&&Ln(T),Ho(C),w.resolving=!1,Jl()}}return f}function ou(a,l,c){return!!(c[l+(a>>5)]&1<<a)}function jd(a,l){return!(a&vt.Self||a&vt.Host&&l)}class lo{constructor(l,c){this._tNode=l,this._lView=c}get(l,c,d){return Ec(this._tNode,this._lView,l,d,c)}}function au(a){return ai(()=>{const l=a.prototype.constructor,c=l[te]||cl(l),d=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==d;){const m=f[te]||cl(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function cl(a){return $e(a)?()=>{const l=cl(ie(a));return l&&l()}:Mi(a)}function lu(a){return function nu(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const c=a.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(ds(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===l)return c[f+1];f+=2}}}return null}(In(),a)}const Ta="__parameters__";function Ia(a,l,c){return ai(()=>{const d=function Tc(a){return function(...c){if(a){const d=a(...c);for(const f in d)this[f]=d[f]}}}(l);function f(...m){if(this instanceof f)return d.apply(this,m),this;const w=new f(...m);return C.annotation=w,C;function C(T,A,k){const V=T.hasOwnProperty(Ta)?T[Ta]:Object.defineProperty(T,Ta,{value:[]})[Ta];for(;V.length<=k;)V.push(null);return(V[k]=V[k]||[]).push(w),T}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class Rn{constructor(l,c){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=nn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const mm=new Rn("AnalyzeForEntryComponents");function _i(a,l){void 0===l&&(l=a);for(let c=0;c<a.length;c++){let d=a[c];Array.isArray(d)?(l===a&&(l=a.slice(0,c)),_i(d,l)):l!==a&&l.push(d)}return l}function Oi(a,l){a.forEach(c=>Array.isArray(c)?Oi(c,l):l(c))}function yi(a,l,c){l>=a.length?a.push(c):a.splice(l,0,c)}function zo(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function qr(a,l){const c=[];for(let d=0;d<a;d++)c.push(l);return c}function Pi(a,l,c){let d=Sa(a,l);return d>=0?a[1|d]=c:(d=~d,function Go(a,l,c,d){let f=a.length;if(f==l)a.push(c,d);else if(1===f)a.push(d,a[0]),a[0]=c;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=c,a[l+1]=d}}(a,d,l,c)),d}function du(a,l){const c=Sa(a,l);if(c>=0)return a[1|c]}function Sa(a,l){return function gs(a,l,c){let d=0,f=a.length>>c;for(;f!==d;){const m=d+(f-d>>1),w=a[m<<c];if(l===w)return m<<c;w>l?f=m:d=m+1}return~(f<<c)}(a,l,1)}const ms={},xa="__NG_DI_FLAG__",Wo="ngTempTokenPath",D=/\n/gm,U="__source",J=_e({provide:String,useValue:_e});let oe;function Oe(a){const l=oe;return oe=a,l}function tt(a,l=vt.Default){if(void 0===oe)throw new Fe(203,"");return null===oe?Js(a,void 0,l):oe.get(a,l&vt.Optional?null:void 0,l)}function ot(a,l=vt.Default){return(function Mn(){return br}()||tt)(ie(a),l)}const Vt=ot;function Et(a){const l=[];for(let c=0;c<a.length;c++){const d=ie(a[c]);if(Array.isArray(d)){if(0===d.length)throw new Fe(900,"");let f,m=vt.Default;for(let w=0;w<d.length;w++){const C=d[w],T=Wn(C);"number"==typeof T?-1===T?f=C.token:m|=T:f=C}l.push(ot(f,m))}else l.push(ot(d))}return l}function ni(a,l){return a[xa]=l,a.prototype[xa]=l,a}function Wn(a){return a[xa]}const fr=ni(Ia("Inject",a=>({token:a})),-1),Dr=ni(Ia("Optional"),8),Aa=ni(Ia("SkipSelf"),4);let kc,vu;function yu(a){var l;return(null===(l=function Qd(){if(void 0===kc&&(kc=null,$t.trustedTypes))try{kc=$t.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return kc}())||void 0===l?void 0:l.createHTML(a))||a}function Tm(a){var l;return(null===(l=function Hf(){if(void 0===vu&&(vu=null,$t.trustedTypes))try{vu=$t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return vu}())||void 0===l?void 0:l.createHTML(a))||a}class Sm{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function fo(a){return a instanceof Sm?a.changingThisBreaksApplicationSecurity:a}function Oc(a,l){const c=function Gf(a){return a instanceof Sm&&a.getTypeName()||null}(a);if(null!=c&&c!==l){if("ResourceURL"===c&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===l}class xm{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const c=(new window.DOMParser).parseFromString(yu(l),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(l):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class Am{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(l){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=yu(l),c;const d=this.inertDocument.createElement("body");return d.innerHTML=yu(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(l){const c=l.attributes;for(let f=c.length-1;0<f;f--){const w=c.item(f).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&l.removeAttribute(w)}let d=l.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const dC=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Xd(a){return(a=String(a)).match(dC)||a.match(bu)?a:"unsafe:"+a}function _s(a){const l={};for(const c of a.split(","))l[c]=!0;return l}function Cu(...a){const l={};for(const c of a)for(const d in c)c.hasOwnProperty(d)&&(l[d]=!0);return l}const Eu=_s("area,br,col,hr,img,wbr"),Wf=_s("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),km=_s("rp,rt"),Nc=Cu(Eu,Cu(Wf,_s("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Cu(km,_s("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Cu(km,Wf)),eh=_s("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qf=_s("srcset"),Om=Cu(eh,qf,_s("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_s("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),th=_s("script,style,template");class Kf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let c=l.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(l){const c=l.nodeName.toLowerCase();if(!Nc.hasOwnProperty(c))return this.sanitizedSomething=!0,!th.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=l.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),w=m.name,C=w.toLowerCase();if(!Om.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let T=m.value;eh[C]&&(T=Xd(T)),qf[C]&&(a=T,T=(a=String(a)).split(",").map(l=>Xd(l.trim())).join(", ")),this.buf.push(" ",w,'="',nh(T),'"')}var a;return this.buf.push(">"),!0}endElement(l){const c=l.nodeName.toLowerCase();Nc.hasOwnProperty(c)&&!Eu.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(l){this.buf.push(nh(l))}checkClobberedElement(l,c){if(c&&(l.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return c}}const Cv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ev=/([^\#-~ |!])/g;function nh(a){return a.replace(/&/g,"&amp;").replace(Cv,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Ev,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dl;function xr(a){return"content"in a&&function Tu(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Dn=(()=>((Dn=Dn||{})[Dn.NONE=0]="NONE",Dn[Dn.HTML=1]="HTML",Dn[Dn.STYLE=2]="STYLE",Dn[Dn.SCRIPT=3]="SCRIPT",Dn[Dn.URL=4]="URL",Dn[Dn.RESOURCE_URL=5]="RESOURCE_URL",Dn))();function ih(a){const l=Qi();return l?Tm(l.sanitize(Dn.HTML,a)||""):Oc(a,"HTML")?Tm(fo(a)):function Tv(a,l){let c=null;try{dl=dl||function wu(a){const l=new Am(a);return function vv(){try{return!!(new window.DOMParser).parseFromString(yu(""),"text/html")}catch(a){return!1}}()?new xm(l):l}(a);let d=l?String(l):"";c=dl.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=c.innerHTML,c=dl.getInertBodyElement(d)}while(d!==m);return yu((new Kf).sanitizeChildren(xr(c)||c))}finally{if(c){const d=xr(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}(ls(),ge(a))}function rh(a){const l=Qi();return l?l.sanitize(Dn.URL,a)||"":Oc(a,"URL")?fo(a):Xd(ge(a))}function Qi(){const a=ke();return a&&a[12]}const Lc="__ngContext__";function vi(a,l){a[Lc]=l}function Iu(a){const l=function hl(a){return a[Lc]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function ch(a){return a.ngOriginalError}function Rv(a,...l){a.error(...l)}class dh{constructor(){this._console=console}handleError(l){const c=this._findOriginalError(l),d=function Fm(a){return a&&a.ngErrorLogger||Rv}(l);d(this._console,"ERROR",l),c&&d(this._console,"ORIGINAL ERROR",c)}_findOriginalError(l){let c=l&&ch(l);for(;c&&ch(c);)c=ch(c);return c||null}}const xn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($t))();function v(a){return a instanceof Function?a():a}var O=(()=>((O=O||{})[O.Important=1]="Important",O[O.DashCase=2]="DashCase",O))();function he(a,l){return undefined(a,l)}function mt(a){const l=a[3];return rs(l)?l[3]:l}function rn(a){return tp(a[13])}function Du(a){return tp(a[4])}function tp(a){for(;null!==a&&!rs(a);)a=a[4];return a}function ka(a,l,c,d,f){if(null!=d){let m,w=!1;rs(d)?m=d:qi(d)&&(w=!0,d=d[0]);const C=an(d);0===a&&null!==c?null==f?Zo(l,c,C):Us(l,c,C,f||null,!0):1===a&&null!==c?Us(l,c,C,f||null,!0):2===a?function fh(a,l,c){const d=Au(a,l);d&&function mr(a,l,c,d){mn(a)?a.removeChild(l,c,d):l.removeChild(c)}(a,d,l,c)}(l,C,w):3===a&&l.destroyNode(C),null!=m&&function hD(a,l,c,d,f){const m=c[7];m!==an(c)&&ka(l,a,d,m,f);for(let C=10;C<c.length;C++){const T=c[C];sp(T[1],T,a,l,d,m)}}(l,a,m,c,f)}}function gl(a,l,c){if(mn(a))return a.createElement(l,c);{const d=null!==c?function cc(a){const l=a.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(c):null;return null===d?a.createElement(l):a.createElementNS(d,l)}}function ip(a,l){const c=a[9],d=c.indexOf(l),f=l[3];1024&l[2]&&(l[2]&=-1025,ga(f,-1)),c.splice(d,1)}function Fi(a,l){if(a.length<=10)return;const c=10+l,d=a[c];if(d){const f=d[17];null!==f&&f!==a&&ip(f,d),l>0&&(a[c-1][4]=d[4]);const m=zo(a,10+l);!function xu(a,l){sp(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const w=m[19];null!==w&&w.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Ov(a,l){if(!(256&l[2])){const c=l[11];mn(c)&&c.destroyNode&&sp(a,l,c,3,null,null),function po(a){let l=a[13];if(!l)return Pv(a[1],a);for(;l;){let c=null;if(qi(l))c=l[13];else{const d=l[10];d&&(c=d)}if(!c){for(;l&&!l[4]&&l!==a;)qi(l)&&Pv(l[1],l),l=l[3];null===l&&(l=a),qi(l)&&Pv(l[1],l),c=l&&l[4]}l=c}}(l)}}function Pv(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function Nv(a,l){let c;if(null!=a&&null!=(c=a.destroyHooks))for(let d=0;d<c.length;d+=2){const f=l[c[d]];if(!(f instanceof va)){const m=c[d+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const C=f[m[w]],T=m[w+1];try{T.call(C)}finally{}}else try{m.call(f)}finally{}}}}(a,l),function gr(a,l){const c=a.cleanup,d=l[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const w=c[m+1],C="function"==typeof w?w(l):an(l[w]),T=d[f=c[m+2]],A=c[m+3];"boolean"==typeof A?C.removeEventListener(c[m],T,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),m+=2}else{const w=d[f=c[m+1]];c[m].call(w)}if(null!==d){for(let m=f+1;m<d.length;m++)d[m]();l[7]=null}}(a,l),1===l[1].type&&mn(l[11])&&l[11].destroy();const c=l[17];if(null!==c&&rs(l[3])){c!==l[3]&&ip(c,l);const d=l[19];null!==d&&d.detachView(a)}}}function Uc(a,l,c){return function mC(a,l,c){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return c[0];if(2&d.flags){const f=a.data[d.directiveStart].encapsulation;if(f===Kt.None||f===Kt.Emulated)return null}return pi(d,c)}(a,l.parent,c)}function Us(a,l,c,d,f){mn(a)?a.insertBefore(l,c,d,f):l.insertBefore(c,d,f)}function Zo(a,l,c){mn(a)?a.appendChild(l,c):l.appendChild(c)}function ml(a,l,c,d,f){null!==d?Us(a,l,c,d,f):Zo(a,l,c)}function Au(a,l){return mn(a)?a.parentNode(l):l.parentNode}function Lv(a,l,c){return Vv(a,l,c)}let Vv=function _C(a,l,c){return 40&a.type?pi(a,c):null};function Mr(a,l,c,d){const f=Uc(a,d,l),m=l[11],C=Lv(d.parent||l[6],d,l);if(null!=f)if(Array.isArray(c))for(let T=0;T<c.length;T++)ml(m,f,c[T],C,!1);else ml(m,f,c,C,!1)}function $m(a,l){if(null!==l){const c=l.type;if(3&c)return pi(l,a);if(4&c)return rp(-1,a[l.index]);if(8&c){const d=l.child;if(null!==d)return $m(a,d);{const f=a[l.index];return rs(f)?rp(-1,f):an(f)}}if(32&c)return he(l,a)()||an(a[l.index]);{const d=Ra(a,l);return null!==d?Array.isArray(d)?d[0]:$m(mt(a[16]),d):$m(a,l.next)}}return null}function Ra(a,l){return null!==l?a[16][6].projection[l.projection]:null}function rp(a,l){const c=10+a+1;if(c<l.length){const d=l[c],f=d[1].firstChild;if(null!==f)return $m(d,f)}return l[7]}function Wm(a,l,c,d,f,m,w){for(;null!=c;){const C=d[c.index],T=c.type;if(w&&0===l&&(C&&vi(an(C),d),c.flags|=4),64!=(64&c.flags))if(8&T)Wm(a,l,c.child,d,f,m,!1),ka(l,a,f,C,m);else if(32&T){const A=he(c,d);let k;for(;k=A();)ka(l,a,f,k,m);ka(l,a,f,C,m)}else 16&T?yC(a,l,d,c,f,m):ka(l,a,f,C,m);c=w?c.projectionNext:c.next}}function sp(a,l,c,d,f,m){Wm(c,d,a.firstChild,l,f,m,!1)}function yC(a,l,c,d,f,m){const w=c[16],T=w[6].projection[d.projection];if(Array.isArray(T))for(let A=0;A<T.length;A++)ka(l,a,f,T[A],m);else Wm(a,l,T,w[3],f,m,!0)}function vC(a,l,c){mn(a)?a.setAttribute(l,"style",c):l.style.cssText=c}function qm(a,l,c){mn(a)?""===c?a.removeAttribute(l,"class"):a.setAttribute(l,"class",c):l.className=c}function Uv(a,l,c){let d=a.length;for(;;){const f=a.indexOf(l,c);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const m=l.length;if(f+m===d||a.charCodeAt(f+m)<=32)return f}c=f+1}}const wC="ng-template";function pD(a,l,c){let d=0;for(;d<a.length;){let f=a[d++];if(c&&"class"===f){if(f=a[d],-1!==Uv(f.toLowerCase(),l,0))return!0}else if(1===f){for(;d<a.length&&"string"==typeof(f=a[d++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function bC(a){return 4===a.type&&a.value!==wC}function CC(a,l,c){return l===(4!==a.type||c?a.value:wC)}function Wt(a,l,c){let d=4;const f=a.attrs||[],m=function gD(a){for(let l=0;l<a.length;l++)if(ds(a[l]))return l;return a.length}(f);let w=!1;for(let C=0;C<l.length;C++){const T=l[C];if("number"!=typeof T){if(!w)if(4&d){if(d=2|1&d,""!==T&&!CC(a,T,c)||""===T&&1===l.length){if(Yo(d))return!1;w=!0}}else{const A=8&d?T:l[++C];if(8&d&&null!==a.attrs){if(!pD(a.attrs,A,c)){if(Yo(d))return!1;w=!0}continue}const V=ph(8&d?"class":T,f,bC(a),c);if(-1===V){if(Yo(d))return!1;w=!0;continue}if(""!==A){let j;j=V>m?"":f[V+1].toLowerCase();const X=8&d?j:null;if(X&&-1!==Uv(X,A,0)||2&d&&A!==j){if(Yo(d))return!1;w=!0}}}}else{if(!w&&!Yo(d)&&!Yo(T))return!1;if(w&&Yo(T))continue;w=!1,d=T|1&d}}return Yo(d)||w}function Yo(a){return 0==(1&a)}function ph(a,l,c,d){if(null===l)return-1;let f=0;if(d||!c){let m=!1;for(;f<l.length;){const w=l[f];if(w===a)return f;if(3===w||6===w)m=!0;else{if(1===w||2===w){let C=l[++f];for(;"string"==typeof C;)C=l[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=m?1:2}return-1}return function mD(a,l){let c=a.indexOf(4);if(c>-1)for(c++;c<a.length;){const d=a[c];if("number"==typeof d)return-1;if(d===l)return c;c++}return-1}(l,a)}function Hv(a,l,c=!1){for(let d=0;d<l.length;d++)if(Wt(a,l[d],c))return!0;return!1}function _D(a,l){e:for(let c=0;c<l.length;c++){const d=l[c];if(a.length===d.length){for(let f=0;f<a.length;f++)if(a[f]!==d[f])continue e;return!0}}return!1}function Qo(a,l){return a?":not("+l.trim()+")":l}function EC(a){let l=a[0],c=1,d=2,f="",m=!1;for(;c<a.length;){let w=a[c];if("string"==typeof w)if(2&d){const C=a[++c];f+="["+w+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+w:4&d&&(f+=" "+w);else""!==f&&!Yo(w)&&(l+=Qo(m,f),f=""),d=w,m=m||!Yo(d);c++}return""!==f&&(l+=Qo(m,f)),l}const Bt={};function Xi(a){Jo(Gt(),ke(),li()+a,!1)}function Jo(a,l,c,d){if(!d)if(3==(3&l[2])){const m=a.preOrderCheckHooks;null!==m&&ks(l,m,c)}else{const m=a.preOrderHooks;null!==m&&Lo(l,m,0,c)}Fo(c)}function Km(a,l){return a<<17|l<<2}function go(a){return a>>17&32767}function Zm(a){return 2|a}function _l(a){return(131068&a)>>2}function Ym(a,l){return-131069&a|l<<2}function gh(a){return 1|a}function FC(a,l){const c=a.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],m=c[d+1];if(-1!==m){const w=a.data[m];Pd(f),w.contentQueries(2,l[m],m)}}}function up(a,l,c,d,f,m,w,C,T,A){const k=l.blueprint.slice();return k[0]=f,k[2]=140|d,cs(k),k[3]=k[15]=a,k[8]=c,k[10]=w||a&&a[10],k[11]=C||a&&a[11],k[12]=T||a&&a[12]||null,k[9]=A||a&&a[9]||null,k[6]=m,k[16]=2==l.type?a[16]:k,k}function _h(a,l,c,d,f){let m=a.data[l];if(null===m)m=function yh(a,l,c,d,f){const m=$l(),w=mc(),T=a.data[l]=function zC(a,l,c,d,f,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,c,l,d,f);return null===a.firstChild&&(a.firstChild=T),null!==m&&(w?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T)),T}(a,l,c,d,f),function vc(){return wt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const w=function Po(){const a=wt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return Ir(m,!0),m}function Pa(a,l,c,d){if(0===c)return-1;const f=l.length;for(let m=0;m<c;m++)l.push(d),a.blueprint.push(d),a.data.push(null);return f}function Hc(a,l,c){No(l);try{const d=a.viewQuery;null!==d&&rw(1,d,c);const f=a.template;null!==f&&VC(a,l,f,1,c),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&FC(a,l),a.staticViewQueries&&rw(2,a.viewQuery,c);const m=a.components;null!==m&&function CD(a,l){for(let c=0;c<l.length;c++)p_(a,l[c])}(l,m)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{l[2]&=-5,hr()}}function jc(a,l,c,d){const f=l[2];if(256!=(256&f)){No(l);try{cs(l),function Wl(a){return wt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==c&&VC(a,l,c,2,d);const w=3==(3&f);if(w){const A=a.preOrderCheckHooks;null!==A&&ks(l,A,null)}else{const A=a.preOrderHooks;null!==A&&Lo(l,A,0,null),ti(l,0)}if(function h_(a){for(let l=rn(a);null!==l;l=Du(l)){if(!l[2])continue;const c=l[9];for(let d=0;d<c.length;d++){const f=c[d],m=f[3];0==(1024&f[2])&&ga(m,1),f[2]|=1024}}}(l),function kD(a){for(let l=rn(a);null!==l;l=Du(l))for(let c=10;c<l.length;c++){const d=l[c],f=d[1];As(d)&&jc(f,d,f.template,d[8])}}(l),null!==a.contentQueries&&FC(a,l),w){const A=a.contentCheckHooks;null!==A&&ks(l,A)}else{const A=a.contentHooks;null!==A&&Lo(l,A,1),ti(l,1)}!function Qv(a,l){const c=a.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)Fo(~f);else{const m=f,w=c[++d],C=c[++d];Kl(w,m),C(2,l[m])}}}finally{Fo(-1)}}(a,l);const C=a.components;null!==C&&function lp(a,l){for(let c=0;c<l.length;c++)YC(a,l[c])}(l,C);const T=a.viewQuery;if(null!==T&&rw(2,T,d),w){const A=a.viewCheckHooks;null!==A&&ks(l,A)}else{const A=a.viewHooks;null!==A&&Lo(l,A,2),ti(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-73,1024&l[2]&&(l[2]&=-1025,ga(l[3],-1))}finally{hr()}}}function LC(a,l,c,d){const f=l[10],w=Ro(l);try{!w&&f.begin&&f.begin(),w&&Hc(a,l,d),jc(a,l,c,d)}finally{!w&&f.end&&f.end()}}function VC(a,l,c,d,f){const m=li(),w=2&d;try{Fo(-1),w&&l.length>20&&Jo(a,l,20,!1),c(d,f)}finally{Fo(m)}}function a_(a,l,c){if(Ul(l)){const f=l.directiveEnd;for(let m=l.directiveStart;m<f;m++){const w=a.data[m];w.contentQueries&&w.contentQueries(1,c[m],m)}}}function Jv(a,l,c){!Gl()||(function dp(a,l,c,d){const f=c.directiveStart,m=c.directiveEnd;a.firstCreatePass||hs(c,l),vi(d,l);const w=c.initialInputs;for(let C=f;C<m;C++){const T=a.data[C],A=os(T);A&&KC(l,c,T);const k=su(l,a,C,c);vi(k,l),null!==w&&d_(0,C-f,k,T,0,w),A&&(gi(c.index,l)[8]=k)}}(a,l,c,pi(c,l)),128==(128&c.flags)&&function u_(a,l,c){const d=c.directiveStart,f=c.directiveEnd,w=c.index,C=function wc(){return wt.lFrame.currentDirectiveIndex}();try{Fo(w);for(let T=d;T<f;T++){const A=a.data[T],k=l[T];_a(T),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&WC(A,k)}}finally{Fo(-1),_a(C)}}(a,l,c))}function Xv(a,l,c=pi){const d=l.localNames;if(null!==d){let f=l.index+1;for(let m=0;m<d.length;m+=2){const w=d[m+1],C=-1===w?c(l,a):a[w];a[f++]=C}}}function BC(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=cp(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function cp(a,l,c,d,f,m,w,C,T,A){const k=20+d,V=k+f,j=function l_(a,l){const c=[];for(let d=0;d<l;d++)c.push(d<a?null:Bt);return c}(k,V),X="function"==typeof A?A():A;return j[1]={type:a,blueprint:j,template:c,queries:null,viewQuery:C,declTNode:l,data:j.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:T,consts:X,incompleteFirstPass:!1}}function ew(a,l,c,d){const f=eE(l);null===c?f.push(d):(f.push(c),a.firstCreatePass&&tE(a).push(d,f.length-1))}function GC(a,l,c){for(let d in a)if(a.hasOwnProperty(d)){const f=a[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(l,f):c[d]=[l,f]}return c}function zc(a,l,c,d){let f=!1;if(Gl()){const m=function qC(a,l,c){const d=a.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const w=d[m];Hv(c,w.selectors,!1)&&(f||(f=[]),al(hs(c,l),a,w.type),os(w)?(tw(a,c),f.unshift(w)):f.push(w))}return f}(a,l,c),w=null===d?null:{"":-1};if(null!==m){f=!0,c_(c,a.data.length,m.length);for(let k=0;k<m.length;k++){const V=m[k];V.providersResolver&&V.providersResolver(V)}let C=!1,T=!1,A=Pa(a,l,m.length,null);for(let k=0;k<m.length;k++){const V=m[k];c.mergedAttrs=wa(c.mergedAttrs,V.hostAttrs),js(a,c,l,A,V),AD(A,V,w),null!==V.contentQueries&&(c.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(c.flags|=128);const j=V.type.prototype;!C&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(c.index),C=!0),!T&&(j.ngOnChanges||j.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c.index),T=!0),A++}!function ED(a,l){const d=l.directiveEnd,f=a.data,m=l.attrs,w=[];let C=null,T=null;for(let A=l.directiveStart;A<d;A++){const k=f[A],V=k.inputs,j=null===m||bC(l)?null:MD(V,m);w.push(j),C=GC(V,A,C),T=GC(k.outputs,A,T)}null!==C&&(C.hasOwnProperty("class")&&(l.flags|=16),C.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=w,l.inputs=C,l.outputs=T}(a,c)}w&&function xD(a,l,c){if(l){const d=a.localNames=[];for(let f=0;f<l.length;f+=2){const m=c[l[f+1]];if(null==m)throw new Fe(-301,!1);d.push(l[f],m)}}}(c,d,w)}return c.mergedAttrs=wa(c.mergedAttrs,c.attrs),f}function wh(a,l,c,d,f,m){const w=m.hostBindings;if(w){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const T=~l.index;(function DD(a){let l=a.length;for(;l>0;){const c=a[--l];if("number"==typeof c&&c<0)return c}return 0})(C)!=T&&C.push(T),C.push(d,f,w)}}function WC(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function tw(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function AD(a,l,c){if(c){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)c[l.exportAs[d]]=a;os(l)&&(c[""]=a)}}function c_(a,l,c){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+c,a.providerIndexes=l}function js(a,l,c,d,f){a.data[d]=f;const m=f.factory||(f.factory=Mi(f.type)),w=new va(m,os(f),null);a.blueprint[d]=w,c[d]=w,wh(a,l,0,d,Pa(a,c,f.hostVars,Bt),f)}function KC(a,l,c){const d=pi(l,a),f=BC(c),m=a[10],w=Pu(a,up(a,f,null,c.onPush?64:16,d,l,m,m.createRenderer(d,c),null,null));a[l.index]=w}function Xo(a,l,c,d,f,m){const w=pi(a,l);!function bh(a,l,c,d,f,m,w){if(null==m)mn(a)?a.removeAttribute(l,f,c):l.removeAttribute(f);else{const C=null==w?ge(m):w(m,d||"",f);mn(a)?a.setAttribute(l,f,C,c):c?l.setAttributeNS(c,f,C):l.setAttribute(f,C)}}(l[11],w,m,a.value,c,d,f)}function d_(a,l,c,d,f,m){const w=m[l];if(null!==w){const C=d.setInput;for(let T=0;T<w.length;){const A=w[T++],k=w[T++],V=w[T++];null!==C?d.setInput(c,V,A,k):c[k]=V}}}function MD(a,l){let c=null,d=0;for(;d<l.length;){const f=l[d];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,a[f],l[d+1])),d+=2}else d+=2;else d+=4}return c}function ZC(a,l,c,d){return new Array(a,!0,!1,l,null,0,d,c,null,null)}function YC(a,l){const c=gi(l,a);if(As(c)){const d=c[1];80&c[2]?jc(d,c,d.template,c[8]):c[5]>0&&f_(c)}}function f_(a){for(let d=rn(a);null!==d;d=Du(d))for(let f=10;f<d.length;f++){const m=d[f];if(1024&m[2]){const w=m[1];jc(w,m,w.template,m[8])}else m[5]>0&&f_(m)}const c=a[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=gi(c[d],a);As(f)&&f[5]>0&&f_(f)}}function p_(a,l){const c=gi(l,a),d=c[1];(function QC(a,l){for(let c=l.length;c<a.blueprint.length;c++)l.push(a.blueprint[c])})(d,c),Hc(d,c,c[8])}function Pu(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function g_(a){for(;a;){a[2]|=64;const l=mt(a);if(Ki(a)&&!l)return a;a=l}return null}function JC(a){!function nw(a){for(let l=0;l<a.components.length;l++){const c=a.components[l],d=Iu(c),f=d[1];LC(f,d,f.template,c)}}(a[8])}function rw(a,l,c){Pd(0),l(a,c)}const m_=(()=>Promise.resolve(null))();function eE(a){return a[7]||(a[7]=[])}function tE(a){return a.cleanup||(a.cleanup=[])}function nE(a,l){const c=a[9],d=c?c.get(dh,null):null;d&&d.handleError(l)}function Ch(a,l,c,d,f){for(let m=0;m<c.length;){const w=c[m++],C=c[m++],T=l[w],A=a.data[w];null!==A.setInput?A.setInput(T,f,d,C):T[C]=f}}function vl(a,l,c){const d=ro(l,a);!function pl(a,l,c){mn(a)?a.setValue(l,c):l.textContent=c}(a[11],d,c)}function __(a,l,c){let d=c?a.styles:null,f=c?a.classes:null,m=0;if(null!==l)for(let w=0;w<l.length;w++){const C=l[w];"number"==typeof C?m=C:1==m?f=pe(f,C):2==m&&(d=pe(d,C+": "+l[++w]+";"))}c?a.styles=d:a.stylesWithoutHost=d,c?a.classes=f:a.classesWithoutHost=f}const sw=new Rn("INJECTOR",-1);class iE{get(l,c=ms){if(c===ms){const d=new Error(`NullInjectorError: No provider for ${le(l)}!`);throw d.name="NullInjectorError",d}return c}}const ow=new Rn("Set Injector scope."),pp={},ND={};let aw;function rE(){return void 0===aw&&(aw=new iE),aw}function lw(a,l=null,c=null,d){const f=sE(a,l,c,d);return f._resolveInjectorDefTypes(),f}function sE(a,l=null,c=null,d){return new FD(a,c,l||rE(),d)}class FD{constructor(l,c,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];c&&Oi(c,C=>this.processProvider(C,l,c)),Oi([l],C=>this.processInjectorType(C,[],m)),this.records.set(sw,gp(void 0,this));const w=this.records.get(ow);this.scope=null!=w?w.value:null,this.source=f||("object"==typeof l?null:le(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,c=ms,d=vt.Default){this.assertNotDestroyed();const f=Oe(this),m=Ln(void 0);try{if(!(d&vt.SkipSelf)){let C=this.records.get(l);if(void 0===C){const T=function jD(a){return"function"==typeof a||"object"==typeof a&&a instanceof Rn}(l)&&zt(l);C=T&&this.injectableDefInScope(T)?gp(uw(l),pp):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(d&vt.Self?rE():this.parent).get(l,c=d&vt.Optional&&c===ms?null:c)}catch(w){if("NullInjectorError"===w.name){if((w[Wo]=w[Wo]||[]).unshift(le(l)),f)throw w;return function qo(a,l,c,d){const f=a[Wo];throw l[U]&&f.unshift(l[U]),a.message=function Vs(a,l,c,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let f=le(l);if(Array.isArray(l))f=l.map(le).join(" -> ");else if("object"==typeof l){let m=[];for(let w in l)if(l.hasOwnProperty(w)){let C=l[w];m.push(w+":"+("string"==typeof C?JSON.stringify(C):le(C)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${a.replace(D,"\n  ")}`}("\n"+a.message,f,c,d),a.ngTokenPath=f,a[Wo]=null,a}(w,l,"R3InjectorError",this.source)}throw w}finally{Ln(m),Oe(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((d,f)=>l.push(le(f))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(l,c,d){if(!(l=ie(l)))return!1;let f=Gi(l);const m=null==f&&l.ngModule||void 0,w=void 0===m?l:m,C=-1!==d.indexOf(w);if(void 0!==m&&(f=Gi(m)),null==f)return!1;if(null!=f.imports&&!C){let k;d.push(w);try{Oi(f.imports,V=>{this.processInjectorType(V,c,d)&&(void 0===k&&(k=[]),k.push(V))})}finally{}if(void 0!==k)for(let V=0;V<k.length;V++){const{ngModule:j,providers:X}=k[V];Oi(X,ye=>this.processProvider(ye,j,X||H))}}this.injectorDefTypes.add(w);const T=Mi(w)||(()=>new w);this.records.set(w,gp(T,pp));const A=f.providers;if(null!=A&&!C){const k=l;Oi(A,V=>this.processProvider(V,k,A))}return void 0!==m&&void 0!==l.providers}processProvider(l,c,d){let f=Gc(l=ie(l))?l:ie(l&&l.provide);const m=function VD(a,l,c){return dw(a)?gp(void 0,a.useValue):gp(cw(a),pp)}(l);if(Gc(l)||!0!==l.multi)this.records.get(f);else{let w=this.records.get(f);w||(w=gp(void 0,pp,!0),w.factory=()=>Et(w.multi),this.records.set(f,w)),f=l,w.multi.push(l)}this.records.set(f,m)}hydrate(l,c){return c.value===pp&&(c.value=ND,c.value=c.factory()),"object"==typeof c.value&&c.value&&function HD(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(l){if(!l.providedIn)return!1;const c=ie(l.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function uw(a){const l=zt(a),c=null!==l?l.factory:Mi(a);if(null!==c)return c;if(a instanceof Rn)throw new Fe(204,!1);if(a instanceof Function)return function LD(a){const l=a.length;if(l>0)throw qr(l,"?"),new Fe(204,!1);const c=function wr(a){const l=a&&(a[ts]||a[ar]);if(l){const c=function Ii(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),l}return null}(a);return null!==c?()=>c.factory(a):()=>new a}(a);throw new Fe(204,!1)}function cw(a,l,c){let d;if(Gc(a)){const f=ie(a);return Mi(f)||uw(f)}if(dw(a))d=()=>ie(a.useValue);else if(function aE(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...Et(a.deps||[]));else if(function oE(a){return!(!a||!a.useExisting)}(a))d=()=>ot(ie(a.useExisting));else{const f=ie(a&&(a.useClass||a.provide));if(!function UD(a){return!!a.deps}(a))return Mi(f)||uw(f);d=()=>new f(...Et(a.deps))}return d}function gp(a,l,c=!1){return{factory:a,value:l,multi:c?[]:void 0}}function dw(a){return null!==a&&"object"==typeof a&&J in a}function Gc(a){return"function"==typeof a}let ea=(()=>{class a{static create(c,d){var f;if(Array.isArray(c))return lw({name:""},d,c,"");{const m=null!==(f=c.name)&&void 0!==f?f:"";return lw({name:m},c.parent,c.providers,m)}}}return a.THROW_IF_NOT_FOUND=ms,a.NULL=new iE,a.\u0275prov=nn({token:a,providedIn:"any",factory:()=>ot(sw)}),a.__NG_ELEMENT_ID__=-1,a})();function MR(a,l){ol(Iu(a)[1],In())}function vw(a){let l=function yw(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),c=!0;const d=[a];for(;l;){let f;if(os(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Fe(903,"");f=l.\u0275dir}if(f){if(c){d.push(f);const w=a;w.inputs=b_(a.inputs),w.declaredInputs=b_(a.declaredInputs),w.outputs=b_(a.outputs);const C=f.hostBindings;C&&JD(a,C);const T=f.viewQuery,A=f.contentQueries;if(T&&YD(a,T),A&&QD(a,A),de(a.inputs,f.inputs),de(a.declaredInputs,f.declaredInputs),de(a.outputs,f.outputs),os(f)&&f.data.animation){const k=a.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let w=0;w<m.length;w++){const C=m[w];C&&C.ngInherit&&C(a),C===vw&&(c=!1)}}l=Object.getPrototypeOf(l)}!function ZD(a){let l=0,c=null;for(let d=a.length-1;d>=0;d--){const f=a[d];f.hostVars=l+=f.hostVars,f.hostAttrs=wa(f.hostAttrs,c=wa(c,f.hostAttrs))}}(d)}function b_(a){return a===xi?{}:a===H?[]:a}function YD(a,l){const c=a.viewQuery;a.viewQuery=c?(d,f)=>{l(d,f),c(d,f)}:l}function QD(a,l){const c=a.contentQueries;a.contentQueries=c?(d,f,m)=>{l(d,f,m),c(d,f,m)}:l}function JD(a,l){const c=a.hostBindings;a.hostBindings=c?(d,f)=>{l(d,f),c(d,f)}:l}let C_=null;function Nu(){if(!C_){const a=$t.Symbol;if(a&&a.iterator)C_=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<l.length;++c){const d=l[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(C_=d)}}}return C_}function _p(a){return!!gE(a)&&(Array.isArray(a)||!(a instanceof Map)&&Nu()in a)}function gE(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function mo(a,l,c){return a[l]=c}function Fu(a,l){return a[l]}function kr(a,l,c){return!Object.is(a[l],c)&&(a[l]=c,!0)}function Wc(a,l,c,d){const f=kr(a,l,c);return kr(a,l+1,d)||f}function yp(a,l,c,d,f){const m=Wc(a,l,c,d);return kr(a,l+2,f)||m}function vs(a,l,c,d,f,m){const w=Wc(a,l,c,d);return Wc(a,l+2,f,m)||w}function E_(a,l,c,d){const f=ke();return kr(f,oo(),l)&&(Gt(),Xo(zn(),f,a,l,c,d)),E_}function wi(a,l,c,d,f,m){const C=Wc(a,function Sr(){return wt.lFrame.bindingIndex}(),c,f);return Gr(2),C?l+ge(c)+d+ge(f)+m:Bt}function cx(a,l,c,d,f,m,w,C){const T=ke(),A=Gt(),k=a+20,V=A.firstCreatePass?function kR(a,l,c,d,f,m,w,C,T){const A=l.consts,k=_h(l,a,4,w||null,zr(A,C));zc(l,c,k,zr(A,T)),ol(l,k);const V=k.tViews=cp(2,k,d,f,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,A);return null!==l.queries&&(l.queries.template(l,k),V.queries=l.queries.embeddedTView(k)),k}(k,A,T,l,c,d,f,m,w):A.data[k];Ir(V,!1);const j=T[11].createComment("");Mr(A,T,j,V),vi(j,T),Pu(T,T[k]=ZC(j,T,j,V)),ss(V)&&Jv(A,T,V),null!=w&&Xv(T,V,C)}function Ie(a){return function us(a,l){return a[l]}(function Od(){return wt.lFrame.contextLView}(),20+a)}function Dh(a,l=vt.Default){const c=ke();return null===c?ot(a,l):Ec(In(),c,ie(a),l)}function S_(){throw new Error("invalid")}function D_(a,l,c){const d=ke();return kr(d,oo(),l)&&function Zr(a,l,c,d,f,m,w,C){const T=pi(l,c);let k,A=l.inputs;!C&&null!=A&&(k=A[d])?(Ch(a,c,k,d,f),Cd(l)&&function Ou(a,l){const c=gi(l,a);16&c[2]||(c[2]|=64)}(c,l.index)):3&l.type&&(d=function TD(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),f=null!=w?w(f,l.value||"",d):f,mn(m)?m.setProperty(T,d,f):Os(d)||(T.setProperty?T.setProperty(d,f):T[d]=f))}(Gt(),zn(),d,a,l,d[11],c,!1),D_}function Kc(a,l,c,d,f){const w=f?"class":"style";Ch(a,c,l.inputs[w],w,d)}function xh(a,l,c,d){const f=ke(),m=Gt(),w=20+a,C=f[11],T=f[w]=gl(C,l,function cm(){return wt.lFrame.currentNamespace}()),A=m.firstCreatePass?function vx(a,l,c,d,f,m,w){const C=l.consts,A=_h(l,a,2,f,zr(C,m));return zc(l,c,A,zr(C,w)),null!==A.attrs&&__(A,A.attrs,!1),null!==A.mergedAttrs&&__(A,A.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,A),A}(w,m,f,0,l,c,d):m.data[w];Ir(A,!0);const k=A.mergedAttrs;null!==k&&$r(C,T,k);const V=A.classes;null!==V&&qm(C,T,V);const j=A.styles;return null!==j&&vC(C,T,j),64!=(64&A.flags)&&Mr(m,f,T,A),0===function sl(){return wt.lFrame.elementDepthCount}()&&vi(T,f),function pc(){wt.lFrame.elementDepthCount++}(),ss(A)&&(Jv(m,f,A),a_(m,A,f)),null!==d&&Xv(f,A),xh}function Ep(){let a=In();mc()?_c():(a=a.parent,Ir(a,!1));const l=a;!function zl(){wt.lFrame.elementDepthCount--}();const c=Gt();return c.firstCreatePass&&(ol(c,a),Ul(a)&&c.queries.elementEnd(a)),null!=l.classesWithoutHost&&function fm(a){return 0!=(16&a.flags)}(l)&&Kc(c,l,ke(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Ud(a){return 0!=(32&a.flags)}(l)&&Kc(c,l,ke(),l.stylesWithoutHost,!1),Ep}function Dw(a,l,c,d){return xh(a,l,c,d),Ep(),Dw}function Tp(a,l,c){const d=ke(),f=Gt(),m=a+20,w=f.firstCreatePass?function xE(a,l,c,d,f){const m=l.consts,w=zr(m,d),C=_h(l,a,8,"ng-container",w);return null!==w&&__(C,w,!0),zc(l,c,C,zr(m,f)),null!==l.queries&&l.queries.elementStart(l,C),C}(m,f,d,l,c):f.data[m];Ir(w,!0);const C=d[m]=d[11].createComment("");return Mr(f,d,C,w),vi(C,d),ss(w)&&(Jv(f,d,w),a_(f,w,d)),null!=c&&Xv(d,w),Tp}function Ah(){let a=In();const l=Gt();return mc()?_c():(a=a.parent,Ir(a,!1)),l.firstCreatePass&&(ol(l,a),Ul(a)&&l.queries.elementEnd(a)),Ah}function xw(a,l,c){return Tp(a,l,c),Ah(),xw}function AE(){return ke()}function Aw(a){return!!a&&"function"==typeof a.then}function Ip(a){return!!a&&"function"==typeof a.subscribe}const x_=Ip;function Sp(a,l,c,d){const f=ke(),m=Gt(),w=In();return function kE(a,l,c,d,f,m,w,C){const T=ss(d),k=a.firstCreatePass&&tE(a),V=l[8],j=eE(l);let X=!0;if(3&d.type||C){const Ge=pi(d,l),st=C?C(Ge):Ge,Ae=j.length,_t=C?Yt=>C(an(Yt[d.index])):d.index;if(mn(c)){let Yt=null;if(!C&&T&&(Yt=function ME(a,l,c,d){const f=a.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const w=f[m];if(w===c&&f[m+1]===d){const C=l[7],T=f[m+2];return C.length>T?C[T]:null}"string"==typeof w&&(m+=2)}return null}(a,l,f,d.index)),null!==Yt)(Yt.__ngLastListenerFn__||Yt).__ngNextListenerFn__=m,Yt.__ngLastListenerFn__=m,X=!1;else{m=Mh(d,l,V,m,!1);const At=c.listen(st,f,m);j.push(m,At),k&&k.push(f,_t,Ae,Ae+1)}}else m=Mh(d,l,V,m,!0),st.addEventListener(f,m,w),j.push(m),k&&k.push(f,_t,Ae,w)}else m=Mh(d,l,V,m,!1);const ye=d.outputs;let Be;if(X&&null!==ye&&(Be=ye[f])){const Ge=Be.length;if(Ge)for(let st=0;st<Ge;st+=2){const Ot=l[Be[st]][Be[st+1]].subscribe(m),Ju=j.length;j.push(m,Ot),k&&k.push(f,d.index,Ju,-(Ju+1))}}}(m,f,f[11],w,a,l,!!c,d),Sp}function Mw(a,l,c,d){try{return!1!==c(d)}catch(f){return nE(a,f),!1}}function Mh(a,l,c,d,f){return function m(w){if(w===Function)return d;const C=2&a.flags?gi(a.index,l):l;0==(32&l[2])&&g_(C);let T=Mw(l,0,d,w),A=m.__ngNextListenerFn__;for(;A;)T=Mw(l,0,A,w)&&T,A=A.__ngNextListenerFn__;return f&&!1===T&&(w.preventDefault(),w.returnValue=!1),T}}function RE(a=1){return function Rf(a){return(wt.lFrame.contextLView=function bc(a,l){for(;a>0;)l=l[15],a--;return l}(a,wt.lFrame.contextLView))[8]}(a)}function wx(a,l){let c=null;const d=function jv(a){const l=a.attrs;if(null!=l){const c=l.indexOf(5);if(0==(1&c))return l[c+1]}return null}(a);for(let f=0;f<l.length;f++){const m=l[f];if("*"!==m){if(null===d?Hv(a,m,!0):_D(d,m))return f}else c=f}return c}function OE(a){const l=ke()[16][6];if(!l.projection){const d=l.projection=qr(a?a.length:1,null),f=d.slice();let m=l.child;for(;null!==m;){const w=a?wx(m,a):0;null!==w&&(f[w]?f[w].projectionNext=m:d[w]=m,f[w]=m),m=m.next}}}function PE(a,l=0,c){const d=ke(),f=Gt(),m=_h(f,20+a,16,null,c||null);null===m.projection&&(m.projection=l),_c(),64!=(64&m.flags)&&function dD(a,l,c){yC(l[11],0,l,c,Uc(a,c,l),Lv(c.parent||l[6],c,l))}(f,d,m)}function Pw(a,l,c,d,f){const m=a[c+1],w=null===l;let C=d?go(m):_l(m),T=!1;for(;0!==C&&(!1===T||w);){const k=a[C+1];UE(a[C],l)&&(T=!0,a[C+1]=d?gh(k):Zm(k)),C=d?go(k):_l(k)}T&&(a[c+1]=d?Zm(m):gh(m))}function UE(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&Sa(a,l)>=0}const bi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Nw(a){return a.substring(bi.key,bi.keyEnd)}function HE(a){return a.substring(bi.value,bi.valueEnd)}function jE(a,l){const c=bi.textEnd;return c===l?-1:(l=bi.keyEnd=function Tx(a,l,c){for(;l<c&&a.charCodeAt(l)>32;)l++;return l}(a,bi.key=l,c),xp(a,l,c))}function Ex(a,l){const c=bi.textEnd;let d=bi.key=xp(a,l,c);return c===d?-1:(d=bi.keyEnd=function zE(a,l,c){let d;for(;l<c&&(45===(d=a.charCodeAt(l))||95===d||(-33&d)>=65&&(-33&d)<=90||d>=48&&d<=57);)l++;return l}(a,d,c),d=GE(a,d,c),d=bi.value=xp(a,d,c),d=bi.valueEnd=function $E(a,l,c){let d=-1,f=-1,m=-1,w=l,C=w;for(;w<c;){const T=a.charCodeAt(w++);if(59===T)return C;34===T||39===T?C=w=R_(a,T,w,c):l===w-4&&85===m&&82===f&&76===d&&40===T?C=w=R_(a,41,w,c):T>32&&(C=w),m=f,f=d,d=-33&T}return C}(a,d,c),GE(a,d,c))}function k_(a){bi.key=0,bi.keyEnd=0,bi.value=0,bi.valueEnd=0,bi.textEnd=a.length}function xp(a,l,c){for(;l<c&&a.charCodeAt(l)<=32;)l++;return l}function GE(a,l,c,d){return(l=xp(a,l,c))<c&&l++,l}function R_(a,l,c,d){let f=-1,m=c;for(;m<d;){const w=a.charCodeAt(m++);if(w==l&&92!==f)return m;f=92==w&&92===f?0:w}throw new Error}function WE(a,l,c){return na(a,l,c,!1),WE}function Ap(a,l){return na(a,l,null,!0),Ap}function Fa(a){Va(O_,Ix,a,!1)}function Ix(a,l){for(let c=function BR(a){return k_(a),Ex(a,xp(a,0,bi.textEnd))}(l);c>=0;c=Ex(l,c))O_(a,Nw(l),HE(l))}function Sx(a){Va(Pi,La,a,!0)}function La(a,l){for(let c=function VR(a){return k_(a),jE(a,xp(a,0,bi.textEnd))}(l);c>=0;c=jE(l,c))Pi(a,Nw(l),!0)}function na(a,l,c,d){const f=ke(),m=Gt(),w=Gr(2);m.firstUpdatePass&&qE(m,a,w,d),l!==Bt&&kr(f,w,l)&&P_(m,m.data[li()],f,f[11],a,f[w+1]=function Vw(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=le(fo(a)))),a}(l,c),d,w)}function Va(a,l,c,d){const f=Gt(),m=Gr(2);f.firstUpdatePass&&qE(f,null,m,d);const w=ke();if(c!==Bt&&kr(w,m,c)){const C=f.data[li()];if(F_(C,d)&&!Dx(f,m)){let T=d?C.classesWithoutHost:C.stylesWithoutHost;null!==T&&(c=pe(T,c||"")),Kc(f,C,w,c,d)}else!function Lw(a,l,c,d,f,m,w,C){f===Bt&&(f=H);let T=0,A=0,k=0<f.length?f[0]:null,V=0<m.length?m[0]:null;for(;null!==k||null!==V;){const j=T<f.length?f[T+1]:void 0,X=A<m.length?m[A+1]:void 0;let Be,ye=null;k===V?(T+=2,A+=2,j!==X&&(ye=V,Be=X)):null===V||null!==k&&k<V?(T+=2,ye=k):(A+=2,ye=V,Be=X),null!==ye&&P_(a,l,c,d,ye,Be,w,C),k=T<f.length?f[T]:null,V=A<m.length?m[A]:null}}(f,C,w,w[11],w[m+1],w[m+1]=function xx(a,l,c){if(null==c||""===c)return H;const d=[],f=fo(c);if(Array.isArray(f))for(let m=0;m<f.length;m++)a(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&a(d,m,f[m]);else"string"==typeof f&&l(d,f);return d}(a,l,c),d,m)}}function Dx(a,l){return l>=a.expandoStartIndex}function qE(a,l,c,d){const f=a.data;if(null===f[c+1]){const m=f[li()],w=Dx(a,c);F_(m,d)&&null===l&&!w&&(l=!1),l=function UR(a,l,c,d){const f=function Zl(a){const l=wt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}(a);let m=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(c=kh(c=KE(null,a,l,c,d),l.attrs,d),m=null);else{const w=l.directiveStylingLast;if(-1===w||a[w]!==f)if(c=KE(f,a,l,c,d),null===m){let T=function HR(a,l,c){const d=c?l.classBindings:l.styleBindings;if(0!==_l(d))return a[go(d)]}(a,l,d);void 0!==T&&Array.isArray(T)&&(T=KE(null,a,l,T[1],d),T=kh(T,l.attrs,d),function jR(a,l,c,d){a[go(c?l.classBindings:l.styleBindings)]=d}(a,l,d,T))}else m=function zR(a,l,c){let d;const f=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<f;m++)d=kh(d,a[m].hostAttrs,c);return kh(d,l.attrs,c)}(a,l,d)}return void 0!==m&&(d?l.residualClasses=m:l.residualStyles=m),c}(f,m,l,d),function bx(a,l,c,d,f,m){let w=m?l.classBindings:l.styleBindings,C=go(w),T=_l(w);a[d]=c;let k,A=!1;if(Array.isArray(c)){const V=c;k=V[1],(null===k||Sa(V,k)>0)&&(A=!0)}else k=c;if(f)if(0!==T){const j=go(a[C+1]);a[d+1]=Km(j,C),0!==j&&(a[j+1]=Ym(a[j+1],d)),a[C+1]=function yD(a,l){return 131071&a|l<<17}(a[C+1],d)}else a[d+1]=Km(C,0),0!==C&&(a[C+1]=Ym(a[C+1],d)),C=d;else a[d+1]=Km(T,0),0===C?C=d:a[T+1]=Ym(a[T+1],d),T=d;A&&(a[d+1]=Zm(a[d+1])),Pw(a,k,d,!0),Pw(a,k,d,!1),function Cx(a,l,c,d,f){const m=f?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&Sa(m,l)>=0&&(c[d+1]=gh(c[d+1]))}(l,k,a,d,m),w=Km(C,T),m?l.classBindings=w:l.styleBindings=w}(f,m,l,c,w,d)}}function KE(a,l,c,d,f){let m=null;const w=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<w&&(m=l[C],d=kh(d,m.hostAttrs,f),m!==a);)C++;return null!==a&&(c.directiveStylingLast=C),d}function kh(a,l,c){const d=c?1:2;let f=-1;if(null!==l)for(let m=0;m<l.length;m++){const w=l[m];"number"==typeof w?f=w:f===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Pi(a,w,!!c||l[++m]))}return void 0===a?null:a}function O_(a,l,c){Pi(a,l,fo(c))}function P_(a,l,c,d,f,m,w,C){if(!(3&l.type))return;const T=a.data,A=T[C+1];Rh(function Gv(a){return 1==(1&a)}(A)?N_(T,l,c,f,_l(A),w):void 0)||(Rh(m)||function zv(a){return 2==(2&a)}(A)&&(m=N_(T,null,c,f,C,w)),function fD(a,l,c,d,f){const m=mn(a);if(l)f?m?a.addClass(c,d):c.classList.add(d):m?a.removeClass(c,d):c.classList.remove(d);else{let w=-1===d.indexOf("-")?void 0:O.DashCase;if(null==f)m?a.removeStyle(c,d,w):c.style.removeProperty(d);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),w|=O.Important),m?a.setStyle(c,d,f,w):c.style.setProperty(d,f,C?"important":"")}}}(d,w,ro(li(),c),f,m))}function N_(a,l,c,d,f,m){const w=null===l;let C;for(;f>0;){const T=a[f],A=Array.isArray(T),k=A?T[1]:T,V=null===k;let j=c[f+1];j===Bt&&(j=V?H:void 0);let X=V?du(j,d):k===d?j:void 0;if(A&&!Rh(X)&&(X=du(T,d)),Rh(X)&&(C=X,w))return C;const ye=a[f+1];f=w?go(ye):_l(ye)}if(null!==l){let T=m?l.residualClasses:l.residualStyles;null!=T&&(C=du(T,d))}return C}function Rh(a){return void 0!==a}function F_(a,l){return 0!=(a.flags&(l?16:32))}function Mp(a,l=""){const c=ke(),d=Gt(),f=a+20,m=d.firstCreatePass?_h(d,f,1,l,null):d.data[f],w=c[f]=function pr(a,l){return mn(a)?a.createText(l):a.createTextNode(l)}(c[11],l);Mr(d,c,w,m),Ir(m,!1)}function ZE(a){return Bu("",a,""),ZE}function Bu(a,l,c){const d=ke(),f=function _n(a,l,c,d){return kr(a,oo(),c)?l+ge(c)+d:Bt}(d,a,l,c);return f!==Bt&&vl(d,li(),f),Bu}function Oh(a,l,c,d,f){const m=ke(),w=wi(m,a,l,c,d,f);return w!==Bt&&vl(m,li(),w),Oh}const Nh=void 0;var Lx=["en",[["a","p"],["AM","PM"],Nh],[["AM","PM"],Nh,Nh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nh,"{1} 'at' {0}",Nh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function aT(a){const c=Math.floor(Math.abs(a)),d=a.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let bs={};function Pp(a){const l=function zw(a){return a.toLowerCase().replace(/_/g,"-")}(a);let c=V_(l);if(c)return c;const d=l.split("-")[0];if(c=V_(d),c)return c;if("en"===d)return Lx;throw new Error(`Missing locale data for the locale "${a}".`)}function Np(a){return Pp(a)[Tt.PluralCase]}function V_(a){return a in bs||(bs[a]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[a]),bs[a]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const U_="en-US";let lT=U_;function Vh(a,l,c,d,f){if(a=ie(a),Array.isArray(a))for(let m=0;m<a.length;m++)Vh(a[m],l,c,d,f);else{const m=Gt(),w=ke();let C=Gc(a)?a:ie(a.provide),T=cw(a);const A=In(),k=1048575&A.providerIndexes,V=A.directiveStart,j=A.providerIndexes>>20;if(Gc(a)||!a.multi){const X=new va(T,f,Dh),ye=ju(C,l,f?k:k+j,V);-1===ye?(al(hs(A,w),m,C),cb(m,a,l.length),l.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),c.push(X),w.push(X)):(c[ye]=X,w[ye]=X)}else{const X=ju(C,l,k+j,V),ye=ju(C,l,k,k+j),Be=X>=0&&c[X],Ge=ye>=0&&c[ye];if(f&&!Ge||!f&&!Be){al(hs(A,w),m,C);const st=function RT(a,l,c,d,f){const m=new va(a,c,Dh);return m.multi=[],m.index=l,m.componentProviders=0,kT(m,f,d&&!c),m}(f?Jx:Qx,c.length,f,d,T);!f&&Ge&&(c[ye].providerFactory=st),cb(m,a,l.length,0),l.push(C),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),c.push(st),w.push(st)}else cb(m,a,X>-1?X:ye,kT(c[f?ye:X],T,!f&&d));!f&&d&&Ge&&c[ye].componentProviders++}}}function cb(a,l,c,d){const f=Gc(l),m=function BD(a){return!!a.useClass}(l);if(f||m){const T=(m?ie(l.useClass):l).prototype.ngOnDestroy;if(T){const A=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const k=A.indexOf(c);-1===k?A.push(c,[d,T]):A[k+1].push(d,T)}else A.push(c,T)}}}function kT(a,l,c){return c&&a.componentProviders++,a.multi.push(l)-1}function ju(a,l,c,d){for(let f=c;f<d;f++)if(l[f]===a)return f;return-1}function Qx(a,l,c,d){return El(this.multi,[])}function Jx(a,l,c,d){const f=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,C=su(c,c[1],this.providerFactory.index,d);m=C.slice(0,w),El(f,m);for(let T=w;T<C.length;T++)m.push(C[T])}else m=[],El(f,m);return m}function El(a,l){for(let c=0;c<a.length;c++)l.push((0,a[c])());return l}function zp(a,l=[]){return c=>{c.providersResolver=(d,f)=>function MT(a,l,c){const d=Gt();if(d.firstCreatePass){const f=os(a);Vh(c,d.data,d.blueprint,f,!0),Vh(l,d.data,d.blueprint,f,!1)}}(d,f?f(a):a,l)}}class Bh{}class Gp{resolveComponentFactory(l){throw function PT(a){const l=Error(`No component factory found for ${le(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Qc=(()=>{class a{}return a.NULL=new Gp,a})();function NT(){return zu(In(),ke())}function zu(a,l){return new Uh(pi(a,l))}let Uh=(()=>{class a{constructor(c){this.nativeElement=c}}return a.__NG_ELEMENT_ID__=NT,a})();function FT(a){return a instanceof Uh?a.nativeElement:a}class X_{}let db=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function ey(){const a=ke(),c=gi(In().index,a);return function hb(a){return a[11]}(qi(c)?c:a)}(),a})(),$p=(()=>{class a{}return a.\u0275prov=nn({token:a,providedIn:"root",factory:()=>null}),a})();class fb{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const LT=new fb("13.3.10"),Wp={};function Jc(a,l,c,d,f=!1){for(;null!==c;){const m=l[c.index];if(null!==m&&d.push(an(m)),rs(m))for(let C=10;C<m.length;C++){const T=m[C],A=T[1].firstChild;null!==A&&Jc(T[1],T,A,d)}const w=c.type;if(8&w)Jc(a,l,c.child,d);else if(32&w){const C=he(c,l);let T;for(;T=C();)d.push(T)}else if(16&w){const C=Ra(l,c);if(Array.isArray(C))d.push(...C);else{const T=mt(l[16]);Jc(T[1],T,C,d,!0)}}c=f?c.projectionNext:c.next}return d}class Xc{constructor(l,c){this._lView=l,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,c=l[1];return Jc(c,l,c.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(rs(l)){const c=l[8],d=c?c.indexOf(this):-1;d>-1&&(Fi(l,d),zo(c,d))}this._attachedToViewContainer=!1}Ov(this._lView[1],this._lView)}onDestroy(l){ew(this._lView[1],this._lView,null,l)}markForCheck(){g_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function iw(a,l,c){const d=l[10];d.begin&&d.begin();try{jc(a,l,a.template,c)}catch(f){throw nE(l,f),f}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function np(a,l){sp(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=l}}class VT extends Xc{constructor(l){super(l),this._view=l}detectChanges(){JC(this._view)}checkNoChanges(){}get context(){return null}}class pb extends Qc{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const c=Jn(l);return new ty(c,this.ngModule)}}function gb(a){const l=[];for(let c in a)a.hasOwnProperty(c)&&l.push({propName:a[c],templateName:c});return l}class ty extends Bh{constructor(l,c){super(),this.componentDef=l,this.ngModule=c,this.componentType=l.type,this.selector=function TC(a){return a.map(EC).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return gb(this.componentDef.inputs)}get outputs(){return gb(this.componentDef.outputs)}create(l,c,d,f){const m=(f=f||this.ngModule)?function qp(a,l){return{get:(c,d,f)=>{const m=a.get(c,Wp,f);return m!==Wp||d===Wp?m:l.get(c,d,f)}}}(l,f.injector):l,w=m.get(X_,nl),C=m.get($p,null),T=w.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",k=d?function jC(a,l,c){if(mn(a))return a.selectRootElement(l,c===Kt.ShadowDom);let d="string"==typeof l?a.querySelector(l):l;return d.textContent="",d}(T,d,this.componentDef.encapsulation):gl(w.createRenderer(null,this.componentDef),A,function eA(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(A)),V=this.componentDef.onPush?576:528,j=function w_(a,l){return{components:[],scheduler:a||xn,clean:m_,playerHandler:l||null,flags:0}}(),X=cp(0,null,null,1,0,null,null,null,null,null),ye=up(null,X,j,V,null,null,w,T,C,m);let Be,Ge;No(ye);try{const st=function mw(a,l,c,d,f,m){const w=c[1];c[20]=a;const T=_h(w,20,2,"#host",null),A=T.mergedAttrs=l.hostAttrs;null!==A&&(__(T,A,!0),null!==a&&($r(f,a,A),null!==T.classes&&qm(f,a,T.classes),null!==T.styles&&vC(f,a,T.styles)));const k=d.createRenderer(a,l),V=up(c,BC(l),null,l.onPush?64:16,c[20],T,d,k,m||null,null);return w.firstCreatePass&&(al(hs(T,c),w,l.type),tw(w,T),c_(T,c.length,1)),Pu(c,V),c[20]=V}(k,this.componentDef,ye,w,T);if(k)if(d)$r(T,k,["ng-version",LT.full]);else{const{attrs:Ae,classes:_t}=function IC(a){const l=[],c=[];let d=1,f=2;for(;d<a.length;){let m=a[d];if("string"==typeof m)2===f?""!==m&&l.push(m,a[++d]):8===f&&c.push(m);else{if(!Yo(f))break;f=m}d++}return{attrs:l,classes:c}}(this.componentDef.selectors[0]);Ae&&$r(T,k,Ae),_t&&_t.length>0&&qm(T,k,_t.join(" "))}if(Ge=Sn(X,20),void 0!==c){const Ae=Ge.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const Yt=c[_t];Ae.push(null!=Yt?Array.from(Yt):null)}}Be=function _w(a,l,c,d,f){const m=c[1],w=function SD(a,l,c){const d=In();a.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),js(a,d,l,Pa(a,l,1,null),c));const f=su(l,a,d.directiveStart,d);vi(f,l);const m=pi(d,l);return m&&vi(m,l),f}(m,c,l);if(d.components.push(w),a[8]=w,f&&f.forEach(T=>T(w,l)),l.contentQueries){const T=In();l.contentQueries(1,w,T.directiveStart)}const C=In();return!m.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(Fo(C.index),wh(c[1],C,0,C.directiveStart,C.directiveEnd,l),WC(l,w)),w}(st,this.componentDef,ye,j,[MR]),Hc(X,ye,null)}finally{hr()}return new ed(this.componentType,Be,zu(Ge,ye),ye,Ge)}}class ed extends class OT{}{constructor(l,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new VT(f),this.componentType=l}get injector(){return new lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class Hh{}class ry{}const ia=new Map;class Kp extends Hh{constructor(l,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pb(this);const d=Xn(l);this._bootstrapComponents=v(d.bootstrap),this._r3Injector=sE(l,c,[{provide:Hh,useValue:this},{provide:Qc,useValue:this.componentFactoryResolver}],le(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,c=ea.THROW_IF_NOT_FOUND,d=vt.Default){return l===ea||l===Hh||l===sw?this:this._r3Injector.get(l,c,d)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class jh extends ry{constructor(l){super(),this.moduleType=l,null!==Xn(l)&&function UT(a){const l=new Set;!function c(d){const f=Xn(d,!0),m=f.id;null!==m&&(function Gu(a,l,c){if(l&&l!==c)throw new Error(`Duplicate module registered for ${a} - ${le(l)} vs ${le(l.name)}`)}(m,ia.get(m),d),ia.set(m,d));const w=v(f.imports);for(const C of w)l.has(C)||(l.add(C),c(C))}(a)}(l)}create(l){return new Kp(this.moduleType,l)}}function Zp(a,l,c){const d=Ri()+a,f=ke();return f[d]===Bt?mo(f,d,c?l.call(c):l()):Fu(f,d)}function _b(a,l,c,d){return function zT(a,l,c,d,f,m){const w=l+c;return kr(a,w,f)?mo(a,w+1,m?d.call(m,f):d(f)):Qp(a,w+1)}(ke(),Ri(),a,l,c,d)}function On(a,l,c,d,f){return function GT(a,l,c,d,f,m,w){const C=l+c;return Wc(a,C,f,m)?mo(a,C+2,w?d.call(w,f,m):d(f,m)):Qp(a,C+2)}(ke(),Ri(),a,l,c,d,f)}function Yp(a,l,c,d,f,m){return function $T(a,l,c,d,f,m,w,C){const T=l+c;return yp(a,T,f,m,w)?mo(a,T+3,C?d.call(C,f,m,w):d(f,m,w)):Qp(a,T+3)}(ke(),Ri(),a,l,c,d,f,m)}function HT(a,l,c,d,f,m,w){return function $h(a,l,c,d,f,m,w,C,T){const A=l+c;return vs(a,A,f,m,w,C)?mo(a,A+4,T?d.call(T,f,m,w,C):d(f,m,w,C)):Qp(a,A+4)}(ke(),Ri(),a,l,c,d,f,m,w)}function jT(a,l,c,d,f,m,w,C){const T=Ri()+a,A=ke(),k=vs(A,T,c,d,f,m);return kr(A,T+4,w)||k?mo(A,T+5,C?l.call(C,c,d,f,m,w):l(c,d,f,m,w)):Fu(A,T+5)}function zh(a,l,c,d,f,m,w,C,T){const A=Ri()+a,k=ke(),V=vs(k,A,c,d,f,m);return Wc(k,A+4,w,C)||V?mo(k,A+6,T?l.call(T,c,d,f,m,w,C):l(c,d,f,m,w,C)):Fu(k,A+6)}function Gh(a,l,c,d,f,m,w,C,T,A){const k=Ri()+a,V=ke();let j=vs(V,k,c,d,f,m);return yp(V,k+4,w,C,T)||j?mo(V,k+7,A?l.call(A,c,d,f,m,w,C,T):l(c,d,f,m,w,C,T)):Fu(V,k+7)}function yb(a,l,c,d){return function Tl(a,l,c,d,f,m){let w=l+c,C=!1;for(let T=0;T<f.length;T++)kr(a,w++,f[T])&&(C=!0);return C?mo(a,w,d.apply(m,f)):Qp(a,w)}(ke(),Ri(),a,l,c,d)}function Qp(a,l){const c=a[l];return c===Bt?void 0:c}function sy(a){return l=>{setTimeout(a,void 0,l)}}const vo=class YT extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,c,d){var f,m,w;let C=l,T=c||(()=>null),A=d;if(l&&"object"==typeof l){const V=l;C=null===(f=V.next)||void 0===f?void 0:f.bind(V),T=null===(m=V.error)||void 0===m?void 0:m.bind(V),A=null===(w=V.complete)||void 0===w?void 0:w.bind(V)}this.__isAsync&&(T=sy(T),C&&(C=sy(C)),A&&(A=sy(A)));const k=super.subscribe({next:C,error:T,complete:A});return l instanceof ee.w0&&l.add(k),k}};function vb(){return this._results[Nu()]()}class oy{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Nu(),d=oy.prototype;d[c]||(d[c]=vb)}get changes(){return this._changes||(this._changes=new vo)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,c){return this._results.reduce(l,c)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,c){const d=this;d.dirty=!1;const f=_i(l);(this._changesDetected=!function Sc(a,l,c){if(a.length!==l.length)return!1;for(let d=0;d<a.length;d++){let f=a[d],m=l[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let qh=(()=>{class a{}return a.__NG_ELEMENT_ID__=sA,a})();const wb=qh,rA=class extends wb{constructor(l,c,d){super(),this._declarationLView=l,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(l){const c=this._declarationTContainer.tViews,d=up(this._declarationLView,c,l,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(c)),Hc(c,d,l),new Xc(d)}};function sA(){return ay(In(),ke())}function ay(a,l){return 4&a.type?new rA(l,a,zu(a,l)):null}let td=(()=>{class a{}return a.__NG_ELEMENT_ID__=Xp,a})();function Xp(){return Kh(In(),ke())}const ly=td,uy=class extends ly{constructor(l,c,d){super(),this._lContainer=l,this._hostTNode=c,this._hostLView=d}get element(){return zu(this._hostTNode,this._hostLView)}get injector(){return new lo(this._hostTNode,this._hostLView)}get parentInjector(){const l=mi(this._hostTNode,this._hostLView);if(Bo(l)){const c=Ps(l,this._hostLView),d=Uo(l);return new lo(c[1].data[d+8],c)}return new lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const c=bb(this._lContainer);return null!==c&&c[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,c,d){const f=l.createEmbeddedView(c||{});return this.insert(f,d),f}createComponent(l,c,d,f,m){const w=l&&!function Wr(a){return"function"==typeof a}(l);let C;if(w)C=c;else{const V=c||{};C=V.index,d=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const T=w?l:new ty(Jn(l)),A=d||this.parentInjector;if(!m&&null==T.ngModule){const j=(w?A:this.parentInjector).get(Hh,null);j&&(m=j)}const k=T.create(A,f,void 0,m);return this.insert(k.hostView,C),k}insert(l,c){const d=l._lView,f=d[1];if(function rl(a){return rs(a[3])}(d)){const k=this.indexOf(l);if(-1!==k)this.detach(k);else{const V=d[3],j=new uy(V,V[6],V[3]);j.detach(j.indexOf(l))}}const m=this._adjustIndex(c),w=this._lContainer;!function Gm(a,l,c,d){const f=10+d,m=c.length;d>0&&(c[f-1][4]=l),d<m-10?(l[4]=c[f],yi(c,10+d,l)):(c.push(l),l[4]=null),l[3]=c;const w=l[17];null!==w&&c!==w&&function hh(a,l){const c=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===c?a[9]=[l]:c.push(l)}(w,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=128}(f,d,w,m);const C=rp(m,w),T=d[11],A=Au(T,w[7]);return null!==A&&function zm(a,l,c,d,f,m){d[0]=f,d[6]=l,sp(a,d,c,1,f,m)}(f,w[6],T,d,A,C),l.attachToViewContainerRef(),yi(nd(w),m,l),l}move(l,c){return this.insert(l,c)}indexOf(l){const c=bb(this._lContainer);return null!==c?c.indexOf(l):-1}remove(l){const c=this._adjustIndex(l,-1),d=Fi(this._lContainer,c);d&&(zo(nd(this._lContainer),c),Ov(d[1],d))}detach(l){const c=this._adjustIndex(l,-1),d=Fi(this._lContainer,c);return d&&null!=zo(nd(this._lContainer),c)?new Xc(d):null}_adjustIndex(l,c=0){return null==l?this.length+c:l}};function bb(a){return a[8]}function nd(a){return a[8]||(a[8]=[])}function Kh(a,l){let c;const d=l[a.index];if(rs(d))c=d;else{let f;if(8&a.type)f=an(d);else{const m=l[11];f=m.createComment("");const w=pi(a,l);Us(m,Au(m,w),f,function Fv(a,l){return mn(a)?a.nextSibling(l):l.nextSibling}(m,w),!1)}l[a.index]=c=ZC(d,l,f,a),Pu(l,c)}return new uy(c,a,l)}class Cb{constructor(l){this.queryList=l,this.matches=null}clone(){return new Cb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Eb{constructor(l=[]){this.queries=l}createEmbeddedView(l){const c=l.queries;if(null!==c){const d=null!==l.contentQueries?l.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const w=c.getByIndex(m);f.push(this.queries[w.indexInDeclarationView].clone())}return new Eb(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let c=0;c<this.queries.length;c++)null!==tg(l,c).matches&&this.queries[c].setDirty()}}class QT{constructor(l,c,d=null){this.predicate=l,this.flags=c,this.read=d}}class Tb{constructor(l=[]){this.queries=l}elementStart(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,c)}elementEnd(l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(l)}embeddedTView(l){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(l,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new Tb(c):null}template(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,c)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class cy{constructor(l,c=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(l,c){this.isApplyingToNode(c)&&this.matchTNode(l,c)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,c){this.elementStart(l,c)}embeddedTView(l,c){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,c),new cy(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(l,c,JT(c,m)),this.matchTNodeWithReadOption(l,c,ru(c,l,m,!1,!1))}else d===qh?4&c.type&&this.matchTNodeWithReadOption(l,c,-1):this.matchTNodeWithReadOption(l,c,ru(c,l,d,!1,!1))}matchTNodeWithReadOption(l,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Uh||f===td||f===qh&&4&c.type)this.addMatch(c.index,-2);else{const m=ru(c,l,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(l,c){null===this.matches?this.matches=[l,c]:this.matches.push(l,c)}}function JT(a,l){const c=a.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===l)return c[d+1];return null}function dy(a,l,c,d){return-1===c?function XT(a,l){return 11&a.type?zu(a,l):4&a.type?ay(a,l):null}(l,a):-2===c?function eI(a,l,c){return c===Uh?zu(l,a):c===qh?ay(l,a):c===td?Kh(l,a):void 0}(a,l,d):su(a,a[1],c,l)}function Ha(a,l,c,d){const f=l[19].queries[d];if(null===f.matches){const m=a.data,w=c.matches,C=[];for(let T=0;T<w.length;T+=2){const A=w[T];C.push(A<0?null:dy(l,m[A],w[T+1],c.metadata.read))}f.matches=C}return f.matches}function hy(a,l,c,d){const f=a.queries.getByIndex(c),m=f.matches;if(null!==m){const w=Ha(a,l,f,c);for(let C=0;C<m.length;C+=2){const T=m[C];if(T>0)d.push(w[C/2]);else{const A=m[C+1],k=l[-T];for(let V=10;V<k.length;V++){const j=k[V];j[17]===j[3]&&hy(j[1],j,A,d)}if(null!==k[9]){const V=k[9];for(let j=0;j<V.length;j++){const X=V[j];hy(X[1],X,A,d)}}}}}return d}function tI(a){const l=ke(),c=Gt(),d=Yl();Pd(d+1);const f=tg(c,d);if(a.dirty&&Ro(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const m=f.crossesNgTemplate?hy(c,l,d,[]):Ha(c,l,f,d);a.reset(m,FT),a.notifyOnChanges()}return!0}return!1}function fy(a,l,c){const d=Gt();d.firstCreatePass&&(Db(d,new QT(a,l,c),-1),2==(2&l)&&(d.staticViewQueries=!0)),eg(d,ke(),l)}function Zh(a,l,c,d){const f=Gt();if(f.firstCreatePass){const m=In();Db(f,new QT(l,c,d),m.index),function xb(a,l){const c=a.contentQueries||(a.contentQueries=[]);l!==(c.length?c[c.length-1]:-1)&&c.push(a.queries.length-1,l)}(f,a),2==(2&c)&&(f.staticContentQueries=!0)}eg(f,ke(),c)}function Ib(){return function Sb(a,l){return a[19].queries[l].queryList}(ke(),Yl())}function eg(a,l,c){const d=new oy(4==(4&c));ew(a,l,d,d.destroy),null===l[19]&&(l[19]=new Eb),l[19].queries.push(new Cb(d))}function Db(a,l,c){null===a.queries&&(a.queries=new Tb),a.queries.track(new cy(l,c))}function tg(a,l){return a.queries.getByIndex(l)}function nI(a,l){return ay(a,l)}function Nb(...a){}const dI=new Rn("Application Initializer");let by=(()=>{class a{constructor(c){this.appInits=c,this.resolve=Nb,this.reject=Nb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Aw(m))c.push(m);else if(x_(m)){const w=new Promise((C,T)=>{m.subscribe({complete:C,error:T})});c.push(w)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return a.\u0275fac=function(c){return new(c||a)(ot(dI,8))},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Ut=new Rn("AppId",{providedIn:"root",factory:function od(){return`${Kn()}${Kn()}${Kn()}`}});function Kn(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const St=new Rn("Platform Initializer"),hI=new Rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qu=new Rn("appBootstrapListener");let ig=(()=>{class a{log(c){console.log(c)}warn(c){console.warn(c)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const Fb=new Rn("LocaleId",{providedIn:"root",factory:()=>Vt(Fb,vt.Optional|vt.SkipSelf)||function sn(){return"undefined"!=typeof $localize&&$localize.locale||U_}()}),Hi=new Rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class mA{constructor(l,c){this.ngModuleFactory=l,this.componentFactories=c}}let Ku=(()=>{class a{compileModuleSync(c){return new jh(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=v(Xn(c).declarations).reduce((w,C)=>{const T=Jn(C);return T&&w.push(new ty(T)),w},[]);return new mA(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Lb=(()=>Promise.resolve(0))();function Cy(a){"undefined"==typeof Zone?Lb.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class ra{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vo(!1),this.onMicrotaskEmpty=new vo(!1),this.onStable=new vo(!1),this.onError=new vo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function sg(){let a=$t.requestAnimationFrame,l=$t.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function fI(a){const l=()=>{!function og(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call($t,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,ze(a),a.isCheckStableRunning=!0,ad(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),ze(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,w,C)=>{try{return Dl(a),c.invokeTask(f,m,w,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),ag(a)}},onInvoke:(c,d,f,m,w,C,T)=>{try{return Dl(a),c.invoke(f,m,w,C,T)}finally{a.shouldCoalesceRunChangeDetection&&l(),ag(a)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,ze(a),ad(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ra.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ra.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,c,d){return this._inner.run(l,c,d)}runTask(l,c,d,f){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+f,l,Sl,Nb,Nb);try{return m.runTask(w,c,d)}finally{m.cancelTask(w)}}runGuarded(l,c,d){return this._inner.runGuarded(l,c,d)}runOutsideAngular(l){return this._outer.run(l)}}const Sl={};function ad(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function ze(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Dl(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function ag(a){a._nesting--,ad(a)}class ld{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vo,this.onMicrotaskEmpty=new vo,this.onStable=new vo,this.onError=new vo}run(l,c,d){return l.apply(c,d)}runGuarded(l,c,d){return l.apply(c,d)}runOutsideAngular(l){return l()}runTask(l,c,d,f){return l.apply(c,d)}}let sa=(()=>{class a{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ra.assertNotInAngularZone(),Cy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cy(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,f){return[]}}return a.\u0275fac=function(c){return new(c||a)(ot(ra))},a.\u0275prov=nn({token:a,factory:a.\u0275fac}),a})(),lg=(()=>{class a{constructor(){this._applications=new Map,Yu.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Yu.findTestabilityInTree(this,c,d)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();class Zu{addToWindow(l){}findTestabilityInTree(l,c,d){return null}}function pI(a){Yu=a}let Yu=new Zu,xl=null;const Qu=new Rn("AllowMultipleToken"),Ey=new Rn("PlatformOnDestroy");class Ty{constructor(l,c){this.name=l,this.token=c}}function Vb(a,l,c=[]){const d=`Platform: ${l}`,f=new Rn(d);return(m=[])=>{let w=Iy();if(!w||w.injector.get(Qu,!1)){const C=[...c,...m,{provide:f,useValue:!0}];a?a(C):function cg(a){if(xl&&!xl.get(Qu,!1))throw new Fe(400,"");xl=a;const l=a.get(vr),c=a.get(St,null);c&&c.forEach(d=>d())}(function vA(a=[],l){return ea.create({name:l,providers:[{provide:ow,useValue:"platform"},{provide:Ey,useValue:()=>xl=null},...a]})}(C,d))}return function yA(a){const l=Iy();if(!l)throw new Fe(401,"");return l}()}}function Iy(){var a;return null!==(a=null==xl?void 0:xl.get(vr))&&void 0!==a?a:null}let vr=(()=>{class a{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const C=function mI(a,l){let c;return c="noop"===a?new ld:("zone.js"===a?void 0:a)||new ra({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),T=[{provide:ra,useValue:C}];return C.run(()=>{const A=ea.create({providers:T,parent:this.injector,name:c.moduleType.name}),k=c.create(A),V=k.injector.get(dh,null);if(!V)throw new Fe(402,"");return C.runOutsideAngular(()=>{const j=C.onError.subscribe({next:X=>{V.handleError(X)}});k.onDestroy(()=>{Al(this._modules,k),j.unsubscribe()})}),function Pn(a,l,c){try{const d=c();return Aw(d)?d.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>a.handleError(d)),d}}(V,C,()=>{const j=k.injector.get(by);return j.runInitializers(),j.donePromise.then(()=>(function uT(a){jt(a,"Expected localeId to be defined"),"string"==typeof a&&(lT=a.toLowerCase().replace(/_/g,"-"))}(k.injector.get(Fb,U_)||U_),this._moduleDoBootstrap(k),k))})})}bootstrapModule(c,d=[]){const f=dg({},d);return function ug(a,l,c){const d=new jh(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(hg);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Fe(403,"");c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Ey,null);null==c||c(),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(c){return new(c||a)(ot(ea))},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function dg(a,l){return Array.isArray(l)?l.reduce(dg,a):Object.assign(Object.assign({},a),l)}let hg=(()=>{class a{constructor(c,d,f,m){this._zone=c,this._injector=d,this._exceptionHandler=f,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new L.y(T=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{ra.assertNotInAngularZone(),Cy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{ra.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{A.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ce.T)(w,C.pipe((0,re.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new Fe(405,"");let f;f=c instanceof Bh?c:this._injector.get(Qc).resolveComponentFactory(c),this.componentTypes.push(f.componentType);const m=function gI(a){return a.isBoundToModule}(f)?void 0:this._injector.get(Hh),C=f.create(ea.NULL,[],d||f.selector,m),T=C.location.nativeElement,A=C.injector.get(sa,null),k=A&&C.injector.get(lg);return A&&k&&k.registerApplication(T,A),C.onDestroy(()=>{this.detachView(C.hostView),Al(this.components,C),k&&k.unregisterApplication(T)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;Al(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(qu,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(c){return new(c||a)(ot(ra),ot(ea),ot(dh),ot(by))},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Al(a,l){const c=a.indexOf(l);c>-1&&a.splice(c,1)}let Bb=!0,_I=!1;function oa(){return _I=!0,Bb}function yI(){if(_I)throw new Error("Cannot enable prod mode after platform setup.");Bb=!1}let An=(()=>{class a{}return a.__NG_ELEMENT_ID__=vI,a})();function vI(a){return function ef(a,l,c){if(Cd(a)&&!c){const d=gi(a.index,l);return new Xc(d,d)}return 47&a.type?new Xc(l[16],l):null}(In(),ke(),16==(16&a))}class Gb{constructor(){}supports(l){return _p(l)}create(l){return new EI(l)}}const Ml=(a,l)=>l;class EI{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Ml}forEachItem(l){let c;for(c=this._itHead;null!==c;c=c._next)l(c)}forEachOperation(l){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const w=!d||c&&c.currentIndex<ky(d,f,m)?c:d,C=ky(w,f,m),T=w.currentIndex;if(w===d)f--,d=d._nextRemoved;else if(c=c._next,null==w.previousIndex)f++;else{m||(m=[]);const A=C-f,k=T-f;if(A!=k){for(let j=0;j<A;j++){const X=j<m.length?m[j]:m[j]=0,ye=X+j;k<=ye&&ye<A&&(m[j]=X+1)}m[w.previousIndex]=k-A}}C!==T&&l(w,C,T)}}forEachPreviousItem(l){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachMovedItem(l){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}forEachIdentityChange(l){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)l(c)}diff(l){if(null==l&&(l=[]),!_p(l))throw new Fe(900,"");return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,m,w,c=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)m=l[C],w=this._trackByFn(C,m),null!==c&&Object.is(c.trackById,w)?(d&&(c=this._verifyReinsertion(c,m,w,C)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,w,C),d=!0),c=c._next}else f=0,function nx(a,l){if(Array.isArray(a))for(let c=0;c<a.length;c++)l(a[c]);else{const c=a[Nu()]();let d;for(;!(d=c.next()).done;)l(d.value)}}(l,C=>{w=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,w)?(d&&(c=this._verifyReinsertion(c,C,w,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,w,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,c,d,f){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._reinsertAfter(l,m,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._moveAfter(l,m,f)):l=this._addAfter(new nf(c,d),m,f),l}_verifyReinsertion(l,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?l=this._reinsertAfter(m,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const c=l._next;this._addToRemovals(this._unlink(l)),l=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,m=l._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(l,c,d),this._addToMoves(l,d),l}_moveAfter(l,c,d){return this._unlink(l),this._insertAfter(l,c,d),this._addToMoves(l,d),l}_addAfter(l,c,d){return this._insertAfter(l,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,c,d){const f=null===c?this._itHead:c._next;return l._next=f,l._prev=c,null===f?this._itTail=l:f._prev=l,null===c?this._itHead=l:c._next=l,null===this._linkedRecords&&(this._linkedRecords=new My),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const c=l._prev,d=l._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,l}_addToMoves(l,c){return l.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new My),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,c){return l.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class nf{constructor(l,c){this.item=l,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TA{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const c=l._prevDup,d=l._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class My{constructor(){this.map=new Map}put(l){const c=l.trackById;let d=this.map.get(c);d||(d=new TA,this.map.set(c,d)),d.add(l)}get(l,c){const f=this.map.get(l);return f?f.get(l,c):null}remove(l){const c=l.trackById;return this.map.get(c).remove(l)&&this.map.delete(c),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ky(a,l,c){const d=a.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+l+f}class Ry{constructor(){}supports(l){return l instanceof Map||gE(l)}create(){return new rf}}class rf{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let c;for(c=this._mapHead;null!==c;c=c._next)l(c)}forEachPreviousItem(l){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)l(c)}forEachChangedItem(l){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}diff(l){if(l){if(!(l instanceof Map||gE(l)))throw new Fe(900,"")}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,c){if(l){const d=l._prev;return c._next=l,c._prev=d,l._prev=c,d&&(d._next=c),l===this._mapHead&&(this._mapHead=c),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(l,c){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,c);const m=f._prev,w=f._next;return m&&(m._next=w),w&&(w._prev=m),f._next=null,f._prev=null,f}const d=new bo(l);return this._records.set(l,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,c){Object.is(c,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=c,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,c){l instanceof Map?l.forEach(c):Object.keys(l).forEach(d=>c(l[d],d))}}class bo{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $b(){return new hd([new Gb])}let hd=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||$b()),deps:[[a,new Aa,new Dr]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new Fe(901,"")}}return a.\u0275prov=nn({token:a,providedIn:"root",factory:$b}),a})();function Oy(){return new mg([new Ry])}let mg=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||Oy()),deps:[[a,new Aa,new Dr]]}}find(c){const d=this.factories.find(m=>m.supports(c));if(d)return d;throw new Fe(901,"")}}return a.\u0275prov=nn({token:a,providedIn:"root",factory:Oy}),a})();const SI=Vb(null,"core",[]);let DI=(()=>{class a{constructor(c){}}return a.\u0275fac=function(c){return new(c||a)(ot(hg))},a.\u0275mod=$i({type:a}),a.\u0275inj=Xt({}),a})()},3942:(Qe,Ce,N)=>{N.d(Ce,{Z:()=>Fe});var o=N(2090),ee=N(4859),L=N(9681),ce=N(1877);class re{constructor(ge,De){this._delegate=ge,this.firebase=De,(0,L._addComponent)(ge,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ge,De=L._DEFAULT_ENTRY_NAME){var We;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(ge);return!Ye.isInitialized()&&"EXPLICIT"===(null===(We=Ye.getComponent())||void 0===We?void 0:We.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:De})}_removeServiceInstance(ge,De=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(De)}_addComponent(ge){(0,L._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,L._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const Ue=function le(Ue){const ge={},De={__esModule:!0,initializeApp:function Me(je,G={}){const Ee=L.initializeApp(je,G);if((0,o.r3)(ge,Ee.name))return ge[Ee.name];const Y=new Ue(Ee,De);return ge[Ee.name]=Y,Y},app:Ye,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Se(je){const G=je.name,Ee=G.replace("-compat","");if(L._registerComponent(je)&&"PUBLIC"===je.type){const Y=(se=Ye())=>{if("function"!=typeof se[Ee])throw de.create("invalid-app-argument",{appName:G});return se[Ee]()};void 0!==je.serviceProps&&(0,o.ZB)(Y,je.serviceProps),De[Ee]=Y,Ue.prototype[Ee]=function(...se){return this._getService.bind(this,G).apply(this,je.multipleInstances?se:[])}}return"PUBLIC"===je.type?De[Ee]:null},removeApp:function We(je){delete ge[je]},useAsService:function He(je,G){return"serverAuth"===G?null:G},modularAPIs:L}};function Ye(je){if(!(0,o.r3)(ge,je=je||L._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:je});return ge[je]}return De.default=De,Object.defineProperty(De,"apps",{get:function Te(){return Object.keys(ge).map(je=>ge[je])}}),Ye.App=Ue,De}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ge(De){(0,o.ZB)(Ue,De)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),Ue}(),z=new ce.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=$;!function Re(Ue){(0,L.registerVersion)("@firebase/app-compat","0.1.26",Ue)}()},9681:(Qe,Ce,N)=>{N.r(Ce),N.d(Ce,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>ts,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>hn,_addOrOverwriteComponent:()=>nn,_apps:()=>cn,_clearComponents:()=>es,_components:()=>Fn,_getProvider:()=>Xt,_registerComponent:()=>zi,_removeServiceInstance:()=>zt,deleteApp:()=>vt,getApp:()=>ar,getApps:()=>Hr,initializeApp:()=>Qs,onLog:()=>Ln,registerVersion:()=>Mn,setLogLevel:()=>Js});var o=N(5861),ee=N(4859),L=N(1877),ce=N(2090),re=N(8766);class _e{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function de(W){const te=W.getComponent();return"VERSION"===(null==te?void 0:te.type)}(Pe)){const Je=Pe.getImmediate();return`${Je.library}/${Je.version}`}return null}).filter(Pe=>Pe).join(" ")}}const le="@firebase/app",$=new L.Yd("@firebase/app"),jt="[DEFAULT]",Ke={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,Fn=new Map;function hn(W,te){try{W.container.addComponent(te)}catch(Pe){$.debug(`Component ${te.name} failed to register with FirebaseApp ${W.name}`,Pe)}}function nn(W,te){W.container.addOrOverwriteComponent(te)}function zi(W){const te=W.name;if(Fn.has(te))return $.debug(`There were multiple attempts to register component ${te}.`),!1;Fn.set(te,W);for(const Pe of cn.values())hn(Pe,W);return!0}function Xt(W,te){const Pe=W.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),W.container.getProvider(te)}function zt(W,te,Pe=jt){Xt(W,te).clearInstance(Pe)}function es(){Fn.clear()}const Ii=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Gi{constructor(te,Pe,Je){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=Je,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}const ts="9.8.2";function Qs(W,te={}){"object"!=typeof te&&(te={name:te});const Pe=Object.assign({name:jt,automaticDataCollectionEnabled:!1},te),Je=Pe.name;if("string"!=typeof Je||!Je)throw Ii.create("bad-app-name",{appName:String(Je)});const yt=cn.get(Je);if(yt){if((0,ce.vZ)(W,yt.options)&&(0,ce.vZ)(Pe,yt.config))return yt;throw Ii.create("duplicate-app",{appName:Je})}const xt=new ee.H0(Je);for(const It of Fn.values())xt.addComponent(It);const wn=new Gi(W,Pe,xt);return cn.set(Je,wn),wn}function ar(W=jt){const te=cn.get(W);if(!te)throw Ii.create("no-app",{appName:W});return te}function Hr(){return Array.from(cn.values())}function vt(W){return br.apply(this,arguments)}function br(){return(br=(0,o.Z)(function*(W){const te=W.name;cn.has(te)&&(cn.delete(te),yield Promise.all(W.container.getProviders().map(Pe=>Pe.delete())),W.isDeleted=!0)})).apply(this,arguments)}function Mn(W,te,Pe){var Je;let yt=null!==(Je=Ke[W])&&void 0!==Je?Je:W;Pe&&(yt+=`-${Pe}`);const xt=yt.match(/\s|\//),wn=te.match(/\s|\//);if(xt||wn){const It=[`Unable to register library "${yt}" with version "${te}":`];return xt&&It.push(`library name "${yt}" contains illegal characters (whitespace or "/")`),xt&&wn&&It.push("and"),wn&&It.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void $.warn(It.join(" "))}zi(new ee.wA(`${yt}-version`,()=>({library:yt,version:te}),"VERSION"))}function Ln(W,te){if(null!==W&&"function"!=typeof W)throw Ii.create("invalid-log-argument");(0,L.Am)(W,te)}function Js(W){(0,L.Ub)(W)}const Vn="firebase-heartbeat-store";let Cr=null;function Io(){return Cr||(Cr=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(W,te)=>{0===te&&W.createObjectStore(Vn)}}).catch(W=>{throw Ii.create("storage-open",{originalErrorMessage:W.message})})),Cr}function ut(){return(ut=(0,o.Z)(function*(W){try{return(yield Io()).transaction(Vn).objectStore(Vn).get(Er(W))}catch(te){throw Ii.create("storage-get",{originalErrorMessage:te.message})}})).apply(this,arguments)}function Ct(W,te){return Si.apply(this,arguments)}function Si(){return(Si=(0,o.Z)(function*(W,te){try{const Je=(yield Io()).transaction(Vn,"readwrite");return yield Je.objectStore(Vn).put(te,Er(W)),Je.done}catch(Pe){throw Ii.create("storage-set",{originalErrorMessage:Pe.message})}})).apply(this,arguments)}function Er(W){return`${W.name}!${W.options.appId}`}class Di{constructor(te){this.container=te,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new q(Pe),this._heartbeatsCachePromise=this._storage.read().then(Je=>(this._heartbeatsCache=Je,Je))}triggerHeartbeat(){var te=this;return(0,o.Z)(function*(){const Je=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=xi();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==yt&&!te._heartbeatsCache.heartbeats.some(xt=>xt.date===yt))return te._heartbeatsCache.heartbeats.push({date:yt,agent:Je}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(xt=>{const wn=new Date(xt.date).valueOf();return Date.now()-wn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,o.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Pe=xi(),{heartbeatsToSend:Je,unsentEntries:yt}=function H(W,te=1024){const Pe=[];let Je=W.slice();for(const yt of W){const xt=Pe.find(wn=>wn.agent===yt.agent);if(xt){if(xt.dates.push(yt.date),K(Pe)>te){xt.dates.pop();break}}else if(Pe.push({agent:yt.agent,dates:[yt.date]}),K(Pe)>te){Pe.pop();break}Je=Je.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:Je}}(te._heartbeatsCache.heartbeats),xt=(0,ce.L)(JSON.stringify({version:2,heartbeats:Je}));return te._heartbeatsCache.lastSentHeartbeatDate=Pe,yt.length>0?(te._heartbeatsCache.heartbeats=yt,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),xt})()}}function xi(){return(new Date).toISOString().substring(0,10)}class q{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,o.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function Kt(W){return ut.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Pe=this;return(0,o.Z)(function*(){var Je;if(yield Pe._canUseIndexedDBPromise){const xt=yield Pe.read();return Ct(Pe.app,{lastSentHeartbeatDate:null!==(Je=te.lastSentHeartbeatDate)&&void 0!==Je?Je:xt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Pe=this;return(0,o.Z)(function*(){var Je;if(yield Pe._canUseIndexedDBPromise){const xt=yield Pe.read();return Ct(Pe.app,{lastSentHeartbeatDate:null!==(Je=te.lastSentHeartbeatDate)&&void 0!==Je?Je:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...te.heartbeats]})}})()}}function K(W){return(0,ce.L)(JSON.stringify({version:2,heartbeats:W})).length}!function xe(W){zi(new ee.wA("platform-logger",te=>new _e(te),"PRIVATE")),zi(new ee.wA("heartbeat",te=>new Di(te),"PRIVATE")),Mn(le,"0.7.25",W),Mn(le,"0.7.25","esm2017"),Mn("fire-js","")}("")},4859:(Qe,Ce,N)=>{N.d(Ce,{H0:()=>le,wA:()=>L,zt:()=>re});var o=N(5861),ee=N(2090);class L{constructor($,z,ie){this.name=$,this.instanceFactory=z,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ce="[DEFAULT]";class re{constructor($,z){this.name=$,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(z)){const ie=new ee.BH;if(this.instancesDeferred.set(z,ie),this.isInitialized(z)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:z});$e&&ie.resolve($e)}catch($e){}}return this.instancesDeferred.get(z).promise}getImmediate($){var z;const ie=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),$e=null!==(z=null==$?void 0:$.optional)&&void 0!==z&&z;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Re){if($e)return null;throw Re}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function de(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(z){}for(const[z,ie]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(z);try{const Re=this.getOrInitializeService({instanceIdentifier:$e});ie.resolve(Re)}catch(Re){}}}}clearInstance($=ce){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,o.Z)(function*(){const z=Array.from($.instances.values());yield Promise.all([...z.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...z.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ce){return this.instances.has($)}getOptions($=ce){return this.instancesOptions.get($)||{}}initialize($={}){const{options:z={}}=$,ie=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:ie,options:z});for(const[Re,Fe]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Re)&&Fe.resolve($e);return $e}onInit($,z){var ie;const $e=this.normalizeInstanceIdentifier(z),Re=null!==(ie=this.onInitCallbacks.get($e))&&void 0!==ie?ie:new Set;Re.add($),this.onInitCallbacks.set($e,Re);const Fe=this.instances.get($e);return Fe&&$(Fe,$e),()=>{Re.delete($)}}invokeOnInitCallbacks($,z){const ie=this.onInitCallbacks.get(z);if(ie)for(const $e of ie)try{$e($,z)}catch(Re){}}getOrInitializeService({instanceIdentifier:$,options:z={}}){let ie=this.instances.get($);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===ce?void 0:pe),options:z}),this.instances.set($,ie),this.instancesOptions.set($,z),this.invokeOnInitCallbacks(ie,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ie)}catch($e){}var pe;return ie||null}normalizeInstanceIdentifier($=ce){return this.component?this.component.multipleInstances?$:ce:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor($){this.name=$,this.providers=new Map}addComponent($){const z=this.getProvider($.name);if(z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const z=new re($,this);return this.providers.set($,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(Qe,Ce,N)=>{N.d(Ce,{Am:()=>pe,Ub:()=>le,Yd:()=>de,in:()=>ee});const o=[];var ee=(()=>{return($=ee||(ee={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",ee;var $})();const L={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ce=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},_e=($,z,...ie)=>{if(z<$.logLevel)return;const $e=(new Date).toISOString(),Re=re[z];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Re](`[${$e}]  ${$.name}:`,...ie)};class de{constructor(z){this.name=z,this._logLevel=ce,this._logHandler=_e,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in ee))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?L[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...z),this._logHandler(this,ee.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...z),this._logHandler(this,ee.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...z),this._logHandler(this,ee.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...z),this._logHandler(this,ee.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...z),this._logHandler(this,ee.ERROR,...z)}}function le($){o.forEach(z=>{z.setLogLevel($)})}function pe($,z){for(const ie of o){let $e=null;z&&z.level&&($e=L[z.level]),ie.userLogHandler=null===$?null:(Re,Fe,...Ue)=>{const ge=Ue.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(We){return null}}).filter(De=>De).join(" ");Fe>=(null!=$e?$e:Re.logLevel)&&$({level:ee[Fe].toLowerCase(),message:ge,args:Ue,type:Re.name})}}}},8766:(Qe,Ce,N)=>{N.d(Ce,{Lj:()=>Me,X3:()=>Ye});var o=N(5861);let L,ce;const de=new WeakMap,le=new WeakMap,pe=new WeakMap,$=new WeakMap,z=new WeakMap;let Re={get(G,Ee,Y){if(G instanceof IDBTransaction){if("done"===Ee)return le.get(G);if("objectStoreNames"===Ee)return G.objectStoreNames||pe.get(G);if("store"===Ee)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return De(G[Ee])},set:(G,Ee,Y)=>(G[Ee]=Y,!0),has:(G,Ee)=>G instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in G};function ge(G){return"function"==typeof G?function Ue(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...Ee){return G.apply(We(this),Ee),De(de.get(this))}:function(...Ee){return De(G.apply(We(this),Ee))}:function(Ee,...Y){const se=G.call(We(this),Ee,...Y);return pe.set(se,Ee.sort?Ee.sort():[Ee]),De(se)}}(G):(G instanceof IDBTransaction&&function $e(G){if(le.has(G))return;const Ee=new Promise((Y,se)=>{const ne=()=>{G.removeEventListener("complete",ve),G.removeEventListener("error",ue),G.removeEventListener("abort",ue)},ve=()=>{Y(),ne()},ue=()=>{se(G.error||new DOMException("AbortError","AbortError")),ne()};G.addEventListener("complete",ve),G.addEventListener("error",ue),G.addEventListener("abort",ue)});le.set(G,Ee)}(G),((G,Ee)=>Ee.some(Y=>G instanceof Y))(G,function re(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Re):G)}function De(G){if(G instanceof IDBRequest)return function ie(G){const Ee=new Promise((Y,se)=>{const ne=()=>{G.removeEventListener("success",ve),G.removeEventListener("error",ue)},ve=()=>{Y(De(G.result)),ne()},ue=()=>{se(G.error),ne()};G.addEventListener("success",ve),G.addEventListener("error",ue)});return Ee.then(Y=>{Y instanceof IDBCursor&&de.set(Y,G)}).catch(()=>{}),z.set(Ee,G),Ee}(G);if($.has(G))return $.get(G);const Ee=ge(G);return Ee!==G&&($.set(G,Ee),z.set(Ee,G)),Ee}const We=G=>z.get(G);function Ye(G,Ee,{blocked:Y,upgrade:se,blocking:ne,terminated:ve}={}){const ue=indexedDB.open(G,Ee),Le=De(ue);return se&&ue.addEventListener("upgradeneeded",gt=>{se(De(ue.result),gt.oldVersion,gt.newVersion,De(ue.transaction))}),Y&&ue.addEventListener("blocked",()=>Y()),Le.then(gt=>{ve&&gt.addEventListener("close",()=>ve()),ne&&gt.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Le}function Me(G,{blocked:Ee}={}){const Y=indexedDB.deleteDatabase(G);return Ee&&Y.addEventListener("blocked",()=>Ee()),De(Y).then(()=>{})}const Te=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],He=new Map;function je(G,Ee){if(!(G instanceof IDBDatabase)||Ee in G||"string"!=typeof Ee)return;if(He.get(Ee))return He.get(Ee);const Y=Ee.replace(/FromIndex$/,""),se=Ee!==Y,ne=Se.includes(Y);if(!(Y in(se?IDBIndex:IDBObjectStore).prototype)||!ne&&!Te.includes(Y))return;const ve=function(){var ue=(0,o.Z)(function*(Le,...gt){const qt=this.transaction(Le,ne?"readwrite":"readonly");let jt=qt.store;return se&&(jt=jt.index(gt.shift())),(yield Promise.all([jt[Y](...gt),ne&&qt.done]))[0]});return function(gt){return ue.apply(this,arguments)}}();return He.set(Ee,ve),ve}!function Fe(G){Re=G(Re)}(G=>ZV(KV({},G),{get:(Ee,Y,se)=>je(Ee,Y)||G.get(Ee,Y,se),has:(Ee,Y)=>!!je(Ee,Y)||G.has(Ee,Y)}))},5861:(Qe,Ce,N)=>{function o(L,ce,re,_e,de,le,pe){try{var $=L[le](pe),z=$.value}catch(ie){return void re(ie)}$.done?ce(z):Promise.resolve(z).then(_e,de)}function ee(L){return function(){var ce=this,re=arguments;return new Promise(function(_e,de){var le=L.apply(ce,re);function pe(z){o(le,_e,de,pe,$,"next",z)}function $(z){o(le,_e,de,pe,$,"throw",z)}pe(void 0)})}}N.d(Ce,{Z:()=>ee})}},Qe=>{Qe(Qe.s=5767)}]);