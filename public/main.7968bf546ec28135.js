"use strict";var B5=Object.defineProperty,U5=Object.defineProperties,H5=Object.getOwnPropertyDescriptors,rV=Object.getOwnPropertySymbols,j5=Object.prototype.hasOwnProperty,G5=Object.prototype.propertyIsEnumerable,sV=(Qe,be,N)=>be in Qe?B5(Qe,be,{enumerable:!0,configurable:!0,writable:!0,value:N}):Qe[be]=N,oV=(Qe,be)=>{for(var N in be||(be={}))j5.call(be,N)&&sV(Qe,N,be[N]);if(rV)for(var N of rV(be))G5.call(be,N)&&sV(Qe,N,be[N]);return Qe},aV=(Qe,be)=>U5(Qe,H5(be));(self.webpackChunkpranavam=self.webpackChunkpranavam||[]).push([[179],{2011:(Qe,be,N)=>{N.d(be,{Dh:()=>ae,GT:()=>_e,cc:()=>Re,hO:()=>ze,on:()=>$,pX:()=>re,xv:()=>pe});var o=N(5e3),ee=N(127),L=N(5813);Qe=N.hmd(Qe);const ue=["ngOnDestroy"],re=(De,$e,Ye,Ae={})=>new Proxy(De,{get:(Te,Se)=>Ye.runOutsideAngular(()=>{var je;if(De[Se])return(null===(je=null==Ae?void 0:Ae.spy)||void 0===je?void 0:je.get)&&Ae.spy.get(Se,De[Se]),De[Se];if(ue.indexOf(Se)>-1)return()=>{};const Ge=$e.toPromise().then(z=>{const Ee=z&&z[Se];return"function"==typeof Ee?Ee.bind(z):Ee&&Ee.then?Ee.then(Y=>Ye.run(()=>Y)):Ye.run(()=>Ee)});return new Proxy(()=>{},{get:(z,Ee)=>Ge[Ee],apply:(z,Ee,Y)=>Ge.then(se=>{var ne;const ye=se&&se(...Y);return(null===(ne=null==Ae?void 0:Ae.spy)||void 0===ne?void 0:ne.apply)&&Ae.spy.apply(Se,Y,ye),ye})})})}),_e=(De,$e)=>{$e.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Ae=>{Object.defineProperty(De.prototype,Ae,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Ae))})})};class ce{constructor($e){return $e}}const ae=new o.OlP("angularfire2.app.options"),pe=new o.OlP("angularfire2.app.name");function $(De,$e,Ye){const Te="object"==typeof Ye&&Ye||{};Te.name=Te.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const je=ee.Z.apps.filter(Ge=>Ge&&Ge.name===Te.name)[0]||$e.runOutsideAngular(()=>ee.Z.initializeApp(De,Te));try{JSON.stringify(De)!==JSON.stringify(je.options)&&G("error",`${je.name} Firebase App already initialized with different options${Qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ge){}return new ce(je)}const G=(De,...$e)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[De](...$e)},ie={provide:ce,useFactory:$,deps:[ae,o.R0b,[new o.FiY,pe]]};let ze=(()=>{class De{constructor(Ye){ee.Z.registerVersion("angularfire",L.q4.full,"core"),ee.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ee.Z.registerVersion("angular",o.q4F.full,Ye.toString())}static initializeApp(Ye,Ae){return{ngModule:De,providers:[{provide:ae,useValue:Ye},{provide:pe,useValue:Ae}]}}}return De.\u0275fac=function(Ye){return new(Ye||De)(o.LFG(o.Lbi))},De.\u0275mod=o.oAB({type:De}),De.\u0275inj=o.cJS({providers:[ie]}),De})();function Re(De,$e,Ye,Ae,Te){const[,Se,je]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===De)||[];if(Se)return function Fe(De,$e){try{return De.toString()===$e.toString()}catch(Ye){return De===$e}}(Te,je)||(ge("error",`${$e} was already initialized on the ${Ye} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Te,was:je})),Se;{const Ge=Ae();return globalThis.\u0275AngularfireInstanceCache.push([De,Ge,Te]),Ge}}const He=!!Qe.hot,ge=(De,...$e)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[De](...$e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Qe,be,N)=>{N.d(be,{q4:()=>Ei,iC:()=>Tu,HU:()=>Mc,vb:()=>jf,JM:()=>xa});var o=N(5e3),ee=N(5867),L=N(5861),ue=N(9681),re=N(2090),_e=N(4859),ce=N(1877),ae=N(8766);const pe="@firebase/installations",$="0.5.9",ie=`w:${$}`,ze="FIS_v2",$e=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(S){return S instanceof re.ZR&&S.code.includes("request-failed")}function Ae({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function Te(S){return{token:S.token,requestStatus:2,expiresIn:se(S.expiresIn),creationTime:Date.now()}}function Se(S,D){return je.apply(this,arguments)}function je(){return(je=(0,L.Z)(function*(S,D){const U=(yield D.json()).error;return $e.create("request-failed",{requestName:S,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Ge({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function z(S,{refreshToken:D}){const R=Ge(S);return R.append("Authorization",function ne(S){return`${ze} ${S}`}(D)),R}function Ee(S){return Y.apply(this,arguments)}function Y(){return(Y=(0,L.Z)(function*(S){const D=yield S();return D.status>=500&&D.status<600?S():D})).apply(this,arguments)}function se(S){return Number(S.replace("s","000"))}function ye(S,D){return le.apply(this,arguments)}function le(){return(le=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:D},{fid:R}){const U=Ae(S),J=Ge(S),oe=D.getImmediate({optional:!0});if(oe){const dt=yield oe.getHeartbeatsHeader();dt&&J.append("x-firebase-client",dt)}const tt={method:"POST",headers:J,body:JSON.stringify({fid:R,authVersion:ze,appId:S.appId,sdkVersion:ie})},ot=yield Ee(()=>fetch(U,tt));if(ot.ok){const dt=yield ot.json();return{fid:dt.fid||R,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Te(dt.authToken)}}throw yield Se("Create Installation",ot)})).apply(this,arguments)}function Ve(S){return new Promise(D=>{setTimeout(D,S)})}const $t=/^[cdef][\w-]{21}$/;function Ke(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const R=function ln(S){return function gt(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return $t.test(R)?R:""}catch(S){return""}}function Fn(S){return`${S.appName}!${S.appId}`}const un=new Map;function nn(S,D){const R=Fn(S);Ht(R,D),function es(S,D){const R=function Di(){return!Er&&"BroadcastChannel"in self&&(Er=new BroadcastChannel("[Firebase] FID Change"),Er.onmessage=S=>{Ht(S.data.key,S.data.fid)}),Er}();R&&R.postMessage({key:S,fid:D}),function zi(){0===un.size&&Er&&(Er.close(),Er=null)}()}(R,D)}function Ht(S,D){const R=un.get(S);if(R)for(const U of R)U(D)}let Er=null;const ar="firebase-installations-store";let zr=null;function vt(){return zr||(zr=(0,ae.X3)("firebase-installations-database",1,{upgrade:(S,D)=>{0===D&&S.createObjectStore(ar)}})),zr}function Tr(S,D){return kn.apply(this,arguments)}function kn(){return(kn=(0,L.Z)(function*(S,D){const R=Fn(S),J=(yield vt()).transaction(ar,"readwrite"),oe=J.objectStore(ar),Oe=yield oe.get(R);return yield oe.put(D,R),yield J.done,(!Oe||Oe.fid!==D.fid)&&nn(S,D.fid),D})).apply(this,arguments)}function Ln(S){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,L.Z)(function*(S){const D=Fn(S),U=(yield vt()).transaction(ar,"readwrite");yield U.objectStore(ar).delete(D),yield U.done})).apply(this,arguments)}function lr(S,D){return hi.apply(this,arguments)}function hi(){return(hi=(0,L.Z)(function*(S,D){const R=Fn(S),J=(yield vt()).transaction(ar,"readwrite"),oe=J.objectStore(ar),Oe=yield oe.get(R),tt=D(Oe);return void 0===tt?yield oe.delete(R):yield oe.put(tt,R),yield J.done,tt&&(!Oe||Oe.fid!==tt.fid)&&nn(S,tt.fid),tt})).apply(this,arguments)}function Vn(S){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,L.Z)(function*(S){let D;const R=yield lr(S.appConfig,U=>{const J=Do(U),oe=qt(S,J);return D=oe.registrationPromise,oe.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function Do(S){return xo(S||{fid:Ke(),registrationStatus:0})}function qt(S,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject($e.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},U=function ct(S,D){return Ct.apply(this,arguments)}(S,R);return{installationEntry:R,registrationPromise:U}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:xi(S)}:{installationEntry:D}}function Ct(){return(Ct=(0,L.Z)(function*(S,D){try{const R=yield ye(S,D);return Tr(S.appConfig,R)}catch(R){throw Ye(R)&&409===R.customData.serverCode?yield Ln(S.appConfig):yield Tr(S.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function xi(S){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,L.Z)(function*(S){let D=yield Gt(S.appConfig);for(;1===D.registrationStatus;)yield Ve(100),D=yield Gt(S.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Vn(S);return U||R}return D})).apply(this,arguments)}function Gt(S){return lr(S,D=>{if(!D)throw $e.create("installation-not-found");return xo(D)})}function xo(S){return function Ai(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Mi(S,D){return H.apply(this,arguments)}function H(){return(H=(0,L.Z)(function*({appConfig:S,heartbeatServiceProvider:D},R){const U=W(S,R),J=z(S,R),oe=D.getImmediate({optional:!0});if(oe){const dt=yield oe.getHeartbeatsHeader();dt&&J.append("x-firebase-client",dt)}const tt={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ie,appId:S.appId}})},ot=yield Ee(()=>fetch(U,tt));if(ot.ok)return Te(yield ot.json());throw yield Se("Generate Auth Token",ot)})).apply(this,arguments)}function W(S,{fid:D}){return`${Ae(S)}/${D}/authTokens:generate`}function Z(S){return xe.apply(this,arguments)}function xe(){return(xe=(0,L.Z)(function*(S,D=!1){let R;const U=yield lr(S.appConfig,oe=>{if(!xt(oe))throw $e.create("not-registered");const Oe=oe.authToken;if(!D&&Cn(Oe))return oe;if(1===Oe.requestStatus)return R=q(S,D),oe;{if(!navigator.onLine)throw $e.create("app-offline");const tt=Xn(oe);return R=Je(S,tt),tt}});return R?yield R:U.authToken})).apply(this,arguments)}function q(S,D){return te.apply(this,arguments)}function te(){return(te=(0,L.Z)(function*(S,D){let R=yield Ne(S.appConfig);for(;1===R.authToken.requestStatus;)yield Ve(100),R=yield Ne(S.appConfig);const U=R.authToken;return 0===U.requestStatus?Z(S,D):U})).apply(this,arguments)}function Ne(S){return lr(S,D=>{if(!xt(D))throw $e.create("not-registered");return function $i(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Je(S,D){return _t.apply(this,arguments)}function _t(){return(_t=(0,L.Z)(function*(S,D){try{const R=yield Mi(S,D),U=Object.assign(Object.assign({},D),{authToken:R});return yield Tr(S.appConfig,U),R}catch(R){if(!Ye(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Tr(S.appConfig,U)}else yield Ln(S.appConfig);throw R}})).apply(this,arguments)}function xt(S){return void 0!==S&&2===S.registrationStatus}function Cn(S){return 2===S.requestStatus&&!function It(S){const D=Date.now();return D<S.creationTime||S.creationTime+S.expiresIn<D+36e5}(S)}function Xn(S){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:D})}function il(){return(il=(0,L.Z)(function*(S){const D=S,{installationEntry:R,registrationPromise:U}=yield Vn(D);return U?U.catch(console.error):Z(D).catch(console.error),R.fid})).apply(this,arguments)}function rl(){return(rl=(0,L.Z)(function*(S,D=!1){const R=S;return yield ei(R),(yield Z(R,D)).token})).apply(this,arguments)}function ei(S){return qi.apply(this,arguments)}function qi(){return(qi=(0,L.Z)(function*(S){const{registrationPromise:D}=yield Vn(S);D&&(yield D)})).apply(this,arguments)}function da(S){return $e.create("missing-app-config-values",{valueName:S})}const cr="installations",pt=S=>{const D=S.getProvider("app").getImmediate(),R=function yi(S){if(!S||!S.options)throw da("App Configuration");if(!S.name)throw da("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!S.options[R])throw da(R);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,ue._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},cn=S=>{const D=S.getProvider("app").getImmediate(),R=(0,ue._getProvider)(D,cr).getImmediate();return{getId:()=>function ql(S){return il.apply(this,arguments)}(R),getToken:J=>function Wl(S){return rl.apply(this,arguments)}(R,J)}};(function dr(){(0,ue._registerComponent)(new _e.wA(cr,pt,"PUBLIC")),(0,ue._registerComponent)(new _e.wA("installations-internal",cn,"PRIVATE"))})(),(0,ue.registerVersion)(pe,$),(0,ue.registerVersion)(pe,$,"esm2017");const ns="@firebase/remote-config",Bn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class to{constructor(D,R,U,J){this.client=D,this.storage=R,this.storageCache=U,this.logger=J}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,J=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var R=this;return(0,L.Z)(function*(){const[U,J]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(J&&R.isCachedDataFresh(D.cacheMaxAgeMillis,U))return J;D.eTag=J&&J.eTag;const oe=yield R.client.fetch(D),Oe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Oe.push(R.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Oe),oe})()}}function Sd(S=navigator){return S.languages&&S.languages[0]||S.language}class ki{constructor(D,R,U,J,oe,Oe){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=U,this.projectId=J,this.apiKey=oe,this.appId=Oe}fetch(D){var R=this;return(0,L.Z)(function*(){const[U,J]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ot={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:J,app_id:R.appId,language_code:Sd()},dt={method:"POST",headers:tt,body:JSON.stringify(ot)},Lt=fetch(Oe,dt),Et=new Promise((kr,Yr)=>{D.signal.addEventListener(()=>{const ka=new Error("The operation was aborted.");ka.name="AbortError",Yr(ka)})});let ii;try{yield Promise.race([Lt,Et]),ii=yield Lt}catch(kr){let Yr="fetch-client-network";throw"AbortError"===kr.name&&(Yr="fetch-timeout"),Bn.create(Yr,{originalErrorMessage:kr.message})}let Kn=ii.status;const Ko=ii.headers.get("ETag")||void 0;let Rs,fr;if(200===ii.status){let kr;try{kr=yield ii.json()}catch(Yr){throw Bn.create("fetch-client-parse",{originalErrorMessage:Yr.message})}Rs=kr.entries,fr=kr.state}if("INSTANCE_STATE_UNSPECIFIED"===fr?Kn=500:"NO_CHANGE"===fr?Kn=304:("NO_TEMPLATE"===fr||"EMPTY_CONFIG"===fr)&&(Rs={}),304!==Kn&&200!==Kn)throw Bn.create("fetch-status",{httpStatus:Kn});return{status:Kn,eTag:Ko,config:Rs}})()}}class qg{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,L.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:U}){var J=this;return(0,L.Z)(function*(){yield function no(S,D){return new Promise((R,U)=>{const J=Math.max(D-Date.now(),0),oe=setTimeout(R,J);S.addEventListener(()=>{clearTimeout(oe),U(Bn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const oe=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Dd(S){if(!(S instanceof re.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}(oe))throw oe;const Oe={throttleEndTimeMillis:Date.now()+(0,re.$s)(U),backoffCount:U+1};return yield J.storage.setThrottleMetadata(Oe),J.attemptFetch(D,Oe)}})()}}class xd{constructor(D,R,U,J,oe){this.app=D,this._client=R,this._storageCache=U,this._storage=J,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function dc(S,D){const R=S.target.error||void 0;return Bn.create(D,{originalErrorMessage:R&&R.message})}const io="app_namespace_store";class Yg{constructor(D,R,U,J=function Kg(){return new Promise((S,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{D(dc(U,"storage-open"))},R.onsuccess=U=>{S(U.target.result)},R.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(io,{keyPath:"compositeKey"})}}catch(R){D(Bn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=D,this.appName=R,this.namespace=U,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,L.Z)(function*(){const U=yield R.openDbPromise;return new Promise((J,oe)=>{const tt=U.transaction([io],"readonly").objectStore(io),ot=R.createCompositeKey(D);try{const dt=tt.get(ot);dt.onerror=Lt=>{oe(dc(Lt,"storage-get"))},dt.onsuccess=Lt=>{const Et=Lt.target.result;J(Et?Et.value:void 0)}}catch(dt){oe(Bn.create("storage-get",{originalErrorMessage:dt&&dt.message}))}})})()}set(D,R){var U=this;return(0,L.Z)(function*(){const J=yield U.openDbPromise;return new Promise((oe,Oe)=>{const ot=J.transaction([io],"readwrite").objectStore(io),dt=U.createCompositeKey(D);try{const Lt=ot.put({compositeKey:dt,value:R});Lt.onerror=Et=>{Oe(dc(Et,"storage-set"))},Lt.onsuccess=()=>{oe()}}catch(Lt){Oe(Bn.create("storage-set",{originalErrorMessage:Lt&&Lt.message}))}})})()}delete(D){var R=this;return(0,L.Z)(function*(){const U=yield R.openDbPromise;return new Promise((J,oe)=>{const tt=U.transaction([io],"readwrite").objectStore(io),ot=R.createCompositeKey(D);try{const dt=tt.delete(ot);dt.onerror=Lt=>{oe(dc(Lt,"storage-delete"))},dt.onsuccess=()=>{J()}}catch(dt){oe(Bn.create("storage-delete",{originalErrorMessage:dt&&dt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Md{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,L.Z)(function*(){const R=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),oe=yield R;oe&&(D.lastFetchStatus=oe);const Oe=yield U;Oe&&(D.lastSuccessfulFetchTimestampMillis=Oe);const tt=yield J;tt&&(D.activeConfig=tt)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Ql(){return kd.apply(this,arguments)}function kd(){return(kd=(0,L.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}!function ha(){(0,ue._registerComponent)(new _e.wA("remote-config",function S(D,{instanceIdentifier:R}){const U=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Bn.create("registration-window");if(!(0,re.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Oe,appId:tt}=U.options;if(!oe)throw Bn.create("registration-project-id");if(!Oe)throw Bn.create("registration-api-key");if(!tt)throw Bn.create("registration-app-id");const ot=new Yg(tt,U.name,R=R||"firebase"),dt=new Md(ot),Lt=new ce.Yd(ns);Lt.logLevel=ce.in.ERROR;const Et=new ki(J,ue.SDK_VERSION,R,oe,Oe,tt),ii=new qg(Et,ot),Kn=new to(ii,ot,dt,Lt),Ko=new xd(U,Kn,dt,ot,Lt);return function pn(S){const D=(0,re.m9)(S);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ko),Ko},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(ns,"0.3.8"),(0,ue.registerVersion)(ns,"0.3.8","esm2017")}();const Rd="/firebase-messaging-sw.js",Ri="/firebase-cloud-messaging-push-scope",ko="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fa="google.c.a.c_id",Od="google.c.a.c_l",Nf="google.c.a.ts",Oi="google.c.a.e";var pa=(()=>{return(S=pa||(pa={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",pa;var S})();function Zi(S){const D=new Uint8Array(S);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Pd(S){const R=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),J=new Uint8Array(U.length);for(let oe=0;oe<U.length;++oe)J[oe]=U.charCodeAt(oe);return J}const Pi="fcm_token_details_db",xr="fcm_token_object_Store";function hc(S){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,L.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(Pi))return null;let D=null;return(yield(0,ae.X3)(Pi,5,{upgrade:(U=(0,L.Z)(function*(J,oe,Oe,tt){var ot;if(oe<2||!J.objectStoreNames.contains(xr))return;const dt=tt.objectStore(xr),Lt=yield dt.index("fcmSenderId").get(S);if(yield dt.clear(),Lt)if(2===oe){const Et=Lt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;D={token:Et.fcmToken,createTime:null!==(ot=Et.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Zi(Et.vapidKey)}}}else if(3===oe){const Et=Lt;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Zi(Et.auth),p256dh:Zi(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Zi(Et.vapidKey)}}}else if(4===oe){const Et=Lt;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Zi(Et.auth),p256dh:Zi(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Zi(Et.vapidKey)}}}}),function(oe,Oe,tt,ot){return U.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Pi),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),fc(D)?D:null;var U}),Nd.apply(this,arguments)}function fc(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:D}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ls="firebase-messaging-store";let Ff=null;function gn(){return Ff||(Ff=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(S,D)=>{0===D&&S.createObjectStore(ls)}})),Ff}function ul(S){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,L.Z)(function*(S){const D=vi(S),U=yield(yield gn()).transaction(ls).objectStore(ls).get(D);if(U)return U;{const J=yield hc(S.appConfig.senderId);if(J)return yield on(S,J),J}})).apply(this,arguments)}function on(S,D){return cl.apply(this,arguments)}function cl(){return(cl=(0,L.Z)(function*(S,D){const R=vi(S),J=(yield gn()).transaction(ls,"readwrite");return yield J.objectStore(ls).put(D,R),yield J.done,D})).apply(this,arguments)}function Jl(S){return ro.apply(this,arguments)}function ro(){return(ro=(0,L.Z)(function*(S){const D=vi(S),U=(yield gn()).transaction(ls,"readwrite");yield U.objectStore(ls).delete(D),yield U.done})).apply(this,arguments)}function vi({appConfig:S}){return S.appId}const Dn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function us(S,D){return wi.apply(this,arguments)}function wi(){return(wi=(0,L.Z)(function*(S,D){const R=yield _a(S),U=so(D),J={method:"POST",headers:R,body:JSON.stringify(U)};let oe;try{oe=yield(yield fetch(cs(S.appConfig),J)).json()}catch(Oe){throw Dn.create("token-subscribe-failed",{errorInfo:Oe})}if(oe.error)throw Dn.create("token-subscribe-failed",{errorInfo:oe.error.message});if(!oe.token)throw Dn.create("token-subscribe-no-token");return oe.token})).apply(this,arguments)}function Po(S,D){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,L.Z)(function*(S,D){const R=yield _a(S),U=so(D.subscriptionOptions),J={method:"PATCH",headers:R,body:JSON.stringify(U)};let oe;try{oe=yield(yield fetch(`${cs(S.appConfig)}/${D.token}`,J)).json()}catch(Oe){throw Dn.create("token-update-failed",{errorInfo:Oe})}if(oe.error)throw Dn.create("token-update-failed",{errorInfo:oe.error.message});if(!oe.token)throw Dn.create("token-update-no-token");return oe.token})).apply(this,arguments)}function dl(S,D){return qr.apply(this,arguments)}function qr(){return(qr=(0,L.Z)(function*(S,D){const U={method:"DELETE",headers:yield _a(S)};try{const oe=yield(yield fetch(`${cs(S.appConfig)}/${D}`,U)).json();if(oe.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:oe.error.message})}catch(J){throw Dn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function cs({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function _a(S){return wt.apply(this,arguments)}function wt(){return(wt=(0,L.Z)(function*({appConfig:S,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function so({p256dh:S,auth:D,endpoint:R,vapidKey:U}){const J={web:{endpoint:R,auth:D,p256dh:S}};return U!==ko&&(J.web.applicationPubKey=U),J}const mc=6048e5;function hl(S){return _c.apply(this,arguments)}function _c(){return(_c=(0,L.Z)(function*(S){const D=yield No(S.swRegistration,S.vapidKey),R={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:D.endpoint,auth:Zi(D.getKey("auth")),p256dh:Zi(D.getKey("p256dh"))},U=yield ul(S.firebaseDependencies);if(U){if(tu(U.subscriptionOptions,R))return Date.now()>=U.createTime+mc?yc(S,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield dl(S.firebaseDependencies,U.token)}catch(J){console.warn(J)}return ke(S.firebaseDependencies,R)}return ke(S.firebaseDependencies,R)})).apply(this,arguments)}function Xl(S){return eu.apply(this,arguments)}function eu(){return(eu=(0,L.Z)(function*(S){const D=yield ul(S.firebaseDependencies);D&&(yield dl(S.firebaseDependencies,D.token),yield Jl(S.firebaseDependencies));const R=yield S.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function yc(S,D){return ya.apply(this,arguments)}function ya(){return(ya=(0,L.Z)(function*(S,D){try{const R=yield Po(S.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield on(S.firebaseDependencies,U),R}catch(R){throw yield Xl(S),R}})).apply(this,arguments)}function ke(S,D){return jt.apply(this,arguments)}function jt(){return(jt=(0,L.Z)(function*(S,D){const U={token:yield us(S,D),createTime:Date.now(),subscriptionOptions:D};return yield on(S,U),U.token})).apply(this,arguments)}function No(S,D){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,L.Z)(function*(S,D){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Pd(D)})})).apply(this,arguments)}function tu(S,D){return D.vapidKey===S.vapidKey&&D.endpoint===S.endpoint&&D.auth===S.auth&&D.p256dh===S.p256dh}function Fo(S){const D={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function Ar(S,D){if(!D.notification)return;S.notification={};const R=D.notification.title;R&&(S.notification.title=R);const U=D.notification.body;U&&(S.notification.body=U);const J=D.notification.image;J&&(S.notification.image=J)}(D,S),function vc(S,D){!D.data||(S.data=D.data)}(D,S),function wc(S,D){if(!D.fcmOptions)return;S.fcmOptions={};const R=D.fcmOptions.link;R&&(S.fcmOptions.link=R);const U=D.fcmOptions.analytics_label;U&&(S.fcmOptions.analyticsLabel=U)}(D,S),D}function bc(S){return"object"==typeof S&&!!S&&fa in S}function Fd(S,D){const R=[];for(let U=0;U<S.length;U++)R.push(S.charAt(U)),U<D.length&&R.push(D.charAt(U));return R.join("")}function Is(S){return Dn.create("missing-app-config-values",{valueName:S})}Fd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ni{constructor(D,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Qg(S){if(!S||!S.options)throw Is("App Configuration Object");if(!S.name)throw Is("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=S;for(const U of D)if(!R[U])throw Is(U);return{appName:S.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Mr(S){return nu.apply(this,arguments)}function nu(){return(nu=(0,L.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(Rd,{scope:Ri}),S.swRegistration.update().catch(()=>{})}catch(D){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function oo(S,D){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,L.Z)(function*(S,D){if(!D&&!S.swRegistration&&(yield Mr(S)),D||!S.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");S.swRegistration=D}})).apply(this,arguments)}function Cc(S,D){return iu.apply(this,arguments)}function iu(){return(iu=(0,L.Z)(function*(S,D){D?S.vapidKey=D:S.vapidKey||(S.vapidKey=ko)})).apply(this,arguments)}function Ec(){return(Ec=(0,L.Z)(function*(S,D){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield Cc(S,null==D?void 0:D.vapidKey),yield oo(S,null==D?void 0:D.serviceWorkerRegistration),hl(S)})).apply(this,arguments)}function va(S,D,R){return su.apply(this,arguments)}function su(){return(su=(0,L.Z)(function*(S,D,R){const U=ou(D);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[fa],message_name:R[Od],message_time:R[Nf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ou(S){switch(S){case pa.NOTIFICATION_CLICKED:return"notification_open";case pa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vd(){return(Vd=(0,L.Z)(function*(S,D){const R=D.data;if(!R.isFirebaseMessaging)return;S.onMessageHandler&&R.messageType===pa.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Fo(R)):S.onMessageHandler.next(Fo(R)));const U=R.data;bc(U)&&"1"===U[Oi]&&(yield va(S,R.messageType,U))})).apply(this,arguments)}const au="@firebase/messaging",Bd=S=>{const D=new Ni(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Ld(S,D){return Vd.apply(this,arguments)}(D,R)),D},wa=S=>{const D=S.getProvider("messaging").getImmediate();return{getToken:U=>function ru(S,D){return Ec.apply(this,arguments)}(D,U)}};function lu(){return hr.apply(this,arguments)}function hr(){return(hr=(0,L.Z)(function*(){try{yield(0,re.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ud(){(0,ue._registerComponent)(new _e.wA("messaging",Bd,"PUBLIC")),(0,ue._registerComponent)(new _e.wA("messaging-internal",wa,"PRIVATE")),(0,ue.registerVersion)(au,"0.9.13"),(0,ue.registerVersion)(au,"0.9.13","esm2017")}();const Hd="analytics",Jg="firebase_id",Ss="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bo="https://www.googletagmanager.com/gtag/js",ni=new ce.Yd("@firebase/analytics");function jd(S){return Promise.all(S.map(D=>D.catch(R=>R)))}function Xg(S,D){const R=document.createElement("script");R.src=`${Bo}?l=${S}&id=${D}`,R.async=!0,document.head.appendChild(R)}function ba(S,D,R,U,J,oe){return uu.apply(this,arguments)}function uu(){return(uu=(0,L.Z)(function*(S,D,R,U,J,oe){const Oe=U[J];try{if(Oe)yield D[Oe];else{const ot=(yield jd(R)).find(dt=>dt.measurementId===J);ot&&(yield D[ot.appId])}}catch(tt){ni.error(tt)}S("config",J,oe)})).apply(this,arguments)}function em(S,D,R,U,J){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,L.Z)(function*(S,D,R,U,J){try{let oe=[];if(J&&J.send_to){let Oe=J.send_to;Array.isArray(Oe)||(Oe=[Oe]);const tt=yield jd(R);for(const ot of Oe){const dt=tt.find(Et=>Et.measurementId===ot),Lt=dt&&D[dt.appId];if(!Lt){oe=[];break}oe.push(Lt)}}0===oe.length&&(oe=Object.values(D)),yield Promise.all(oe),S("event",U,J||{})}catch(oe){ni.error(oe)}})).apply(this,arguments)}function Gd(){const S=window.document.getElementsByTagName("script");for(const D of Object.values(S))if(D.src&&D.src.includes(Bo))return D;return null}const Wn=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ca=new class xs{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Ki(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Ho(S){return jo.apply(this,arguments)}function jo(){return(jo=(0,L.Z)(function*(S){var D;const{appId:R,apiKey:U}=S,J={method:"GET",headers:Ki(U)},oe=Ss.replace("{app-id}",R),Oe=yield fetch(oe,J);if(200!==Oe.status&&304!==Oe.status){let tt="";try{const ot=yield Oe.json();(null===(D=ot.error)||void 0===D?void 0:D.message)&&(tt=ot.error.message)}catch(ot){}throw Wn.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:tt})}return Oe.json()})).apply(this,arguments)}function dn(S){return Go.apply(this,arguments)}function Go(){return(Go=(0,L.Z)(function*(S,D=Ca,R){const{appId:U,apiKey:J,measurementId:oe}=S.options;if(!U)throw Wn.create("no-app-id");if(!J){if(oe)return{measurementId:oe,appId:U};throw Wn.create("no-api-key")}const Oe=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new Ic;return setTimeout((0,L.Z)(function*(){tt.abort()}),void 0!==R?R:6e4),Ea({appId:U,apiKey:J,measurementId:oe},Oe,tt,D)})).apply(this,arguments)}function Ea(S,D,R){return pl.apply(this,arguments)}function pl(){return(pl=(0,L.Z)(function*(S,{throttleEndTimeMillis:D,backoffCount:R},U,J=Ca){const{appId:oe,measurementId:Oe}=S;try{yield zd(U,D)}catch(tt){if(Oe)return ni.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:oe,measurementId:Oe};throw tt}try{const tt=yield Ho(S);return J.deleteThrottleMetadata(oe),tt}catch(tt){if(!Bf(tt)){if(J.deleteThrottleMetadata(oe),Oe)return ni.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:oe,measurementId:Oe};throw tt}const ot=503===Number(tt.customData.httpStatus)?(0,re.$s)(R,J.intervalMillis,30):(0,re.$s)(R,J.intervalMillis),dt={throttleEndTimeMillis:Date.now()+ot,backoffCount:R+1};return J.setThrottleMetadata(oe,dt),ni.debug(`Calling attemptFetch again in ${ot} millis`),Ea(S,dt,U,J)}})).apply(this,arguments)}function zd(S,D){return new Promise((R,U)=>{const J=Math.max(D-Date.now(),0),oe=setTimeout(R,J);S.addEventListener(()=>{clearTimeout(oe),U(Wn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Bf(S){if(!(S instanceof re.ZR&&S.customData))return!1;const D=Number(S.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ic{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Ta(){return du.apply(this,arguments)}function du(){return(du=(0,L.Z)(function*(){if(!(0,re.hl)())return ni.warn(Wn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(S){return ni.warn(Wn.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function Ft(){return(Ft=(0,L.Z)(function*(S,D,R,U,J,oe,Oe){var tt;const ot=dn(S);ot.then(Kn=>{R[Kn.measurementId]=Kn.appId,S.options.measurementId&&Kn.measurementId!==S.options.measurementId&&ni.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kn=>ni.error(Kn)),D.push(ot);const dt=Ta().then(Kn=>{if(Kn)return U.getId()}),[Lt,Et]=yield Promise.all([ot,dt]);Gd()||Xg(oe,Lt.measurementId),J("js",new Date);const ii=null!==(tt=null==Oe?void 0:Oe.config)&&void 0!==tt?tt:{};return ii.origin="firebase",ii.update=!0,null!=Et&&(ii[Jg]=Et),J("config",Lt.measurementId,ii),Lt.measurementId})).apply(this,arguments)}class fs{constructor(D){this.app=D}_delete(){return delete bi[this.app.options.appId],Promise.resolve()}}let bi={},gl=[];const hu={};let Sc,lo,Ia="dataLayer",fu=!1;function gu(S,D,R){!function pu(){const S=[];if((0,re.ru)()&&S.push("This is a browser extension environment."),(0,re.zI)()||S.push("Cookies are not available."),S.length>0){const D=S.map((U,J)=>`(${J+1}) ${U}`).join(" "),R=Wn.create("invalid-analytics-context",{errorInfo:D});ni.warn(R.message)}}();const U=S.options.appId;if(!U)throw Wn.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw Wn.create("no-api-key");ni.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bi[U])throw Wn.create("already-exists",{id:U});if(!fu){!function Uo(S){let D=[];Array.isArray(window[S])?D=window[S]:window[S]=D}(Ia);const{wrappedGtag:oe,gtagCore:Oe}=function tm(S,D,R,U,J){let oe=function(...Oe){window[U].push(arguments)};return window[J]&&"function"==typeof window[J]&&(oe=window[J]),window[J]=function cu(S,D,R,U){function oe(){return(oe=(0,L.Z)(function*(Oe,tt,ot){try{"event"===Oe?yield em(S,D,R,tt,ot):"config"===Oe?yield ba(S,D,R,U,tt,ot):S("set",tt)}catch(dt){ni.error(dt)}})).apply(this,arguments)}return function J(Oe,tt,ot){return oe.apply(this,arguments)}}(oe,S,D,R),{gtagCore:oe,wrappedGtag:window[J]}}(bi,gl,hu,Ia,"gtag");lo=oe,Sc=Oe,fu=!0}return bi[U]=function hs(S,D,R,U,J,oe,Oe){return Ft.apply(this,arguments)}(S,gl,hu,D,Sc,Ia,R),new fs(S)}function mu(){return(mu=(0,L.Z)(function*(S,D,R,U,J){if(J&&J.global)S("event",R,U);else{const oe=yield D;S("event",R,Object.assign(Object.assign({},U),{send_to:oe}))}})).apply(this,arguments)}function Da(){return qd.apply(this,arguments)}function qd(){return(qd=(0,L.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(S){return!1}})).apply(this,arguments)}const Uf="@firebase/analytics";!function om(){(0,ue._registerComponent)(new _e.wA(Hd,(D,{options:R})=>gu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ue._registerComponent)(new _e.wA("analytics-internal",function S(D){try{const R=D.getProvider(Hd).getImmediate();return{logEvent:(U,J,oe)=>function sm(S,D,R,U){S=(0,re.m9)(S),function _l(S,D,R,U,J){return mu.apply(this,arguments)}(lo,bi[S.app.options.appId],D,R,U).catch(J=>ni.error(J))}(R,U,J,oe)}}catch(R){throw Wn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ue.registerVersion)(Uf,"0.7.9"),(0,ue.registerVersion)(Uf,"0.7.9","esm2017")}();var am=N(4408),Kd=N(7565);const zo=new class Zn extends Kd.v{}(class wu extends am.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(D,R,U):D.flush(this)}});var xc=N(4986),Ac=N(8505),Ci=N(9468),Fi=N(5363);const Ei=new o.GfV("7.3.0"),$o="__angularfire_symbol__analyticsIsSupportedValue",Kr="__angularfire_symbol__analyticsIsSupported",Ms="__angularfire_symbol__remoteConfigIsSupportedValue",ps="__angularfire_symbol__remoteConfigIsSupported",qo="__angularfire_symbol__messagingIsSupportedValue",Hf="__angularfire_symbol__messagingIsSupported";function xa(S,D,R){if(D){if(1===D.length)return D[0];const oe=D.filter(Oe=>Oe.app===R);if(1===oe.length)return oe[0]}return R.container.getProvider(S).getImmediate({optional:!0})}globalThis[Kr]||(globalThis[Kr]=Da().then(S=>globalThis[$o]=S).catch(()=>globalThis[$o]=!1)),globalThis[Hf]||(globalThis[Hf]=lu().then(S=>globalThis[qo]=S).catch(()=>globalThis[qo]=!1)),globalThis[ps]||(globalThis[ps]=Ql().then(S=>globalThis[Ms]=S).catch(()=>globalThis[Ms]=!1));const jf=(S,D)=>{const R=D?[D]:(0,ee.C6)(),U=[];return R.forEach(J=>{J.container.getProvider(S).instances.forEach(Oe=>{U.includes(Oe)||U.push(Oe)})}),U};function gs(){}class Gf{constructor(D,R=zo){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,U){const J=this.zone;return this.delegate.schedule(function(Oe){J.runGuarded(()=>{D.apply(this,[Oe])})},R,U)}}class Cu{constructor(D){this.zone=D,this.task=null}call(D,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gs,{},gs,gs)),R.pipe((0,Ac.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mc=(()=>{class S{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Gf(Zone.current)),this.insideAngular=R.run(()=>new Gf(Zone.current,xc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(R){return new(R||S)(o.LFG(o.R0b))},S.\u0275prov=o.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function ks(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function Tu(S){return ks(),function ms(S){return function(R){return(R=R.lift(new Cu(S.ngZone))).pipe((0,Ci.R)(S.outsideAngular),(0,Fi.Q)(S.insideAngular))}}(ks())(S)}},2090:(Qe,be,N)=>{N.d(be,{$s:()=>Gt,BH:()=>ze,DV:()=>Qt,Dv:()=>Qs,G6:()=>Ge,GJ:()=>nn,L:()=>ae,LL:()=>le,Mn:()=>Se,Pz:()=>Ut,Sg:()=>Re,UG:()=>ge,UI:()=>es,US:()=>_e,Wj:()=>Vn,Yr:()=>je,ZB:()=>G,ZR:()=>ye,b$:()=>Ye,cI:()=>$t,d:()=>Ae,dS:()=>Do,eu:()=>Ee,g5:()=>L,gK:()=>lr,gQ:()=>ar,h$:()=>ce,hl:()=>z,hu:()=>ee,jU:()=>De,lb:()=>Ir,m9:()=>Mi,ne:()=>zr,p$:()=>$,pd:()=>Ys,r3:()=>Gi,ru:()=>$e,tV:()=>pe,uI:()=>He,ug:()=>qt,vZ:()=>Er,w1:()=>Te,w9:()=>un,xO:()=>zi,xb:()=>Ht,z$:()=>Fe,zI:()=>Y,zd:()=>ts});const ee=function(H,W){if(!H)throw L(W)},L=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},ue=function(H){const W=[];let Z=0;for(let xe=0;xe<H.length;xe++){let q=H.charCodeAt(xe);q<128?W[Z++]=q:q<2048?(W[Z++]=q>>6|192,W[Z++]=63&q|128):55296==(64512&q)&&xe+1<H.length&&56320==(64512&H.charCodeAt(xe+1))?(q=65536+((1023&q)<<10)+(1023&H.charCodeAt(++xe)),W[Z++]=q>>18|240,W[Z++]=q>>12&63|128,W[Z++]=q>>6&63|128,W[Z++]=63&q|128):(W[Z++]=q>>12|224,W[Z++]=q>>6&63|128,W[Z++]=63&q|128)}return W},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,W){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,xe=[];for(let q=0;q<H.length;q+=3){const te=H[q],Ne=q+1<H.length,Je=Ne?H[q+1]:0,_t=q+2<H.length,xt=_t?H[q+2]:0;let Xn=(15&Je)<<2|xt>>6,$i=63&xt;_t||($i=64,Ne||(Xn=64)),xe.push(Z[te>>2],Z[(3&te)<<4|Je>>4],Z[Xn],Z[$i])}return xe.join("")},encodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(H):this.encodeByteArray(ue(H),W)},decodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(H):function(H){const W=[];let Z=0,xe=0;for(;Z<H.length;){const q=H[Z++];if(q<128)W[xe++]=String.fromCharCode(q);else if(q>191&&q<224){const te=H[Z++];W[xe++]=String.fromCharCode((31&q)<<6|63&te)}else if(q>239&&q<365){const _t=((7&q)<<18|(63&H[Z++])<<12|(63&H[Z++])<<6|63&H[Z++])-65536;W[xe++]=String.fromCharCode(55296+(_t>>10)),W[xe++]=String.fromCharCode(56320+(1023&_t))}else{const te=H[Z++],Ne=H[Z++];W[xe++]=String.fromCharCode((15&q)<<12|(63&te)<<6|63&Ne)}}return W.join("")}(this.decodeStringToByteArray(H,W))},decodeStringToByteArray(H,W){this.init_();const Z=W?this.charToByteMapWebSafe_:this.charToByteMap_,xe=[];for(let q=0;q<H.length;){const te=Z[H.charAt(q++)],Je=q<H.length?Z[H.charAt(q)]:0;++q;const xt=q<H.length?Z[H.charAt(q)]:64;++q;const It=q<H.length?Z[H.charAt(q)]:64;if(++q,null==te||null==Je||null==xt||null==It)throw Error();xe.push(te<<2|Je>>4),64!==xt&&(xe.push(Je<<4&240|xt>>2),64!==It&&xe.push(xt<<6&192|It))}return xe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ce=function(H){const W=ue(H);return _e.encodeByteArray(W,!0)},ae=function(H){return ce(H).replace(/\./g,"")},pe=function(H){try{return _e.decodeString(H,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function $(H){return G(void 0,H)}function G(H,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return W}for(const Z in W)!W.hasOwnProperty(Z)||!ie(Z)||(H[Z]=G(H[Z],W[Z]));return H}function ie(H){return"__proto__"!==H}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,Z)=>{this.resolve=W,this.reject=Z})}wrapCallback(W){return(Z,xe)=>{Z?this.reject(Z):this.resolve(xe),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(Z):W(Z,xe))}}}function Re(H,W){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const xe=W||"demo-project",q=H.iat||0,te=H.sub||H.user_id;if(!te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${xe}`,aud:xe,iat:q,exp:q+3600,auth_time:q,sub:te,user_id:te,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Ne)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function De(){return"object"==typeof self&&self.self===self}function $e(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Fe().indexOf("Electron/")>=0}function Te(){const H=Fe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Se(){return Fe().indexOf("MSAppHost/")>=0}function je(){return!1}function Ge(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function Ee(){return new Promise((H,W)=>{try{let Z=!0;const xe="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(xe);q.onsuccess=()=>{q.result.close(),Z||self.indexedDB.deleteDatabase(xe),H(!0)},q.onupgradeneeded=()=>{Z=!1},q.onerror=()=>{var te;W((null===(te=q.error)||void 0===te?void 0:te.message)||"")}}catch(Z){W(Z)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(W,Z,xe){super(Z),this.code=W,this.customData=xe,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(W,Z,xe){this.service=W,this.serviceName=Z,this.errors=xe}create(W,...Z){const xe=Z[0]||{},q=`${this.service}/${W}`,te=this.errors[W],Ne=te?function Ve(H,W){return H.replace(gt,(Z,xe)=>{const q=W[xe];return null!=q?String(q):`<${xe}?>`})}(te,xe):"Error";return new ye(q,`${this.serviceName}: ${Ne} (${q}).`,xe)}}const gt=/\{\$([^}]+)}/g;function $t(H){return JSON.parse(H)}function Ut(H){return JSON.stringify(H)}const Ke=function(H){let W={},Z={},xe={},q="";try{const te=H.split(".");W=$t(pe(te[0])||""),Z=$t(pe(te[1])||""),q=te[2],xe=Z.d||{},delete Z.d}catch(te){}return{header:W,claims:Z,data:xe,signature:q}},un=function(H){const Z=Ke(H).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},nn=function(H){const W=Ke(H).claims;return"object"==typeof W&&!0===W.admin};function Gi(H,W){return Object.prototype.hasOwnProperty.call(H,W)}function Qt(H,W){if(Object.prototype.hasOwnProperty.call(H,W))return H[W]}function Ht(H){for(const W in H)if(Object.prototype.hasOwnProperty.call(H,W))return!1;return!0}function es(H,W,Z){const xe={};for(const q in H)Object.prototype.hasOwnProperty.call(H,q)&&(xe[q]=W.call(Z,H[q],q,H));return xe}function Er(H,W){if(H===W)return!0;const Z=Object.keys(H),xe=Object.keys(W);for(const q of Z){if(!xe.includes(q))return!1;const te=H[q],Ne=W[q];if(Di(te)&&Di(Ne)){if(!Er(te,Ne))return!1}else if(te!==Ne)return!1}for(const q of xe)if(!Z.includes(q))return!1;return!0}function Di(H){return null!==H&&"object"==typeof H}function zi(H){const W=[];for(const[Z,xe]of Object.entries(H))Array.isArray(xe)?xe.forEach(q=>{W.push(encodeURIComponent(Z)+"="+encodeURIComponent(q))}):W.push(encodeURIComponent(Z)+"="+encodeURIComponent(xe));return W.length?"&"+W.join("&"):""}function ts(H){const W={};return H.replace(/^\?/,"").split("&").forEach(xe=>{if(xe){const[q,te]=xe.split("=");W[decodeURIComponent(q)]=decodeURIComponent(te)}}),W}function Ys(H){const W=H.indexOf("?");if(!W)return"";const Z=H.indexOf("#",W);return H.substring(W,Z>0?Z:void 0)}class ar{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,Z){Z||(Z=0);const xe=this.W_;if("string"==typeof W)for(let It=0;It<16;It++)xe[It]=W.charCodeAt(Z)<<24|W.charCodeAt(Z+1)<<16|W.charCodeAt(Z+2)<<8|W.charCodeAt(Z+3),Z+=4;else for(let It=0;It<16;It++)xe[It]=W[Z]<<24|W[Z+1]<<16|W[Z+2]<<8|W[Z+3],Z+=4;for(let It=16;It<80;It++){const Xn=xe[It-3]^xe[It-8]^xe[It-14]^xe[It-16];xe[It]=4294967295&(Xn<<1|Xn>>>31)}let xt,Cn,q=this.chain_[0],te=this.chain_[1],Ne=this.chain_[2],Je=this.chain_[3],_t=this.chain_[4];for(let It=0;It<80;It++){It<40?It<20?(xt=Je^te&(Ne^Je),Cn=1518500249):(xt=te^Ne^Je,Cn=1859775393):It<60?(xt=te&Ne|Je&(te|Ne),Cn=2400959708):(xt=te^Ne^Je,Cn=3395469782);const Xn=(q<<5|q>>>27)+xt+_t+Cn+xe[It]&4294967295;_t=Je,Je=Ne,Ne=4294967295&(te<<30|te>>>2),te=q,q=Xn}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+te&4294967295,this.chain_[2]=this.chain_[2]+Ne&4294967295,this.chain_[3]=this.chain_[3]+Je&4294967295,this.chain_[4]=this.chain_[4]+_t&4294967295}update(W,Z){if(null==W)return;void 0===Z&&(Z=W.length);const xe=Z-this.blockSize;let q=0;const te=this.buf_;let Ne=this.inbuf_;for(;q<Z;){if(0===Ne)for(;q<=xe;)this.compress_(W,q),q+=this.blockSize;if("string"==typeof W){for(;q<Z;)if(te[Ne]=W.charCodeAt(q),++Ne,++q,Ne===this.blockSize){this.compress_(te),Ne=0;break}}else for(;q<Z;)if(te[Ne]=W[q],++Ne,++q,Ne===this.blockSize){this.compress_(te),Ne=0;break}}this.inbuf_=Ne,this.total_+=Z}digest(){const W=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&Z,Z/=256;this.compress_(this.buf_);let xe=0;for(let q=0;q<5;q++)for(let te=24;te>=0;te-=8)W[xe]=this.chain_[q]>>te&255,++xe;return W}}function zr(H,W){const Z=new vt(H,W);return Z.subscribe.bind(Z)}class vt{constructor(W,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{W(this)}).catch(xe=>{this.error(xe)})}next(W){this.forEachObserver(Z=>{Z.next(W)})}error(W){this.forEachObserver(Z=>{Z.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,Z,xe){let q;if(void 0===W&&void 0===Z&&void 0===xe)throw new Error("Missing Observer.");q=function kn(H,W){if("object"!=typeof H||null===H)return!1;for(const Z of W)if(Z in H&&"function"==typeof H[Z])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:Z,complete:xe},void 0===q.next&&(q.next=Ln),void 0===q.error&&(q.error=Ln),void 0===q.complete&&(q.complete=Ln);const te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch(Ne){}}),this.observers.push(q),te}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,W)}sendOne(W,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{Z(this.observers[W])}catch(xe){"undefined"!=typeof console&&console.error&&console.error(xe)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ln(){}const Qs=function(H,W,Z,xe){let q;if(xe<W?q="at least "+W:xe>Z&&(q=0===Z?"none":"no more than "+Z),q)throw new Error(H+" failed: Was called with "+xe+(1===xe?" argument.":" arguments.")+" Expects "+q+".")};function lr(H,W){return`${H} failed: ${W} argument `}function Vn(H,W,Z,xe){if((!xe||Z)&&"function"!=typeof Z)throw new Error(lr(H,W)+"must be a valid function.")}function Ir(H,W,Z,xe){if((!xe||Z)&&("object"!=typeof Z||null===Z))throw new Error(lr(H,W)+"must be a valid context object.")}const Do=function(H){const W=[];let Z=0;for(let xe=0;xe<H.length;xe++){let q=H.charCodeAt(xe);if(q>=55296&&q<=56319){const te=q-55296;xe++,ee(xe<H.length,"Surrogate pair missing trail surrogate."),q=65536+(te<<10)+(H.charCodeAt(xe)-56320)}q<128?W[Z++]=q:q<2048?(W[Z++]=q>>6|192,W[Z++]=63&q|128):q<65536?(W[Z++]=q>>12|224,W[Z++]=q>>6&63|128,W[Z++]=63&q|128):(W[Z++]=q>>18|240,W[Z++]=q>>12&63|128,W[Z++]=q>>6&63|128,W[Z++]=63&q|128)}return W},qt=function(H){let W=0;for(let Z=0;Z<H.length;Z++){const xe=H.charCodeAt(Z);xe<128?W++:xe<2048?W+=2:xe>=55296&&xe<=56319?(W+=4,Z++):W+=3}return W};function Gt(H,W=1e3,Z=2){const xe=W*Math.pow(Z,H),q=Math.round(.5*xe*(Math.random()-.5)*2);return Math.min(144e5,xe+q)}function Mi(H){return H&&H._delegate?H._delegate:H}},2758:(Qe,be,N)=>{var o=N(5e3);let ee=null;function L(){return ee}const ce=new o.OlP("DocumentToken");let ae=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function pe(){return(0,o.LFG)(G)}()},providedIn:"platform"}),n})();const $=new o.OlP("Location Initialized");let G=(()=>{class n extends ae{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(e){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=L().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ie()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ie()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ce))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function ze(){return new G((0,o.LFG)(ce))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function Re(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Fe(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function De(n){const t=(0,o.LFG)(ce).location;return new Ye((0,o.LFG)(ae),t&&t.origin||"")}()},providedIn:"root"}),n})();const $e=new o.OlP("appBaseHref");let Ye=(()=>{class n extends ge{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Re(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+He(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const u=this.prepareExternalUrl(r+He(s));this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,s){const u=this.prepareExternalUrl(r+He(s));this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ae),o.LFG($e,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n extends ge{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Re(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let u=this.prepareExternalUrl(r+He(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(e,i,u)}replaceState(e,i,r,s){let u=this.prepareExternalUrl(r+He(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ae),o.LFG($e,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n{constructor(e,i){this._subject=new o.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Fe(Ge(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+He(i))}normalize(e){return n.stripTrailingSlash(function je(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Ge(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+He(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+He(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=He,n.joinWithSlash=Re,n.stripTrailingSlash=Fe,n.\u0275fac=function(e){return new(e||n)(o.LFG(ge),o.LFG(ae))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Se(){return new Te((0,o.LFG)(ge),(0,o.LFG)(ae))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}let $n=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,o.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,o.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Xs{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tn=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,u)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Xs(r.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,u),Mo(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Mo(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Mo(n,t){n.context.$implicit=t.item}let fn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Kl("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Kl("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class pn{constructor(){this.$implicit=null,this.ngIf=null}}function Kl(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}let Wi=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Dr=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split(".");null!=(i=null!=i&&s?`${i}${s}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),to=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[o.TTD]}),n})(),Oi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Ro="browser";function ga(n){return"server"===n}let fc=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new ma((0,o.LFG)(ce),window)}),n})();class ma{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function ls(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const u=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=pc(this.window.history)||pc(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function pc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Oo extends class ul extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new Oo)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function cl(){return on=on||document.querySelector("base"),on?on.getAttribute("href"):null}();return null==e?null:function ro(n){Jl=Jl||document.createElement("a"),Jl.setAttribute("href",n);const t=Jl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){on=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function ol(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let Jl,on=null;const vi=new o.OlP("TRANSITION_ID"),Dn=[{provide:o.ip1,useFactory:function gc(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=L(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[vi,ce,o.zs3],multi:!0}];class us{static init(){(0,o.VLi)(new us)}addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,u=!1;const h=function(p){u=u||p,s--,0==s&&i(u)};r.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?L().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let wi=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Po=new o.OlP("EventManagerPlugins");let Ts=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const u=r[s];if(u.supports(e))return this._eventNameToPlugin.set(e,u),u}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Po),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class dl{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=L().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let qr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),cs=(()=>{class n extends qr{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,r.push(i.appendChild(u))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(_a),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(_a))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ce))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function _a(n){L().remove(n)}const wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},so=/%COMP%/g;function ya(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?ya(n,r,e):(r=r.replace(so,n),e.push(r))}return e}function ke(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let No=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Sn(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Ar(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case o.ifc.ShadowDom:return new vc(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=ya(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ts),o.LFG(cs),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Sn{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(wt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=wt[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=wt[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ke(i)):this.eventManager.addEventListener(t,e,ke(i))}}class Ar extends Sn{constructor(t,e,i,r){super(t),this.component=i;const s=ya(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function eu(n){return"_ngcontent-%COMP%".replace(so,n)}(r+"-"+i.id),this.hostAttr=function yc(n){return"_nghost-%COMP%".replace(so,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class vc extends Sn{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ya(r.id,r.styles,[]);for(let u=0;u<s.length;u++){const h=document.createElement("style");h.textContent=s[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let wc=(()=>{class n extends dl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ce))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const bc=["alt","control","meta","shift"],Qg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Is={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ni={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mr=(()=>{class n extends dl{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),u=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(e,s.domEventName,u))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let u="";if(bc.forEach(p=>{const y=i.indexOf(p);y>-1&&(i.splice(y,1),u+=p+".")}),u+=s,0!=i.length||0===s.length)return null;const h={};return h.domEventName=r,h.fullKey=u,h}static getEventFullKey(e){let i="",r=function nu(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Is.hasOwnProperty(t)&&(t=Is[t]))}return Qg[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),bc.forEach(s=>{s!=r&&Ni[s](e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ce))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ru=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:Ro},{provide:o.g9A,useValue:function oo(){Oo.makeCurrent(),us.init()},multi:!0},{provide:ce,useFactory:function Cc(){return(0,o.RDi)(document),document},deps:[]}]),Ec=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function Wr(){return new o.qLn},deps:[]},{provide:Po,useClass:wc,multi:!0,deps:[ce,o.R0b,o.Lbi]},{provide:Po,useClass:Mr,multi:!0,deps:[ce]},{provide:No,useClass:No,deps:[Ts,cs,o.AFp]},{provide:o.FYo,useExisting:No},{provide:qr,useExisting:cs},{provide:cs,useClass:cs,deps:[ce]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b]},{provide:Ts,useClass:Ts,deps:[Po,o.R0b]},{provide:class gn{},useClass:wi,deps:[]}];let va=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:vi,useExisting:o.AFp},Dn]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(n,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:Ec,imports:[Oi,o.hGG]}),n})();"undefined"!=typeof window&&window;class Gd{}const Wn="*";function ds(n,t){return{type:7,name:n,definitions:t,options:{}}}function ao(n,t=null){return{type:4,styles:t,timings:n}}function Ca(n,t=null){return{type:2,steps:n,options:t}}function Ki(n){return{type:6,styles:n,offset:null}}function Ho(n,t,e){return{type:0,name:n,styles:t,options:e}}function dn(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Ea(n=null){return{type:9,options:n}}function zd(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function Ic(n){Promise.resolve(null).then(n)}class Ta{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ic(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class du{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?Ic(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++e==s&&this._onFinish()}),u.onDestroy(()=>{++i==s&&this._onDestroy()}),u.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const Ft=!1;function bi(n){return new o.vHH(3e3,Ft)}function Zn(){return"undefined"!=typeof window&&void 0!==window.document}function zo(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Zr(n){switch(n.length){case 0:return new Ta;case 1:return n[0];default:return new du(n)}}function xc(n,t,e,i,r={},s={}){const u=[],h=[];let p=-1,y=null;if(i.forEach(E=>{const I=E.offset,M=I==p,P=M&&y||{};Object.keys(E).forEach(B=>{let Q=B,we=E[B];if("offset"!==B)switch(Q=t.normalizePropertyName(Q,u),we){case"!":we=r[B];break;case Wn:we=s[B];break;default:we=t.normalizeStyleValue(B,Q,we,u)}P[Q]=we}),M||h.push(P),y=P,p=I}),u.length)throw function qd(n){return new o.vHH(3502,Ft)}();return h}function Ac(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&Ci(e,"start",n)));break;case"done":n.onDone(()=>i(e&&Ci(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&Ci(e,"destroy",n)))}}function Ci(n,t,e){const i=e.totalTime,s=Fi(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),u=n._data;return null!=u&&(s._data=u),s}function Fi(n,t,e,i,r="",s=0,u){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!u}}function Ei(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function $o(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let Kr=(n,t)=>!1,Ms=(n,t,e)=>[],ps=null;function qo(n){const t=n.parentNode||n.host;return t===ps?null:t}(zo()||"undefined"!=typeof Element)&&(Zn()?(ps=(()=>document.documentElement)(),Kr=(n,t)=>{for(;t;){if(t===n)return!0;t=qo(t)}return!1}):Kr=(n,t)=>n.contains(t),Ms=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let Wo=null,Li=!1;function bu(n){Wo||(Wo=function xa(){return"undefined"!=typeof document?document.body:null}()||{},Li=!!Wo.style&&"WebkitAppearance"in Wo.style);let t=!0;return Wo.style&&!function Yd(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Wo.style,!t&&Li&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Wo.style)),t}const jf=Kr,gs=Ms;let Cu=(()=>{class n{validateStyleProperty(e){return bu(e)}matchesElement(e,i){return!1}containsElement(e,i){return jf(e,i)}getParentElement(e){return qo(e)}query(e,i,r){return gs(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,u,h=[],p){return new Ta(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Mc=(()=>{class n{}return n.NOOP=new Cu,n})();const fo="ng-enter",Aa="ng-leave",Tu="ng-trigger",ms=".ng-trigger",Ma="ng-animating",Zo=".ng-animating";function S(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:D(parseFloat(t[1]),t[2])}function D(n,t){return"s"===t?1e3*n:n}function R(n,t,e){return n.hasOwnProperty("duration")?n:function U(n,t,e){let r,s=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return t.push(bi()),{duration:0,delay:0,easing:""};r=D(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=D(parseFloat(p),h[4]));const y=h[5];y&&(u=y)}else r=n;if(!e){let h=!1,p=t.length;r<0&&(t.push(function gl(){return new o.vHH(3100,Ft)}()),h=!0),s<0&&(t.push(function hu(){return new o.vHH(3101,Ft)}()),h=!0),h&&t.splice(p,0,bi())}return{duration:r,delay:s,easing:u}}(n,t,e)}function J(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Oe(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else J(n,e);return e}function tt(n,t,e){return e?t+":"+e+";":""}function ot(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=tt(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=tt(0,ka(e),n.style[e]));n.setAttribute("style",t)}function dt(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=Yr(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),zo()&&ot(n))}function Lt(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=Yr(e);n.style[i]=""}),zo()&&ot(n))}function Et(n){return Array.isArray(n)?1==n.length?n[0]:Ca(n):n}const Kn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ko(n){let t=[];if("string"==typeof n){let e;for(;e=Kn.exec(n);)t.push(e[1]);Kn.lastIndex=0}return t}function Rs(n,t,e){const i=n.toString(),r=i.replace(Kn,(s,u)=>{let h=t[u];return t.hasOwnProperty(u)||(e.push(function ml(n){return new o.vHH(3003,Ft)}()),h=""),h.toString()});return r==i?n:r}function fr(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const kr=/-+([a-z0-9])/g;function Yr(n){return n.replace(kr,(...t)=>t[1].toUpperCase())}function ka(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yi(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function Sc(n){return new o.vHH(3004,Ft)}()}}function kc(n,t){return window.getComputedStyle(n)[t]}function cm(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function tC(n,t,e){if(":"==n[0]){const p=function Qd(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function co(n){return new o.vHH(3016,Ft)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function Sa(n){return new o.vHH(3015,Ft)}()),t;const r=i[1],s=i[2],u=i[3];t.push(Pc(r,u));"<"==s[0]&&!("*"==r&&"*"==u)&&t.push(Pc(u,r))}(i,e,t)):e.push(n),e}const Jd=new Set(["true","1"]),Xd=new Set(["false","0"]);function Pc(n,t){const e=Jd.has(n)||Xd.has(n),i=Jd.has(t)||Xd.has(t);return(r,s)=>{let u="*"==n||n==r,h="*"==t||t==s;return!u&&e&&"boolean"==typeof r&&(u=r?Jd.has(n):Xd.has(n)),!h&&i&&"boolean"==typeof s&&(h=s?Jd.has(t):Xd.has(t)),u&&h}}const xu=new RegExp("s*:selfs*,?","g");function $f(n,t,e,i){return new nC(n).build(t,e,i)}class nC{constructor(t){this._driver=t}build(t,e,i){const r=new hm(e);this._resetContextStyleTimingState(r);const s=Yi(this,Et(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],u=[];return"@"==t.name.charAt(0)&&e.errors.push(function fu(){return new o.vHH(3006,Ft)}()),t.definitions.forEach(h=>{if(this._resetContextStyleTimingState(e),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,s.push(this.visitState(p,e))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,e);i+=p.queryCount,r+=p.depCount,u.push(p)}else e.errors.push(function im(){return new o.vHH(3007,Ft)}())}),{type:7,name:t.name,states:s,transitions:u,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,u=r||{};i.styles.forEach(h=>{if(Nc(h)){const p=h;Object.keys(p).forEach(y=>{Ko(p[y]).forEach(E=>{u.hasOwnProperty(E)||s.add(E)})})}}),s.size&&(fr(s.values()),e.errors.push(function pu(n,t){return new o.vHH(3008,Ft)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Yi(this,Et(t.animation),e);return{type:1,matchers:cm(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Ra(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Yi(this,i,e)),options:Ra(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(u=>{e.currentTime=i;const h=Yi(this,u,e);return r=Math.max(r,e.currentTime),h});return e.currentTime=r,{type:3,steps:s,options:Ra(t.options)}}visitAnimate(t,e){const i=function pm(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Wf(R(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Wf(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=R(e,t);return Wf(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:Ki({});if(5==s.type)r=this.visitKeyframes(s,e);else{let u=t.styles,h=!1;if(!u){h=!0;const y={};i.easing&&(y.easing=i.easing),u=Ki(y)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(u,e);p.isEmptyStep=h,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(u=>{"string"==typeof u?u==Wn?i.push(u):e.errors.push(function gu(n){return new o.vHH(3002,Ft)}()):i.push(u)}):i.push(t.styles);let r=!1,s=null;return i.forEach(u=>{if(Nc(u)){const h=u,p=h.easing;if(p&&(s=p,delete h.easing),!r)for(let y in h)if(h[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return delete u[h],void e.unsupportedCSSPropertiesFound.add(h);const p=e.collectedStyles[e.currentQuerySelector],y=p[h];let E=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(e.errors.push(function mu(n,t,e,i,r){return new o.vHH(3010,Ft)}()),E=!1),s=y.startTime),E&&(p[h]={startTime:s,endTime:r}),e.options&&function ii(n,t,e){const i=t.params||{},r=Ko(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function Ia(n){return new o.vHH(3001,Ft)}())})}(u[h],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function $d(){return new o.vHH(3011,Ft)}()),i;let s=0;const u=[];let h=!1,p=!1,y=0;const E=t.steps.map(et=>{const nt=this._makeStyleAst(et,e);let it=null!=nt.offset?nt.offset:function fm(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(Nc(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(Nc(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(nt.styles),st=0;return null!=it&&(s++,st=nt.offset=it),p=p||st<0||st>1,h=h||st<y,y=st,u.push(st),nt});p&&e.errors.push(function uo(){return new o.vHH(3012,Ft)}()),h&&e.errors.push(function _u(){return new o.vHH(3200,Ft)}());const I=t.steps.length;let M=0;s>0&&s<I?e.errors.push(function yl(){return new o.vHH(3202,Ft)}()):0==s&&(M=1/(I-1));const P=I-1,B=e.currentTime,Q=e.currentAnimateTimings,we=Q.duration;return E.forEach((et,nt)=>{const it=M>0?nt==P?1:M*nt:u[nt],st=it*we;e.currentTime=B+Q.delay+st,Q.duration=st,this._validateStyleAst(et,e),et.offset=it,i.styles.push(et)}),i}visitReference(t,e){return{type:8,animation:Yi(this,Et(t.animation),e),options:Ra(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ra(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ra(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,u]=function Au(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(xu,"")),n=n.replace(/@\*/g,ms).replace(/@\w+/g,e=>ms+"-"+e.substr(1)).replace(/:animating/g,Zo),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Ei(e.collectedStyles,e.currentQuerySelector,{});const h=Yi(this,Et(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:h,originalSelector:t.selector,options:Ra(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function yu(){return new o.vHH(3013,Ft)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:R(t.timings,e.errors,!0);return{type:12,animation:Yi(this,Et(t.animation),e),timings:i,options:null}}}class hm{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Nc(n){return!Array.isArray(n)&&"object"==typeof n}function Ra(n){return n?(n=J(n)).params&&(n.params=function qf(n){return n?J(n):null}(n.params)):n={},n}function Wf(n,t,e){return{duration:n,delay:t,easing:e}}function Zf(n,t,e,i,r,s,u=null,h=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:u,subTimeline:h}}class th{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Fc=new RegExp(":enter","g"),iC=new RegExp(":leave","g");function Yf(n,t,e,i,r,s={},u={},h,p,y=[]){return(new rC).buildKeyframes(n,t,e,i,r,s,u,h,p,y)}class rC{buildKeyframes(t,e,i,r,s,u,h,p,y,E=[]){y=y||new th;const I=new gm(t,e,y,r,s,E,[]);I.options=p,I.currentTimeline.setStyles([u],null,I.errors,p),Yi(this,i,I);const M=I.timelines.filter(P=>P.containsAnimation());if(Object.keys(h).length){let P;for(let B=M.length-1;B>=0;B--){const Q=M[B];if(Q.element===e){P=Q;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([h],null,I.errors,p)}return M.length?M.map(P=>P.buildKeyframes()):[Zf(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);s!=u&&e.transformIntoNewTimeline(u)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const u=null!=i.duration?S(i.duration):null,h=null!=i.delay?S(i.delay):null;return 0!==u&&t.forEach(p=>{const y=e.appendInstructionToTimeline(p,u,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Yi(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Lc);const u=S(s.delay);r.delayNextStep(u)}t.steps.length&&(t.steps.forEach(u=>Yi(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?S(t.options.delay):0;t.steps.forEach(u=>{const h=e.createSubContext(t.options);s&&h.delayNextStep(s),Yi(this,u,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(u=>e.currentTimeline.mergeTimelineCollectedStyles(u)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return R(e.params?Rs(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,h=e.createSubContext().currentTimeline;h.easing=i.easing,t.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,e.errors,e.options),h.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(h),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?S(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Lc);let u=i;const h=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=h.length;let p=null;h.forEach((y,E)=>{e.currentQueryIndex=E;const I=e.createSubContext(t.options,y);s&&I.delayNextStep(s),y===e.element&&(p=I.currentTimeline),Yi(this,t.animation,I),I.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,I.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(u),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,u=Math.abs(s.duration),h=u*(e.currentQueryTotal-1);let p=u*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=i.currentStaggerTime}const E=e.currentTimeline;p&&E.delayNextStep(p);const I=E.currentTime;Yi(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-I+(r.startTime-i.currentTimeline.startTime)}}const Lc={};class gm{constructor(t,e,i,r,s,u,h,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Lc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Mu(this._driver,e,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=S(i.duration)),null!=i.delay&&(r.delay=S(i.delay));const s=i.params;if(s){let u=r.params;u||(u=this.options.params={}),Object.keys(s).forEach(h=>{(!e||!u.hasOwnProperty(h))&&(u[h]=Rs(s[h],u,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new gm(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Lc,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new mm(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,u){let h=[];if(r&&h.push(this.element),t.length>0){t=(t=t.replace(Fc,"."+this._enterClassName)).replace(iC,"."+this._leaveClassName);let y=this._driver.query(this.element,t,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),h.push(...y)}return!s&&0==h.length&&u.push(function As(n){return new o.vHH(3014,Ft)}()),h}}class Mu{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Mu(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Wn,this._currentKeyframe[e]=Wn}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},u=function uv(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(s=>{e[s]=Wn})):Oe(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const p=Rs(u[h],s,i);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Wn),this._updateStyle(h,p)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,p)=>{const y=Oe(h,!0);Object.keys(y).forEach(E=>{const I=y[E];"!"==I?t.add(E):I==Wn&&e.add(E)}),i||(y.offset=p/this.duration),r.push(y)});const s=t.size?fr(t.values()):[],u=e.size?fr(e.values()):[];if(i){const h=r[0],p=J(h);h.offset=0,p.offset=1,r=[h,p]}return Zf(this.element,r,s,u,this.duration,this.startTime,this.easing,!1)}}class mm extends Mu{constructor(t,e,i,r,s,u,h=!1){super(t,e,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],u=i+e,h=e/u,p=Oe(t[0],!1);p.offset=0,s.push(p);const y=Oe(t[0],!1);y.offset=_m(h),s.push(y);const E=t.length-1;for(let I=1;I<=E;I++){let M=Oe(t[I],!1);M.offset=_m((e+M.offset*i)/u),s.push(M)}i=u,e=0,r="",t=s}return Zf(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function _m(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class cv{}class nh extends cv{normalizePropertyName(t,e){return Yr(t)}normalizeStyleValue(t,e,i,r){let s="";const u=i.toString().trim();if(ym[e]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function lo(n,t){return new o.vHH(3005,Ft)}())}return u+s}}const ym=(()=>function _s(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ru(n,t,e,i,r,s,u,h,p,y,E,I,M){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:u,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:E,totalTime:I,errors:M}}const Ou={};class Qf{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function vm(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],s=this._stateStyles[t],u=r?r.buildStyles(e,i):{};return s?s.buildStyles(e,i):u}build(t,e,i,r,s,u,h,p,y,E){const I=[],M=this.ast.options&&this.ast.options.params||Ou,B=this.buildStyles(i,h&&h.params||Ou,I),Q=p&&p.params||Ou,we=this.buildStyles(r,Q,I),et=new Set,nt=new Map,it=new Map,st="void"===r,At={params:Object.assign(Object.assign({},M),Q)},Pt=E?[]:Yf(t,e,this.ast.animation,s,u,B,we,At,y,I);let tn=0;if(Pt.forEach(ji=>{tn=Math.max(ji.duration+ji.delay,tn)}),I.length)return Ru(e,this._triggerName,i,r,st,B,we,[],[],nt,it,tn,I);Pt.forEach(ji=>{const Zs=ji.element,eV=Ei(nt,Zs,{});ji.preStyleProps.forEach(Gg=>eV[Gg]=!0);const X0=Ei(it,Zs,{});ji.postStyleProps.forEach(Gg=>X0[Gg]=!0),Zs!==e&&et.add(Zs)});const Jn=fr(et.values());return Ru(e,this._triggerName,i,r,st,B,we,Pt,Jn,nt,it,tn)}}class wm{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=J(this.defaultParams);return Object.keys(t).forEach(s=>{const u=t[s];null!=u&&(r[s]=u)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const u=s;Object.keys(u).forEach(h=>{let p=u[h];p.length>1&&(p=Rs(p,r,e));const y=this.normalizer.normalizePropertyName(h,e);p=this.normalizer.normalizeStyleValue(h,y,p,e),i[y]=p})}}),i}}class aC{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new wm(r.style,r.options&&r.options.params||{},i)}),ih(this.states,"true","1"),ih(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new Qf(t,r,this.states))}),this.fallbackTransition=function Vc(n,t,e){return new Qf(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(u=>u.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function ih(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const Jf=new th;class lC{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],s=$f(this._driver,e,i,[]);if(i.length)throw function Wd(n){return new o.vHH(3503,Ft)}();this._animations[t]=s}_buildPlayer(t,e,i){const r=t.element,s=xc(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations[t];let u;const h=new Map;if(s?(u=Yf(this._driver,e,s,fo,Aa,{},{},i,Jf,r),u.forEach(E=>{const I=Ei(h,E.element,{});E.postStyleProps.forEach(M=>I[M]=null)})):(r.push(function Rn(){return new o.vHH(3300,Ft)}()),u=[]),r.length)throw function rm(n){return new o.vHH(3504,Ft)}();h.forEach((E,I)=>{Object.keys(E).forEach(M=>{E[M]=this._driver.computeStyle(I,M,Wn)})});const y=Zr(u.map(E=>{const I=h.get(E.element);return this._buildPlayer(E,{},I)}));return this._playersById[t]=y,y.onDestroy(()=>this.destroy(t)),this.players.push(y),y}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function ov(n){return new o.vHH(3301,Ft)}();return e}listen(t,e,i,r){const s=Fi(e,"","","");return Ac(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const dv="ng-animate-queued",rh="ng-animate-disabled",sh=[],vl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},pv={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Rr="__ng_removed";class Pu{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function _v(n){return null!=n?n:null}(i?t.value:t),i){const s=J(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const xn="void",ep=new Pu(xn);class gv{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Qi(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw function sm(n,t){return new o.vHH(3302,Ft)}();if(null==i||0==i.length)throw function Uf(n){return new o.vHH(3303,Ft)}();if(!function Bc(n){return"start"==n||"done"==n}(i))throw function Zd(n,t){return new o.vHH(3400,Ft)}();const s=Ei(this._elementListeners,t,[]),u={name:e,phase:i,callback:r};s.push(u);const h=Ei(this._engine.statesByElement,t,{});return h.hasOwnProperty(e)||(Qi(t,Tu),Qi(t,Tu+"-"+e),h[e]=ep),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(u);p>=0&&s.splice(p,1),this._triggers[e]||delete h[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function om(n){return new o.vHH(3401,Ft)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),u=new ah(this.id,e,t);let h=this._engine.statesByElement.get(t);h||(Qi(t,Tu),Qi(t,Tu+"-"+e),this._engine.statesByElement.set(t,h={}));let p=h[e];const y=new Pu(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h[e]=y,p||(p=ep),y.value!==xn&&p.value===y.value){if(!function Ti(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,y.params)){const Q=[],we=s.matchStyles(p.value,p.params,Q),et=s.matchStyles(y.value,y.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{Lt(t,we),dt(t,et)})}return}const M=Ei(this._engine.playersByElement,t,[]);M.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==e&&Q.queued&&Q.destroy()});let P=s.matchTransition(p.value,y.value,t,y.params),B=!1;if(!P){if(!r)return;P=s.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:p,toState:y,player:u,isFallbackTransition:B}),B||(Qi(t,dv),u.onStart(()=>{ri(t,dv)})),u.onDone(()=>{let Q=this.players.indexOf(u);Q>=0&&this.players.splice(Q,1);const we=this._engine.playersByElement.get(t);if(we){let et=we.indexOf(u);et>=0&&we.splice(et,1)}}),this.players.push(u),M.push(u),u}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,ms,!0);i.forEach(r=>{if(r[Rr])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(u=>u.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),u=new Map;if(s){const h=[];if(Object.keys(s).forEach(p=>{if(u.set(p,s[p].value),this._triggers[p]){const y=this.trigger(t,p,xn,r);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,u),i&&Zr(h).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const u=s.name;if(r.has(u))return;r.add(u);const p=this._triggers[u].fallbackTransition,y=i[u]||ep,E=new Pu(xn),I=new ah(this.id,u,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:u,transition:p,fromState:y,toState:E,player:I,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let u=t;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Rr];(!s||s===vl)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Qi(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,u=this._elementListeners.get(s);u&&u.forEach(h=>{if(h.name==i.triggerName){const p=Fi(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,Ac(i.player,h.phase,p,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class oh{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new gv(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let u=!1;if(void 0!==this.driver.getParentElement){let h=this.driver.getParentElement(e);for(;h;){const p=r.get(h);if(p){const y=i.indexOf(p);i.splice(y+1,0,t),u=!0;break}h=this.driver.getParentElement(h)}}else for(let h=s;h>=0;h--)if(this.driver.containsElement(i[h].hostElement,e)){i.splice(h+1,0,t),u=!0;break}u||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const u=i[r[s]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&e.add(h)}}}return e}trigger(t,e,i,r){if(lh(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!lh(e))return;const s=e[Rr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(e);u>=0&&this.collectedLeaveElements.splice(u,1)}if(t){const u=this._fetchNamespace(t);u&&u.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Qi(t,rh)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ri(t,rh))}removeNode(t,e,i,r){if(lh(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const u=this.namespacesByHostElement.get(e);u&&u.id!==t&&u.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Rr]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return lh(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,ms,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Zo,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Zr(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const i=t[Rr];if(i&&i.setForRemoval){if(t[Rr]=vl,i.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(rh))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Qi(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Zr(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function am(n){return new o.vHH(3402,Ft)}()}_flushAnimations(t,e){const i=new th,r=[],s=new Map,u=[],h=new Map,p=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(ft=>{E.add(ft);const Dt=this.driver.query(ft,".ng-animate-queued",!0);for(let Nt=0;Nt<Dt.length;Nt++)E.add(Dt[Nt])});const I=this.bodyNode,M=Array.from(this.statesByElement.keys()),P=yv(M,this.collectedEnterElements),B=new Map;let Q=0;P.forEach((ft,Dt)=>{const Nt=fo+Q++;B.set(Dt,Nt),ft.forEach(hn=>Qi(hn,Nt))});const we=[],et=new Set,nt=new Set;for(let ft=0;ft<this.collectedLeaveElements.length;ft++){const Dt=this.collectedLeaveElements[ft],Nt=Dt[Rr];Nt&&Nt.setForRemoval&&(we.push(Dt),et.add(Dt),Nt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(hn=>et.add(hn)):nt.add(Dt))}const it=new Map,st=yv(M,Array.from(et));st.forEach((ft,Dt)=>{const Nt=Aa+Q++;it.set(Dt,Nt),ft.forEach(hn=>Qi(hn,Nt))}),t.push(()=>{P.forEach((ft,Dt)=>{const Nt=B.get(Dt);ft.forEach(hn=>ri(hn,Nt))}),st.forEach((ft,Dt)=>{const Nt=it.get(Dt);ft.forEach(hn=>ri(hn,Nt))}),we.forEach(ft=>{this.processLeaveNode(ft)})});const At=[],Pt=[];for(let ft=this._namespaceList.length-1;ft>=0;ft--)this._namespaceList[ft].drainQueuedTransitions(e).forEach(Nt=>{const hn=Nt.player,Gr=Nt.element;if(At.push(hn),this.collectedEnterElements.length){const Ks=Gr[Rr];if(Ks&&Ks.setForMove){if(Ks.previousTriggersValues&&Ks.previousTriggersValues.has(Nt.triggerName)){const zg=Ks.previousTriggersValues.get(Nt.triggerName),Of=this.statesByElement.get(Nt.element);Of&&Of[Nt.triggerName]&&(Of[Nt.triggerName].value=zg)}return void hn.destroy()}}const cc=!I||!this.driver.containsElement(I,Gr),ca=it.get(Gr),Rf=B.get(Gr),_i=this._buildInstruction(Nt,i,Rf,ca,cc);if(_i.errors&&_i.errors.length)return void Pt.push(_i);if(cc)return hn.onStart(()=>Lt(Gr,_i.fromStyles)),hn.onDestroy(()=>dt(Gr,_i.toStyles)),void r.push(hn);if(Nt.isFallbackTransition)return hn.onStart(()=>Lt(Gr,_i.fromStyles)),hn.onDestroy(()=>dt(Gr,_i.toStyles)),void r.push(hn);const iV=[];_i.timelines.forEach(Ks=>{Ks.stretchStartingKeyframe=!0,this.disabledNodes.has(Ks.element)||iV.push(Ks)}),_i.timelines=iV,i.append(Gr,_i.timelines),u.push({instruction:_i,player:hn,element:Gr}),_i.queriedElements.forEach(Ks=>Ei(h,Ks,[]).push(hn)),_i.preStyleProps.forEach((Ks,zg)=>{const Of=Object.keys(Ks);if(Of.length){let $g=p.get(zg);$g||p.set(zg,$g=new Set),Of.forEach(tR=>$g.add(tR))}}),_i.postStyleProps.forEach((Ks,zg)=>{const Of=Object.keys(Ks);let $g=y.get(zg);$g||y.set(zg,$g=new Set),Of.forEach(tR=>$g.add(tR))})});if(Pt.length){const ft=[];Pt.forEach(Dt=>{ft.push(function Kd(n,t){return new o.vHH(3505,Ft)}())}),At.forEach(Dt=>Dt.destroy()),this.reportError(ft)}const tn=new Map,Jn=new Map;u.forEach(ft=>{const Dt=ft.element;i.has(Dt)&&(Jn.set(Dt,Dt),this._beforeAnimationBuild(ft.player.namespaceId,ft.instruction,tn))}),r.forEach(ft=>{const Dt=ft.element;this._getPreviousPlayers(Dt,!1,ft.namespaceId,ft.triggerName,null).forEach(hn=>{Ei(tn,Dt,[]).push(hn),hn.destroy()})});const ji=we.filter(ft=>wl(ft,p,y)),Zs=new Map;Em(Zs,this.driver,nt,y,Wn).forEach(ft=>{wl(ft,p,y)&&ji.push(ft)});const X0=new Map;P.forEach((ft,Dt)=>{Em(X0,this.driver,new Set(ft),p,"!")}),ji.forEach(ft=>{const Dt=Zs.get(ft),Nt=X0.get(ft);Zs.set(ft,Object.assign(Object.assign({},Dt),Nt))});const Gg=[],tV=[],nV={};u.forEach(ft=>{const{element:Dt,player:Nt,instruction:hn}=ft;if(i.has(Dt)){if(E.has(Dt))return Nt.onDestroy(()=>dt(Dt,hn.toStyles)),Nt.disabled=!0,Nt.overrideTotalTime(hn.totalTime),void r.push(Nt);let Gr=nV;if(Jn.size>1){let ca=Dt;const Rf=[];for(;ca=ca.parentNode;){const _i=Jn.get(ca);if(_i){Gr=_i;break}Rf.push(ca)}Rf.forEach(_i=>Jn.set(_i,Gr))}const cc=this._buildAnimation(Nt.namespaceId,hn,tn,s,X0,Zs);if(Nt.setRealPlayer(cc),Gr===nV)Gg.push(Nt);else{const ca=this.playersByElement.get(Gr);ca&&ca.length&&(Nt.parentPlayer=Zr(ca)),r.push(Nt)}}else Lt(Dt,hn.fromStyles),Nt.onDestroy(()=>dt(Dt,hn.toStyles)),tV.push(Nt),E.has(Dt)&&r.push(Nt)}),tV.forEach(ft=>{const Dt=s.get(ft.element);if(Dt&&Dt.length){const Nt=Zr(Dt);ft.setRealPlayer(Nt)}}),r.forEach(ft=>{ft.parentPlayer?ft.syncPlayerEvents(ft.parentPlayer):ft.destroy()});for(let ft=0;ft<we.length;ft++){const Dt=we[ft],Nt=Dt[Rr];if(ri(Dt,Aa),Nt&&Nt.hasAnimation)continue;let hn=[];if(h.size){let cc=h.get(Dt);cc&&cc.length&&hn.push(...cc);let ca=this.driver.query(Dt,Zo,!0);for(let Rf=0;Rf<ca.length;Rf++){let _i=h.get(ca[Rf]);_i&&_i.length&&hn.push(..._i)}}const Gr=hn.filter(cc=>!cc.destroyed);Gr.length?tp(this,Dt,Gr):this.processLeaveNode(Dt)}return we.length=0,Gg.forEach(ft=>{this.players.push(ft),ft.onDone(()=>{ft.destroy();const Dt=this.players.indexOf(ft);this.players.splice(Dt,1)}),ft.play()}),Gg}elementContainsData(t,e){let i=!1;const r=e[Rr];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let u=[];if(e){const h=this.playersByQueriedElement.get(t);h&&(u=h)}else{const h=this.playersByElement.get(t);if(h){const p=!s||s==xn;h.forEach(y=>{y.queued||!p&&y.triggerName!=r||u.push(y)})}}return(i||r)&&(u=u.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),u}_beforeAnimationBuild(t,e,i){const s=e.element,u=e.isRemovalTransition?void 0:t,h=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const y=p.element,E=y!==s,I=Ei(i,y,[]);this._getPreviousPlayers(y,E,u,h,e.toState).forEach(P=>{const B=P.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),P.destroy(),I.push(P)})}Lt(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,u){const h=e.triggerName,p=e.element,y=[],E=new Set,I=new Set,M=e.timelines.map(B=>{const Q=B.element;E.add(Q);const we=Q[Rr];if(we&&we.removedBeforeQueried)return new Ta(B.duration,B.delay);const et=Q!==p,nt=function np(n){const t=[];return Uc(n,t),t}((i.get(Q)||sh).map(tn=>tn.getRealPlayer())).filter(tn=>!!tn.element&&tn.element===Q),it=s.get(Q),st=u.get(Q),At=xc(0,this._normalizer,0,B.keyframes,it,st),Pt=this._buildPlayer(B,At,nt);if(B.subTimeline&&r&&I.add(Q),et){const tn=new ah(t,h,Q);tn.setRealPlayer(Pt),y.push(tn)}return Pt});y.forEach(B=>{Ei(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function mv(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,B.element,B))}),E.forEach(B=>Qi(B,Ma));const P=Zr(M);return P.onDestroy(()=>{E.forEach(B=>ri(B,Ma)),dt(p,e.toStyles)}),I.forEach(B=>{Ei(r,B,[]).push(P)}),P}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new Ta(t.duration,t.delay)}}class ah{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new Ta,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>Ac(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ei(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function lh(n){return n&&1===n.nodeType}function Cm(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function Em(n,t,e,i,r){const s=[];e.forEach(p=>s.push(Cm(p)));const u=[];i.forEach((p,y)=>{const E={};p.forEach(I=>{const M=E[I]=t.computeStyle(y,I,r);(!M||0==M.length)&&(y[Rr]=pv,u.push(y))}),n.set(y,E)});let h=0;return e.forEach(p=>Cm(p,s[h++])),u}function yv(n,t){const e=new Map;if(n.forEach(h=>e.set(h,[])),0==t.length)return e;const r=new Set(t),s=new Map;function u(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=e.has(y)?y:r.has(y)?1:u(y),s.set(h,p),p}return t.forEach(h=>{const p=u(h);1!==p&&e.get(p).push(h)}),e}function Qi(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function ri(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function tp(n,t,e){Zr(e).onDone(()=>n.processLeaveNode(t))}function Uc(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof du?Uc(i.players,t):t.push(i)}}function wl(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class Nu{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new oh(t,e,i),this._timelineEngine=new lC(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const u=t+"-"+r;let h=this._triggerCache[u];if(!h){const p=[],E=$f(this._driver,s,p,[]);if(p.length)throw function Da(n,t){return new o.vHH(3404,Ft)}();h=function oC(n,t,e){return new aC(n,t,e)}(r,E,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(e,r,h)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,u]=$o(i);this._timelineEngine.command(s,e,u,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[u,h]=$o(i);return this._timelineEngine.listen(u,e,h,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let vv=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&dt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dt(this._element,this._initialStyles),this._endStyles&&(dt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Lt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Lt(this._element,this._endStyles),this._endStyles=null),dt(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Ji(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];Hc(r)&&(t=t||{},t[r]=n[r])}return t}function Hc(n){return"display"===n||"position"===n}class uh{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(i=>{"offset"!=i&&(t[i]=this._finished?e[i]:kc(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class wv{validateStyleProperty(t){return bu(t)}matchesElement(t,e){return!1}containsElement(t,e){return jf(t,e)}getParentElement(t){return qo(t)}query(t,e,i){return gs(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,u=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const y={},E=u.filter(M=>M instanceof uh);(function lm(n,t){return 0===n||0===t})(i,r)&&E.forEach(M=>{let P=M.currentSnapshot;Object.keys(P).forEach(B=>y[B]=P[B])}),e=function zf(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let s=t[0],u=[];if(i.forEach(h=>{s.hasOwnProperty(h)||u.push(h),s[h]=e[h]}),u.length)for(var r=1;r<t.length;r++){let h=t[r];u.forEach(function(p){h[p]=kc(n,p)})}}return t}(t,e=e.map(M=>Oe(M,!1)),y);const I=function ip(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=Ji(t[0]),t.length>1&&(i=Ji(t[t.length-1]))):t&&(e=Ji(t)),e||i?new vv(n,e,i):null}(t,e);return new uh(t,e,p,I)}}let ch=(()=>{class n extends Gd{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?Ca(e):e;return jc(this._renderer,null,i,"register",[r]),new rp(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(ce))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class rp extends class nm{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new bv(this._id,t,e||{},this._renderer)}}class bv{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return jc(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function jc(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const Yo="@.disabled";let hh=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,u)=>{const h=null==u?void 0:u.parentNode(s);h&&u.removeChild(h,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let E=this._rendererCache.get(s);return E||(E=new Tm("",s,this.engine),this._rendererCache.set(s,E)),E}const u=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,e);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(u,h,e,E.name,E)};return i.data.animation.forEach(p),new Cv(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,h]=s;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(Nu),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Tm{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==Yo?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Cv extends Tm{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Yo?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function fh(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.substr(1),u="";return"@"!=s.charAt(0)&&([s,u]=function Im(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(t,e,i)}}let Or=(()=>{class n extends Nu{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ce),o.LFG(Mc),o.LFG(cv))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Sm=new o.OlP("AnimationModuleType"),Os=[{provide:Gd,useClass:ch},{provide:cv,useFactory:function sp(){return new nh}},{provide:Nu,useClass:Or},{provide:o.FYo,useFactory:function op(n,t,e){return new hh(n,t,e)},deps:[No,Nu,o.R0b]}],Fu=[{provide:Mc,useFactory:()=>new wv},{provide:Sm,useValue:"BrowserAnimations"},...Os],Dm=[{provide:Mc,useClass:Cu},{provide:Sm,useValue:"NoopAnimations"},...Os];let xm=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?Dm:Fu}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:Fu,imports:[va]}),n})();var An=N(8996),bl=N(3269);function bt(...n){const t=(0,bl.yG)(n);return(0,An.D)(n,t)}var mn=N(7579);class Xi extends mn.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var v=N(8306);const{isArray:g}=Array,{getPrototypeOf:_,prototype:b,keys:A}=Object;function O(n){if(1===n.length){const t=n[0];if(g(t))return{args:t,keys:null};if(function K(n){return n&&"object"==typeof n&&_(n)===b}(t)){const e=A(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var de=N(4671),ve=N(4004);const{isArray:Xe}=Array;function ht(n){return(0,ve.U)(t=>function mt(n,t){return Xe(t)?n(...t):n(t)}(n,t))}function Yn(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var rn=N(5403),Lu=N(9672);function Oa(n,t,e){n?(0,Lu.f)(e,n,t):t()}var pr=N(576);function Cl(n,t){const e=(0,pr.m)(n)?n:()=>n,i=r=>r.error(e());return new v.y(t?r=>t.schedule(i,0,r):i)}const El=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Vu=N(8189);function lp(...n){return function km(){return(0,Vu.J)(1)}()((0,An.D)(n,(0,bl.yG)(n)))}var go=N(8421);function Rm(n){return new v.y(t=>{(0,go.Xf)(n()).subscribe(t)})}var ph=N(515),up=N(727),Vi=N(4482);function Ev(){return(0,Vi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,rn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class Tv extends v.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Vi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new up.w0;const e=this.getSubject();t.add(this.source.subscribe((0,rn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=up.w0.EMPTY)}return t}refCount(){return Ev()(this)}}function gr(n,t){return(0,Vi.e)((e,i)=>{let r=null,s=0,u=!1;const h=()=>u&&!r&&i.complete();e.subscribe((0,rn.x)(i,p=>{null==r||r.unsubscribe();let y=0;const E=s++;(0,go.Xf)(n(p,E)).subscribe(r=(0,rn.x)(i,I=>i.next(t?t(p,I,E,y++):I),()=>{r=null,h()}))},()=>{u=!0,h()}))})}var Iv=N(5698);function Gc(...n){const t=(0,bl.yG)(n);return(0,Vi.e)((e,i)=>{(t?lp(n,e,t):lp(n,e)).subscribe(i)})}function cC(n,t,e,i,r){return(s,u)=>{let h=e,p=t,y=0;s.subscribe((0,rn.x)(u,E=>{const I=y++;p=h?n(p,E,I):(h=!0,E),i&&u.next(p)},r&&(()=>{h&&u.next(p),u.complete()})))}}function Ps(n,t){return(0,Vi.e)(cC(n,t,arguments.length>=2,!0))}function Qo(n,t){return(0,Vi.e)((e,i)=>{let r=0;e.subscribe((0,rn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}function Tl(n){return(0,Vi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,rn.x)(e,void 0,void 0,u=>{s=(0,go.Xf)(n(u,Tl(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}var mr=N(5577);function Bu(n,t){return(0,pr.m)(t)?(0,mr.z)(n,t,1):(0,mr.z)(n,1)}function Sv(n){return n<=0?()=>ph.E:(0,Vi.e)((t,e)=>{let i=[];t.subscribe((0,rn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Dv(n=dC){return(0,Vi.e)((t,e)=>{let i=!1;t.subscribe((0,rn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function dC(){return new El}function xv(n){return(0,Vi.e)((t,e)=>{let i=!1;t.subscribe((0,rn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Uu(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Qo((r,s)=>n(r,s,i)):de.y,(0,Iv.q)(1),e?xv(t):Dv(()=>new El))}var Pr=N(8505);class Pa{constructor(t,e){this.id=t,this.url=e}}class cp extends Pa{constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gh extends Pa{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pm extends Pa{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dp extends Pa{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class GS extends Pa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hC extends Pa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zS extends Pa{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $S extends Pa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fC extends Pa{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nm{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Mv{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nR{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pC{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qS{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gC{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mC{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const zt="primary";class Jo{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function mh(n){return new Jo(n)}const kv="ngNavigationCancelingError";function Rv(n){const t=Error("NavigationCancelingError: "+n);return t[kv]=!0,t}function ZS(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const u=i[s],h=n[s];if(u.startsWith(":"))r[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Xo(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!_C(n[r],t[r]))return!1;return!0}function _C(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function yC(n){return Array.prototype.concat.apply([],n)}function vC(n){return n.length>0?n[n.length-1]:null}function er(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function ea(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,An.D)(Promise.resolve(n)):bt(n)}const Fm={exact:function Lm(n,t,e){if(!Na(n.segments,t.segments)||!_h(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Lm(n.children[i],t.children[i],e))return!1;return!0},subset:Vm},mo={exact:function YS(n,t){return Xo(n,t)},subset:function Il(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>_C(n[e],t[e]))},ignored:()=>!0};function Ov(n,t,e){return Fm[e.paths](n.root,t.root,e.matrixParams)&&mo[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Vm(n,t,e){return Pv(n,t,t.segments,e)}function Pv(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Na(r,e)||t.hasChildren()||!_h(r,e,i))}if(n.segments.length===e.length){if(!Na(n.segments,e)||!_h(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!Vm(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Na(n.segments,r)&&_h(n.segments,r,i)&&n.children[zt])&&Pv(n.children[zt],t,s,i)}}function _h(n,t,e){return t.every((i,r)=>mo[e](n[r].parameters,i.parameters))}class yh{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mh(this.queryParams)),this._queryParamMap}toString(){return iR.serialize(this)}}class Wt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,er(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gm(this)}}class Bm{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=mh(this.parameters)),this._parameterMap}toString(){return Fv(this)}}function Na(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class Hm{}class jm{parse(t){const e=new lR(t);return new yh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${hp(t.root,!0)}`,i=function JS(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${zm(e)}=${zm(r)}`).join("&"):`${zm(e)}=${zm(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function CC(n){return encodeURI(n)}(t.fragment)}`:""}`}}const iR=new jm;function Gm(n){return n.segments.map(t=>Fv(t)).join("/")}function hp(n,t){if(!n.hasChildren())return Gm(n);if(t){const e=n.children[zt]?hp(n.children[zt],!1):"",i=[];return er(n.children,(r,s)=>{s!==zt&&i.push(`${s}:${hp(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Nv(n,t){let e=[];return er(n.children,(i,r)=>{r===zt&&(e=e.concat(t(i,r)))}),er(n.children,(i,r)=>{r!==zt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===zt?[hp(n.children[zt],!1)]:[`${r}:${hp(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${Gm(n)}/${e[0]}`:`${Gm(n)}/(${e.join("//")})`}}function bC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zm(n){return bC(n).replace(/%3B/gi,";")}function EC(n){return bC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $m(n){return decodeURIComponent(n)}function QS(n){return $m(n.replace(/\+/g,"%20"))}function Fv(n){return`${EC(n.path)}${function TC(n){return Object.keys(n).map(t=>`;${EC(t)}=${EC(n[t])}`).join("")}(n.parameters)}`}const Lv=/^[^\/()?;=#]+/;function Vv(n){const t=n.match(Lv);return t?t[0]:""}const rR=/^[^=?&#]+/,oR=/^[^&#]+/;class lR{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[zt]=new Wt(t,e)),i}parseSegment(){const t=Vv(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Bm($m(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Vv(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Vv(this.remaining);r&&(i=r,this.capture(i))}t[$m(e)]=$m(i)}parseQueryParam(t){const e=function sR(n){const t=n.match(rR);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const u=function aR(n){const t=n.match(oR);return t?t[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=QS(e),s=QS(i);if(t.hasOwnProperty(r)){let u=t[r];Array.isArray(u)||(u=[u],t[r]=u),u.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Vv(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=zt);const u=this.parseChildren();e[s]=1===Object.keys(u).length?u[zt]:new Wt([],u),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class XS{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=IC(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=IC(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=SC(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return SC(t,this._root).map(e=>e.value)}}function IC(n,t){if(n===t.value)return t;for(const e of t.children){const i=IC(n,e);if(i)return i}return null}function SC(n,t){if(n===t.value)return[t];for(const e of t.children){const i=SC(n,e);if(i.length)return i.unshift(t),i}return[]}class Hu{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ns(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class qm extends XS{constructor(t,e){super(t),this.snapshot=e,Zm(this,t)}toString(){return this.snapshot.toString()}}function DC(n,t){const e=function xC(n,t){const u=new Wm([],{},{},"",{},zt,t,null,n.root,-1,{});return new Sl("",new Hu(u,[]))}(n,t),i=new Xi([new Bm("",{})]),r=new Xi({}),s=new Xi({}),u=new Xi({}),h=new Xi(""),p=new ju(i,r,u,h,s,zt,t,e.root);return p.snapshot=e.root,new qm(new Hu(p,[]),e)}class ju{constructor(t,e,i,r,s,u,h,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=u,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ve.U)(t=>mh(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ve.U)(t=>mh(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bv(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Uv(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Wm{constructor(t,e,i,r,s,u,h,p,y,E,I){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=u,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=E,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sl extends XS{constructor(t,e){super(e),this.url=t,Zm(this,e)}toString(){return AC(this._root)}}function Zm(n,t){t.value._routerState=n,t.children.forEach(e=>Zm(n,e))}function AC(n){const t=n.children.length>0?` { ${n.children.map(AC).join(", ")} } `:"";return`${n.value}${t}`}function fp(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Xo(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Xo(t.params,e.params)||n.params.next(e.params),function KS(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Xo(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Xo(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Hv(n,t){const e=Xo(n.params,t.params)&&function Um(n,t){return Na(n,t)&&n.every((e,i)=>Xo(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Hv(n.parent,t.parent))}function pp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function eD(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return pp(n,i,r);return pp(n,i)})}(n,t,e);return new Hu(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=t.value,u.children=t.children.map(h=>pp(n,h)),u}}const i=function gp(n){return new ju(new Xi(n.url),new Xi(n.params),new Xi(n.queryParams),new Xi(n.fragment),new Xi(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>pp(n,s));return new Hu(i,r)}}function wh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Fa(n){return"object"==typeof n&&null!=n&&n.outlets}function zc(n,t,e,i,r){let s={};if(i&&er(i,(h,p)=>{s[p]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),n===t)return new yh(e,s,r);const u=$c(n,t,e);return new yh(u,s,r)}function $c(n,t,e){const i={};return er(n.children,(r,s)=>{i[s]=r===t?e:$c(r,t,e)}),new Wt(n.segments,i)}class kC{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&wh(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Fa);if(r&&r!==vC(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Km{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function mp(n,t,e){if(n||(n=new Wt([],{})),0===n.segments.length&&n.hasChildren())return Ym(n,t,e);const i=function PC(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const u=n.segments[r],h=e[i];if(Fa(h))break;const p=`${h}`,y=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!LC(p,y,u))return s;i+=2}else{if(!LC(p,{},u))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Wt(n.segments.slice(0,i.pathIndex),{});return s.children[zt]=new Wt(n.segments.slice(i.pathIndex),n.children),Ym(s,0,r)}return i.match&&0===r.length?new Wt(n.segments,{}):i.match&&!n.hasChildren()?NC(n,t,e):i.match?Ym(n,0,r):NC(n,t,e)}function Ym(n,t,e){if(0===e.length)return new Wt(n.segments,{});{const i=function OC(n){return Fa(n[0])?n[0].outlets:{[zt]:n}}(e),r={};return er(i,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[u]=mp(n.children[u],t,s))}),er(n.children,(s,u)=>{void 0===i[u]&&(r[u]=s)}),new Wt(n.segments,r)}}function NC(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Fa(s)){const p=FC(s.outlets);return new Wt(i,p)}if(0===r&&wh(e[0])){i.push(new Bm(n.segments[t].path,zv(e[0]))),r++;continue}const u=Fa(s)?s.outlets[zt]:`${s}`,h=r<e.length-1?e[r+1]:null;u&&h&&wh(h)?(i.push(new Bm(u,zv(h))),r+=2):(i.push(new Bm(u,{})),r++)}return new Wt(i,{})}function FC(n){const t={};return er(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=NC(new Wt([],{}),0,e))}),t}function zv(n){const t={};return er(n,(e,i)=>t[i]=`${e}`),t}function LC(n,t,e){return n==e.path&&Xo(t,e.parameters)}class tD{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),fp(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Ns(e);t.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,r[u],i),delete r[u]}),er(r,(s,u)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(t,e,u.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ns(t);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);if(i&&i.outlet){const u=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:u,route:t,contexts:h})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ns(t);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=Ns(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new gC(s.value.snapshot))}),t.children.length&&this.forwardEvent(new pC(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(fp(r),r===s)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,u.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),fp(h.route.value),this.activateChildRoutes(t,null,u.children)}else{const h=function nD(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),p=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=r,u.resolver=p,u.outlet&&u.outlet.activateWith(r,p),this.activateChildRoutes(t,null,u.children)}}else this.activateChildRoutes(t,null,i)}}class Qr{constructor(t,e){this.routes=t,this.module=e}}function Gu(n){return"function"==typeof n}function bh(n){return n instanceof yh}const qc=Symbol("INITIAL_VALUE");function Ch(){return gr(n=>function ap(...n){const t=(0,bl.yG)(n),e=(0,bl.jO)(n),{args:i,keys:r}=O(n);if(0===i.length)return(0,An.D)([],t);const s=new v.y(function Am(n,t,e=de.y){return i=>{Oa(t,()=>{const{length:r}=n,s=new Array(r);let u=r,h=r;for(let p=0;p<r;p++)Oa(t,()=>{const y=(0,An.D)(n[p],t);let E=!1;y.subscribe((0,rn.x)(i,I=>{s[p]=I,E||(E=!0,h--),h||i.next(e(s.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,t,r?u=>Yn(r,u):de.y));return e?s.pipe(ht(e)):s}(n.map(t=>t.pipe((0,Iv.q)(1),Gc(qc)))).pipe(Ps((t,e)=>{let i=!1;return e.reduce((r,s,u)=>r!==qc?r:(s===qc&&(i=!0),i||!1!==s&&u!==e.length-1&&!bh(s)?r:s),t)},qc),Qo(t=>t!==qc),(0,ve.U)(t=>bh(t)?t:!0===t),(0,Iv.q)(1)))}class sD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new _p,this.attachRef=null}}class _p{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new sD,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let $v=(()=>{class n{constructor(e,i,r,s,u){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=s||zt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const u=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new UC(e,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(_p),o.Y36(o.s_b),o.Y36(o._Vd),o.$8M("name"),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class UC{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===ju?this.route:t===_p?this.childContexts:this.parent.get(t,e)}}let HC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},directives:[$v],encapsulation:2}),n})();function qv(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];oD(i,aD(t,i))}}function oD(n,t){n.children&&qv(n.children,t)}function aD(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function Qm(n){const t=n.children&&n.children.map(Qm),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==zt&&(e.component=HC),e}function Fs(n){return n.outlet||zt}function jC(n,t){const e=n.filter(i=>Fs(i)===t);return e.push(...n.filter(i=>Fs(i)!==t)),e}const ta={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Eh(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},ta):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||ZS)(e,n,t);if(!s)return Object.assign({},ta);const u={};er(s.posParams,(p,y)=>{u[y]=p.path});const h=s.consumed.length>0?Object.assign(Object.assign({},u),s.consumed[s.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:h,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function Jm(n,t,e,i,r="corrected"){if(e.length>0&&function GC(n,t,e){return e.some(i=>Xm(n,t,i)&&Fs(i)!==zt)}(n,e,i)){const u=new Wt(t,function dR(n,t,e,i){const r={};r[zt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Fs(s)!==zt){const u=new Wt([],{});u._sourceSegment=n,u._segmentIndexShift=t.length,r[Fs(s)]=u}return r}(n,t,i,new Wt(e,n.children)));return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:[]}}if(0===e.length&&function uD(n,t,e){return e.some(i=>Xm(n,t,i))}(n,e,i)){const u=new Wt(n.segments,function lD(n,t,e,i,r,s){const u={};for(const h of i)if(Xm(n,e,h)&&!r[Fs(h)]){const p=new Wt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,u[Fs(h)]=p}return Object.assign(Object.assign({},r),u)}(n,t,e,i,n.children,r));return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:e}}const s=new Wt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Xm(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function zC(n,t,e,i){return!!(Fs(n)===i||i!==zt&&Xm(t,e,n))&&("**"===n.path||Eh(t,n,e).matched)}function e_(n,t,e){return 0===t.length&&!n.children[e]}class t_{constructor(t){this.segmentGroup=t||null}}class $C{constructor(t){this.urlTree=t}}function zu(n){return Cl(new t_(n))}function n_(n){return Cl(new $C(n))}class qC{constructor(t,e,i,r,s){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(o.h0i)}apply(){const t=Jm(this.urlTree.root,[],[],this.config).segmentGroup,e=new Wt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,zt).pipe((0,ve.U)(s=>this.createUrlTree(WC(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Tl(s=>{if(s instanceof $C)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof t_?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,zt).pipe((0,ve.U)(r=>this.createUrlTree(WC(r),t.queryParams,t.fragment))).pipe(Tl(r=>{throw r instanceof t_?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const r=t.segments.length>0?new Wt([],{[zt]:t}):t;return new yh(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,ve.U)(s=>new Wt([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,An.D)(r).pipe(Bu(s=>{const u=i.children[s],h=jC(e,s);return this.expandSegmentGroup(t,h,u,s).pipe((0,ve.U)(p=>({segment:p,outlet:s})))}),Ps((s,u)=>(s[u.outlet]=u.segment,s),{}),function Av(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Qo((r,s)=>n(r,s,i)):de.y,Sv(1),e?xv(t):Dv(()=>new El))}())}expandSegment(t,e,i,r,s,u){return(0,An.D)(i).pipe(Bu(h=>this.expandSegmentAgainstRoute(t,e,i,h,r,s,u).pipe(Tl(y=>{if(y instanceof t_)return bt(null);throw y}))),Uu(h=>!!h),Tl((h,p)=>{if(h instanceof El||"EmptyError"===h.name)return e_(e,r,s)?bt(new Wt([],{})):zu(e);throw h}))}expandSegmentAgainstRoute(t,e,i,r,s,u,h){return zC(r,e,s,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u):zu(e):zu(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?n_(s):this.lineralizeSegments(i,s).pipe((0,mr.z)(u=>{const h=new Wt(u,{});return this.expandSegment(t,h,e,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,u){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:E}=Eh(e,r,s);if(!h)return zu(e);const I=this.applyRedirectCommands(p,r.redirectTo,E);return r.redirectTo.startsWith("/")?n_(I):this.lineralizeSegments(r,I).pipe((0,mr.z)(M=>this.expandSegment(t,e,i,M.concat(y),u,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?bt(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe((0,ve.U)(I=>(i._loadedConfig=I,new Wt(r,{})))):bt(new Wt(r,{}));const{matched:u,consumedSegments:h,remainingSegments:p}=Eh(e,i,r);return u?this.getChildConfig(t,i,r).pipe((0,mr.z)(E=>{const I=E.module,M=E.routes,{segmentGroup:P,slicedSegments:B}=Jm(e,h,p,M),Q=new Wt(P.segments,P.children);if(0===B.length&&Q.hasChildren())return this.expandChildren(I,M,Q).pipe((0,ve.U)(it=>new Wt(h,it)));if(0===M.length&&0===B.length)return bt(new Wt(h,{}));const we=Fs(i)===s;return this.expandSegment(I,Q,M,B,we?zt:s,!0).pipe((0,ve.U)(nt=>new Wt(h.concat(nt.segments),nt.children)))})):zu(e)}getChildConfig(t,e,i){return e.children?bt(new Qr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?bt(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe((0,mr.z)(r=>r?this.configLoader.load(t.injector,e).pipe((0,ve.U)(s=>(e._loadedConfig=s,s))):function Wv(n){return Cl(Rv(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):bt(new Qr([],t))}runCanLoadGuards(t,e,i){const r=e.canLoad;return r&&0!==r.length?bt(r.map(u=>{const h=t.get(u);let p;if(function uR(n){return n&&Gu(n.canLoad)}(h))p=h.canLoad(e,i);else{if(!Gu(h))throw new Error("Invalid CanLoad guard");p=h(e,i)}return ea(p)})).pipe(Ch(),(0,Pr.b)(u=>{if(!bh(u))return;const h=Rv(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,ve.U)(u=>!0===u)):bt(!0)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return bt(i);if(r.numberOfChildren>1||!r.children[zt])return Cl(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));r=r.children[zt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new yh(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return er(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=e[h]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let u={};return er(e.children,(h,p)=>{u[p]=this.createSegmentGroup(t,h,i,r)}),new Wt(s,u)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}function WC(n){const t={};for(const i of Object.keys(n.children)){const s=WC(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function hR(n){if(1===n.numberOfChildren&&n.children[zt]){const t=n.children[zt];return new Wt(n.segments.concat(t.segments),t.children)}return n}(new Wt(n.segments,t))}class dD{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class i_{constructor(t,e){this.component=t,this.route=e}}function ZC(n,t,e){const i=n._root;return Th(i,t?t._root:null,e,[i.value])}function yp(n,t,e){const i=function YC(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function Th(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ns(t);return n.children.forEach(u=>{(function Dl(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=t?t.value:null,h=e?e.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function r_(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Na(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Na(n.url,t.url)||!Xo(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hv(n,t)||!Xo(n.queryParams,t.queryParams);default:return!Hv(n,t)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new dD(i)):(s.data=u.data,s._resolvedData=u._resolvedData),Th(n,t,s.component?h?h.children:null:e,i,r),p&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new i_(h.outlet.component,u))}else u&&vp(t,h,r),r.canActivateChecks.push(new dD(i)),Th(n,null,s.component?h?h.children:null:e,i,r)})(u,s[u.value.outlet],e,i.concat([u.value]),r),delete s[u.value.outlet]}),er(s,(u,h)=>vp(u,e.getContext(h),r)),r}function vp(n,t,e){const i=Ns(n),r=n.value;er(i,(s,u)=>{vp(s,r.component?t?t.children.getContext(u):null:t,e)}),e.canDeactivateChecks.push(new i_(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class JC{}function Xv(n){return new v.y(t=>t.error(n))}class pD{constructor(t,e,i,r,s,u){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=u}recognize(){const t=Jm(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,zt);if(null===e)return null;const i=new Wm([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Hu(i,e),s=new Sl(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,i=Bv(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const s of Object.keys(e.children)){const u=e.children[s],h=jC(t,s),p=this.processSegmentGroup(h,u,s);if(null===p)return null;i.push(...p)}const r=tw(i);return function ew(n){n.sort((t,e)=>t.value.outlet===zt?-1:e.value.outlet===zt?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,i,r){for(const s of t){const u=this.processSegmentAgainstRoute(s,e,i,r);if(null!==u)return u}return e_(e,i,r)?[]:null}processSegmentAgainstRoute(t,e,i,r){if(t.redirectTo||!zC(t,e,i,r))return null;let s,u=[],h=[];if("**"===t.path){const P=i.length>0?vC(i).parameters:{};s=new Wm(i,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tE(t),Fs(t),t.component,t,nw(e),eE(e)+i.length,Wc(t))}else{const P=Eh(e,t,i);if(!P.matched)return null;u=P.consumedSegments,h=P.remainingSegments,s=new Wm(u,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tE(t),Fs(t),t.component,t,nw(e),eE(e)+u.length,Wc(t))}const p=function gD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:y,slicedSegments:E}=Jm(e,u,h,p.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===E.length&&y.hasChildren()){const P=this.processChildren(p,y);return null===P?null:[new Hu(s,P)]}if(0===p.length&&0===E.length)return[new Hu(s,[])];const I=Fs(t)===r,M=this.processSegment(p,y,E,I?zt:r);return null===M?null:[new Hu(s,M)]}}function mD(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function tw(n){const t=[],e=new Set;for(const i of n){if(!mD(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=tw(i.children);t.push(new Hu(i.value,r))}return t.filter(i=>!e.has(i))}function nw(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function eE(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function tE(n){return n.data||{}}function Wc(n){return n.resolve||{}}function na(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function s_(n){return gr(t=>{const e=n(t);return e?(0,An.D)(e).pipe((0,ve.U)(()=>t)):bt(t)})}class rE extends class iE{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const rw=new o.OlP("ROUTES");class sE{constructor(t,e,i,r){this.injector=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe((0,ve.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const u=s.create(t);return new Qr(yC(u.injector.get(rw,void 0,o.XFs.Self|o.XFs.Optional)).map(Qm),u)}),Tl(s=>{throw e._loader$=void 0,s}));return e._loader$=new Tv(r,()=>new mn.x).pipe(Ev()),e._loader$}loadModuleFactory(t){return ea(t()).pipe((0,mr.z)(e=>e instanceof o.YKP?bt(e):(0,An.D)(this.compiler.compileModuleAsync(e))))}}class CD{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function oE(n){throw n}function pR(n,t,e){return t.parse("/")}function sw(n,t){return bt(null)}const ED={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _o=(()=>{class n{constructor(e,i,r,s,u,h,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mn.x,this.errorHandler=oE,this.malformedUriErrorHandler=pR,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:sw,afterPreactivation:sw},this.urlHandlingStrategy=new CD,this.routeReuseStrategy=new rE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(o.h0i),this.console=u.get(o.c2e);const I=u.get(o.R0b);this.isNgZoneEnabled=I instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function wC(){return new yh(new Wt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new sE(u,h,M=>this.triggerEvent(new Nm(M)),M=>this.triggerEvent(new Mv(M))),this.routerState=DC(this.currentUrlTree,this.rootComponentType),this.transitions=new Xi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Qo(r=>0!==r.id),(0,ve.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),gr(r=>{let s=!1,u=!1;return bt(r).pipe((0,Pr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),gr(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return o_(h.source)&&(this.browserUrlTree=h.extractedUrl),bt(h).pipe(gr(I=>{const M=this.transitions.getValue();return i.next(new cp(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),M!==this.transitions.getValue()?ph.E:Promise.resolve(I)}),function Kv(n,t,e,i){return gr(r=>function Zv(n,t,e,i,r){return new qC(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,ve.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Pr.b)(I=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function _D(n,t,e,i,r){return(0,mr.z)(s=>function XC(n,t,e,i,r="emptyOnly",s="legacy"){try{const u=new pD(n,t,e,i,r,s).recognize();return null===u?Xv(new JC):bt(u)}catch(u){return Xv(u)}}(n,t,s.urlAfterRedirects,e(s.urlAfterRedirects),i,r).pipe((0,ve.U)(u=>Object.assign(Object.assign({},s),{targetSnapshot:u}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Pr.b)(I=>{if("eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(P,I)}this.browserUrlTree=I.urlAfterRedirects}const M=new GS(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);i.next(M)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:P,source:B,restoredState:Q,extras:we}=h,et=new cp(M,this.serializeUrl(P),B,Q);i.next(et);const nt=DC(P,this.rootComponentType).snapshot;return bt(Object.assign(Object.assign({},h),{targetSnapshot:nt,urlAfterRedirects:P,extras:Object.assign(Object.assign({},we),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),ph.E}),s_(h=>{const{targetSnapshot:p,id:y,extractedUrl:E,rawUrl:I,extras:{skipLocationChange:M,replaceUrl:P}}=h;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:E,rawUrlTree:I,skipLocationChange:!!M,replaceUrl:!!P})}),(0,Pr.b)(h=>{const p=new hC(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,ve.U)(h=>Object.assign(Object.assign({},h),{guards:ZC(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function hD(n,t){return(0,mr.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:u}}=e;return 0===u.length&&0===s.length?bt(Object.assign(Object.assign({},e),{guardsResult:!0})):function fR(n,t,e,i){return(0,An.D)(n).pipe((0,mr.z)(r=>function Jv(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?bt(s.map(h=>{const p=yp(h,t,r);let y;if(function rD(n){return n&&Gu(n.canDeactivate)}(p))y=ea(p.canDeactivate(n,t,e,i));else{if(!Gu(p))throw new Error("Invalid CanDeactivate guard");y=ea(p(n,t,e,i))}return y.pipe(Uu())})).pipe(Ch()):bt(!0)}(r.component,r.route,e,t,i)),Uu(r=>!0!==r,!0))}(u,i,r,n).pipe((0,mr.z)(h=>h&&function iD(n){return"boolean"==typeof n}(h)?function Yv(n,t,e,i){return(0,An.D)(t).pipe(Bu(r=>lp(function Qv(n,t){return null!==n&&t&&t(new nR(n)),bt(!0)}(r.route.parent,i),function QC(n,t){return null!==n&&t&&t(new qS(n)),bt(!0)}(r.route,i),function fD(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(u=>function KC(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(u)).filter(u=>null!==u).map(u=>Rm(()=>bt(u.guards.map(p=>{const y=yp(p,u.node,e);let E;if(function cR(n){return n&&Gu(n.canActivateChild)}(y))E=ea(y.canActivateChild(i,n));else{if(!Gu(y))throw new Error("Invalid CanActivateChild guard");E=ea(y(i,n))}return E.pipe(Uu())})).pipe(Ch())));return bt(s).pipe(Ch())}(n,r.path,e),function wp(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return bt(!0);const r=i.map(s=>Rm(()=>{const u=yp(s,t,e);let h;if(function BC(n){return n&&Gu(n.canActivate)}(u))h=ea(u.canActivate(t,n));else{if(!Gu(u))throw new Error("Invalid CanActivate guard");h=ea(u(t,n))}return h.pipe(Uu())}));return bt(r).pipe(Ch())}(n,r.route,e))),Uu(r=>!0!==r,!0))}(i,s,n,t):bt(h)),(0,ve.U)(h=>Object.assign(Object.assign({},e),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Pr.b)(h=>{if(bh(h.guardsResult)){const y=Rv(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new zS(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),Qo(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),s_(h=>{if(h.guards.canActivateChecks.length)return bt(h).pipe((0,Pr.b)(p=>{const y=new $S(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),gr(p=>{let y=!1;return bt(p).pipe(function yD(n,t){return(0,mr.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return bt(e);let s=0;return(0,An.D)(r).pipe(Bu(u=>function vD(n,t,e,i){return function wD(n,t,e,i){const r=na(n);if(0===r.length)return bt({});const s={};return(0,An.D)(r).pipe((0,mr.z)(u=>function iw(n,t,e,i){const r=yp(n,t,i);return ea(r.resolve?r.resolve(t,e):r(t,e))}(n[u],t,e,i).pipe((0,Pr.b)(h=>{s[u]=h}))),Sv(1),(0,mr.z)(()=>na(s).length===r.length?bt(s):ph.E))}(n._resolve,n,t,i).pipe((0,ve.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),Bv(n,e).resolve),null)))}(u.route,i,n,t)),(0,Pr.b)(()=>s++),Sv(1),(0,mr.z)(u=>s===r.length?bt(e):ph.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Pr.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Pr.b)(p=>{const y=new fC(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),s_(h=>{const{targetSnapshot:p,id:y,extractedUrl:E,rawUrl:I,extras:{skipLocationChange:M,replaceUrl:P}}=h;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:E,rawUrlTree:I,skipLocationChange:!!M,replaceUrl:!!P})}),(0,ve.U)(h=>{const p=function MC(n,t,e){const i=pp(n,t._root,e?e._root:void 0);return new qm(i,t)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:p})}),(0,Pr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,t,e)=>(0,ve.U)(i=>(new tD(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Pr.b)({next(){s=!0},complete(){s=!0}}),function Om(n){return(0,Vi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}(()=>{var h;s||u||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===r.id&&(this.currentNavigation=null)}),Tl(h=>{if(u=!0,function WS(n){return n&&n[kv]}(h)){const p=bh(h.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const y=new Pm(r.id,this.serializeUrl(r.extractedUrl),h.message);i.next(y),p?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),I={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||o_(r.source)};this.scheduleNavigation(E,"imperative",null,I,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new dp(r.id,this.serializeUrl(r.extractedUrl),h);i.next(p);try{r.resolve(this.errorHandler(h))}catch(y){r.reject(y)}}return ph.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},u=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(u){const p=Object.assign({},u);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(e.url);this.scheduleNavigation(h,i,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){qv(e),this.config=e.map(Qm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:u,queryParamsHandling:h,preserveFragment:p}=i,y=r||this.routerState.root,E=p?this.currentUrlTree.fragment:u;let I=null;switch(h){case"merge":I=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),function vh(n,t,e,i,r){if(0===e.length)return zc(t.root,t.root,t.root,i,r);const s=function RC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new kC(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return er(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===u?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?e=!0:".."===h?t++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new kC(e,t,i)}(e);if(s.toRoot())return zc(t.root,t.root,new Wt([],{}),i,r);const u=function jv(n,t,e){if(n.isAbsolute)return new Km(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new Km(s,s===t.root,0)}const i=wh(n.commands[0])?0:1;return function Gv(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Km(i,!1,r-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,t,n),h=u.processChildren?Ym(u.segmentGroup,u.index,s.commands):mp(u.segmentGroup,u.index,s.commands);return zc(t.root,u.segmentGroup,h,i,r)}(y,this.currentUrlTree,e,I,null!=E?E:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=bh(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function gR(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},ED):!1===i?Object.assign({},TD):i,bh(e))return Ov(this.currentUrlTree,e,r);const s=this.parseUrl(e);return Ov(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new gh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,u){var h,p;if(this.disposed)return Promise.resolve(!1);let y,E,I;u?(y=u.resolve,E=u.reject,I=u.promise):I=new Promise((B,Q)=>{y=B,E=Q});const M=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),P=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):P=0,this.setTransition({id:M,targetPageId:P,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:y,reject:E,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(B=>Promise.reject(B))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===u?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===u&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new Pm(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function o_(n){return"imperative"!==n}let ow=(()=>{class n{constructor(e,i,r,s,u){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=u,this.commands=null,this.onChanges=new mn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Zc(this.skipLocationChange),replaceUrl:Zc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zc(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(_o),o.Y36(ju),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})(),Cp=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new mn.x,this.subscription=e.events.subscribe(s=>{s instanceof gh&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,u){if(0!==e||i||r||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Zc(this.skipLocationChange),replaceUrl:Zc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zc(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(_o),o.Y36(ju),o.Y36(ge))},n.\u0275dir=o.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&o.uIk("target",i.target)("href",i.href,o.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})();function Zc(n){return""===n||!!n}let ID=(()=>{class n{constructor(e,i,r,s,u,h){this.router=e,this.element=i,this.renderer=r,this.cdr=s,this.link=u,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new o.vpe,this.routerEventsSubscription=e.events.subscribe(p=>{p instanceof gh&&this.update()})}ngAfterContentInit(){bt(this.links.changes,this.linksWithHrefs.changes,bt(null)).pipe((0,Vu.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const i=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,An.D)(i).pipe((0,Vu.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function ia(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(_o),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(ow,8),o.Y36(Cp,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,ow,5),o.Suo(r,Cp,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.links=s),o.iGM(s=o.CRH())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[o.TTD]}),n})();class SD{}class aw{preload(t,e){return bt(null)}}let lw=(()=>{class n{constructor(e,i,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new sE(r,i,p=>e.triggerEvent(new Nm(p)),p=>e.triggerEvent(new Mv(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qo(e=>e instanceof gh),Bu(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(o.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const u=s._loadedConfig;r.push(this.processRoutes(u.module,u.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children));return(0,An.D)(r).pipe((0,Vu.J)(),(0,ve.U)(s=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?bt(i._loadedConfig):this.loader.load(e.injector,i)).pipe((0,mr.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(_o),o.LFG(o.Sil),o.LFG(o.zs3),o.LFG(SD))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),a_=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof cp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof gh&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof mC&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new mC(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ih=new o.OlP("ROUTER_CONFIGURATION"),uw=new o.OlP("ROUTER_FORROOT_GUARD"),cw=[Te,{provide:Hm,useClass:jm},{provide:_o,useFactory:function kD(n,t,e,i,r,s,u={},h,p){const y=new _o(null,n,t,e,i,r,yC(s));return h&&(y.urlHandlingStrategy=h),p&&(y.routeReuseStrategy=p),function RD(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(u,y),u.enableTracing&&y.events.subscribe(E=>{var I,M;null===(I=console.group)||void 0===I||I.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(M=console.groupEnd)||void 0===M||M.call(console)}),y},deps:[Hm,_p,Te,o.zs3,o.Sil,rw,Ih,[class bD{},new o.FiY],[class nE{},new o.FiY]]},_p,{provide:ju,useFactory:function u_(n){return n.routerState.root},deps:[_o]},lw,aw,class mR{preload(t,e){return e().pipe(Tl(()=>bt(null)))}},{provide:Ih,useValue:{enableTracing:!1}}];function DD(){return new o.PXZ("Router",_o)}let l_=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[cw,aE(e),{provide:uw,useFactory:MD,deps:[[_o,new o.FiY,new o.tp0]]},{provide:Ih,useValue:i||{}},{provide:ge,useFactory:AD,deps:[ae,[new o.tBr($e),new o.FiY],Ih]},{provide:a_,useFactory:xD,deps:[_o,fc,Ih]},{provide:SD,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:aw},{provide:o.PXZ,multi:!0,useFactory:DD},[$u,{provide:o.ip1,multi:!0,useFactory:OD,deps:[$u]},{provide:lE,useFactory:Ep,deps:[$u]},{provide:o.tb,multi:!0,useExisting:lE}]]}}static forChild(e){return{ngModule:n,providers:[aE(e)]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(uw,8),o.LFG(_o,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function xD(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new a_(n,t,e)}function AD(n,t,e={}){return e.useHash?new Ae(n,t):new Ye(n,t)}function MD(n){return"guarded"}function aE(n){return[{provide:o.deG,multi:!0,useValue:n},{provide:rw,multi:!0,useValue:n}]}let $u=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new mn.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(h=>i=h),s=this.injector.get(_o),u=this.injector.get(Ih);return"disabled"===u.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?bt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(Ih),r=this.injector.get(lw),s=this.injector.get(a_),u=this.injector.get(_o),h=this.injector.get(o.z2F);e===h.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&u.initialNavigation(),r.setUpPreloading(),s.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function OD(n){return n.appInitializer.bind(n)}function Ep(n){return n.bootstrapListener.bind(n)}const lE=new o.OlP("Router Initializer");let La=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-dashboard"]],decls:255,vars:0,consts:[[1,"container-fluid","p-0"],[1,"h3","mb-3"],[1,"row"],[1,"col-xl-6","col-xxl-5","d-flex"],[1,"w-100"],[1,"col-sm-6"],[1,"card"],[1,"card-body"],[1,"col","mt-0"],[1,"card-title"],[1,"col-auto"],[1,"stat","text-primary"],["data-feather","truck",1,"align-middle"],[1,"mt-1","mb-3"],[1,"mb-0"],[1,"text-danger"],[1,"mdi","mdi-arrow-bottom-right"],[1,"text-muted"],["data-feather","users",1,"align-middle"],[1,"text-success"],["data-feather","dollar-sign",1,"align-middle"],["data-feather","shopping-cart",1,"align-middle"],[1,"col-xl-6","col-xxl-7"],[1,"card","flex-fill","w-100"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body","py-3"],[1,"chart","chart-sm"],["id","chartjs-dashboard-line"],[1,"col-12","col-md-6","col-xxl-3","d-flex","order-2","order-xxl-3"],[1,"card-body","d-flex"],[1,"align-self-center","w-100"],[1,"py-3"],[1,"chart","chart-xs"],["id","chartjs-dashboard-pie"],[1,"table","mb-0"],[1,"text-end"],[1,"col-12","col-md-12","col-xxl-6","d-flex","order-3","order-xxl-2"],[1,"card-body","px-4"],["id","world_map",2,"height","350px"],[1,"col-12","col-md-6","col-xxl-3","d-flex","order-1","order-xxl-1"],[1,"card","flex-fill"],[1,"chart"],["id","datetimepicker-dashboard"],[1,"col-12","col-lg-8","col-xxl-9","d-flex"],[1,"table","table-hover","my-0"],[1,"d-none","d-xl-table-cell"],[1,"d-none","d-md-table-cell"],[1,"badge","bg-success"],[1,"badge","bg-danger"],[1,"badge","bg-warning"],[1,"col-12","col-lg-4","col-xxl-3","d-flex"],[1,"card-body","d-flex","w-100"],[1,"align-self-center","chart","chart-lg"],["id","chartjs-dashboard-bar"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"h1",1)(2,"strong"),o._uU(3,"Analytics"),o.qZA(),o._uU(4," Dashboard"),o.qZA(),o.TgZ(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",2)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",2)(13,"div",8)(14,"h5",9),o._uU(15,"Sales"),o.qZA()(),o.TgZ(16,"div",10)(17,"div",11),o._UZ(18,"i",12),o.qZA()()(),o.TgZ(19,"h1",13),o._uU(20,"2.382"),o.qZA(),o.TgZ(21,"div",14)(22,"span",15),o._UZ(23,"i",16),o._uU(24," -3.65% "),o.qZA(),o.TgZ(25,"span",17),o._uU(26,"Since last week"),o.qZA()()()(),o.TgZ(27,"div",6)(28,"div",7)(29,"div",2)(30,"div",8)(31,"h5",9),o._uU(32,"Visitors"),o.qZA()(),o.TgZ(33,"div",10)(34,"div",11),o._UZ(35,"i",18),o.qZA()()(),o.TgZ(36,"h1",13),o._uU(37,"14.212"),o.qZA(),o.TgZ(38,"div",14)(39,"span",19),o._UZ(40,"i",16),o._uU(41," 5.25% "),o.qZA(),o.TgZ(42,"span",17),o._uU(43,"Since last week"),o.qZA()()()()(),o.TgZ(44,"div",5)(45,"div",6)(46,"div",7)(47,"div",2)(48,"div",8)(49,"h5",9),o._uU(50,"Earnings"),o.qZA()(),o.TgZ(51,"div",10)(52,"div",11),o._UZ(53,"i",20),o.qZA()()(),o.TgZ(54,"h1",13),o._uU(55,"$21.300"),o.qZA(),o.TgZ(56,"div",14)(57,"span",19),o._UZ(58,"i",16),o._uU(59," 6.65% "),o.qZA(),o.TgZ(60,"span",17),o._uU(61,"Since last week"),o.qZA()()()(),o.TgZ(62,"div",6)(63,"div",7)(64,"div",2)(65,"div",8)(66,"h5",9),o._uU(67,"Orders"),o.qZA()(),o.TgZ(68,"div",10)(69,"div",11),o._UZ(70,"i",21),o.qZA()()(),o.TgZ(71,"h1",13),o._uU(72,"64"),o.qZA(),o.TgZ(73,"div",14)(74,"span",15),o._UZ(75,"i",16),o._uU(76," -2.25% "),o.qZA(),o.TgZ(77,"span",17),o._uU(78,"Since last week"),o.qZA()()()()()()()(),o.TgZ(79,"div",22)(80,"div",23)(81,"div",24)(82,"h5",25),o._uU(83,"Recent Movement"),o.qZA()(),o.TgZ(84,"div",26)(85,"div",27),o._UZ(86,"canvas",28),o.qZA()()()()(),o.TgZ(87,"div",2)(88,"div",29)(89,"div",23)(90,"div",24)(91,"h5",25),o._uU(92,"Browser Usage"),o.qZA()(),o.TgZ(93,"div",30)(94,"div",31)(95,"div",32)(96,"div",33),o._UZ(97,"canvas",34),o.qZA()(),o.TgZ(98,"table",35)(99,"tbody")(100,"tr")(101,"td"),o._uU(102,"Chrome"),o.qZA(),o.TgZ(103,"td",36),o._uU(104,"4306"),o.qZA()(),o.TgZ(105,"tr")(106,"td"),o._uU(107,"Firefox"),o.qZA(),o.TgZ(108,"td",36),o._uU(109,"3801"),o.qZA()(),o.TgZ(110,"tr")(111,"td"),o._uU(112,"IE"),o.qZA(),o.TgZ(113,"td",36),o._uU(114,"1689"),o.qZA()()()()()()()(),o.TgZ(115,"div",37)(116,"div",23)(117,"div",24)(118,"h5",25),o._uU(119,"Real-Time"),o.qZA()(),o.TgZ(120,"div",38),o._UZ(121,"div",39),o.qZA()()(),o.TgZ(122,"div",40)(123,"div",41)(124,"div",24)(125,"h5",25),o._uU(126,"Calendar"),o.qZA()(),o.TgZ(127,"div",30)(128,"div",31)(129,"div",42),o._UZ(130,"div",43),o.qZA()()()()()(),o.TgZ(131,"div",2)(132,"div",44)(133,"div",41)(134,"div",24)(135,"h5",25),o._uU(136,"Latest Projects"),o.qZA()(),o.TgZ(137,"table",45)(138,"thead")(139,"tr")(140,"th"),o._uU(141,"Name"),o.qZA(),o.TgZ(142,"th",46),o._uU(143,"Start Date"),o.qZA(),o.TgZ(144,"th",46),o._uU(145,"End Date"),o.qZA(),o.TgZ(146,"th"),o._uU(147,"Status"),o.qZA(),o.TgZ(148,"th",47),o._uU(149,"Assignee"),o.qZA()()(),o.TgZ(150,"tbody")(151,"tr")(152,"td"),o._uU(153,"Project Apollo"),o.qZA(),o.TgZ(154,"td",46),o._uU(155,"01/01/2021"),o.qZA(),o.TgZ(156,"td",46),o._uU(157,"31/06/2021"),o.qZA(),o.TgZ(158,"td")(159,"span",48),o._uU(160,"Done"),o.qZA()(),o.TgZ(161,"td",47),o._uU(162,"Vanessa Tucker"),o.qZA()(),o.TgZ(163,"tr")(164,"td"),o._uU(165,"Project Fireball"),o.qZA(),o.TgZ(166,"td",46),o._uU(167,"01/01/2021"),o.qZA(),o.TgZ(168,"td",46),o._uU(169,"31/06/2021"),o.qZA(),o.TgZ(170,"td")(171,"span",49),o._uU(172,"Cancelled"),o.qZA()(),o.TgZ(173,"td",47),o._uU(174,"William Harris"),o.qZA()(),o.TgZ(175,"tr")(176,"td"),o._uU(177,"Project Hades"),o.qZA(),o.TgZ(178,"td",46),o._uU(179,"01/01/2021"),o.qZA(),o.TgZ(180,"td",46),o._uU(181,"31/06/2021"),o.qZA(),o.TgZ(182,"td")(183,"span",48),o._uU(184,"Done"),o.qZA()(),o.TgZ(185,"td",47),o._uU(186,"Sharon Lessman"),o.qZA()(),o.TgZ(187,"tr")(188,"td"),o._uU(189,"Project Nitro"),o.qZA(),o.TgZ(190,"td",46),o._uU(191,"01/01/2021"),o.qZA(),o.TgZ(192,"td",46),o._uU(193,"31/06/2021"),o.qZA(),o.TgZ(194,"td")(195,"span",50),o._uU(196,"In progress"),o.qZA()(),o.TgZ(197,"td",47),o._uU(198,"Vanessa Tucker"),o.qZA()(),o.TgZ(199,"tr")(200,"td"),o._uU(201,"Project Phoenix"),o.qZA(),o.TgZ(202,"td",46),o._uU(203,"01/01/2021"),o.qZA(),o.TgZ(204,"td",46),o._uU(205,"31/06/2021"),o.qZA(),o.TgZ(206,"td")(207,"span",48),o._uU(208,"Done"),o.qZA()(),o.TgZ(209,"td",47),o._uU(210,"William Harris"),o.qZA()(),o.TgZ(211,"tr")(212,"td"),o._uU(213,"Project X"),o.qZA(),o.TgZ(214,"td",46),o._uU(215,"01/01/2021"),o.qZA(),o.TgZ(216,"td",46),o._uU(217,"31/06/2021"),o.qZA(),o.TgZ(218,"td")(219,"span",48),o._uU(220,"Done"),o.qZA()(),o.TgZ(221,"td",47),o._uU(222,"Sharon Lessman"),o.qZA()(),o.TgZ(223,"tr")(224,"td"),o._uU(225,"Project Romeo"),o.qZA(),o.TgZ(226,"td",46),o._uU(227,"01/01/2021"),o.qZA(),o.TgZ(228,"td",46),o._uU(229,"31/06/2021"),o.qZA(),o.TgZ(230,"td")(231,"span",48),o._uU(232,"Done"),o.qZA()(),o.TgZ(233,"td",47),o._uU(234,"Christina Mason"),o.qZA()(),o.TgZ(235,"tr")(236,"td"),o._uU(237,"Project Wombat"),o.qZA(),o.TgZ(238,"td",46),o._uU(239,"01/01/2021"),o.qZA(),o.TgZ(240,"td",46),o._uU(241,"31/06/2021"),o.qZA(),o.TgZ(242,"td")(243,"span",50),o._uU(244,"In progress"),o.qZA()(),o.TgZ(245,"td",47),o._uU(246,"William Harris"),o.qZA()()()()()(),o.TgZ(247,"div",51)(248,"div",23)(249,"div",24)(250,"h5",25),o._uU(251,"Monthly Sales"),o.qZA()(),o.TgZ(252,"div",52)(253,"div",53),o._UZ(254,"canvas",54),o.qZA()()()()()())},styles:[""]}),n})();class at{static equals(t,e,i){return i?this.resolveFieldData(t,i)===this.resolveFieldData(e,i):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,u,h,i=Array.isArray(t),r=Array.isArray(e);if(i&&r){if((u=t.length)!=e.length)return!1;for(s=u;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(i!=r)return!1;var p=t instanceof Date,y=e instanceof Date;if(p!=y)return!1;if(p&&y)return t.getTime()==e.getTime();var E=t instanceof RegExp,I=e instanceof RegExp;if(E!=I)return!1;if(E&&I)return t.toString()==e.toString();var M=Object.keys(t);if((u=M.length)!==Object.keys(e).length)return!1;for(s=u;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,M[s]))return!1;for(s=u;0!=s--;)if(!this.equalsByValue(t[h=M[s]],e[h]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let i=e.split("."),r=t;for(let s=0,u=i.length;s<u;++s){if(null==r)return null;r=r[i[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,i){t&&e!==i&&(i>=t.length&&(i%=t.length,e%=t.length),t.splice(i,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,i,r){if(i.length>0){let s=!1;for(let u=0;u<i.length;u++)if(this.findIndexInList(i[u],r)>e){i.splice(u,0,t),s=!0;break}s||i.push(t)}else i.push(t)}static findIndexInList(t,e){let i=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){i=r;break}return i}static contains(t,e){if(null!=t&&e&&e.length)for(let i of e)if(this.equals(t,i))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}}var _r=0;function Va(){return"pr_id_"+ ++_r}var Un=function c_(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,u,h)=>{u&&(u.style.zIndex=String(((s,u)=>{let h=n.length>0?n[n.length-1]:{key:s,value:u},p=h.value+(h.key===s?0:u)+1;return n.push({key:s,value:p}),p})(s,h)))},clear:s=>{s&&((s=>{n=n.filter(u=>u.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();let si=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),Ba=(()=>{class n{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[si.STARTS_WITH,si.CONTAINS,si.NOT_CONTAINS,si.ENDS_WITH,si.EQUALS,si.NOT_EQUALS],numeric:[si.EQUALS,si.NOT_EQUALS,si.LESS_THAN,si.LESS_THAN_OR_EQUAL_TO,si.GREATER_THAN,si.GREATER_THAN_OR_EQUAL_TO],date:[si.DATE_IS,si.DATE_IS_NOT,si.DATE_BEFORE,si.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new mn.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation=Object.assign(Object.assign({},this.translation),e),this.translationSource.next(this.translation)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yr=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.NO_FILTER="noFilter",n.LT="lt",n.LTE="lte",n.GT="gt",n.GTE="gte",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.CLEAR="clear",n.APPLY="apply",n.MATCH_ALL="matchAll",n.MATCH_ANY="matchAny",n.ADD_RULE="addRule",n.REMOVE_RULE="removeRule",n.ACCEPT="accept",n.REJECT="reject",n.CHOOSE="choose",n.UPLOAD="upload",n.CANCEL="cancel",n.DAY_NAMES="dayNames",n.DAY_NAMES_SHORT="dayNamesShort",n.DAY_NAMES_MIN="dayNamesMin",n.MONTH_NAMES="monthNames",n.MONTH_NAMES_SHORT="monthNamesShort",n.FIRST_DAY_OF_WEEK="firstDayOfWeek",n.TODAY="today",n.WEEK_HEADER="weekHeader",n.WEAK="weak",n.MEDIUM="medium",n.STRONG="strong",n.PASSWORD_PROMPT="passwordPrompt",n.EMPTY_MESSAGE="emptyMessage",n.EMPTY_FILTER_MESSAGE="emptyFilterMessage",n})(),Kc=(()=>{class n{constructor(){this.filters={startsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=at.removeAccents(i.toString()).toLocaleLowerCase(r);return at.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=at.removeAccents(i.toString()).toLocaleLowerCase(r);return-1!==at.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,i,r)=>{if(null==i||"string"==typeof i&&""===i.trim())return!0;if(null==e)return!1;let s=at.removeAccents(i.toString()).toLocaleLowerCase(r);return-1===at.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,i,r)=>{if(null==i||""===i.trim())return!0;if(null==e)return!1;let s=at.removeAccents(i.toString()).toLocaleLowerCase(r),u=at.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==u.indexOf(s,u.length-s.length)},equals:(e,i,r)=>null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():at.removeAccents(e.toString()).toLocaleLowerCase(r)==at.removeAccents(i.toString()).toLocaleLowerCase(r)),notEquals:(e,i,r)=>!(null==i||"string"==typeof i&&""===i.trim()||null!=e&&(e.getTime&&i.getTime?e.getTime()===i.getTime():at.removeAccents(e.toString()).toLocaleLowerCase(r)==at.removeAccents(i.toString()).toLocaleLowerCase(r))),in:(e,i)=>{if(null==i||0===i.length)return!0;for(let r=0;r<i.length;r++)if(at.equals(e,i[r]))return!0;return!1},between:(e,i)=>null==i||null==i[0]||null==i[1]||null!=e&&(e.getTime?i[0].getTime()<=e.getTime()&&e.getTime()<=i[1].getTime():i[0]<=e&&e<=i[1]),lt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<i.getTime():e<i),lte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()<=i.getTime():e<=i),gt:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>i.getTime():e>i),gte:(e,i,r)=>null==i||null!=e&&(e.getTime&&i.getTime?e.getTime()>=i.getTime():e>=i),is:(e,i,r)=>this.filters.equals(e,i,r),isNot:(e,i,r)=>this.filters.notEquals(e,i,r),before:(e,i,r)=>this.filters.lt(e,i,r),after:(e,i,r)=>this.filters.gt(e,i,r),dateIs:(e,i)=>null==i||null!=e&&e.toDateString()===i.toDateString(),dateIsNot:(e,i)=>null==i||null!=e&&e.toDateString()!==i.toDateString(),dateBefore:(e,i)=>null==i||null!=e&&e.getTime()<i.getTime(),dateAfter:(e,i)=>null==i||null!=e&&e.getTime()>i.getTime()}}filter(e,i,r,s,u){let h=[];if(e)for(let p of e)for(let y of i){let E=at.resolveFieldData(p,y);if(this.filters[s](E,r,u)){h.push(p);break}}return h}register(e,i){this.filters[e]=i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qu=(()=>{class n{constructor(){this.messageSource=new mn.x,this.clearSource=new mn.x,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Wu=(()=>{class n{constructor(){this.clickSource=new mn.x,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dw=(()=>{class n{}return n.AND="and",n.OR="or",n})(),Yc=(()=>{class n{constructor(e){this.template=e}getType(){return this.name}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),xl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi]]}),n})();var Dp=N(4986),Mn=N(5813);function d_(){return(0,Vi.e)((n,t)=>{let e,i=!1;n.subscribe((0,rn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function h_(n,t=de.y){return n=null!=n?n:BD,(0,Vi.e)((e,i)=>{let r,s=!0;e.subscribe((0,rn.x)(i,u=>{const h=t(u);(s||!n(r,h))&&(s=!1,r=h,i.next(u))}))})}function BD(n,t){return n===t}var lt,Nr=N(2011),dE=(N(8775),N(3942)),Ie=N(5861),yo=N(9681),Al=N(4859),vo=N(1877),F=N(2090),HD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Zu={},xp=xp||{},Mt=HD||self;function f_(){}function hE(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function p_(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var hw="closure_uid_"+(1e9*Math.random()>>>0),fE=0;function vR(n,t,e){return n.call.apply(n.bind,arguments)}function jD(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function oi(n,t,e){return(oi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vR:jD).apply(null,arguments)}function g_(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function tr(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return t.prototype[r].apply(i,u)}}function Ku(){this.s=this.s,this.o=this.o}var m_={};Ku.prototype.s=!1,Ku.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function yR(n){return Object.prototype.hasOwnProperty.call(n,hw)&&n[hw]||(n[hw]=++fE)}(this);delete m_[n]}},Ku.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gE=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},fw=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function mE(n){return Array.prototype.concat.apply([],arguments)}function pw(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function __(n){return/^[\s\xa0]*$/.test(n)}var Lr,_E=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fr(n,t){return-1!=n.indexOf(t)}function gw(n,t){return n<t?-1:n>t?1:0}e:{var mw=Mt.navigator;if(mw){var y_=mw.userAgent;if(y_){Lr=y_;break e}}Lr=""}function yE(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function v_(n){const t={};for(const e in n)t[e]=n[e];return t}var vE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zD(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<vE.length;s++)e=vE[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Qc(n){return Qc[" "](n),n}Qc[" "]=f_;var w_,n,_w=Fr(Lr,"Opera"),Yu=Fr(Lr,"Trident")||Fr(Lr,"MSIE"),bE=Fr(Lr,"Edge"),Sh=bE||Yu,Ap=Fr(Lr,"Gecko")&&!(Fr(Lr.toLowerCase(),"webkit")&&!Fr(Lr,"Edge"))&&!(Fr(Lr,"Trident")||Fr(Lr,"MSIE"))&&!Fr(Lr,"Edge"),yw=Fr(Lr.toLowerCase(),"webkit")&&!Fr(Lr,"Edge");function $D(){var n=Mt.document;return n?n.documentMode:void 0}e:{var Dh="",xh=(n=Lr,Ap?/rv:([^\);]+)(\)|;)/.exec(n):bE?/Edge\/([\d\.]+)/.exec(n):Yu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yw?/WebKit\/(\S+)/.exec(n):_w?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xh&&(Dh=xh?xh[1]:""),Yu){var Mp=$D();if(null!=Mp&&Mp>parseFloat(Dh)){w_=String(Mp);break e}}w_=Dh}var CE={};var bw=Mt.document&&Yu&&($D()||parseInt(w_,10))||void 0,EE=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",f_,t),Mt.removeEventListener("test",f_,t)}catch(e){}return n}();function Vr(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Ah(n,t){if(Vr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(Ap){e:{try{Qc(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:TE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ah.Z.h.call(this)}}Vr.prototype.h=function(){this.defaultPrevented=!0},tr(Ah,Vr);var TE={2:"touch",3:"pen",4:"mouse"};Ah.prototype.h=function(){Ah.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Jc="closure_listenable_"+(1e6*Math.random()|0),IE=0;function qD(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++IE,this.ca=this.fa=!1}function kp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Rp(n){this.src=n,this.g={},this.h=0}function C_(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=gE(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(kp(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function Op(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}Rp.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Op(n,t,i,r);return-1<u?(t=n[u],e||(t.fa=!1)):((t=new qD(t,this.src,s,!!i,r)).fa=e,n.push(t)),t};var E_="closure_lm_"+(1e6*Math.random()|0),T_={};function Cw(n,t,e,i,r){if(i&&i.once)return Tw(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Cw(n,t[s],e,i,r);return null}return e=Dw(e),n&&n[Jc]?n.N(t,e,p_(i)?!!i.capture:!!i,r):Ew(n,t,e,!1,i,r)}function Ew(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var u=p_(r)?!!r.capture:!!r,h=Sw(n);if(h||(n[E_]=h=new Rp(n)),(e=h.add(t,e,i,u,s)).proxy)return e;if(i=function SE(){var t=ZD;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)EE||(r=u),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(WD(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function Tw(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Tw(n,t[s],e,i,r);return null}return e=Dw(e),n&&n[Jc]?n.O(t,e,p_(i)?!!i.capture:!!i,r):Ew(n,t,e,!0,i,r)}function Iw(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Iw(n,t[s],e,i,r);else i=p_(i)?!!i.capture:!!i,e=Dw(e),n&&n[Jc]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=Op(s=n.g[t],e,i,r))&&(kp(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=Sw(n))&&(t=n.g[t.toString()],n=-1,t&&(n=Op(t,e,i,r)),(e=-1<n?t[n]:null)&&I_(e))}function I_(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Jc])C_(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(WD(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=Sw(t))?(C_(e,n),0==e.h&&(e.src=null,t[E_]=null)):kp(n)}}}function WD(n){return n in T_?T_[n]:T_[n]="on"+n}function ZD(n,t){if(n.ca)n=!0;else{t=new Ah(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&I_(n),n=e.call(i,t)}return n}function Sw(n){return(n=n[E_])instanceof Rp?n:null}var S_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dw(n){return"function"==typeof n?n:(n[S_]||(n[S_]=function(t){return n.handleEvent(t)}),n[S_])}function Jt(){Ku.call(this),this.i=new Rp(this),this.P=this,this.I=null}function nr(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Vr(t,n);else if(t instanceof Vr)t.target=t.target||n;else{var r=t;zD(t=new Vr(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var u=t.g=e[s];r=D_(u,i,!0,t)&&r}if(r=D_(u=t.g=n,i,!0,t)&&r,r=D_(u,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=D_(u=t.g=e[s],i,!1,t)&&r}function D_(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var u=t[s];if(u&&!u.ca&&u.capture==e){var h=u.listener,p=u.ia||u.src;u.fa&&C_(n.i,u),r=!1!==h.call(p,i)&&r}}return r&&!i.defaultPrevented}tr(Jt,Ku),Jt.prototype[Jc]=!0,Jt.prototype.removeEventListener=function(n,t,e,i){Iw(this,n,t,e,i)},Jt.prototype.M=function(){if(Jt.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)kp(e[i]);delete n.g[t],n.h--}}this.I=null},Jt.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Jt.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var xw=Mt.JSON.stringify;function DE(){var n=Ow;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var kw,Aw=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xE,n=>n.reset());class xE{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Mh(n){Mt.setTimeout(()=>{throw n},0)}function Mw(n,t){kw||function AE(){var n=Mt.Promise.resolve(void 0);kw=function(){n.then(wR)}}(),Rw||(kw(),Rw=!0),Ow.add(n,t)}var Rw=!1,Ow=new class KD{constructor(){this.h=this.g=null}add(t,e){const i=Aw.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function wR(){for(var n;n=DE();){try{n.h.call(n.g)}catch(e){Mh(e)}var t=Aw;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Rw=!1}function kh(n,t){Jt.call(this),this.h=n||1,this.g=t||Mt,this.j=oi(this.kb,this),this.l=Date.now()}function Pp(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function wo(n,t,e){if("function"==typeof n)e&&(n=oi(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=oi(n.handleEvent,n)}return 2147483647<Number(t)?-1:Mt.setTimeout(n,t||0)}function ME(n){n.g=wo(()=>{n.g=null,n.i&&(n.i=!1,ME(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}tr(kh,Jt),(lt=kh.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),nr(this,"tick"),this.da&&(Pp(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){kh.Z.M.call(this),Pp(this),delete this.g};class kE extends Ku{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ME(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ys(n){Ku.call(this),this.h=n,this.g={}}tr(ys,Ku);var bo=[];function Co(n,t,e,i){Array.isArray(e)||(e&&(bo[0]=e.toString()),e=bo);for(var r=0;r<e.length;r++){var s=Cw(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Pw(n){yE(n.g,function(t,e){this.g.hasOwnProperty(e)&&I_(t)},n),n.g={}}function Np(){this.g=!0}function Rh(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function Nw(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<r.length;u++)r[u]=""}}}return xw(e)}catch(h){return t}}(n,e)+(i?" "+i:"")})}ys.prototype.M=function(){ys.Z.M.call(this),Pw(this)},ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Np.prototype.Aa=function(){this.g=!1},Np.prototype.info=function(){};var ra={},RE=null;function Fp(){return RE=RE||new Jt}function OE(n){Vr.call(this,ra.Ma,n)}function Oh(n){const t=Fp();nr(t,new OE(t,n))}function Fw(n,t){Vr.call(this,ra.STAT_EVENT,n),this.stat=t}function ir(n){const t=Fp();nr(t,new Fw(t,n))}function PE(n,t){Vr.call(this,ra.Na,n),this.size=t}function Ph(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},t)}ra.Ma="serverreachability",tr(OE,Vr),ra.STAT_EVENT="statevent",tr(Fw,Vr),ra.Na="timingevent",tr(PE,Vr);var Lp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},x_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Nh(){}function Lw(){}Nh.prototype.h=null;var R_,Fh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function M_(){Vr.call(this,"d")}function k_(){Vr.call(this,"c")}function Vp(){}function Lh(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new ys(this),this.P=XD,this.W=new kh(n=Sh?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new NE}function NE(){this.i=null,this.g="",this.h=!1}tr(M_,Vr),tr(k_,Vr),tr(Vp,Nh),Vp.prototype.g=function(){return new XMLHttpRequest},Vp.prototype.i=function(){return{}},R_=new Vp;var XD=45e3,Vw={},O_={};function Bw(n,t,e){n.K=1,n.v=Ha(Ua(t)),n.s=e,n.U=!0,FE(n,null)}function FE(n,t){n.F=Date.now(),Bp(n),n.A=Ua(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),zE(e.h,"t",i),n.C=0,e=n.l.H,n.h=new NE,n.g=tb(n.l,e?t:null,!n.s),0<n.O&&(n.L=new kE(oi(n.Ia,n,n.g),n.O)),Co(n.V,n.g,"readystatechange",n.gb),t=n.H?v_(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Oh(1),function YD(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var u="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var E=y[0];y=y[1];var I=E.split("_");u=2<=I.length&&"type"==I[1]?u+(E+"=")+y+"&":u+(E+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function LE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function VE(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=ex(n,e),r==O_){4==t&&(n.o=4,ir(14),i=!1),Rh(n.j,n.m,null,"[Incomplete Response]");break}if(r==Vw){n.o=4,ir(15),Rh(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Rh(n.j,n.m,r,null),Uw(n,r)}LE(n)&&r!=O_&&r!=Vw&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,ir(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),Jw(t),t.L=!0,ir(11))):(Rh(n.j,n.m,e,"[Invalid Chunked Response]"),Xc(n),Up(n))}function ex(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?O_:(e=Number(t.substring(e,i)),isNaN(e)?Vw:(i+=1)+e>t.length?O_:(t=t.substr(i,e),n.C=i+e,t))}function Bp(n){n.Y=Date.now()+n.P,BE(n,n.P)}function BE(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ph(oi(n.eb,n),t)}function P_(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function Up(n){0==n.l.G||n.I||iT(n.l,n)}function Xc(n){P_(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,Pp(n.W),Pw(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Uw(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||V_(e.i,n)))if(e.I=n.N,!n.J&&V_(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(e.u)e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=Ph(oi(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;Rl(e),G_(e)}$_(e),ir(18)}if(1>=WE(e.i)&&e.ka){try{e.ka()}catch(y){}e.ka=void 0}}else ed(e,11)}else if((n.J||e.g==n)&&Rl(e),!__(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let y=r[t];if(e.U=y[0],y=y[1],2==e.G)if("c"==y[0]){e.J=y[1],e.la=y[2];const E=y[3];null!=E&&(e.ma=E,e.h.info("VER="+e.ma));const I=y[4];null!=I&&(e.za=I,e.h.info("SVER="+e.za));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(e.K=i=1.5*M,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const P=n.g;if(P){const B=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=i.i;!s.g&&(Fr(B,"spdy")||Fr(B,"quic")||Fr(B,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(B_(s,s.h),s.h=null))}if(i.D){const Q=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(i.sa=Q,On(i.F,i.D,Q))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var u=n;if((i=e).oa=rT(i,i.H?i.la:null,i.W),u.J){$w(i.i,u);var h=u,p=i.K;p&&h.setTimeout(p),h.B&&(P_(h),Bp(h)),i.g=u}else tT(i);0<e.l.length&&ec(e)}else"stop"!=y[0]&&"close"!=y[0]||ed(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?ed(e,7):Gh(e):"noop"!=y[0]&&e.j&&e.j.wa(y),e.A=0)}Oh(4)}catch(y){}}function Hw(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(hE(n)||"string"==typeof n)fw(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(hE(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function tx(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(hE(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function Vh(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof Vh)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function N_(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];Qu(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)Qu(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function Qu(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(lt=Lh.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const t=this.L;t&&3==kl(n)?t.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const E=kl(this.g);var t=this.g.Da();const I=this.g.ba();if(!(3>E)&&(3!=E||Sh||this.g&&(this.h.h||this.g.ga()||hx(this.g)))){this.I||4!=E||7==t||Oh(8==t||0>=I?3:2),P_(this);var e=this.g.ba();this.N=e;t:if(LE(this)){var i=hx(this.g);n="";var r=i.length,s=4==kl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Xc(this),Up(this);var u="";break t}this.h.i=new Mt.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==e,function QD(n,t,e,i,r,s,u){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.X,E,e),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!__(h)){var y=h;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,ir(12),Xc(this),Up(this);break e}Rh(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Uw(this,e)}this.U?(VE(this,E,u),Sh&&this.i&&3==E&&(Co(this.V,this.W,"tick",this.fb),this.W.start())):(Rh(this.j,this.m,u,null),Uw(this,u)),4==E&&Xc(this),this.i&&!this.I&&(4==E?iT(this.l,this):(this.i=!1,Bp(this)))}else 400==e&&0<u.indexOf("Unknown SID")?(this.o=3,ir(12)):(this.o=0,ir(13)),Xc(this),Up(this)}}}catch(E){}},lt.fb=function(){if(this.g){var n=kl(this.g),t=this.g.ga();this.C<t.length&&(P_(this),VE(this,n,t),this.i&&4!=n&&Bp(this))}},lt.cancel=function(){this.I=!0,Xc(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function JD(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Oh(3),ir(17)),Xc(this),this.o=2,Up(this)):BE(this,this.Y-n)},(lt=Vh.prototype).R=function(){N_(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},lt.T=function(){return N_(this),this.g.concat()},lt.get=function(n,t){return Qu(this.h,n)?this.h[n]:t},lt.set=function(n,t){Qu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},lt.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};var jw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ju(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ju){this.g=void 0!==t?t:n.g,Hp(this,n.j),this.s=n.s,jp(this,n.i),Gp(this,n.m),this.l=n.l,t=n.h;var e=new zp;e.i=t.i,t.g&&(e.g=new Vh(t.g),e.h=t.h),Gw(this,e),this.o=n.o}else n&&(e=String(n).match(jw))?(this.g=!!t,Hp(this,e[1]||"",!0),this.s=ja(e[2]||""),jp(this,e[3]||"",!0),Gp(this,e[4]),this.l=ja(e[5]||"",!0),Gw(this,e[6]||"",!0),this.o=ja(e[7]||"")):(this.g=!!t,this.h=new zp(null,this.g))}function Ua(n){return new Ju(n)}function Hp(n,t,e){n.j=e?ja(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function jp(n,t,e){n.i=e?ja(t,!0):t}function Gp(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function Gw(n,t,e){t instanceof zp?(n.h=t,function L_(n,t){t&&!n.j&&(Xu(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(GE(this,i),zE(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=F_(t,bR)),n.h=new zp(t,n.g))}function On(n,t,e){n.h.set(t,e)}function Ha(n){return On(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ja(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function F_(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,zw),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ju.prototype.toString=function(){var n=[],t=this.j;t&&n.push(F_(t,rx,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(F_(t,rx,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(F_(e,"/"==e.charAt(0)?jE:HE,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",F_(e,Tt)),n.join("")};var rx=/[#\/\?@]/g,HE=/[#\?:]/g,jE=/[#\?]/g,bR=/[#\?@]/g,Tt=/#/g;function zp(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Xu(n){n.g||(n.g=new Vh,n.h=0,n.i&&function UE(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function GE(n,t){Xu(n),t=Ml(n,t),Qu(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Qu((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&N_(n)))}function $p(n,t){return Xu(n),t=Ml(n,t),Qu(n.g.h,t)}function zE(n,t,e){GE(n,t),0<e.length&&(n.i=null,n.g.set(Ml(n,t),pw(e)),n.h+=e.length)}function Ml(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function sx(n){this.l=n||$E,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ea&&Mt.g.Ea()&&Mt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=zp.prototype).add=function(n,t){Xu(this),this.i=null,n=Ml(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},lt.forEach=function(n,t){Xu(this),this.g.forEach(function(e,i){fw(e,function(r){n.call(t,r,i,this)},this)},this)},lt.T=function(){Xu(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e},lt.R=function(n){Xu(this);var t=[];if("string"==typeof n)$p(this,n)&&(t=mE(t,this.g.get(Ml(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=mE(t,n[e])}return t},lt.set=function(n,t){return Xu(this),this.i=null,$p(this,n=Ml(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},lt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var u=r;""!==i[s]&&(u+="="+encodeURIComponent(String(i[s]))),n.push(u)}}return this.i=n.join("&")};var $E=10;function qE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function WE(n){return n.h?1:n.g?n.g.size:0}function V_(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function B_(n,t){n.g?n.g.add(t):n.h=t}function $w(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function qw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return pw(n.i)}function Ww(){}function ox(){this.g=new Ww}function ax(n,t,e){const i=e||"";try{Hw(n,function(r,s){let u=r;p_(r)&&(u=xw(r)),t.push(i+s+"="+encodeURIComponent(u))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function U_(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function Wp(n){this.l=n.$b||null,this.j=n.ib||!1}function H_(n,t){Jt.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Bh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sx.prototype.cancel=function(){if(this.i=qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ww.prototype.stringify=function(n){return Mt.JSON.stringify(n,void 0)},Ww.prototype.parse=function(n){return Mt.JSON.parse(n,void 0)},tr(Wp,Nh),Wp.prototype.g=function(){return new H_(this.l,this.j)},Wp.prototype.i=function(n){return function(){return n}}({}),tr(H_,Jt);var Bh=0;function Zw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Uh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Hh(n)}function Hh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=H_.prototype).open=function(n,t){if(this.readyState!=Bh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Hh(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Mt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Uh(this)),this.readyState=Bh},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Hh(this)),this.g&&(this.readyState=3,Hh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Uh(this):Hh(this),3==this.readyState&&Zw(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,Uh(this))},lt.Ta=function(n){this.g&&(this.response=n,Uh(this))},lt.ha=function(){this.g&&Uh(this)},lt.setRequestHeader=function(n,t){this.v.append(n,t)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(H_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var lx=Mt.JSON.parse;function Hn(n){Jt.call(this),this.headers=new Vh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jh,this.K=this.L=!1}tr(Hn,Jt);var jh="",ux=/^https?$/i,cx=["POST","PUT"];function ZE(n){return"content-type"==n.toLowerCase()}function Kw(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,Yw(n),Zp(n)}function Yw(n){n.D||(n.D=!0,nr(n,"complete"),nr(n,"error"))}function KE(n){if(n.h&&void 0!==xp&&(!n.C[1]||4!=kl(n)||2!=n.ba()))if(n.v&&4==kl(n))wo(n.Fa,0,n);else if(nr(n,"readystatechange"),4==kl(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===h){var r=String(n.H).match(jw)[1]||null;if(!r&&Mt.self&&Mt.self.location){var s=Mt.self.location.protocol;r=s.substr(0,s.length-1)}i=!ux.test(r?r.toLowerCase():"")}e=i}if(e)nr(n,"complete"),nr(n,"success");else{n.m=6;try{var u=2<kl(n)?n.g.statusText:""}catch(p){u=""}n.j=u+" ["+n.ba()+"]",Yw(n)}}finally{Zp(n)}}}function Zp(n,t){if(n.g){YE(n);const e=n.g,i=n.C[0]?f_:null;n.g=null,n.C=null,t||nr(n,"ready");try{e.onreadystatechange=i}catch(r){}}}function YE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function kl(n){return n.g?n.g.readyState:0}function hx(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case jh:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function QE(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function CR(n){let t="";return yE(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):On(n,t,e))}function j_(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function Qw(n){this.za=0,this.l=[],this.h=new Np,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=j_("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=j_("baseRetryDelayMs",5e3,n),this.$a=j_("retryDelaySeedMs",1e4,n),this.Ya=j_("forwardChannelMaxRetries",2,n),this.ra=j_("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new sx(n&&n.concurrentRequestLimit),this.Ca=new ox,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Gh(n){if(JE(n),3==n.G){var t=n.V++,e=Ua(n.F);On(e,"SID",n.J),On(e,"RID",t),On(e,"TYPE","terminate"),Kp(n,e),(t=new Lh(n,n.h,t,void 0)).K=2,t.v=Ha(Ua(e)),e=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(e=Mt.navigator.sendBeacon(t.v.toString(),"")),!e&&Mt.Image&&((new Image).src=t.v,e=!0),e||(t.g=tb(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Bp(t)}eb(n)}function G_(n){n.g&&(Jw(n),n.g.cancel(),n.g=null)}function JE(n){G_(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),Rl(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function z_(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&ec(n)}function ec(n){qE(n.i)||n.m||(n.m=!0,Mw(n.Ha,n),n.C=0)}function XE(n,t){var e;e=t?t.m:n.V++;const i=Ua(n.F);On(i,"SID",n.J),On(i,"RID",e),On(i,"AID",n.U),Kp(n,i),n.o&&n.s&&QE(i,n.o,n.s),e=new Lh(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=eT(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),B_(n.i,e),Bw(e,i,t)}function Kp(n,t){n.j&&Hw({},function(e,i){On(t,i,e)})}function eT(n,t,e){e=Math.min(n.l.length,e);var i=n.j?oi(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const u=["count="+e];-1==s?0<e?(s=r[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let h=!0;for(let p=0;p<e;p++){let y=r[p].h;const E=r[p].g;if(y-=s,0>y)s=Math.max(0,r[p].h-100),h=!1;else try{ax(E,u,"req"+y+"_")}catch(I){i&&i(E)}}if(h){i=u.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function tT(n){n.g||n.u||(n.Y=1,Mw(n.Ga,n),n.A=0)}function $_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ph(oi(n.Ga,n),Xw(n,n.A)),n.A++,0))}function Jw(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function nT(n){n.g=new Lh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Ua(n.oa);On(t,"RID","rpc"),On(t,"SID",n.J),On(t,"CI",n.N?"0":"1"),On(t,"AID",n.U),Kp(n,t),On(t,"TYPE","xmlhttp"),n.o&&n.s&&QE(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=Ha(Ua(t)),e.s=null,e.U=!0,FE(e,n)}function Rl(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function iT(n,t){var e=null;if(n.g==t){Rl(n),Jw(n),n.g=null;var i=2}else{if(!V_(n.i,t))return;e=t.D,$w(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;nr(i=Fp(),new PE(i,e,t,r)),ec(n)}else tT(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function fx(n,t){return!(WE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ph(oi(n.Ha,n,t),Xw(n,n.C)),n.C++,0)))}(n,t)||2==i&&$_(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:ed(n,5);break;case 4:ed(n,10);break;case 3:ed(n,6);break;default:ed(n,2)}}function Xw(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function ed(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=oi(n.jb,n);e||(e=new Ju("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||Hp(e,"https"),Ha(e)),function qp(n,t){const e=new Np;if(Mt.Image){const i=new Image;i.onload=g_(U_,e,i,"TestLoadImage: loaded",!0,t),i.onerror=g_(U_,e,i,"TestLoadImage: error",!1,t),i.onabort=g_(U_,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=g_(U_,e,i,"TestLoadImage: timeout",!1,t),Mt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else ir(2);n.G=0,n.j&&n.j.va(t),eb(n),JE(n)}function eb(n){n.G=0,n.I=-1,n.j&&((0!=qw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,pw(n.l),n.l.length=0),n.j.ua())}function rT(n,t,e){let i=function nx(n){return n instanceof Ju?Ua(n):new Ju(n,void 0)}(e);if(""!=i.i)t&&jp(i,t+"."+i.i),Gp(i,i.m);else{const r=Mt.location;i=function ix(n,t,e,i){var r=new Ju(null,void 0);return n&&Hp(r,n),t&&jp(r,t),e&&Gp(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&yE(n.aa,function(r,s){On(i,s,r)}),e=n.sa,(t=n.D)&&e&&On(i,t,e),On(i,"VER",n.ma),Kp(n,i),i}function tb(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Hn(e&&n.Ba&&!n.qa?new Wp({ib:!0}):n.qa)).L=n.H,t}function sT(){}function zh(){if(Yu&&!(10<=Number(bw)))throw Error("Environmental error: no available transport.")}function Ls(n,t){Jt.call(this),this.g=new Qw(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!__(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!__(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new $h(this)}function nb(n){M_.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function ib(){k_.call(this),this.status=1}function $h(n){this.g=n}(lt=Hn.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():R_.g(),this.C=function A_(n){return n.h||(n.h=n.i())}(this.u?this.u:R_),this.g.onreadystatechange=oi(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void Kw(this,s)}n=e||"";const r=new Vh(this.headers);i&&Hw(i,function(s,u){r.set(u,s)}),i=function GD(n){e:{var t=ZE;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=Mt.FormData&&n instanceof Mt.FormData,!(0<=gE(cx,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{YE(this),0<this.B&&((this.K=function dx(n){return Yu&&function vw(){return function wE(n){var t=CE;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=_E(String(w_)).split("."),e=_E("9").split("."),i=Math.max(t.length,e.length);for(let u=0;0==n&&u<i;u++){var r=t[u]||"",s=e[u]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=gw(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||gw(0==r[2].length,0==s[2].length)||gw(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=oi(this.pa,this)):this.A=wo(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Kw(this,s)}},lt.pa=function(){void 0!==xp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nr(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,nr(this,"complete"),nr(this,"abort"),Zp(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zp(this,!0)),Hn.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?KE(this):this.cb())},lt.cb=function(){KE(this)},lt.ba=function(){try{return 2<kl(this)?this.g.status:-1}catch(n){return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},lt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),lx(t)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=Qw.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new Lh(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=v_(s),zD(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=eT(this,r,t),On(e=Ua(this.F),"RID",n),On(e,"CVER",22),this.D&&On(e,"X-HTTP-Session-Id",this.D),Kp(this,e),this.o&&s&&QE(e,this.o,s),B_(this.i,r),this.Ra&&On(e,"TYPE","init"),this.ja?(On(e,"$req",t),On(e,"SID","null"),r.$=!0,Bw(r,e,null)):Bw(r,e,t),this.G=2}}else 3==this.G&&(n?XE(this,n):0==this.l.length||qE(this.i)||XE(this))},lt.Ga=function(){if(this.u=null,nT(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ph(oi(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ir(10),G_(this),nT(this))},lt.ab=function(){null!=this.v&&(this.v=null,G_(this),$_(this),ir(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ir(2)):(this.h.info("Failed to ping google.com"),ir(1))},(lt=sT.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},zh.prototype.g=function(n,t){return new Ls(n,t)},tr(Ls,Jt),Ls.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Mw(oi(n.hb,n,t))),ir(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=rT(n,null,n.W),ec(n)},Ls.prototype.close=function(){Gh(this.g)},Ls.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,z_(this.g,t)}else this.v?((t={}).__data__=xw(n),z_(this.g,t)):z_(this.g,n)},Ls.prototype.M=function(){this.g.j=null,delete this.j,Gh(this.g),delete this.g,Ls.Z.M.call(this)},tr(nb,M_),tr(ib,k_),tr($h,sT),$h.prototype.xa=function(){nr(this.g,"a")},$h.prototype.wa=function(n){nr(this.g,new nb(n))},$h.prototype.va=function(n){nr(this.g,new ib(n))},$h.prototype.ua=function(){nr(this.g,"b")},zh.prototype.createWebChannel=zh.prototype.g,Ls.prototype.send=Ls.prototype.u,Ls.prototype.open=Ls.prototype.m,Ls.prototype.close=Ls.prototype.close,Lp.NO_ERROR=0,Lp.TIMEOUT=8,Lp.HTTP_ERROR=6,x_.COMPLETE="complete",Lw.EventType=Fh,Fh.OPEN="a",Fh.CLOSE="b",Fh.ERROR="c",Fh.MESSAGE="d",Jt.prototype.listen=Jt.prototype.N,Hn.prototype.listenOnce=Hn.prototype.O,Hn.prototype.getLastError=Hn.prototype.La,Hn.prototype.getLastErrorCode=Hn.prototype.Da,Hn.prototype.getStatus=Hn.prototype.ba,Hn.prototype.getResponseJson=Hn.prototype.Qa,Hn.prototype.getResponseText=Hn.prototype.ga,Hn.prototype.send=Hn.prototype.ea;var px=Zu.createWebChannelTransport=function(){return new zh},gx=Zu.getStatEventTarget=function(){return Fp()},Yp=Zu.ErrorCode=Lp,mx=Zu.EventType=x_,oT=Zu.Event=ra,aT=Zu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_x=Zu.FetchXmlHttpFactory=Wp,q_=Zu.WebChannel=Lw,yx=Zu.XhrIo=Hn;const lT="@firebase/firestore";class vr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");let qh="9.8.0";const tc=new vo.Yd("@firebase/firestore");function W_(){return tc.logLevel}function Be(n,...t){if(tc.logLevel<=vo.in.DEBUG){const e=t.map(rb);tc.debug(`Firestore (${qh}): ${n}`,...e)}}function Ii(n,...t){if(tc.logLevel<=vo.in.ERROR){const e=t.map(rb);tc.error(`Firestore (${qh}): ${n}`,...e)}}function Wh(n,...t){if(tc.logLevel<=vo.in.WARN){const e=t.map(rb);tc.warn(`Firestore (${qh}): ${n}`,...e)}}function rb(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function ut(n="Unexpected state"){const t=`FIRESTORE (${qh}) INTERNAL ASSERTION FAILED: `+n;throw Ii(t),new Error(t)}function kt(n,t){n||ut()}function We(n,t){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends F.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class rr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class cT{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ob{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(vr.UNAUTHENTICATED))}shutdown(){}}class vx{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class dT{constructor(t){this.t=t,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,e(y)):Promise.resolve();let u=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new rr,t.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=u;t.enqueueRetryable((0,Ie.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},p=y=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new rr)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(kt("string"==typeof i.accessToken),new cT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return kt(null===t||"string"==typeof t),new vr(t)}}class wx{constructor(t,e,i){this.type="FirstParty",this.user=vr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class hT{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new wx(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pT{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=s=>{null!=s.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.p;return this.p=s.token,Be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(kt("string"==typeof e.token),this.p=e.token,new fT(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Vs{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.I(i),this.T=i=>e.writeSequenceNumber(i))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function Z_(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}Vs.A=-1;class gT{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=Z_(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Rt(n,t){return n<t?-1:n>t?1:0}function Ga(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function mT(n){return n+"\0"}class Si{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Pe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Pe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Pe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Si.fromMillis(Date.now())}static fromDate(t){return Si.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Si(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Rt(this.nanoseconds,t.nanoseconds):Rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(t){this.timestamp=t}static fromTimestamp(t){return new St(t)}static min(){return new St(new Si(0,0))}static max(){return new St(new Si(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function _T(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function td(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function yT(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Qp{constructor(t,e,i){void 0===e?e=0:e>t.length&&ut(),void 0===i?i=t.length-e:i>t.length-e&&ut(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===Qp.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Qp?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),u=e.get(r);if(s<u)return-1;if(s>u)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class en extends Qp{construct(t,e,i){return new en(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Pe(he.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new en(e)}static emptyPath(){return new en([])}}const vT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends Qp{construct(t,e,i){return new pi(t,e,i)}static isValidIdentifier(t){return vT.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Pe(he.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let u=!1;for(;r<t.length;){const h=t[r];if("\\"===h){if(r+1===t.length)throw new Pe(he.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Pe(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===h?(u=!u,r++):"."!==h||u?(i+=h,r++):(s(),r++)}if(s(),u)throw new Pe(he.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new pi(e)}static emptyPath(){return new pi([])}}class Ol{constructor(t){this.fields=t,t.sort(pi.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ga(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Bi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Bi(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Bi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bi.EMPTY_BYTE_STRING=new Bi("");const wT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pl(n){if(kt(!!n),"string"==typeof n){let t=0;const e=wT.exec(n);if(kt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:li(n.seconds),nanos:li(n.nanos)}}function li(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function nd(n){return"string"==typeof n?Bi.fromBase64String(n):Bi.fromUint8Array(n)}function Xp(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function bT(n){const t=n.mapValue.fields.__previous_value__;return Xp(t)?bT(t):t}function K_(n){const t=Pl(n.mapValue.fields.__local_write_time__.timestampValue);return new Si(t.seconds,t.nanos)}class bx{constructor(t,e,i,r,s,u,h,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Nl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Nl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Nl&&t.projectId===this.projectId&&t.database===this.database}}function za(n){return null==n}function Zh(n){return 0===n&&1/n==-1/0}function id(n){return"number"==typeof n&&Number.isInteger(n)&&!Zh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class qe{constructor(t){this.path=t}static fromPath(t){return new qe(en.fromString(t))}static fromName(t){return new qe(en.fromString(t).popFirst(5))}static empty(){return new qe(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===en.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return en.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new qe(new en(t.slice()))}}const Fl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Y_={nullValue:"NULL_VALUE"};function Kh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xp(n)?4:ub(n)?9007199254740991:10:ut()}function sa(n,t){if(n===t)return!0;const e=Kh(n);if(e!==Kh(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return K_(n).isEqual(K_(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Pl(i.timestampValue),u=Pl(r.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,nd(n.bytesValue).isEqual(nd(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return li(i.geoPointValue.latitude)===li(r.geoPointValue.latitude)&&li(i.geoPointValue.longitude)===li(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return li(i.integerValue)===li(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=li(i.doubleValue),u=li(r.doubleValue);return s===u?Zh(s)===Zh(u):isNaN(s)&&isNaN(u)}return!1}(n,t);case 9:return Ga(n.arrayValue.values||[],t.arrayValue.values||[],sa);case 10:return function(i,r){const s=i.mapValue.fields||{},u=r.mapValue.fields||{};if(_T(s)!==_T(u))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===u[h]||!sa(s[h],u[h])))return!1;return!0}(n,t);default:return ut()}var r}function Q_(n,t){return void 0!==(n.values||[]).find(e=>sa(e,t))}function Ll(n,t){if(n===t)return 0;const e=Kh(n),i=Kh(t);if(e!==i)return Rt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const u=li(r.integerValue||r.doubleValue),h=li(s.integerValue||s.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,t);case 3:return J_(n.timestampValue,t.timestampValue);case 4:return J_(K_(n),K_(t));case 5:return Rt(n.stringValue,t.stringValue);case 6:return function(r,s){const u=nd(r),h=nd(s);return u.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const u=r.split("/"),h=s.split("/");for(let p=0;p<u.length&&p<h.length;p++){const y=Rt(u[p],h[p]);if(0!==y)return y}return Rt(u.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const u=Rt(li(r.latitude),li(s.latitude));return 0!==u?u:Rt(li(r.longitude),li(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const u=r.values||[],h=s.values||[];for(let p=0;p<u.length&&p<h.length;++p){const y=Ll(u[p],h[p]);if(y)return y}return Rt(u.length,h.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Fl.mapValue&&s===Fl.mapValue)return 0;if(r===Fl.mapValue)return 1;if(s===Fl.mapValue)return-1;const u=r.fields||{},h=Object.keys(u),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let E=0;E<h.length&&E<y.length;++E){const I=Rt(h[E],y[E]);if(0!==I)return I;const M=Ll(u[h[E]],p[y[E]]);if(0!==M)return M}return Rt(h.length,y.length)}(n.mapValue,t.mapValue);default:throw ut()}}function J_(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Rt(n,t);const e=Pl(n),i=Pl(t),r=Rt(e.seconds,i.seconds);return 0!==r?r:Rt(e.nanos,i.nanos)}function rd(n){return X_(n)}function X_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Pl(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?nd(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const u of i.values||[])s?s=!1:r+=",",r+=X_(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",u=!0;for(const h of r)u?u=!1:s+=",",s+=`${h}:${X_(i.fields[h])}`;return s+"}"}(n.mapValue):ut();var t}function nc(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function ey(n){return!!n&&"integerValue"in n}function Yh(n){return!!n&&"arrayValue"in n}function ab(n){return!!n&&"nullValue"in n}function lb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eg(n){return!!n&&"mapValue"in n}function tg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return td(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=tg(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=tg(n.arrayValue.values[e]);return t}return Object.assign({},n)}function ub(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ng(n){return"nullValue"in n?Y_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?nc(Nl.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function CT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?nc(Nl.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Fl:ut()}function cb(n,t){const e=Ll(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function db(n,t){const e=Ll(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class wr{constructor(t){this.value=t}static empty(){return new wr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!eg(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=tg(e)}setAll(t){let e=pi.emptyPath(),i={},r=[];t.forEach((u,h)=>{if(!e.isImmediateParentOf(h)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=h.popLast()}u?i[h.lastSegment()]=tg(u):r.push(h.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());eg(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return sa(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];eg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){td(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new wr(tg(this.value))}}function hb(n){const t=[];return td(n.fields,(e,i)=>{const r=new pi([e]);if(eg(i)){const s=hb(i.mapValue).fields;if(0===s.length)t.push(r);else for(const u of s)t.push(r.child(u))}else t.push(r)}),new Ol(t)}class Pn{constructor(t,e,i,r,s,u){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=u}static newInvalidDocument(t){return new Pn(t,0,St.min(),St.min(),wr.empty(),0)}static newFoundDocument(t,e,i){return new Pn(t,1,e,St.min(),i,0)}static newNoDocument(t,e){return new Pn(t,2,e,St.min(),wr.empty(),0)}static newUnknownDocument(t,e){return new Pn(t,3,e,St.min(),wr.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Pn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ty{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function fb(n){return n.fields.find(t=>2===t.kind)}function sd(n){return n.fields.filter(t=>2!==t.kind)}ty.UNKNOWN_ID=-1;class ny{constructor(t,e){this.fieldPath=t,this.kind=e}}class ig{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new ig(0,oa.min())}}function ET(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=St.fromTimestamp(1e9===i?new Si(e+1,0):new Si(e,i));return new oa(r,qe.empty(),t)}function rg(n){return new oa(n.readTime,n.key,-1)}class oa{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new oa(St.min(),qe.empty(),-1)}static max(){return new oa(St.max(),qe.empty(),-1)}}function iy(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=qe.comparator(n.documentKey,t.documentKey),0!==e?e:Rt(n.largestBatchId,t.largestBatchId))}class _n{constructor(t,e){this.comparator=t,this.root=e||Ui.EMPTY}insert(t,e){return new _n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(t){return new _n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ry(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ry(this.root,t,this.comparator,!1)}getReverseIterator(){return new ry(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ry(this.root,t,this.comparator,!0)}}class ry{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ui{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=null!=i?i:Ui.RED,this.left=null!=r?r:Ui.EMPTY,this.right=null!=s?s:Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new Ui(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Ui.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const t=this.left.check();if(t!==this.right.check())throw ut();return t+(this.isRed()?0:1)}}Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1,Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,t,e,i,r){return this}insert(n,t,e){return new Ui(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(t){this.comparator=t,this.data=new _n(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new TT(this.data.getIterator())}getIteratorFrom(t){return new TT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof yn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new yn(this.comparator);return e.data=t,e}}class TT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qh(n){return n.hasNext()?n.getNext():void 0}class Cx{constructor(t,e=null,i=[],r=[],s=null,u=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=u,this.endAt=h,this.P=null}}function sg(n,t=null,e=[],i=[],r=null,s=null,u=null){return new Cx(n,t,e,i,r,s,u)}function $a(n){const t=We(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+rd(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),za(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>rd(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>rd(i)).join(",")),t.P=e}return t.P}function og(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!Sx(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!sa(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!ay(n.startAt,t.startAt)&&ay(n.endAt,t.endAt)}function ag(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function lg(n,t){return n.filters.filter(e=>e instanceof br&&e.field.isEqual(t))}function sy(n,t,e){let i=Y_,r=!0;for(const s of lg(n,t)){let u=Y_,h=!0;switch(s.op){case"<":case"<=":u=ng(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,h=!1;break;case"!=":case"not-in":u=Y_}cb({value:i,inclusive:r},{value:u,inclusive:h})<0&&(i=u,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const u=e.position[s];cb({value:i,inclusive:r},{value:u,inclusive:e.inclusive})<0&&(i=u,r=e.inclusive);break}return{value:i,inclusive:r}}function pb(n,t,e){let i=Fl,r=!0;for(const s of lg(n,t)){let u=Fl,h=!0;switch(s.op){case">=":case">":u=CT(s.value),h=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,h=!1;break;case"!=":case"not-in":u=Fl}db({value:i,inclusive:r},{value:u,inclusive:h})>0&&(i=u,r=h)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const u=e.position[s];db({value:i,inclusive:r},{value:u,inclusive:e.inclusive})>0&&(i=u,r=e.inclusive);break}return{value:i,inclusive:r}}class br extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,i):new Tx(t,e,i):"array-contains"===e?new IT(t,i):"in"===e?new mb(t,i):"not-in"===e?new _b(t,i):"array-contains-any"===e?new Ix(t,i):new br(t,e,i)}static V(t,e,i){return"in"===e?new ER(t,i):new gb(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Ll(e,this.value)):null!==e&&Kh(this.value)===Kh(e)&&this.v(Ll(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ut()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Tx extends br{constructor(t,e,i){super(t,e,i),this.key=qe.fromName(i.referenceValue)}matches(t){const e=qe.comparator(t.key,this.key);return this.v(e)}}class ER extends br{constructor(t,e){super(t,"in",e),this.keys=oy(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class gb extends br{constructor(t,e){super(t,"not-in",e),this.keys=oy(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function oy(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>qe.fromName(i.referenceValue))}class IT extends br{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Yh(e)&&Q_(e.arrayValue,this.value)}}class mb extends br{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Q_(this.value.arrayValue,e)}}class _b extends br{constructor(t,e){super(t,"not-in",e)}matches(t){if(Q_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Q_(this.value.arrayValue,e)}}class Ix extends br{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Yh(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Q_(this.value.arrayValue,i))}}class ic{constructor(t,e){this.position=t,this.inclusive=e}}class Jh{constructor(t,e="asc"){this.field=t,this.dir=e}}function Sx(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function yb(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],u=n.position[r];if(i=s.field.isKeyField()?qe.comparator(qe.fromName(u.referenceValue),e.key):Ll(u,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ay(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!sa(n.position[e],t.position[e]))return!1;return!0}class qa{constructor(t,e=null,i=[],r=[],s=null,u="F",h=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function vb(n,t,e,i,r,s,u,h){return new qa(n,t,e,i,r,s,u,h)}function od(n){return new qa(n)}function wb(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ly(n){for(const t of n.filters)if(t.S())return t.field;return null}function uy(n){return null!==n.collectionGroup}function Xh(n){const t=We(n);if(null===t.D){t.D=[];const e=ly(t),i=wb(t);if(null!==e&&null===i)e.isKeyField()||t.D.push(new Jh(e)),t.D.push(new Jh(pi.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.D.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Jh(pi.keyField(),s))}}}return t.D}function Bs(n){const t=We(n);if(!t.C)if("F"===t.limitType)t.C=sg(t.path,t.collectionGroup,Xh(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Xh(t))e.push(new Jh(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ic(t.startAt.position,t.startAt.inclusive):null;t.C=sg(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.C}function bb(n,t,e){return new qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Hi(n,t){return og(Bs(n),Bs(t))&&n.limitType===t.limitType}function ad(n){return`${$a(Bs(n))}|lt:${n.limitType}`}function Cb(n){return`Query(target=${function Ex(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${rd(i.value)}`;var i}).join(", ")}]`),za(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>rd(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>rd(e)).join(",")),`Target(${t})`}(Bs(n))}; limitType=${n.limitType})`}function Eb(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):qe.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,u){const h=yb(r,s,u);return r.inclusive?h<=0:h<0}(e.startAt,Xh(e),i)||e.endAt&&!function(r,s,u){const h=yb(r,s,u);return r.inclusive?h>=0:h>0}(e.endAt,Xh(e),i)));var e,i}function Dx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ef(n){return(t,e)=>{let i=!1;for(const r of Xh(n)){const s=xx(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function xx(n,t,e){const i=n.field.isKeyField()?qe.comparator(t.key,e.key):function(r,s,u){const h=s.data.field(r),p=u.data.field(r);return null!==h&&null!==p?Ll(h,p):ut()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ut()}}function cy(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zh(t)?"-0":t}}function DT(n){return{integerValue:""+n}}function Tb(n,t){return id(t)?DT(t):cy(n,t)}class dy{constructor(){this._=void 0}}function Ax(n,t,e){return n instanceof ld?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof Wa?hy(n,t):n instanceof tf?Db(n,t):function(i,r){const s=Sb(i,r),u=xb(s)+xb(i.k);return ey(s)&&ey(i.k)?DT(u):cy(i.M,u)}(n,t)}function Ib(n,t,e){return n instanceof Wa?hy(n,t):n instanceof tf?Db(n,t):e}function Sb(n,t){return n instanceof nf?ey(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class ld extends dy{}class Wa extends dy{constructor(t){super(),this.elements=t}}function hy(n,t){const e=ug(t);for(const i of n.elements)e.some(r=>sa(r,i))||e.push(i);return{arrayValue:{values:e}}}class tf extends dy{constructor(t){super(),this.elements=t}}function Db(n,t){let e=ug(t);for(const i of n.elements)e=e.filter(r=>!sa(r,i));return{arrayValue:{values:e}}}class nf extends dy{constructor(t,e){super(),this.M=t,this.k=e}}function xb(n){return li(n.integerValue||n.doubleValue)}function ug(n){return Yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class rf{constructor(t,e){this.field=t,this.transform=e}}class Ab{constructor(t,e){this.version=t,this.transformResults=e}}class ui{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ui}static exists(t){return new ui(void 0,t)}static updateTime(t){return new ui(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Mb(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class fy{}function kx(n,t,e){n instanceof sf?function(i,r,s){const u=i.value.clone(),h=Rb(i.fieldTransforms,r,s.transformResults);u.setAll(h),r.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,t,e):n instanceof ud?function(i,r,s){if(!Mb(i.precondition,r))return void r.convertToUnknownDocument(s.version);const u=Rb(i.fieldTransforms,r,s.transformResults),h=r.data;h.setAll(MT(i)),h.setAll(u),r.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function py(n,t,e){var r;n instanceof sf?function(i,r,s){if(!Mb(i.precondition,r))return;const u=i.value.clone(),h=kT(i.fieldTransforms,s,r);u.setAll(h),r.convertToFoundDocument(kb(r),u).setHasLocalMutations()}(n,t,e):n instanceof ud?function(i,r,s){if(!Mb(i.precondition,r))return;const u=kT(i.fieldTransforms,s,r),h=r.data;h.setAll(MT(i)),h.setAll(u),r.convertToFoundDocument(kb(r),h).setHasLocalMutations()}(n,t,e):Mb(n.precondition,r=t)&&r.convertToNoDocument(St.min())}function xT(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=Sb(i.transform,r||null);null!=s&&(null==e&&(e=wr.empty()),e.set(i.field,s))}return e||null}function AT(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&Ga(e,i,(r,s)=>function Mx(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Wa&&i instanceof Wa||e instanceof tf&&i instanceof tf?Ga(e.elements,i.elements,sa):e instanceof nf&&i instanceof nf?sa(e.k,i.k):e instanceof ld&&i instanceof ld);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}function kb(n){return n.isFoundDocument()?n.version:St.min()}class sf extends fy{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}}class ud extends fy{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function MT(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Rb(n,t,e){const i=new Map;kt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],u=s.transform,h=t.data.field(s.field);i.set(s.field,Ib(u,h,e[r]))}return i}function kT(n,t,e){const i=new Map;for(const r of n){const s=r.transform,u=e.data.field(r.field);i.set(r.field,Ax(s,u,t))}return i}class of extends fy{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class gy extends fy{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class RT{constructor(t){this.count=t}}var gi,sn;function OT(n){switch(n){default:return ut();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function Rx(n){if(void 0===n)return Ii("GRPC error has no .code"),he.UNKNOWN;switch(n){case gi.OK:return he.OK;case gi.CANCELLED:return he.CANCELLED;case gi.UNKNOWN:return he.UNKNOWN;case gi.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case gi.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case gi.INTERNAL:return he.INTERNAL;case gi.UNAVAILABLE:return he.UNAVAILABLE;case gi.UNAUTHENTICATED:return he.UNAUTHENTICATED;case gi.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case gi.NOT_FOUND:return he.NOT_FOUND;case gi.ALREADY_EXISTS:return he.ALREADY_EXISTS;case gi.PERMISSION_DENIED:return he.PERMISSION_DENIED;case gi.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case gi.ABORTED:return he.ABORTED;case gi.OUT_OF_RANGE:return he.OUT_OF_RANGE;case gi.UNIMPLEMENTED:return he.UNIMPLEMENTED;case gi.DATA_LOSS:return he.DATA_LOSS;default:return ut()}}(sn=gi||(gi={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";class Vl{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){td(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return yT(this.inner)}size(){return this.innerSize}}const TR=new _n(qe.comparator);function aa(){return TR}const IR=new _n(qe.comparator);function PT(...n){let t=IR;for(const e of n)t=t.insert(e.key,e);return t}function my(){return new Vl(n=>n.toString(),(n,t)=>n.isEqual(t))}const SR=new _n(qe.comparator),DR=new yn(qe.comparator);function bn(...n){let t=DR;for(const e of n)t=t.add(e);return t}const _y=new yn(Rt);function Ob(){return _y}class af{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,cd.createSynthesizedTargetChangeForCurrentChange(t,e)),new af(St.min(),i,Ob(),aa(),bn())}}class cd{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new cd(Bi.EMPTY_BYTE_STRING,e,bn(),bn(),bn())}}class cg{constructor(t,e,i,r){this.O=t,this.removedTargetIds=e,this.key=i,this.F=r}}class Pb{constructor(t,e){this.targetId=t,this.$=e}}class Ox{constructor(t,e,i=Bi.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class yy{constructor(){this.B=0,this.L=Nb(),this.U=Bi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=bn(),e=bn(),i=bn();return this.L.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:ut()}}),new cd(this.U,this.q,t,e,i)}J(){this.K=!1,this.L=Nb()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class NT{constructor(t){this.nt=t,this.st=new Map,this.it=aa(),this.rt=FT(),this.ot=new yn(Rt)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const i=this.lt(e);switch(t.state){case 0:this.ft(e)&&i.W(t.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(t.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(e);break;case 3:this.ft(e)&&(i.et(),i.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),i.W(t.resumeToken));break;default:ut()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((i,r)=>{this.ft(r)&&e(r)})}_t(t){const e=t.targetId,i=t.$.count,r=this.wt(e);if(r){const s=r.target;if(ag(s))if(0===i){const u=new qe(s.path);this.ct(e,u,Pn.newNoDocument(u,St.min()))}else kt(1===i);else this.gt(e)!==i&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((s,u)=>{const h=this.wt(u);if(h){if(s.current&&ag(h.target)){const p=new qe(h.target.path);null!==this.it.get(p)||this.It(u,p)||this.ct(u,p,Pn.newNoDocument(p,t))}s.j&&(e.set(u,s.H()),s.J())}});let i=bn();this.rt.forEach((s,u)=>{let h=!0;u.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(s))}),this.it.forEach((s,u)=>u.setReadTime(t));const r=new af(t,e,this.ot,this.it,i);return this.it=aa(),this.rt=FT(),this.ot=new yn(Rt),r}at(t,e){if(!this.ft(t))return;const i=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,i),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,i){if(!this.ft(t))return;const r=this.lt(t);this.It(t,e)?r.Y(e,1):r.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),i&&(this.it=this.it.insert(e,i))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new yy,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new yn(Rt),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||Be("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new yy),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function FT(){return new _n(qe.comparator)}function Nb(){return new _n(qe.comparator)}const xR={asc:"ASCENDING",desc:"DESCENDING"},Px={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Nx{constructor(t,e){this.databaseId=t,this.N=e}}function dd(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function LT(n,t){return n.N?t.toBase64():t.toUint8Array()}function AR(n,t){return dd(n,t.toTimestamp())}function Cr(n){return kt(!!n),St.fromTimestamp(function(t){const e=Pl(t);return new Si(e.seconds,e.nanos)}(n))}function VT(n,t){return(e=n,new en(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function BT(n){const t=en.fromString(n);return kt(ZT(t)),t}function dg(n,t){return VT(n.databaseId,t.path)}function Za(n,t){const e=BT(t);if(e.get(1)!==n.databaseId.projectId)throw new Pe(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Pe(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new qe(jT(e))}function UT(n,t){return VT(n.databaseId,t)}function HT(n){const t=BT(n);return 4===t.length?en.emptyPath():jT(t)}function hd(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jT(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Eo(n,t,e){return{name:dg(n,t),fields:e.value.mapValue.fields}}function GT(n,t,e){const i=Za(n,t.name),r=Cr(t.updateTime),s=new wr({mapValue:{fields:t.fields}}),u=Pn.newFoundDocument(i,r,s);return e&&u.setHasCommittedMutations(),e?u.setHasCommittedMutations():u}function hg(n,t){let e;if(t instanceof sf)e={update:Eo(n,t.key,t.value)};else if(t instanceof of)e={delete:dg(n,t.key)};else if(t instanceof ud)e={update:Eo(n,t.key,t.data),updateMask:MR(t.fieldMask)};else{if(!(t instanceof gy))return ut();e={verify:dg(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const u=s.transform;if(u instanceof ld)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Wa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof tf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof nf)return{fieldPath:s.field.canonicalString(),increment:u.k};throw ut()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:AR(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ut()),e;var r}function fg(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?ui.updateTime(Cr(r.updateTime)):void 0!==r.exists?ui.exists(r.exists):ui.none():ui.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,u){let h=null;"setToServerValue"in u?(kt("REQUEST_TIME"===u.setToServerValue),h=new ld):"appendMissingElements"in u?h=new Wa(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new tf(u.removeAllFromArray.values||[]):"increment"in u?h=new nf(s,u.increment):ut();const p=pi.fromServerFormat(u.fieldPath);return new rf(p,h)}(n,r)):[];var r;if(t.update){const r=Za(n,t.update.name),s=new wr({mapValue:{fields:t.update.fields}});if(t.updateMask){const u=new Ol((t.updateMask.fieldPaths||[]).map(y=>pi.fromServerFormat(y)));return new ud(r,s,u,e,i)}return new sf(r,s,e,i)}if(t.delete){const r=Za(n,t.delete);return new of(r,e)}if(t.verify){const r=Za(n,t.verify);return new gy(r,e)}return ut()}function Lb(n,t){return{documents:[UT(n,t.path)]}}function $T(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=UT(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=UT(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const y=p.map(E=>function(I){if("=="===I.op){if(lb(I.value))return{unaryFilter:{field:To(I.field),op:"IS_NAN"}};if(ab(I.value))return{unaryFilter:{field:To(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(lb(I.value))return{unaryFilter:{field:To(I.field),op:"IS_NOT_NAN"}};if(ab(I.value))return{unaryFilter:{field:To(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(I.field),op:Bb(I.op),value:I.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:To((E=y).field),direction:Vx(E.dir)};var E})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const u=(y=t.limit,n.N||za(y)?y:{value:y});var y,h,p;return null!==u&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt={before:(h=t.startAt).inclusive,values:h.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function Vb(n){let t=HT(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){kt(1===i);const E=e.from[0];E.allDescendants?r=E.collectionId:t=t.child(E.collectionId)}let s=[];e.where&&(s=qT(e.where));let u=[];e.orderBy&&(u=e.orderBy.map(E=>{return new Jh(fd((I=E).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let h=null;e.limit&&(h=function(E){let I;return I="object"==typeof E?E.value:E,za(I)?null:I}(e.limit));let p=null;var E;e.startAt&&(p=new ic((E=e.startAt).values||[],!!E.before));let y=null;return e.endAt&&(y=function(E){return new ic(E.values||[],!E.before)}(e.endAt)),vb(t,r,u,s,h,"F",p,y)}function qT(n){return n?void 0!==n.unaryFilter?[Bx(n)]:void 0!==n.fieldFilter?[WT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>qT(t)).reduce((t,e)=>t.concat(e)):ut():[]}function Vx(n){return xR[n]}function Bb(n){return Px[n]}function To(n){return{fieldPath:n.canonicalString()}}function fd(n){return pi.fromServerFormat(n.fieldPath)}function WT(n){return br.create(fd(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function Bx(n){switch(n.unaryFilter.op){case"IS_NAN":const t=fd(n.unaryFilter.field);return br.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=fd(n.unaryFilter.field);return br.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fd(n.unaryFilter.field);return br.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=fd(n.unaryFilter.field);return br.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function MR(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function ZT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Jr(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Ub(t)),t=Ux(n.get(e),t);return Ub(t)}function Ux(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function Ub(n){return n+"\x01\x01"}function Ka(n){const t=n.length;if(kt(t>=2),2===t)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),en.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const u=n.indexOf("\x01",s);switch((u<0||u>e)&&ut(),n.charAt(u+1)){case"\x01":const h=n.substring(s,u);let p;0===r.length?p=h:(r+=h,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,u),r+="\0";break;case"\x11":r+=n.substring(s,u+1);break;default:ut()}s=u+2}return new en(i)}const KT=["userId","batchId"];function Hb(n,t){return[n,Jr(t)]}function vy(n,t,e){return[n,Jr(t),e]}const YT={},Hx=["prefixPath","collectionGroup","readTime","documentId"],jx=["prefixPath","collectionGroup","documentId"],QT=["collectionGroup","readTime","prefixPath","documentId"],jb=["canonicalId","targetId"],Gb=["targetId","path"],JT=["path","targetId"],Gx=["collectionId","parent"],XT=["indexId","uid"],eI=["uid","sequenceNumber"],zx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$x=["indexId","uid","orderedDocumentKey"],kR=["userId","collectionPath","documentId"],RR=["userId","collectionPath","largestBatchId"],tI=["userId","collectionGroup","largestBatchId"],nI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qx=[...nI,"documentOverlays"],iI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],OR=[...iI,"indexConfiguration","indexState","indexEntries"],Wx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new me((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof me?e:me.resolve(e)}catch(e){return me.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):me.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):me.reject(e)}static resolve(t){return new me((e,i)=>{e(t)})}static reject(t){return new me((e,i)=>{i(t)})}static waitFor(t){return new me((e,i)=>{let r=0,s=0,u=!1;t.forEach(h=>{++r,h.next(()=>{++s,u&&s===r&&e()},p=>i(p))}),u=!0,s===r&&e()})}static or(t){let e=me.resolve(!1);for(const i of t)e=e.next(r=>r?me.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}}class zb{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new rr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new pg(t,e.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=gg(i.target.error);this.At.reject(new pg(t,r))}}static open(t,e,i,r){try{return new zb(e,t.transaction(r,i))}catch(s){throw new pg(e,s)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(Be("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new rI(e)}}class la{constructor(t,e,i){this.name=t,this.version=e,this.Pt=i,12.2===la.Vt((0,F.z$)())&&Ii("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Be("SimpleDb","Removing database:",t),Us(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(la.St())return!0;const t=(0,F.z$)(),e=la.Vt(t),i=0<e&&e<10,r=la.Dt(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(t){var e=this;return(0,Ie.Z)(function*(){return e.db||(Be("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=u=>{i(u.target.result)},s.onblocked=()=>{r(new pg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const h=u.target.error;r("VersionError"===h.name?new Pe(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Pe(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new pg(t,h))},s.onupgradeneeded=u=>{Be("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',u.oldVersion),e.Pt.kt(u.target.result,s.transaction,u.oldVersion,e.version).next(()=>{Be("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=i=>e.Mt(i)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Ie.Z)(function*(){const u="readonly"===e;let h=0;for(;;){++h;try{s.db=yield s.Nt(t);const p=zb.open(s.db,t,u?"readonly":"readwrite",i),y=r(p).next(E=>(p.bt(),E)).catch(E=>(p.abort(E),me.reject(E))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wy{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return Us(this.Ft.delete())}}class pg extends Pe{constructor(t,e){super(he.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function pd(n){return"IndexedDbTransactionError"===n.name}class rI{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Be("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Us(i)}add(t){return Be("SimpleDb","ADD",this.store.name,t,t),Us(this.store.add(t))}get(t){return Us(this.store.get(t)).next(e=>(void 0===e&&(e=null),Be("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Be("SimpleDb","DELETE",this.store.name,t),Us(this.store.delete(t))}count(){return Be("SimpleDb","COUNT",this.store.name),Us(this.store.count())}qt(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.Kt(r,(u,h)=>{s.push(h)}).next(()=>s)}{const r=this.store.getAll(i.range);return new me((s,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}}Gt(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new me((r,s)=>{i.onerror=u=>{s(u.target.error)},i.onsuccess=u=>{r(u.target.result)}})}Qt(t,e){Be("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(s,u,h)=>h.delete())}Wt(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.Kt(r,e)}zt(t){const e=this.cursor({});return new me((i,r)=>{e.onerror=s=>{const u=gg(s.target.error);r(u)},e.onsuccess=s=>{const u=s.target.result;u?t(u.primaryKey,u.value).next(h=>{h?u.continue():i()}):i()}})}Kt(t,e){const i=[];return new me((r,s)=>{t.onerror=u=>{s(u.target.error)},t.onsuccess=u=>{const h=u.target.result;if(!h)return void r();const p=new wy(h),y=e(h.primaryKey,h.value,p);if(y instanceof me){const E=y.catch(I=>(p.done(),me.reject(I)));i.push(E)}p.isDone?r():null===p.Lt?h.continue():h.continue(p.Lt)}}).next(()=>me.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.jt?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Us(n){return new me((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=gg(i.target.error);e(r)}})}let $b=!1;function gg(n){const t=la.Vt((0,F.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $b||($b=!0,setTimeout(()=>{throw i},0)),i}}return n}class by extends Zx{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function sr(n,t){const e=We(n);return la.xt(e.Ht,t)}class mg{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&kx(s,t,i[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&py(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&py(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const i=t.get(e.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(St.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),bn())}isEqual(t){return this.batchId===t.batchId&&Ga(this.mutations,t.mutations,(e,i)=>AT(e,i))&&Ga(this.baseMutations,t.baseMutations,(e,i)=>AT(e,i))}}class _g{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){kt(t.mutations.length===i.length);let r=SR;const s=t.mutations;for(let u=0;u<s.length;u++)r=r.insert(s[u].key,i[u].version);return new _g(t,e,i,r)}}class lf{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gd{constructor(t,e,i,r,s=St.min(),u=St.min(),h=Bi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(t){return new gd(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new gd(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new gd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Kx{constructor(t){this.Jt=t}}function Yx(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:yg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:dg(r=n.Jt,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:dd(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:md(t.version)};else{if(!t.isUnknownDocument())return ut();i.unknownDocument={path:e.path.toArray(),version:md(t.version)}}var r,s;return i}function yg(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function md(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _d(n){const t=new Si(n.seconds,n.nanoseconds);return St.fromTimestamp(t)}function uf(n,t){const e=(t.baseMutations||[]).map(s=>fg(n.Jt,s));for(let s=0;s<t.mutations.length-1;++s){const u=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(u.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>fg(n.Jt,s)),r=Si.fromMillis(t.localWriteTimeMs);return new mg(t.batchId,r,e,i)}function vg(n){const t=_d(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?_d(n.lastLimboFreeSnapshotVersion):St.min();let i;var r;return void 0!==n.query.documents?(kt(1===(r=n.query).documents.length),i=Bs(od(HT(r.documents[0])))):i=Bs(Vb(n.query)),new gd(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Bi.fromBase64String(n.resumeToken))}function qb(n,t){const e=md(t.snapshotVersion),i=md(t.lastLimboFreeSnapshotVersion);let r;r=ag(t.target)?Lb(n.Jt,t.target):$T(n.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$a(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Cy(n){const t=Vb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bb(t,t.limit,"L"):t}function Ey(n,t){return new lf(t.largestBatchId,fg(n.Jt,t.overlayMutation))}function sI(n,t){const e=t.path.lastSegment();return[n,Jr(t.path.popLast()),e]}class Qx{getBundleMetadata(t,e){return Wb(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:_d(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return Wb(t).put({bundleId:(i=e).id,createTime:md(Cr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return Ty(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:Cy(r.bundledQuery),readTime:_d(r.readTime)};var r})}saveNamedQuery(t,e){return Ty(t).put({name:(i=e).name,readTime:md(Cr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Wb(n){return sr(n,"bundles")}function Ty(n){return sr(n,"namedQueries")}class oI{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new oI(t,e.uid||"")}getOverlay(t,e){return cf(t).get(sI(this.userId,e)).next(i=>i?Ey(this.M,i):null)}saveOverlays(t,e,i){const r=[];return i.forEach((s,u)=>{const h=new lf(e,u);r.push(this.Xt(t,h))}),me.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(u=>r.add(Jr(u.getCollectionPath())));const s=[];return r.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);s.push(cf(t).Qt("collectionPathOverlayIndex",h))}),me.waitFor(s)}getOverlaysForCollection(t,e,i){const r=my(),s=Jr(e),u=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cf(t).qt("collectionPathOverlayIndex",u).next(h=>{for(const p of h){const y=Ey(this.M,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=my();let u;const h=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return cf(t).Wt({index:"collectionGroupOverlayIndex",range:h},(p,y,E)=>{const I=Ey(this.M,y);s.size()<r||I.largestBatchId===u?(s.set(I.getKey(),I),u=I.largestBatchId):E.done()}).next(()=>s)}Xt(t,e){return cf(t).put(function(i,r,s){const[u,h,p]=sI(r,s.mutation.key);return{userId:r,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:hg(i.Jt,s.mutation)}}(this.M,this.userId,e))}}function cf(n){return sr(n,"documentOverlays")}class Bl{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(li(t.integerValue));else if("doubleValue"in t){const i=li(t.doubleValue);isNaN(i)?this.ne(e,13):(this.ne(e,15),Zh(i)?e.se(0):e.se(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ne(e,20),"string"==typeof i?e.ie(i):(e.ie(`${i.seconds||""}`),e.se(i.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(nd(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ne(e,45),e.se(i.latitude||0),e.se(i.longitude||0)}else"mapValue"in t?ub(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):ut()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const i=t.fields||{};this.ne(e,55);for(const r of Object.keys(i))this.re(r,e),this.te(i[r],e)}he(t,e){const i=t.values||[];this.ne(e,50);for(const r of i)this.te(r,e)}ae(t,e){this.ne(e,37),qe.fromName(t).path.forEach(i=>{this.ne(e,60),this.le(i,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function Jx(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function aI(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=Jx(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Bl.fe=new Bl;class NR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this._e(i.value),i=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.ge(i.value),i=e.next();this.ye()}pe(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(e<"\ud800"||"\udbff"<e)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const r=e.codePointAt(0);this._e(240|r>>>18),this._e(128|63&r>>>12),this._e(128|63&r>>>6),this._e(128|63&r)}}this.we()}Ie(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const r=e.codePointAt(0);this.ge(240|r>>>18),this.ge(128|63&r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r)}}this.ye()}Te(t){const e=this.Ee(t),i=aI(e);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Re(t){const e=this.Ee(t),i=aI(e);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}_e(t){const e=255&t;0===e?(this.Pe(0),this.Pe(255)):255===e?(this.Pe(255),this.Pe(0)):this.Pe(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class FR{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.be()}}class Xx{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class wg{constructor(){this.De=new NR,this.Ce=new FR(this.De),this.xe=new Xx(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class df{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new df(this.indexId,this.documentKey,this.arrayValue,i)}}function hf(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=eA(n.arrayValue,t.arrayValue),0!==e?e:(e=eA(n.directionalValue,t.directionalValue),0!==e?e:qe.comparator(n.documentKey,t.documentKey)))}function eA(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class LR{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const i=e;i.S()?this.Fe=i:this.Oe.push(i)}}$e(t){const e=fb(t);if(void 0!==e&&!this.Be(e))return!1;const i=sd(t);let r=0,s=0;for(;r<i.length&&this.Be(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Fe){const u=i[r];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[s++],u))return!1;++r}for(;r<i.length;++r){const u=i[r];if(s>=this.Me.length||!this.Ue(this.Me[s++],u))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class VR{constructor(){this.qe=new Zb}addToCollectionParentIndex(t,e){return this.qe.add(e),me.resolve()}getCollectionParents(t,e){return me.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return me.resolve()}deleteFieldIndex(t,e){return me.resolve()}getDocumentsMatchingTarget(t,e){return me.resolve(null)}getIndexType(t,e){return me.resolve(0)}getFieldIndexes(t,e){return me.resolve([])}getNextCollectionGroupToUpdate(t){return me.resolve(null)}getMinOffset(t,e){return me.resolve(oa.min())}updateCollectionGroup(t,e,i){return me.resolve()}updateIndexEntries(t,e){return me.resolve()}}class Zb{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new yn(en.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new yn(en.comparator)).toArray()}}const Kb=new Uint8Array(0);class BR{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new Zb,this.Ge=new Vl(i=>$a(i),(i,r)=>og(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const s={collectionId:i,parent:Jr(r)};return tA(t).put(s)}return me.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[mT(e),""],!1,!0);return tA(t).qt(r).next(s=>{for(const u of s){if(u.collectionId!==e)break;i.push(Ka(u.parent))}return i})}addFieldIndex(t,e){const i=a(t),r={indexId:(s=e).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var s;return delete r.indexId,i.add(r).next()}deleteFieldIndex(t,e){const i=a(t),r=l(t),s=Iy(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=Iy(t);let r=!0;const s=new Map;return me.forEach(this.Qe(e),u=>this.je(t,u).next(h=>{r&&(r=!!h),s.set(u,h)})).next(()=>{if(r){let u=bn();const h=[];return me.forEach(s,(p,y)=>{var E;Be("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${$a(e)}`);const I=function(it,st){const At=fb(st);if(void 0===At)return null;for(const Pt of lg(it,At.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(y,p),M=function(it,st){const At=new Map;for(const Pt of sd(st))for(const tn of lg(it,Pt.fieldPath))switch(tn.op){case"==":case"in":At.set(Pt.fieldPath.canonicalString(),tn.value);break;case"not-in":case"!=":return At.set(Pt.fieldPath.canonicalString(),tn.value),Array.from(At.values())}return null}(y,p),P=function(it,st){const At=[];let Pt=!0;for(const tn of sd(st)){const Jn=0===tn.kind?sy(it,tn.fieldPath,it.startAt):pb(it,tn.fieldPath,it.startAt);At.push(Jn.value),Pt&&(Pt=Jn.inclusive)}return new ic(At,Pt)}(y,p),B=function(it,st){const At=[];let Pt=!0;for(const tn of sd(st)){const Jn=0===tn.kind?pb(it,tn.fieldPath,it.endAt):sy(it,tn.fieldPath,it.endAt);At.push(Jn.value),Pt&&(Pt=Jn.inclusive)}return new ic(At,Pt)}(y,p),Q=this.We(p,y,P),we=this.We(p,y,B),et=this.ze(p,y,M),nt=this.He(p.indexId,I,Q,P.inclusive,we,B.inclusive,et);return me.forEach(nt,it=>i.Gt(it,e.limit).next(st=>{st.forEach(At=>{const Pt=qe.fromSegments(At.documentKey);u.has(Pt)||(u=u.add(Pt),h.push(Pt))})}))}).next(()=>h)}return me.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}He(t,e,i,r,s,u,h){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),y=p/(null!=e?e.length:1),E=[];for(let I=0;I<p;++I){const M=e?this.Je(e[I/y]):Kb,P=this.Ye(t,M,i[I%y],r),B=this.Xe(t,M,s[I%y],u),Q=h.map(we=>this.Ye(t,M,we,!0));E.push(...this.createRange(P,B,Q))}return E}Ye(t,e,i,r){const s=new df(t,qe.empty(),e,i);return r?s:s.ke()}Xe(t,e,i,r){const s=new df(t,qe.empty(),e,i);return r?s.ke():s}je(t,e){const i=new LR(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let u=null;for(const h of s)i.$e(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(t,e){let i=2;return me.forEach(this.Qe(e),r=>this.je(t,r).next(s=>{s?0!==i&&s.fields.length<function(u){let h=new yn(pi.comparator),p=!1;for(const y of u.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:h=h.add(E.field))}for(const y of u.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}Ze(t,e){const i=new wg;for(const r of sd(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const u=i.Ne(r.kind);Bl.fe.Zt(s,u)}return i.Se()}Je(t){const e=new wg;return Bl.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const i=new wg;return Bl.fe.Zt(nc(this.databaseId,e),i.Ne(function(r){const s=sd(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Se()}ze(t,e,i){if(null===i)return[];let r=[];r.push(new wg);let s=0;for(const u of sd(t)){const h=i[s++];for(const p of r)if(this.en(e,u.fieldPath)&&Yh(h))r=this.nn(r,u,h);else{const y=p.Ne(u.kind);Bl.fe.Zt(h,y)}}return this.sn(r)}We(t,e,i){return this.ze(t,e,i.position)}sn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Se();return e}nn(t,e,i){const r=[...t],s=[];for(const u of i.arrayValue.values||[])for(const h of r){const p=new wg;p.seed(h.Se()),Bl.fe.Zt(u,p.Ne(e.kind)),s.push(p)}return s}en(t,e){return!!t.filters.find(i=>i instanceof br&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=a(t),r=l(t);return(e?i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.qt()).next(s=>{const u=[];return me.forEach(s,h=>r.get([h.indexId,this.uid]).next(p=>{u.push(function(y,E){const I=E?new ig(E.sequenceNumber,new oa(_d(E.readTime),new qe(Ka(E.documentKey)),E.largestBatchId)):ig.empty(),M=y.fields.map(([P,B])=>new ny(pi.fromServerFormat(P),B));return new ty(y.indexId,y.collectionGroup,M,I)}(h,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Rt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=a(t),s=l(t);return this.rn(t).next(u=>r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>me.forEach(h,p=>{return s.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:md((M=i).readTime),documentKey:Jr(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(t,e){const i=new Map;return me.forEach(e,(r,s)=>{const u=i.get(r.collectionGroup);return(u?me.resolve(u):this.getFieldIndexes(t,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),me.forEach(h,p=>this.on(t,r,p).next(y=>{const E=this.un(s,p);return y.isEqual(E)?me.resolve():this.an(t,s,p,y,E)}))))})}cn(t,e,i,r){return Iy(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(i,e.key),documentKey:e.key.path.toArray()})}hn(t,e,i,r){return Iy(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(i,e.key),e.key.path.toArray()])}on(t,e,i){const r=Iy(t);let s=new yn(hf);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,e)])},(u,h)=>{s=s.add(new df(i.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>s)}un(t,e){let i=new yn(hf);const r=this.Ze(e,t);if(null==r)return i;const s=fb(e);if(null!=s){const u=t.data.field(s.fieldPath);if(Yh(u))for(const h of u.arrayValue.values||[])i=i.add(new df(e.indexId,t.key,this.Je(h),r))}else i=i.add(new df(e.indexId,t.key,Kb,r));return i}an(t,e,i,r,s){Be("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const u=[];return function(h,p,y,E,I){const M=h.getIterator(),P=p.getIterator();let B=Qh(M),Q=Qh(P);for(;B||Q;){let we=!1,et=!1;if(B&&Q){const nt=y(B,Q);nt<0?et=!0:nt>0&&(we=!0)}else null!=B?et=!0:we=!0;we?(E(Q),Q=Qh(P)):et?(I(B),B=Qh(M)):(B=Qh(M),Q=Qh(P))}}(r,s,hf,h=>{u.push(this.cn(t,e,i,h))},h=>{u.push(this.hn(t,e,i,h))}),me.waitFor(u)}rn(t){let e=1;return l(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((u,h)=>hf(u,h)).filter((u,h,p)=>!h||0!==hf(u,p[h-1]));const r=[];r.push(t);for(const u of i){const h=hf(u,t),p=hf(u,e);if(0===h)r[0]=t.ke();else if(h>0&&p<0)r.push(u),r.push(u.ke());else if(p>0)break}r.push(e);const s=[];for(let u=0;u<r.length;u+=2)s.push(IDBKeyRange.bound([r[u].indexId,this.uid,r[u].arrayValue,r[u].directionalValue,Kb,[]],[r[u+1].indexId,this.uid,r[u+1].arrayValue,r[u+1].directionalValue,Kb,[]]));return s}getMinOffset(t,e){let i;return me.forEach(this.Qe(e),r=>this.je(t,r).next(s=>{s?(!i||iy(s.indexState.offset,i)<0)&&(i=s.indexState.offset):i=oa.min()})).next(()=>i)}}function tA(n){return sr(n,"collectionParents")}function Iy(n){return sr(n,"indexEntries")}function a(n){return sr(n,"indexConfiguration")}function l(n){return sr(n,"indexState")}const c={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class d{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new d(t,d.DEFAULT_COLLECTION_PERCENTILE,d.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function f(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],u=IDBKeyRange.only(e.batchId);let h=0;const p=i.Wt({range:u},(E,I,M)=>(h++,M.delete()));s.push(p.next(()=>{kt(1===h)}));const y=[];for(const E of e.mutations){const I=vy(t,E.key.path,e.batchId);s.push(r.delete(I)),y.push(E.key)}return me.waitFor(s).next(()=>y)}function m(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw ut();t=n.noDocument}return JSON.stringify(t).length}d.DEFAULT_COLLECTION_PERCENTILE=10,d.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,d.DEFAULT=new d(41943040,d.DEFAULT_COLLECTION_PERCENTILE,d.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),d.DISABLED=new d(-1,0,0);class w{constructor(t,e,i,r){this.userId=t,this.M=e,this.indexManager=i,this.referenceDelegate=r,this.ln={}}static Yt(t,e,i,r){kt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new w(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return T(t).Wt({index:"userMutationsIndex",range:i},(r,s,u)=>{e=!1,u.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=x(t),u=T(t);return u.add({}).next(h=>{kt("number"==typeof h);const p=new mg(h,e,i,r),y=function(M,P,B){const Q=B.baseMutations.map(et=>hg(M.Jt,et)),we=B.mutations.map(et=>hg(M.Jt,et));return{userId:P,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:Q,mutations:we}}(this.M,this.userId,p),E=[];let I=new yn((M,P)=>Rt(M.canonicalString(),P.canonicalString()));for(const M of r){const P=vy(this.userId,M.key.path,h);I=I.add(M.key.path.popLast()),E.push(u.put(y)),E.push(s.put(P,YT))}return I.forEach(M=>{E.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.ln[h]=p.keys()}),me.waitFor(E).next(()=>p)})}lookupMutationBatch(t,e){return T(t).get(e).next(i=>i?(kt(i.userId===this.userId),uf(this.M,i)):null)}fn(t,e){return this.ln[e]?me.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.ln[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return T(t).Wt({index:"userMutationsIndex",range:r},(u,h,p)=>{h.userId===this.userId&&(kt(h.batchId>=i),s=uf(this.M,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return T(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(r,s,u)=>{i=s.batchId,u.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return T(t).qt("userMutationsIndex",e).next(i=>i.map(r=>uf(this.M,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=Hb(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return x(t).Wt({range:r},(u,h,p)=>{const[y,E,I]=u,M=Ka(E);if(y===this.userId&&e.path.isEqual(M))return T(t).get(I).next(P=>{if(!P)throw ut();kt(P.userId===this.userId),s.push(uf(this.M,P))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new yn(Rt);const r=[];return e.forEach(s=>{const u=Hb(this.userId,s.path),h=IDBKeyRange.lowerBound(u),p=x(t).Wt({range:h},(y,E,I)=>{const[M,P,B]=y,Q=Ka(P);M===this.userId&&s.path.isEqual(Q)?i=i.add(B):I.done()});r.push(p)}),me.waitFor(r).next(()=>this.dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=Hb(this.userId,i),u=IDBKeyRange.lowerBound(s);let h=new yn(Rt);return x(t).Wt({range:u},(p,y,E)=>{const[I,M,P]=p,B=Ka(M);I===this.userId&&i.isPrefixOf(B)?B.length===r&&(h=h.add(P)):E.done()}).next(()=>this.dn(t,h))}dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(T(t).get(s).next(u=>{if(null===u)throw ut();kt(u.userId===this.userId),i.push(uf(this.M,u))}))}),me.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return f(t.Ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),me.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return me.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return x(t).Wt({range:i},(s,u,h)=>{if(s[0]===this.userId){const p=Ka(s[1]);r.push(p)}else h.done()}).next(()=>{kt(0===r.length)})})}containsKey(t,e){return C(t,this.userId,e)}wn(t){return k(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function C(n,t,e){const i=Hb(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let u=!1;return x(n).Wt({range:s,jt:!0},(h,p,y)=>{const[E,I,M]=h;E===t&&I===r&&(u=!0),y.done()}).next(()=>u)}function T(n){return sr(n,"mutations")}function x(n){return sr(n,"documentMutations")}function k(n){return sr(n,"mutationQueues")}class V{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new V(0)}static yn(){return new V(-1)}}class j{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const i=new V(e.highestTargetId);return e.highestTargetId=i.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>St.fromTimestamp(new Si(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.pn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.In(t,r)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(i=>(i.targetCount+=1,this.En(e,i),this.In(t,i))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>X(t).delete(e.targetId)).next(()=>this.pn(t)).next(i=>(kt(i.targetCount>0),i.targetCount-=1,this.In(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return X(t).Wt((u,h)=>{const p=vg(h);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>me.waitFor(s)).next(()=>r)}forEachTarget(t,e){return X(t).Wt((i,r)=>{const s=vg(r);e(s)})}pn(t){return Ce(t).get("targetGlobalKey").next(e=>(kt(null!==e),e))}In(t,e){return Ce(t).put("targetGlobalKey",e)}Tn(t,e){return X(t).put(qb(this.M,e))}En(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=$a(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return X(t).Wt({range:r,index:"queryTargetsIndex"},(u,h,p)=>{const y=vg(h);og(e,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Le(t);return e.forEach(u=>{const h=Jr(u.path);r.push(s.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(t,i,u))}),me.waitFor(r)}removeMatchingKeys(t,e,i){const r=Le(t);return me.forEach(e,s=>{const u=Jr(s.path);return me.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Le(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Le(t);let s=bn();return r.Wt({range:i,jt:!0},(u,h,p)=>{const y=Ka(u[1]),E=new qe(y);s=s.add(E)}).next(()=>s)}containsKey(t,e){const i=Jr(e.path),r=IDBKeyRange.bound([i],[mT(i)],!1,!0);let s=0;return Le(t).Wt({index:"documentTargetsIndex",jt:!0,range:r},([u,h],p,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}Et(t,e){return X(t).get(e).next(i=>i?vg(i):null)}}function X(n){return sr(n,"targets")}function Ce(n){return sr(n,"targetGlobal")}function Le(n){return sr(n,"targetDocuments")}function Ue(n){return rt.apply(this,arguments)}function rt(){return rt=(0,Ie.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==Wx)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),rt.apply(this,arguments)}function Me([n,t],[e,i]){const r=Rt(n,e);return 0===r?Rt(t,i):r}class yt{constructor(t){this.An=t,this.buffer=new yn(Me),this.Rn=0}bn(){return++this.Rn}Pn(t){const e=[t,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Me(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Zt{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const i=this.Vn?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,Ie.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(r){pd(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ue(r)}yield e.Sn(t)}))}}class vn{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return me.resolve(Vs.A);const i=new yt(e);return this.Dn.forEachTarget(t,r=>i.Pn(r.sequenceNumber)).next(()=>this.Dn.xn(t,r=>i.Pn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Dn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(c)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let i,r,s,u,h,p,y;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),r=this.params.maximumSequenceNumbersToCollect):r=I,u=Date.now(),this.nthSequenceNumber(t,r))).next(I=>(i=I,h=Date.now(),this.removeTargets(t,i,e))).next(I=>(s=I,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(I=>(y=Date.now(),W_()<=vo.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-E}ms\n\tDetermined least recently used ${r} in `+(h-u)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${I} documents in `+(y-p)+`ms\nTotal Duration: ${y-E}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:I})))}}class Hs{constructor(t,e){this.db=t,this.garbageCollector=new vn(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}kn(t){let e=0;return this.xn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(i,r)=>e(r))}addReference(t,e,i){return Ya(t,i)}removeReference(t,e,i){return Ya(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return Ya(t,e)}On(t,e){return function(i,r){let s=!1;return k(i).zt(u=>C(i,u,r).next(h=>(h&&(s=!0),me.resolve(!h)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Mn(t,(u,h)=>{if(h<=e){const p=this.On(t,u).next(y=>{if(!y)return s++,i.getEntry(t,u).next(()=>(i.removeEntry(u,St.min()),Le(t).delete([0,Jr(u.path)])))});r.push(p)}}).next(()=>me.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return Ya(t,e)}Mn(t,e){const i=Le(t);let r,s=Vs.A;return i.Wt({index:"documentTargetsIndex"},([u,h],{path:p,sequenceNumber:y})=>{0===u?(s!==Vs.A&&e(new qe(Ka(r)),s),s=y,r=p):s=Vs.A}).next(()=>{s!==Vs.A&&e(new qe(Ka(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Ya(n,t){return Le(n).put((i=n.currentSequenceNumber,{targetId:0,path:Jr(t.path),sequenceNumber:i}));var i}class Sy{constructor(){this.changes=new Vl(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Pn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?me.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Yb{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Ul(t).put(i)}removeEntry(t,e,i){return Ul(t).delete(function(r,s){const u=r.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],yg(s),u[u.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Fn(t,i)))}getEntry(t,e){let i=Pn.newInvalidDocument(e);return Ul(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yd(e))},(r,s)=>{i=this.$n(e,s)}).next(()=>i)}Bn(t,e){let i={size:0,document:Pn.newInvalidDocument(e)};return Ul(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yd(e))},(r,s)=>{i={document:this.$n(e,s),size:m(s)}}).next(()=>i)}getEntries(t,e){let i=aa();return this.Ln(t,e,(r,s)=>{const u=this.$n(r,s);i=i.insert(r,u)}).next(()=>i)}Un(t,e){let i=aa(),r=new _n(qe.comparator);return this.Ln(t,e,(s,u)=>{const h=this.$n(s,u);i=i.insert(s,h),r=r.insert(s,m(u))}).next(()=>({documents:i,qn:r}))}Ln(t,e,i){if(e.isEmpty())return me.resolve();let r=new yn(Ay);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(yd(r.first()),yd(r.last())),u=r.getIterator();let h=u.getNext();return Ul(t).Wt({index:"documentKeyIndex",range:s},(p,y,E)=>{const I=qe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&Ay(h,I)<0;)i(h,null),h=u.getNext();h&&h.isEqual(I)&&(i(h,y),h=u.hasNext()?u.getNext():null),h?E.Ut(yd(h)):E.done()}).next(()=>{for(;h;)i(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),yg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ul(t).qt(IDBKeyRange.bound(r,s,!0)).next(u=>{let h=aa();for(const p of u){const y=this.$n(qe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(t,e,i,r){let s=aa();const u=xy(e,i),h=xy(e,oa.max());return Ul(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(p,y,E)=>{const I=this.$n(qe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(I.key,I),s.size===r&&E.done()}).next(()=>s)}newChangeBuffer(t){return new Qb(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Dy(t).get("remoteDocumentGlobalKey").next(e=>(kt(!!e),e))}Fn(t,e){return Dy(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const i=function PR(n,t){let e;if(t.document)e=GT(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=qe.fromSegments(t.noDocument.path),r=_d(t.noDocument.readTime);e=Pn.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ut();{const i=qe.fromSegments(t.unknownDocument.path),r=_d(t.unknownDocument.version);e=Pn.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Si(i[0],i[1]);return St.fromTimestamp(r)}(t.readTime)),e}(this.M,e);if(!i.isNoDocument()||!i.version.isEqual(St.min()))return i}return Pn.newInvalidDocument(t)}}class Qb extends Sy{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new Vl(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new yn((s,u)=>Rt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const h=this.Gn.get(s);if(e.push(this.Kn.removeEntry(t,s,h.readTime)),u.isValidDocument()){const p=Yx(this.Kn.M,u);r=r.add(s.path.popLast()),i+=m(p)-h.size,e.push(this.Kn.addEntry(t,s,p))}else if(i-=h.size,this.trackRemovals){const p=Yx(this.Kn.M,u.convertToNoDocument(St.min()));e.push(this.Kn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Kn.updateMetadata(t,i)),me.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(i=>(this.Gn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:i,qn:r})=>(r.forEach((s,u)=>{this.Gn.set(s,{size:u,readTime:i.get(s).readTime})}),i))}}function Dy(n){return sr(n,"remoteDocumentGlobal")}function Ul(n){return sr(n,"remoteDocumentsV14")}function yd(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function xy(n,t){const e=t.documentKey.path.toArray();return[n,yg(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Ay(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Rt(e[s],i[s]),r)return r;return r=Rt(e.length,i.length),r||(r=Rt(e[e.length-2],i[i.length-2]),r||Rt(e[e.length-1],i[i.length-1]))}class Jb{constructor(t){this.M=t}kt(t,e,i,r){const s=new zb("createOrUpgrade",e);var h;i<1&&r>=1&&(t.createObjectStore("owner"),(h=t).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KT,{unique:!0}),h.createObjectStore("documentMutations"),UR(t),function(h){h.createObjectStore("remoteDocuments")}(t));let u=me.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(t),UR(t)),u=u.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(u=u.next(()=>function(h,p){return p.store("mutations").qt().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KT,{unique:!0});const E=p.store("mutations"),I=y.map(M=>E.put(M));return me.waitFor(I)})}(t,s))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(u=u.next(()=>this.Qn(s))),i<6&&r>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(t),this.jn(s)))),i<7&&r>=7&&(u=u.next(()=>this.Wn(s))),i<8&&r>=8&&(u=u.next(()=>this.zn(t,s))),i<9&&r>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(u=u.next(()=>this.Hn(s))),i<11&&r>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(u=u.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:kR});p.createIndex("collectionPathOverlayIndex",RR,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",tI,{unique:!1})}(t)})),i<13&&r>=13&&(u=u.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:Hx});p.createIndex("documentKeyIndex",jx),p.createIndex("collectionGroupIndex",QT)}(t)).next(()=>this.Jn(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(u=u.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:XT}).createIndex("sequenceNumberIndex",eI,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:zx}).createIndex("documentKeyIndex",$x,{unique:!1})}(t)})),u}jn(t){let e=0;return t.store("remoteDocuments").Wt((i,r)=>{e+=m(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Qn(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.qt().next(r=>me.forEach(r,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",u).next(h=>me.forEach(h,p=>{kt(p.userId===s.userId);const y=uf(this.M,p);return f(t,s.userId,y).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Wt((u,h)=>{const p=new en(u),y=[0,Jr(p)];s.push(e.get(y).next(E=>E?me.resolve():e.put({targetId:0,path:Jr(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>me.waitFor(s))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:Gx});const i=e.store("collectionParents"),r=new Zb,s=u=>{if(r.add(u)){const h=u.lastSegment(),p=u.popLast();return i.put({collectionId:h,parent:Jr(p)})}};return e.store("remoteDocuments").Wt({jt:!0},(u,h)=>{const p=new en(u);return s(p.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([u,h,p],y)=>{const E=Ka(h);return s(E.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((i,r)=>{const s=vg(r),u=qb(this.M,s);return e.put(u)})}Jn(t,e){const i=e.store("remoteDocuments"),r=[];return i.Wt((s,u)=>{const h=e.store("remoteDocumentsV14"),p=(y=u,y.document?new qe(en.fromString(y.document.name).popFirst(5)):y.noDocument?qe.fromSegments(y.noDocument.path):y.unknownDocument?qe.fromSegments(y.unknownDocument.path):ut()).path.toArray();var y;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(h.put(E))}).next(()=>me.waitFor(r))}}function UR(n){n.createObjectStore("targetDocuments",{keyPath:Gb}).createIndex("documentTargetsIndex",JT,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jb,{unique:!0}),n.createObjectStore("targetGlobal")}const nA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iA{constructor(t,e,i,r,s,u,h,p,y,E,I=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Yn=s,this.window=u,this.document=h,this.Xn=y,this.Zn=E,this.ts=I,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!iA.vt())throw new Pe(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hs(this,r),this.hs=e+"main",this.M=new Kx(p),this.ls=new la(this.hs,this.ts,new Jb(this.M)),this.fs=new j(this.referenceDelegate,this.M),this.ds=new Yb(this.M),this._s=new Qx,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===E&&Ii("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(he.FAILED_PRECONDITION,nA);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Vs(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var i=(0,Ie.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,Ie.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,Ie.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>lI(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.bs(t).next(()=>!0))).catch(t=>{if(pd(t))return Be("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return Xb(t).get("owner").next(e=>me.resolve(this.Ps(e)))}Vs(t){return lI(t).delete(this.clientId)}vs(){var t=this;return(0,Ie.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=sr(i,"clientMetadata");return r.qt().next(s=>{const u=t.Ds(s,18e5),h=s.filter(p=>-1===u.indexOf(p));return me.forEach(h,p=>r.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(t.ws)for(const i of e)t.ws.removeItem(t.Cs(i.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?me.resolve(!0):Xb(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.Ps(e)&&this.networkEnabled)return!0;if(!this.Ps(e)){if(!e.allowTabSynchronization)throw new Pe(he.FAILED_PRECONDITION,nA);return!1}}return!(!this.networkEnabled||!this.inForeground)||lI(t).qt().next(i=>void 0===this.Ds(i,5e3).find(r=>{if(this.clientId!==r.clientId){const u=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||u&&h)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Be("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ie.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new by(e,Vs.A);return t.Rs(i).next(()=>t.Vs(i))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(i=>this.Ss(i.updateTimeMs,e)&&!this.xs(i.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>lI(t).qt().next(e=>this.Ds(e,18e5).map(i=>i.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return w.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new BR(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return oI.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,i){Be("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=14===(u=this.ts)?OR:13===u?iI:12===u?qx:11===u?nI:void ut();var u;let h;return this.ls.runTransaction(t,r,s,p=>(h=new by(p,this.es?this.es.next():Vs.A),"readwrite-primary"===e?this.Es(h).next(y=>!!y||this.As(h)).next(y=>{if(!y)throw Ii(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(he.FAILED_PRECONDITION,Wx);return i(h)}).next(y=>this.bs(h).next(()=>y)):this.$s(h).next(()=>i(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}$s(t){return Xb(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.Ps(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Pe(he.FAILED_PRECONDITION,nA)})}bs(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xb(t).put("owner",e)}static vt(){return la.vt()}Rs(t){const e=Xb(t);return e.get("owner").next(i=>this.Ps(i)?(Be("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):me.resolve())}Ss(t,e){const i=Date.now();return!(t<i-e||t>i&&(Ii(`Detected an update time that is in the future: ${t} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const i=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return Be("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ii("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){Ii("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Xb(n){return sr(n,"owner")}function lI(n){return sr(n,"clientMetadata")}function rA(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class uV{constructor(t,e,i){this.ds=t,this.Bs=e,this.indexManager=i}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(i=>this.Us(t,e,i))}Us(t,e,i){return this.ds.getEntry(t,e).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}qs(t,e){t.forEach((i,r)=>{for(const s of e)s.applyToLocalView(r)})}Ks(t,e){return this.ds.getEntries(t,e).next(i=>this.Gs(t,i).next(()=>i))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(i=>this.qs(e,i))}Qs(t,e,i){return qe.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.js(t,e.path):uy(e)?this.Ws(t,e,i):this.zs(t,e,i);var r}js(t,e){return this.Ls(t,new qe(e)).next(i=>{let r=PT();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ws(t,e,i){const r=e.collectionGroup;let s=PT();return this.indexManager.getCollectionParents(t,r).next(u=>me.forEach(u,h=>{const p=(y=e,E=h.child(r),new qa(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.zs(t,p,i).next(y=>{y.forEach((E,I)=>{s=s.insert(E,I)})})}).next(()=>s))}zs(t,e,i){let r;return this.ds.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(s=>{for(const u of s)for(const h of u.mutations){const p=h.key;let y=r.get(p);null==y&&(y=Pn.newInvalidDocument(p),r=r.insert(p,y)),py(h,y,u.localWriteTime),y.isFoundDocument()||(r=r.remove(p))}}).next(()=>(r.forEach((s,u)=>{Eb(e,u)||(r=r.remove(s))}),r))}}class sA{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Hs=i,this.Js=r}static Ys(t,e){let i=bn(),r=bn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new sA(t,e.fromCache,i,r)}}class HR{constructor(){this.Xs=!1}initialize(t,e){this.Zs=t,this.indexManager=e,this.Xs=!0}Qs(t,e,i,r){return this.ti(t,e).next(s=>s||this.ei(t,e,r,i)).next(s=>s||this.ni(t,e))}ti(t,e){return me.resolve(null)}ei(t,e,i,r){return function ST(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(e)||r.isEqual(St.min())?this.ni(t,e):this.Zs.Ks(t,i).next(s=>{const u=this.si(e,s);return this.ii(e,u,i,r)?this.ni(t,e):(W_()<=vo.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cb(e)),this.ri(t,u,e,ET(r,-1)))})}si(t,e){let i=new yn(ef(t));return e.forEach((r,s)=>{Eb(t,s)&&(i=i.add(s))}),i}ii(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ni(t,e){return W_()<=vo.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Cb(e)),this.Zs.Qs(t,e,oa.min())}ri(t,e,i,r){return this.Zs.Qs(t,i,r).next(s=>(e.forEach(u=>{s=s.insert(u.key,u)}),s))}}class cV{constructor(t,e,i,r){this.persistence=t,this.oi=e,this.M=r,this.ui=new _n(Rt),this.ai=new Vl(s=>$a(s),og),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(i)}li(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.fi=new uV(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ui))}}function jR(n,t,e,i){return new cV(n,t,e,i)}function GR(n,t){return oA.apply(this,arguments)}function oA(){return oA=(0,Ie.Z)(function*(n,t){const e=We(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.Bs.getAllMutationBatches(i).next(s=>(r=s,e.li(t),e.Bs.getAllMutationBatches(i))).next(s=>{const u=[],h=[];let p=bn();for(const y of r){u.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of s){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return e.fi.Ks(i,p).next(y=>({di:y,removedBatchIds:u,addedBatchIds:h}))})})}),oA.apply(this,arguments)}function dV(n,t){const e=We(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.hi.newChangeBuffer({trackRemovals:!0});return function(u,h,p,y){const E=p.batch,I=E.keys();let M=me.resolve();return I.forEach(P=>{M=M.next(()=>y.getEntry(h,P)).next(B=>{const Q=p.docVersions.get(P);kt(null!==Q),B.version.compareTo(Q)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),y.addEntry(B)))})}),M.next(()=>u.Bs.removeMutationBatch(h,E))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.Bs.performConsistencyCheck(i)).next(()=>e.fi.Ks(i,r))})}function zR(n){const t=We(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function hV(n,t){const e=We(n),i=t.snapshotVersion;let r=e.ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=e.hi.newChangeBuffer({trackRemovals:!0});r=e.ui;const h=[];t.targetChanges.forEach((y,E)=>{const I=r.get(E);if(!I)return;h.push(e.fs.removeMatchingKeys(s,y.removedDocuments,E).next(()=>e.fs.addMatchingKeys(s,y.addedDocuments,E)));let M=I.withSequenceNumber(s.currentSequenceNumber);var P,B,Q;t.targetMismatches.has(E)?M=M.withResumeToken(Bi.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):y.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(y.resumeToken,i)),r=r.insert(E,M),B=M,Q=y,(0===(P=I).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&h.push(e.fs.updateTargetData(s,M))});let p=aa();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push($R(s,u,t.documentUpdates).next(y=>{p=y})),!i.isEqual(St.min())){const y=e.fs.getLastRemoteSnapshotVersion(s).next(E=>e.fs.setTargetsMetadata(s,s.currentSequenceNumber,i));h.push(y)}return me.waitFor(h).next(()=>u.apply(s)).next(()=>e.fi.Gs(s,p)).next(()=>p)}).then(s=>(e.ui=r,s))}function $R(n,t,e){let i=bn();return e.forEach(r=>i=i.add(r)),t.getEntries(n,i).next(r=>{let s=aa();return e.forEach((u,h)=>{const p=r.get(u);h.isNoDocument()&&h.version.isEqual(St.min())?(t.removeEntry(u,h.readTime),s=s.insert(u,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(t.addEntry(h),s=s.insert(u,h)):Be("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",h.version)}),s})}function fV(n,t){const e=We(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(i,t)))}function My(n,t){const e=We(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.fs.getTargetData(i,t).next(s=>s?(r=s,me.resolve(r)):e.fs.allocateTargetId(i).next(u=>(r=new gd(t,u,0,i.currentSequenceNumber),e.fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ui=e.ui.insert(i.targetId,i),e.ai.set(t,i.targetId)),i})}function ky(n,t,e){return aA.apply(this,arguments)}function aA(){return aA=(0,Ie.Z)(function*(n,t,e){const i=We(n),r=i.ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!pd(u))throw u;Be("LocalStore",`Failed to update sequence numbers for target ${t}: ${u}`)}i.ui=i.ui.remove(t),i.ai.delete(r.target)}),aA.apply(this,arguments)}function uI(n,t,e){const i=We(n);let r=St.min(),s=bn();return i.persistence.runTransaction("Execute query","readonly",u=>function(h,p,y){const E=We(h),I=E.ai.get(y);return void 0!==I?me.resolve(E.ui.get(I)):E.fs.getTargetData(p,y)}(i,u,Bs(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(u,h.targetId).next(p=>{s=p})}).next(()=>i.oi.Qs(u,t,e?r:St.min(),e?s:bn())).next(h=>(ZR(i,Dx(t),h),{documents:h,_i:s})))}function qR(n,t){const e=We(n),i=We(e.fs),r=e.ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.Et(s,t).next(u=>u?u.target:null))}function WR(n,t){const e=We(n),i=e.ci.get(t)||St.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.hi.getAllFromCollectionGroup(r,t,ET(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(ZR(e,t,r),r))}function ZR(n,t,e){let i=St.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ci.set(t,i)}function lA(){return lA=(0,Ie.Z)(function*(n,t,e,i){const r=We(n);let s=bn(),u=aa();for(const y of e){const E=t.wi(y.metadata.name);y.document&&(s=s.add(E));const I=t.mi(y);I.setReadTime(t.gi(y.metadata.readTime)),u=u.insert(E,I)}const h=r.hi.newChangeBuffer({trackRemovals:!0}),p=yield My(r,(y=i,Bs(od(en.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>$R(y,h,u).next(E=>(h.apply(y),E)).next(E=>r.fs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.fs.addMatchingKeys(y,s,p.targetId)).next(()=>r.fi.Gs(y,E)).next(()=>E)))}),lA.apply(this,arguments)}function gV(n,t){return uA.apply(this,arguments)}function uA(){return uA=(0,Ie.Z)(function*(n,t,e=bn()){const i=yield My(n,Bs(Cy(t.bundledQuery))),r=We(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const u=Cr(t.readTime);if(i.snapshotVersion.compareTo(u)>=0)return r._s.saveNamedQuery(s,t);const h=i.withResumeToken(Bi.EMPTY_BYTE_STRING,u);return r.ui=r.ui.insert(h.targetId,h),r.fs.updateTargetData(s,h).next(()=>r.fs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.fs.addMatchingKeys(s,e,i.targetId)).next(()=>r._s.saveNamedQuery(s,t))})}),uA.apply(this,arguments)}class mV{constructor(t){this.M=t,this.yi=new Map,this.pi=new Map}getBundleMetadata(t,e){return me.resolve(this.yi.get(e))}saveBundleMetadata(t,e){var i;return this.yi.set(e.id,{id:(i=e).id,version:i.version,createTime:Cr(i.createTime)}),me.resolve()}getNamedQuery(t,e){return me.resolve(this.pi.get(e))}saveNamedQuery(t,e){return this.pi.set(e.name,{name:(i=e).name,query:Cy(i.bundledQuery),readTime:Cr(i.readTime)}),me.resolve();var i}}class _V{constructor(){this.overlays=new _n(qe.comparator),this.Ii=new Map}getOverlay(t,e){return me.resolve(this.overlays.get(e))}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.Xt(t,e,s)}),me.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Ii.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(i)),me.resolve()}getOverlaysForCollection(t,e,i){const r=my(),s=e.length+1,u=new qe(e.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return me.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new _n((y,E)=>y-E);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>i){let E=s.get(y.largestBatchId);null===E&&(E=my(),s=s.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const h=my(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>h.set(y,E)),!(h.size()>=r)););return me.resolve(h)}Xt(t,e,i){if(null===i)return;const r=this.overlays.get(i.key);if(null!==r){const u=this.Ii.get(r.largestBatchId).delete(i.key);this.Ii.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new lf(e,i));let s=this.Ii.get(e);void 0===s&&(s=bn(),this.Ii.set(e,s)),this.Ii.set(e,s.add(i.key))}}class cA{constructor(){this.Ti=new yn(Br.Ei),this.Ai=new yn(Br.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(t,e){const i=new Br(t,e);this.Ti=this.Ti.add(i),this.Ai=this.Ai.add(i)}bi(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Pi(new Br(t,e))}Vi(t,e){t.forEach(i=>this.removeReference(i,e))}vi(t){const e=new qe(new en([])),i=new Br(e,t),r=new Br(e,t+1),s=[];return this.Ai.forEachInRange([i,r],u=>{this.Pi(u),s.push(u.key)}),s}Si(){this.Ti.forEach(t=>this.Pi(t))}Pi(t){this.Ti=this.Ti.delete(t),this.Ai=this.Ai.delete(t)}Di(t){const e=new qe(new en([])),i=new Br(e,t),r=new Br(e,t+1);let s=bn();return this.Ai.forEachInRange([i,r],u=>{s=s.add(u.key)}),s}containsKey(t){const e=new Br(t,0),i=this.Ti.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Br{constructor(t,e){this.key=t,this.Ci=e}static Ei(t,e){return qe.comparator(t.key,e.key)||Rt(t.Ci,e.Ci)}static Ri(t,e){return Rt(t.Ci,e.Ci)||qe.comparator(t.key,e.key)}}class yV{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.xi=1,this.Ni=new yn(Br.Ei)}checkEmpty(t){return me.resolve(0===this.Bs.length)}addMutationBatch(t,e,i,r){const s=this.xi;this.xi++;const u=new mg(s,e,i,r);this.Bs.push(u);for(const h of r)this.Ni=this.Ni.add(new Br(h.key,s)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return me.resolve(u)}lookupMutationBatch(t,e){return me.resolve(this.ki(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.Mi(e+1),s=r<0?0:r;return me.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(t){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Br(e,0),r=new Br(e,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([i,r],u=>{const h=this.ki(u.Ci);s.push(h)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new yn(Rt);return e.forEach(r=>{const s=new Br(r,0),u=new Br(r,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,u],h=>{i=i.add(h.Ci)})}),me.resolve(this.Oi(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;qe.isDocumentKey(s)||(s=s.child(""));const u=new Br(new qe(s),0);let h=new yn(Rt);return this.Ni.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(p.Ci)),!0)},u),me.resolve(this.Oi(h))}Oi(t){const e=[];return t.forEach(i=>{const r=this.ki(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){kt(0===this.Fi(e.batchId,"removed")),this.Bs.shift();let i=this.Ni;return me.forEach(e.mutations,r=>{const s=new Br(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Ni=i})}_n(t){}containsKey(t,e){const i=new Br(e,0),r=this.Ni.firstAfterOrEqual(i);return me.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return me.resolve()}Fi(t,e){return this.Mi(t)}Mi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}ki(t){const e=this.Mi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class vV{constructor(t){this.$i=t,this.docs=new _n(qe.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,u=this.$i(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return me.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(e))}getEntries(t,e){let i=aa();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Pn.newInvalidDocument(r))}),me.resolve(i)}getAllFromCollection(t,e,i){let r=aa();const s=new qe(e.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!e.isPrefixOf(h.path))break;h.path.length>e.length+1||iy(rg(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return me.resolve(r)}getAllFromCollectionGroup(t,e,i,r){ut()}Bi(t,e){return me.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new wV(this)}getSize(t){return me.resolve(this.size)}}class wV extends Sy{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Kn.addEntry(t,r)):this.Kn.removeEntry(i)}),me.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class bV{constructor(t){this.persistence=t,this.Li=new Vl(e=>$a(e),og),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Ui=0,this.qi=new cA,this.targetCount=0,this.Ki=V.gn()}forEachTarget(t,e){return this.Li.forEach((i,r)=>e(r)),me.resolve()}getLastRemoteSnapshotVersion(t){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return me.resolve(this.Ui)}allocateTargetId(t){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ui&&(this.Ui=e),me.resolve()}Tn(t){this.Li.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ki=new V(e),this.highestTargetId=e),t.sequenceNumber>this.Ui&&(this.Ui=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,me.resolve()}updateTargetData(t,e){return this.Tn(e),me.resolve()}removeTargetData(t,e){return this.Li.delete(e.target),this.qi.vi(e.targetId),this.targetCount-=1,me.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Li.forEach((u,h)=>{h.sequenceNumber<=e&&null===i.get(h.targetId)&&(this.Li.delete(u),s.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),me.waitFor(s).next(()=>r)}getTargetCount(t){return me.resolve(this.targetCount)}getTargetData(t,e){const i=this.Li.get(e)||null;return me.resolve(i)}addMatchingKeys(t,e,i){return this.qi.bi(e,i),me.resolve()}removeMatchingKeys(t,e,i){this.qi.Vi(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(u=>{s.push(r.markPotentiallyOrphaned(t,u))}),me.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.qi.vi(e),me.resolve()}getMatchingKeysForTargetId(t,e){const i=this.qi.Di(e);return me.resolve(i)}containsKey(t,e){return me.resolve(this.qi.containsKey(e))}}class CV{constructor(t,e){this.Gi={},this.overlays={},this.es=new Vs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new bV(this),this.indexManager=new VR,this.ds=new vV(i=>this.referenceDelegate.Qi(i)),this.M=new Kx(e),this._s=new mV(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new _V,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Gi[t.toKey()];return i||(i=new yV(e,this.referenceDelegate),this.Gi[t.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,i){Be("MemoryPersistence","Starting transaction:",t);const r=new EV(this.es.next());return this.referenceDelegate.ji(),i(r).next(s=>this.referenceDelegate.Wi(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}zi(t,e){return me.or(Object.values(this.Gi).map(i=>()=>i.containsKey(t,e)))}}class EV extends Zx{constructor(t){super(),this.currentSequenceNumber=t}}class dA{constructor(t){this.persistence=t,this.Hi=new cA,this.Ji=null}static Yi(t){return new dA(t)}get Xi(){if(this.Ji)return this.Ji;throw ut()}addReference(t,e,i){return this.Hi.addReference(i,e),this.Xi.delete(i.toString()),me.resolve()}removeReference(t,e,i){return this.Hi.removeReference(i,e),this.Xi.add(i.toString()),me.resolve()}markPotentiallyOrphaned(t,e){return this.Xi.add(e.toString()),me.resolve()}removeTarget(t,e){this.Hi.vi(e.targetId).forEach(r=>this.Xi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Xi.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ji(){this.Ji=new Set}Wi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,i=>{const r=qe.fromPath(i);return this.Zi(t,r).next(s=>{s||e.removeEntry(r,St.min())})}).next(()=>(this.Ji=null,e.apply(t)))}updateLimboDocument(t,e){return this.Zi(t,e).next(i=>{i?this.Xi.delete(e.toString()):this.Xi.add(e.toString())})}Qi(t){return 0}Zi(t,e){return me.or([()=>me.resolve(this.Hi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.zi(t,e)])}}function KR(n,t){return`firestore_clients_${n}_${t}`}function YR(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function hA(n,t){return`firestore_targets_${n}_${t}`}class cI{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static tr(t,e,i){const r=JSON.parse(i);let s,u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Pe(r.error.code,r.error.message))),u?new cI(t,e,r.state,s):(Ii("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class e0{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static tr(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Pe(i.error.code,i.error.message))),s?new e0(t,i.state,r):(Ii("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class dI{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static tr(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=Ob();for(let u=0;r&&u<i.activeTargetIds.length;++u)r=id(i.activeTargetIds[u]),s=s.add(i.activeTargetIds[u]);return r?new dI(t,s):(Ii("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class fA{constructor(t,e){this.clientId=t,this.onlineState=e}static tr(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new fA(e.clientId,e.onlineState):(Ii("SharedClientState",`Failed to parse online state: ${t}`),null)}}class pA{constructor(){this.activeTargetIds=Ob()}nr(t){this.activeTargetIds=this.activeTargetIds.add(t)}sr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}er(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class gA{constructor(t,e,i,r,s){this.window=t,this.Yn=e,this.persistenceKey=i,this.ir=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new _n(Rt),this.started=!1,this.cr=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=KR(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new pA),this.dr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.syncEngine.Fs();for(const r of e){if(r===t.ir)continue;const s=t.getItem(KR(t.persistenceKey,r));if(s){const u=dI.tr(r,s);u&&(t.ar=t.ar.insert(u.clientId,u))}}t.yr();const i=t.storage.getItem(t.mr);if(i){const r=t.pr(i);r&&t.Ir(r)}for(const r of t.cr)t.ur(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.lr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(t){let e=!1;return this.ar.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Er(t,"pending")}updateMutationState(t,e,i){this.Er(t,e,i),this.Ar(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(hA(this.persistenceKey,t));if(i){const r=e0.tr(t,i);r&&(e=r.state)}}return this.Rr.nr(t),this.yr(),e}removeLocalQueryTarget(t){this.Rr.sr(t),this.yr()}isLocalQueryTarget(t){return this.Rr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(hA(this.persistenceKey,t))}updateQueryState(t,e,i){this.br(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Ar(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Pr(t)}notifyBundleLoaded(t){this.Vr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Be("SharedClientState","READ",t,e),e}setItem(t,e){Be("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Be("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ur(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Be("SharedClientState","EVENT",i.key,i.newValue),i.key===this.hr)return void Ii("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ie.Z)(function*(){if(e.started){if(null!==i.key)if(e.dr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Sr(r,null)}{const r=e.Dr(i.key,i.newValue);if(r)return e.Sr(r.clientId,r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Cr(i.key,i.newValue);if(r)return e.Nr(r)}}else if(e.wr.test(i.key)){if(null!==i.newValue){const r=e.kr(i.key,i.newValue);if(r)return e.Mr(r)}}else if(i.key===e.mr){if(null!==i.newValue){const r=e.pr(i.newValue);if(r)return e.Ir(r)}}else if(i.key===e.lr){const r=function(s){let u=Vs.A;if(null!=s)try{const h=JSON.parse(s);kt("number"==typeof h),u=h}catch(h){Ii("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(i.newValue);r!==Vs.A&&e.sequenceNumberHandler(r)}else if(i.key===e.gr){const r=e.Or(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Fr(s)))}}else e.cr.push(i)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(t,e,i){const r=new cI(this.currentUser,t,e,i),s=YR(this.persistenceKey,this.currentUser,t);this.setItem(s,r.er())}Ar(t){const e=YR(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Pr(t){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:t}))}br(t,e,i){const r=hA(this.persistenceKey,t),s=new e0(t,e,i);this.setItem(r,s.er())}Vr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.gr,e)}vr(t){const e=this.dr.exec(t);return e?e[1]:null}Dr(t,e){const i=this.vr(t);return dI.tr(i,e)}Cr(t,e){const i=this._r.exec(t),r=Number(i[1]);return cI.tr(new vr(void 0!==i[2]?i[2]:null),r,e)}kr(t,e){const i=this.wr.exec(t),r=Number(i[1]);return e0.tr(r,e)}pr(t){return fA.tr(t)}Or(t){return JSON.parse(t)}Nr(t){var e=this;return(0,Ie.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.$r(t.batchId,t.state,t.error);Be("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Mr(t){return this.syncEngine.Br(t.targetId,t.state,t.error)}Sr(t,e){const i=e?this.ar.insert(t,e):this.ar.remove(t),r=this.Tr(this.ar),s=this.Tr(i),u=[],h=[];return s.forEach(p=>{r.has(p)||u.push(p)}),r.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Lr(u,h).then(()=>{this.ar=i})}Ir(t){this.ar.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Tr(t){let e=Ob();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class QR{constructor(){this.Ur=new pA,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Ur.nr(t),this.qr[t]||"not-current"}updateQueryState(t,e,i){this.qr[t]=e}removeLocalQueryTarget(t){this.Ur.sr(t)}isLocalQueryTarget(t){return this.Ur.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(t){return this.Ur.activeTargetIds.has(t)}start(){return this.Ur=new pA,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class TV{Kr(t){}shutdown(){}}class JR{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(t){this.zr.push(t)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.zr)t(0)}Wr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.zr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const IV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class SV{constructor(t){this.Jr=t.Jr,this.Yr=t.Yr}Xr(t){this.Zr=t}eo(t){this.no=t}onMessage(t){this.so=t}close(){this.Yr()}send(t){this.Jr(t)}io(){this.Zr()}ro(t){this.no(t)}oo(t){this.so(t)}}class DV extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.uo=(t.ssl?"https":"http")+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(t,e,i,r,s){const u=this.ho(t,e);Be("RestConnection","Sending: ",u,i);const h={};return this.lo(h,r,s),this.fo(t,u,h,i).then(p=>(Be("RestConnection","Received: ",p),p),p=>{throw Wh("RestConnection",`${t} failed with error: `,p,"url: ",u,"request:",i),p})}_o(t,e,i,r,s){return this.co(t,e,i,r,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+qh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ho(t,e){return`${this.uo}/v1/${e}:${IV[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((s,u)=>{const h=new yx;h.listenOnce(mx.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Yp.NO_ERROR:const y=h.getResponseJson();Be("Connection","XHR received:",JSON.stringify(y)),s(y);break;case Yp.TIMEOUT:Be("Connection",'RPC "'+t+'" timed out'),u(new Pe(he.DEADLINE_EXCEEDED,"Request time out"));break;case Yp.HTTP_ERROR:const E=h.getStatus();if(Be("Connection",'RPC "'+t+'" failed with status:',E,"response text:",h.getResponseText()),E>0){const I=h.getResponseJson().error;if(I&&I.status&&I.message){const M=function(P){const B=P.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(B)>=0?B:he.UNKNOWN}(I.status);u(new Pe(M,I.message))}else u(new Pe(he.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Pe(he.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Be("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);h.send(e,"POST",p,i,15)})}wo(t,e,i){const r=[this.uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=px(),u=gx(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new _x({})),this.lo(h.initMessageHeaders,e,i),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");Be("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let E=!1,I=!1;const M=new SV({Jr:B=>{I?Be("Connection","Not sending because WebChannel is closed:",B):(E||(Be("Connection","Opening WebChannel transport."),y.open(),E=!0),Be("Connection","WebChannel sending:",B),y.send(B))},Yr:()=>y.close()}),P=(B,Q,we)=>{B.listen(Q,et=>{try{we(et)}catch(nt){setTimeout(()=>{throw nt},0)}})};return P(y,q_.EventType.OPEN,()=>{I||Be("Connection","WebChannel transport opened.")}),P(y,q_.EventType.CLOSE,()=>{I||(I=!0,Be("Connection","WebChannel transport closed"),M.ro())}),P(y,q_.EventType.ERROR,B=>{I||(I=!0,Wh("Connection","WebChannel transport errored:",B),M.ro(new Pe(he.UNAVAILABLE,"The operation could not be completed")))}),P(y,q_.EventType.MESSAGE,B=>{var Q;if(!I){const we=B.data[0];kt(!!we);const et=we,nt=et.error||(null===(Q=et[0])||void 0===Q?void 0:Q.error);if(nt){Be("Connection","WebChannel received error:",nt);const it=nt.status;let st=function(Pt){const tn=gi[Pt];if(void 0!==tn)return Rx(tn)}(it),At=nt.message;void 0===st&&(st=he.INTERNAL,At="Unknown error status: "+it+" with message "+nt.message),I=!0,M.ro(new Pe(st,At)),y.close()}else Be("Connection","WebChannel received:",we),M.oo(we)}}),P(u,oT.STAT_EVENT,B=>{B.stat===aT.PROXY?Be("Connection","Detected buffering proxy"):B.stat===aT.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.io()},0),M}}function XR(){return"undefined"!=typeof window?window:null}function hI(){return"undefined"!=typeof document?document:null}function t0(n){return new Nx(n,!0)}class mA{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Yn=t,this.timerId=e,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&Be("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class eO{constructor(t,e,i,r,s,u,h,p){this.Yn=t,this.Vo=i,this.vo=r,this.So=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new mA(t,e)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,Ie.Z)(function*(){t.ko()&&(yield t.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(t){this.Uo(),this.stream.send(t)}Bo(){var t=this;return(0,Ie.Z)(function*(){if(t.Mo())return t.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(t,e){var i=this;return(0,Ie.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==t?i.No.reset():e&&e.code===he.RESOURCE_EXHAUSTED?(Ii(e.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):e&&e.code===he.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.eo(e)})()}Ko(){}auth(){this.state=1;const t=this.Go(this.Do),e=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Do===e&&this.Qo(i,r)},i=>{t(()=>{const r=new Pe(he.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(r)})})}Qo(t,e){const i=this.Go(this.Do);this.stream=this.Wo(t,e),this.stream.Xr(()=>{i(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(r=>{i(()=>this.jo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.No.Ro((0,Ie.Z)(function*(){t.state=0,t.start()}))}jo(t){return Be("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Go(t){return e=>{this.Yn.enqueueAndForget(()=>this.Do===t?e():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xV extends eO{constructor(t,e,i,r,s,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,u),this.M=s}Wo(t,e){return this.So.wo("Listen",t,e)}onMessage(t){this.No.reset();const e=function Fx(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ut(),r=t.targetChange.targetIds||[],s=function(p,y){return p.N?(kt(void 0===y||"string"==typeof y),Bi.fromBase64String(y||"")):(kt(void 0===y||y instanceof Uint8Array),Bi.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),u=t.targetChange.cause,h=u&&function(p){const y=void 0===p.code?he.UNKNOWN:Rx(p.code);return new Pe(y,p.message||"")}(u);e=new Ox(i,r,s,h||null)}else if("documentChange"in t){const i=t.documentChange,r=Za(n,i.document.name),s=Cr(i.document.updateTime),u=new wr({mapValue:{fields:i.document.fields}}),h=Pn.newFoundDocument(r,s,u);e=new cg(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){const i=t.documentDelete,r=Za(n,i.document),s=i.readTime?Cr(i.readTime):St.min(),u=Pn.newNoDocument(r,s);e=new cg([],i.removedTargetIds||[],u.key,u)}else if("documentRemove"in t){const i=t.documentRemove,r=Za(n,i.document);e=new cg([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return ut();{const i=t.filter,s=new RT(i.count||0);e=new Pb(i.targetId,s)}}var p;return e}(this.M,t),i=function(r){if(!("targetChange"in r))return St.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?St.min():s.readTime?Cr(s.readTime):St.min()}(t);return this.listener.zo(e,i)}Ho(t){const e={};e.database=hd(this.M),e.addTarget=function(r,s){let u;const h=s.target;return u=ag(h)?{documents:Lb(r,h)}:{query:$T(r,h)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=LT(r,s.resumeToken):s.snapshotVersion.compareTo(St.min())>0&&(u.readTime=dd(r,s.snapshotVersion.toTimestamp())),u}(this.M,t);const i=function Lx(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Lo(e)}Jo(t){const e={};e.database=hd(this.M),e.removeTarget=t,this.Lo(e)}}class AV extends eO{constructor(t,e,i,r,s,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,u),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(t,e){return this.So.wo("Write",t,e)}onMessage(t){if(kt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Yo){this.No.reset();const e=function zT(n,t){return n&&n.length>0?(kt(void 0!==t),n.map(e=>function(i,r){let s=Cr(i.updateTime?i.updateTime:r);return s.isEqual(St.min())&&(s=Cr(r)),new Ab(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Cr(t.commitTime);return this.listener.tu(i,e)}return kt(!t.writeResults||0===t.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const t={};t.database=hd(this.M),this.Lo(t)}Zo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>hg(this.M,i))};this.Lo(e)}}class MV extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.So=i,this.M=r,this.su=!1}iu(){if(this.su)throw new Pe(he.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So.co(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pe(he.UNKNOWN,r.toString())})}_o(t,e,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So._o(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Pe(he.UNKNOWN,r.toString())})}terminate(){this.su=!0}}class kV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(t){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.fu(),this.ru=0,"Online"===t&&(this.uu=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}hu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Ii(e),this.uu=!1):Be("OnlineStateTracker",e)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class RV{constructor(t,e,i,r,s){var u=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(h=>{i.enqueueAndForget((0,Ie.Z)(function*(){var p;ff(u)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ie.Z)(function*(y){const E=We(y);E.wu.add(4),yield Ry(E),E.yu.set("Unknown"),E.wu.delete(4),yield n0(E)}),function(y){return p.apply(this,arguments)})(u))}))}),this.yu=new kV(i,r)}}function n0(n){return _A.apply(this,arguments)}function _A(){return _A=(0,Ie.Z)(function*(n){if(ff(n))for(const t of n.mu)yield t(!0)}),_A.apply(this,arguments)}function Ry(n){return yA.apply(this,arguments)}function yA(){return yA=(0,Ie.Z)(function*(n){for(const t of n.mu)yield t(!1)}),yA.apply(this,arguments)}function fI(n,t){const e=We(n);e._u.has(t.targetId)||(e._u.set(t.targetId,t),bA(e)?wA(e):Py(e).Mo()&&vA(e,t))}function r0(n,t){const e=We(n),i=Py(e);e._u.delete(t),i.Mo()&&tO(e,t),0===e._u.size&&(i.Mo()?i.$o():ff(e)&&e.yu.set("Unknown"))}function vA(n,t){n.pu.Z(t.targetId),Py(n).Ho(t)}function tO(n,t){n.pu.Z(t),Py(n).Jo(t)}function wA(n){n.pu=new NT({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n._u.get(t)||null}),Py(n).start(),n.yu.au()}function bA(n){return ff(n)&&!Py(n).ko()&&n._u.size>0}function ff(n){return 0===We(n).wu.size}function nO(n){n.pu=void 0}function OV(n){return CA.apply(this,arguments)}function CA(){return CA=(0,Ie.Z)(function*(n){n._u.forEach((t,e)=>{vA(n,t)})}),CA.apply(this,arguments)}function PV(n,t){return EA.apply(this,arguments)}function EA(){return EA=(0,Ie.Z)(function*(n,t){nO(n),bA(n)?(n.yu.lu(t),wA(n)):n.yu.set("Unknown")}),EA.apply(this,arguments)}function NV(n,t,e){return TA.apply(this,arguments)}function TA(){return TA=(0,Ie.Z)(function*(n,t,e){if(n.yu.set("Online"),t instanceof Ox&&2===t.state&&t.cause)try{yield(i=(0,Ie.Z)(function*(r,s){const u=s.cause;for(const h of s.targetIds)r._u.has(h)&&(yield r.remoteSyncer.rejectListen(h,u),r._u.delete(h),r.pu.removeTarget(h))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){Be("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield pI(n,i)}else if(t instanceof cg?n.pu.ut(t):t instanceof Pb?n.pu._t(t):n.pu.ht(t),!e.isEqual(St.min()))try{const i=yield zR(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const u=r.pu.yt(s);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=r._u.get(p);y&&r._u.set(p,y.withResumeToken(h.resumeToken,s))}}),u.targetMismatches.forEach(h=>{const p=r._u.get(h);if(!p)return;r._u.set(h,p.withResumeToken(Bi.EMPTY_BYTE_STRING,p.snapshotVersion)),tO(r,h);const y=new gd(p.target,h,1,p.sequenceNumber);vA(r,y)}),r.remoteSyncer.applyRemoteEvent(u)}(n,e))}catch(i){Be("RemoteStore","Failed to raise snapshot:",i),yield pI(n,i)}var i}),TA.apply(this,arguments)}function pI(n,t,e){return IA.apply(this,arguments)}function IA(){return IA=(0,Ie.Z)(function*(n,t,e){if(!pd(t))throw t;n.wu.add(1),yield Ry(n),n.yu.set("Offline"),e||(e=()=>zR(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield e(),n.wu.delete(1),yield n0(n)}))}),IA.apply(this,arguments)}function iO(n,t){return t().catch(e=>pI(n,e,t))}function Oy(n){return SA.apply(this,arguments)}function SA(){return SA=(0,Ie.Z)(function*(n){const t=We(n),e=pf(t);let i=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;FV(t);)try{const r=yield fV(t.localStore,i);if(null===r){0===t.du.length&&e.$o();break}i=r.batchId,LV(t,r)}catch(r){yield pI(t,r)}rO(t)&&sO(t)}),SA.apply(this,arguments)}function FV(n){return ff(n)&&n.du.length<10}function LV(n,t){n.du.push(t);const e=pf(n);e.Mo()&&e.Xo&&e.Zo(t.mutations)}function rO(n){return ff(n)&&!pf(n).ko()&&n.du.length>0}function sO(n){pf(n).start()}function VV(n){return DA.apply(this,arguments)}function DA(){return DA=(0,Ie.Z)(function*(n){pf(n).nu()}),DA.apply(this,arguments)}function BV(n){return xA.apply(this,arguments)}function xA(){return xA=(0,Ie.Z)(function*(n){const t=pf(n);for(const e of n.du)t.Zo(e.mutations)}),xA.apply(this,arguments)}function UV(n,t,e){return AA.apply(this,arguments)}function AA(){return AA=(0,Ie.Z)(function*(n,t,e){const i=n.du.shift(),r=_g.from(i,t,e);yield iO(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Oy(n)}),AA.apply(this,arguments)}function HV(n,t){return MA.apply(this,arguments)}function MA(){return MA=(0,Ie.Z)(function*(n,t){var e;t&&pf(n).Xo&&(yield(e=(0,Ie.Z)(function*(i,r){if(OT(s=r.code)&&s!==he.ABORTED){const u=i.du.shift();pf(i).Fo(),yield iO(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,r)),yield Oy(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),rO(n)&&sO(n)}),MA.apply(this,arguments)}function oO(n,t){return kA.apply(this,arguments)}function kA(){return kA=(0,Ie.Z)(function*(n,t){const e=We(n);e.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const i=ff(e);e.wu.add(3),yield Ry(e),i&&e.yu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.wu.delete(3),yield n0(e)}),kA.apply(this,arguments)}function RA(n,t){return OA.apply(this,arguments)}function OA(){return OA=(0,Ie.Z)(function*(n,t){const e=We(n);t?(e.wu.delete(2),yield n0(e)):t||(e.wu.add(2),yield Ry(e),e.yu.set("Unknown"))}),OA.apply(this,arguments)}function Py(n){return n.Iu||(n.Iu=function(t,e,i){const r=We(t);return r.iu(),new xV(e,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:OV.bind(null,n),eo:PV.bind(null,n),zo:NV.bind(null,n)}),n.mu.push(function(){var t=(0,Ie.Z)(function*(e){e?(n.Iu.Fo(),bA(n)?wA(n):n.yu.set("Unknown")):(yield n.Iu.stop(),nO(n))});return function(e){return t.apply(this,arguments)}}())),n.Iu}function pf(n){return n.Tu||(n.Tu=function(t,e,i){const r=We(t);return r.iu(),new AV(e,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:VV.bind(null,n),eo:HV.bind(null,n),eu:BV.bind(null,n),tu:UV.bind(null,n)}),n.mu.push(function(){var t=(0,Ie.Z)(function*(e){e?(n.Tu.Fo(),yield Oy(n)):(yield n.Tu.stop(),n.du.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(e){return t.apply(this,arguments)}}())),n.Tu}class PA{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(t,e,i,r,s){const u=Date.now()+i,h=new PA(t,e,u,r,s);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(he.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ny(n,t){if(Ii("AsyncQueue",`${t}: ${n}`),pd(n))return new Pe(he.UNAVAILABLE,`${t}: ${n}`);throw n}class Fy{constructor(t){this.comparator=t?(e,i)=>t(e,i)||qe.comparator(e.key,i.key):(e,i)=>qe.comparator(e.key,i.key),this.keyedMap=PT(),this.sortedSet=new _n(this.comparator)}static emptySet(t){return new Fy(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Fy)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Fy;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class aO{constructor(){this.Eu=new _n(qe.comparator)}track(t){const e=t.doc.key,i=this.Eu.get(e);i?0!==t.type&&3===i.type?this.Eu=this.Eu.insert(e,t):3===t.type&&1!==i.type?this.Eu=this.Eu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Eu=this.Eu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Eu=this.Eu.remove(e):1===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):ut():this.Eu=this.Eu.insert(e,t)}Au(){const t=[];return this.Eu.inorderTraversal((e,i)=>{t.push(i)}),t}}class Ly{constructor(t,e,i,r,s,u,h,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(u=>{s.push({type:0,doc:u})}),new Ly(t,e,Fy.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class jV{constructor(){this.Ru=void 0,this.listeners=[]}}class GV{constructor(){this.queries=new Vl(t=>ad(t),Hi),this.onlineState="Unknown",this.bu=new Set}}function NA(n,t){return FA.apply(this,arguments)}function FA(){return FA=(0,Ie.Z)(function*(n,t){const e=We(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new jV),r)try{s.Ru=yield e.onListen(i)}catch(u){const h=Ny(u,`Initialization of query '${Cb(t.query)}' failed`);return void t.onError(h)}e.queries.set(i,s),s.listeners.push(t),t.Pu(e.onlineState),s.Ru&&t.Vu(s.Ru)&&BA(e)}),FA.apply(this,arguments)}function LA(n,t){return VA.apply(this,arguments)}function VA(){return VA=(0,Ie.Z)(function*(n,t){const e=We(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const u=s.listeners.indexOf(t);u>=0&&(s.listeners.splice(u,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),VA.apply(this,arguments)}function zV(n,t){const e=We(n);let i=!1;for(const r of t){const u=e.queries.get(r.query);if(u){for(const h of u.listeners)h.Vu(r)&&(i=!0);u.Ru=r}}i&&BA(e)}function $V(n,t,e){const i=We(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function BA(n){n.bu.forEach(t=>{t.next()})}class UA{constructor(t,e,i){this.query=t,this.vu=e,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}Vu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new Ly(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Su?this.Cu(t)&&(this.vu.next(t),e=!0):this.xu(t,this.onlineState)&&(this.Nu(t),e=!0),this.Du=t,e}onError(t){this.vu.error(t)}Pu(t){this.onlineState=t;let e=!1;return this.Du&&!this.Su&&this.xu(this.Du,t)&&(this.Nu(this.Du),e=!0),e}xu(t,e){return!t.fromCache||!(this.options.ku&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}Cu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(t){t=Ly.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Su=!0,this.vu.next(t)}}class qV{constructor(t,e){this.payload=t,this.byteLength=e}Mu(){return"metadata"in this.payload}}class lO{constructor(t){this.M=t}wi(t){return Za(this.M,t)}mi(t){return t.metadata.exists?GT(this.M,t.document,!1):Pn.newNoDocument(this.wi(t.metadata.name),this.gi(t.metadata.readTime))}gi(t){return Cr(t)}}class WV{constructor(t,e,i){this.Ou=t,this.localStore=e,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uO(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=en.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new lO(this.M);for(const r of t)if(r.metadata.queries){const s=i.wi(r.metadata.name);for(const u of r.metadata.queries){const h=(e.get(u)||bn()).add(s);e.set(u,h)}}return e}complete(){var t=this;return(0,Ie.Z)(function*(){const e=yield function pV(n,t,e,i){return lA.apply(this,arguments)}(t.localStore,new lO(t.M),t.documents,t.Ou.id),i=t.$u(t.documents);for(const r of t.queries)yield gV(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function uO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cO{constructor(t){this.key=t}}class dO{constructor(t){this.key=t}}class hO{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.current=!1,this.Ku=bn(),this.mutatedKeys=bn(),this.Gu=ef(t),this.Qu=new Fy(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new aO,r=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,u=r,h=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((E,I)=>{const M=r.get(E),P=Eb(this.query,I)?I:null,B=!!M&&this.mutatedKeys.has(M.key),Q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let we=!1;M&&P?M.data.isEqual(P.data)?B!==Q&&(i.track({type:3,doc:P}),we=!0):this.Hu(M,P)||(i.track({type:2,doc:P}),we=!0,(p&&this.Gu(P,p)>0||y&&this.Gu(P,y)<0)&&(h=!0)):!M&&P?(i.track({type:0,doc:P}),we=!0):M&&!P&&(i.track({type:1,doc:M}),we=!0,(p||y)&&(h=!0)),we&&(P?(u=u.add(P),s=Q?s.add(E):s.delete(E)):(u=u.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const E="F"===this.query.limitType?u.last():u.first();u=u.delete(E.key),s=s.delete(E.key),i.track({type:1,doc:E})}return{Qu:u,zu:i,ii:h,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Au();s.sort((y,E)=>function(I,M){const P=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return P(I)-P(M)}(y.type,E.type)||this.Gu(y.doc,E.doc)),this.Ju(i);const u=e?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==s.length||p?{snapshot:new Ly(this.query,t.Qu,r,s,t.mutatedKeys,0===h,p,!1),Xu:u}:{Xu:u}}Pu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new aO,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=bn(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new dO(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new cO(i))}),e}ta(t){this.Uu=t._i,this.Ku=bn();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ea(){return Ly.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class ZV{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class KV{constructor(t){this.key=t,this.na=!1}}class YV{constructor(t,e,i,r,s,u){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sa={},this.ia=new Vl(h=>ad(h),Hi),this.ra=new Map,this.oa=new Set,this.ua=new _n(qe.comparator),this.aa=new Map,this.ca=new cA,this.ha={},this.la=new Map,this.fa=V.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function QV(n,t){return HA.apply(this,arguments)}function HA(){return HA=(0,Ie.Z)(function*(n,t){const e=d1(n);let i,r;const s=e.ia.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.ea();else{const u=yield My(e.localStore,Bs(t));e.isPrimaryClient&&fI(e.remoteStore,u);const h=e.sharedClientState.addLocalQueryTarget(u.targetId);i=u.targetId,r=yield jA(e,t,i,"current"===h)}return r}),HA.apply(this,arguments)}function jA(n,t,e,i){return GA.apply(this,arguments)}function GA(){return GA=(0,Ie.Z)(function*(n,t,e,i){n._a=(E,I,M)=>{return(P=(0,Ie.Z)(function*(B,Q,we,et){let nt=Q.view.Wu(we);nt.ii&&(nt=yield uI(B.localStore,Q.query,!1).then(({documents:At})=>Q.view.Wu(At,nt)));const it=et&&et.targetChanges.get(Q.targetId),st=Q.view.applyChanges(nt,B.isPrimaryClient,it);return XA(B,Q.targetId,st.Xu),st.snapshot}),function(B,Q,we,et){return P.apply(this,arguments)})(n,E,I,M);var P};const r=yield uI(n.localStore,t,!0),s=new hO(t,r._i),u=s.Wu(r.documents),h=cd.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),p=s.applyChanges(u,n.isPrimaryClient,h);XA(n,e,p.Xu);const y=new ZV(t,e,s);return n.ia.set(t,y),n.ra.has(e)?n.ra.get(e).push(t):n.ra.set(e,[t]),p.snapshot}),GA.apply(this,arguments)}function JV(n,t){return zA.apply(this,arguments)}function zA(){return zA=(0,Ie.Z)(function*(n,t){const e=We(n),i=e.ia.get(t),r=e.ra.get(i.targetId);if(r.length>1)return e.ra.set(i.targetId,r.filter(s=>!Hi(s,t))),void e.ia.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ky(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),r0(e.remoteStore,i.targetId),Vy(e,i.targetId)}).catch(Ue))):(Vy(e,i.targetId),yield ky(e.localStore,i.targetId,!0))}),zA.apply(this,arguments)}function $A(){return $A=(0,Ie.Z)(function*(n,t,e){const i=h1(n);try{const r=yield function(s,u){const h=We(s),p=Si.now(),y=u.reduce((I,M)=>I.add(M.key),bn());let E;return h.persistence.runTransaction("Locally write mutations","readwrite",I=>h.fi.Ks(I,y).next(M=>{E=M;const P=[];for(const B of u){const Q=xT(B,E.get(B.key));null!=Q&&P.push(new ud(B.key,Q,hb(Q.value.mapValue),ui.exists(!0)))}return h.Bs.addMutationBatch(I,p,P,u)})).then(I=>(I.applyToLocalDocumentSet(E),{batchId:I.batchId,changes:E}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,u,h){let p=s.ha[s.currentUser.toKey()];p||(p=new _n(Rt)),p=p.insert(u,h),s.ha[s.currentUser.toKey()]=p}(i,r.batchId,e),yield vd(i,r.changes),yield Oy(i.remoteStore)}catch(r){const s=Ny(r,"Failed to persist write");e.reject(s)}}),$A.apply(this,arguments)}function fO(n,t){return qA.apply(this,arguments)}function qA(){return qA=(0,Ie.Z)(function*(n,t){const e=We(n);try{const i=yield hV(e.localStore,t);t.targetChanges.forEach((r,s)=>{const u=e.aa.get(s);u&&(kt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.na=!0:r.modifiedDocuments.size>0?kt(u.na):r.removedDocuments.size>0&&(kt(u.na),u.na=!1))}),yield vd(e,i,t)}catch(i){yield Ue(i)}}),qA.apply(this,arguments)}function pO(n,t,e){const i=We(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ia.forEach((s,u)=>{const h=u.view.Pu(t);h.snapshot&&r.push(h.snapshot)}),function(s,u){const h=We(s);h.onlineState=u;let p=!1;h.queries.forEach((y,E)=>{for(const I of E.listeners)I.Pu(u)&&(p=!0)}),p&&BA(h)}(i.eventManager,t),r.length&&i.sa.zo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function eB(n,t,e){return WA.apply(this,arguments)}function WA(){return WA=(0,Ie.Z)(function*(n,t,e){const i=We(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.aa.get(t),s=r&&r.key;if(s){let u=new _n(qe.comparator);u=u.insert(s,Pn.newNoDocument(s,St.min()));const h=bn().add(s),p=new af(St.min(),new Map,new yn(Rt),u,h);yield fO(i,p),i.ua=i.ua.remove(s),i.aa.delete(t),e1(i)}else yield ky(i.localStore,t,!1).then(()=>Vy(i,t,e)).catch(Ue)}),WA.apply(this,arguments)}function tB(n,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,Ie.Z)(function*(n,t){const e=We(n),i=t.batch.batchId;try{const r=yield dV(e.localStore,t);JA(e,i,null),QA(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield vd(e,r)}catch(r){yield Ue(r)}}),ZA.apply(this,arguments)}function nB(n,t,e){return KA.apply(this,arguments)}function KA(){return KA=(0,Ie.Z)(function*(n,t,e){const i=We(n);try{const r=yield function(s,u){const h=We(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.Bs.lookupMutationBatch(p,u).next(E=>(kt(null!==E),y=E.keys(),h.Bs.removeMutationBatch(p,E))).next(()=>h.Bs.performConsistencyCheck(p)).next(()=>h.fi.Ks(p,y))})}(i.localStore,t);JA(i,t,e),QA(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield vd(i,r)}catch(r){yield Ue(r)}}),KA.apply(this,arguments)}function YA(){return YA=(0,Ie.Z)(function*(n,t){const e=We(n);ff(e.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const u=We(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.Bs.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===i)return void t.resolve();const r=e.la.get(i)||[];r.push(t),e.la.set(i,r)}catch(i){const r=Ny(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),YA.apply(this,arguments)}function QA(n,t){(n.la.get(t)||[]).forEach(e=>{e.resolve()}),n.la.delete(t)}function JA(n,t,e){const i=We(n);let r=i.ha[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.ha[i.currentUser.toKey()]=r}}function Vy(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ra.get(t))n.ia.delete(i),e&&n.sa.wa(i,e);n.ra.delete(t),n.isPrimaryClient&&n.ca.vi(t).forEach(i=>{n.ca.containsKey(i)||gO(n,i)})}function gO(n,t){n.oa.delete(t.path.canonicalString());const e=n.ua.get(t);null!==e&&(r0(n.remoteStore,e),n.ua=n.ua.remove(t),n.aa.delete(e),e1(n))}function XA(n,t,e){for(const i of e)i instanceof cO?(n.ca.addReference(i.key,t),rB(n,i)):i instanceof dO?(Be("SyncEngine","Document no longer in limbo: "+i.key),n.ca.removeReference(i.key,t),n.ca.containsKey(i.key)||gO(n,i.key)):ut()}function rB(n,t){const e=t.key,i=e.path.canonicalString();n.ua.get(e)||n.oa.has(i)||(Be("SyncEngine","New document in limbo: "+e),n.oa.add(i),e1(n))}function e1(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const t=n.oa.values().next().value;n.oa.delete(t);const e=new qe(en.fromString(t)),i=n.fa.next();n.aa.set(i,new KV(e)),n.ua=n.ua.insert(e,i),fI(n.remoteStore,new gd(Bs(od(e.path)),i,2,Vs.A))}}function vd(n,t,e){return t1.apply(this,arguments)}function t1(){return t1=(0,Ie.Z)(function*(n,t,e){const i=We(n),r=[],s=[],u=[];var h;i.ia.isEmpty()||(i.ia.forEach((h,p)=>{u.push(i._a(p,t,e).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),r.push(y);const E=sA.Ys(p.targetId,y);s.push(E)}}))}),yield Promise.all(u),i.sa.zo(r),yield(h=(0,Ie.Z)(function*(p,y){const E=We(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>me.forEach(y,M=>me.forEach(M.Hs,P=>E.persistence.referenceDelegate.addReference(I,M.targetId,P)).next(()=>me.forEach(M.Js,P=>E.persistence.referenceDelegate.removeReference(I,M.targetId,P)))))}catch(I){if(!pd(I))throw I;Be("LocalStore","Failed to update sequence numbers: "+I)}for(const I of y){const M=I.targetId;if(!I.fromCache){const P=E.ui.get(M),Q=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);E.ui=E.ui.insert(M,Q)}}}),function(p,y){return h.apply(this,arguments)})(i.localStore,s))}),t1.apply(this,arguments)}function sB(n,t){return n1.apply(this,arguments)}function n1(){return n1=(0,Ie.Z)(function*(n,t){const e=We(n);if(!e.currentUser.isEqual(t)){Be("SyncEngine","User change. New user:",t.toKey());const i=yield GR(e.localStore,t);e.currentUser=t,(r=e).la.forEach(u=>{u.forEach(h=>{h.reject(new Pe(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.la.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield vd(e,i.di)}var r}),n1.apply(this,arguments)}function oB(n,t){const e=We(n),i=e.aa.get(t);if(i&&i.na)return bn().add(i.key);{let r=bn();const s=e.ra.get(t);if(!s)return r;for(const u of s){const h=e.ia.get(u);r=r.unionWith(h.view.ju)}return r}}function aB(n,t){return r1.apply(this,arguments)}function r1(){return r1=(0,Ie.Z)(function*(n,t){const e=We(n),i=yield uI(e.localStore,t.query,!0),r=t.view.ta(i);return e.isPrimaryClient&&XA(e,t.targetId,r.Xu),r}),r1.apply(this,arguments)}function lB(n,t){return s1.apply(this,arguments)}function s1(){return s1=(0,Ie.Z)(function*(n,t){const e=We(n);return WR(e.localStore,t).then(i=>vd(e,i))}),s1.apply(this,arguments)}function uB(n,t,e,i){return o1.apply(this,arguments)}function o1(){return o1=(0,Ie.Z)(function*(n,t,e,i){const r=We(n),s=yield function(u,h){const p=We(u),y=We(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.fn(E,h).next(I=>I?p.fi.Ks(E,I):me.resolve(null)))}(r.localStore,t);var h;null!==s?("pending"===e?yield Oy(r.remoteStore):"acknowledged"===e||"rejected"===e?(JA(r,t,i||null),QA(r,t),h=t,We(We(r.localStore).Bs)._n(h)):ut(),yield vd(r,s)):Be("SyncEngine","Cannot apply mutation batch with id: "+t)}),o1.apply(this,arguments)}function a1(){return a1=(0,Ie.Z)(function*(n,t){const e=We(n);if(d1(e),h1(e),!0===t&&!0!==e.da){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield mO(e,i.toArray());e.da=!0,yield RA(e.remoteStore,!0);for(const s of r)fI(e.remoteStore,s)}else if(!1===t&&!1!==e.da){const i=[];let r=Promise.resolve();e.ra.forEach((s,u)=>{e.sharedClientState.isLocalQueryTarget(u)?i.push(u):r=r.then(()=>(Vy(e,u),ky(e.localStore,u,!0))),r0(e.remoteStore,u)}),yield r,yield mO(e,i),function(s){const u=We(s);u.aa.forEach((h,p)=>{r0(u.remoteStore,p)}),u.ca.Si(),u.aa=new Map,u.ua=new _n(qe.comparator)}(e),e.da=!1,yield RA(e.remoteStore,!1)}}),a1.apply(this,arguments)}function mO(n,t,e){return l1.apply(this,arguments)}function l1(){return l1=(0,Ie.Z)(function*(n,t,e){const i=We(n),r=[],s=[];for(const u of t){let h;const p=i.ra.get(u);if(p&&0!==p.length){h=yield My(i.localStore,Bs(p[0]));for(const y of p){const E=i.ia.get(y),I=yield aB(i,E);I.snapshot&&s.push(I.snapshot)}}else{const y=yield qR(i.localStore,u);h=yield My(i.localStore,y),yield jA(i,_O(y),u,!1)}r.push(h)}return i.sa.zo(s),r}),l1.apply(this,arguments)}function _O(n){return vb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function dB(n){const t=We(n);return We(We(t.localStore).persistence).Fs()}function hB(n,t,e,i){return u1.apply(this,arguments)}function u1(){return u1=(0,Ie.Z)(function*(n,t,e,i){const r=We(n);if(r.da)return void Be("SyncEngine","Ignoring unexpected query state notification.");const s=r.ra.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const u=yield WR(r.localStore,Dx(s[0])),h=af.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield vd(r,u,h);break}case"rejected":yield ky(r.localStore,t,!0),Vy(r,t,i);break;default:ut()}}),u1.apply(this,arguments)}function fB(n,t,e){return c1.apply(this,arguments)}function c1(){return c1=(0,Ie.Z)(function*(n,t,e){const i=d1(n);if(i.da){for(const r of t){if(i.ra.has(r)){Be("SyncEngine","Adding an already active target "+r);continue}const s=yield qR(i.localStore,r),u=yield My(i.localStore,s);yield jA(i,_O(s),u.targetId,!1),fI(i.remoteStore,u)}for(const r of e)i.ra.has(r)&&(yield ky(i.localStore,r,!1).then(()=>{r0(i.remoteStore,r),Vy(i,r)}).catch(Ue))}}),c1.apply(this,arguments)}function d1(n){const t=We(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=fO.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=oB.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=eB.bind(null,t),t.sa.zo=zV.bind(null,t.eventManager),t.sa.wa=$V.bind(null,t.eventManager),t}function h1(n){const t=We(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tB.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nB.bind(null,t),t}class yO{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ie.Z)(function*(){e.M=t0(t.databaseInfo.databaseId),e.sharedClientState=e.ga(t),e.persistence=e.ya(t),yield e.persistence.start(),e.gcScheduler=e.pa(t),e.localStore=e.Ia(t)})()}pa(t){return null}Ia(t){return jR(this.persistence,new HR,t.initialUser,this.M)}ya(t){return new CV(dA.Yi,this.M)}ga(t){return new QR}terminate(){var t=this;return(0,Ie.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class vO extends yO{constructor(t,e,i){super(),this.Ta=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield e().call(i,t),yield i.Ta.initialize(i,t),yield h1(i.Ta.syncEngine),yield Oy(i.Ta.remoteStore),yield i.persistence.Ts(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Ia(t){return jR(this.persistence,new HR,t.initialUser,this.M)}pa(t){return new Zt(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}ya(t){const e=rA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?d.withCacheSize(this.cacheSizeBytes):d.DEFAULT;return new iA(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,XR(),hI(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(t){return new QR}}class gB extends vO{constructor(t,e){super(t,e,!1),this.Ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield e().call(i,t);const r=i.Ta.syncEngine;i.sharedClientState instanceof gA&&(i.sharedClientState.syncEngine={$r:uB.bind(null,r),Br:hB.bind(null,r),Lr:fB.bind(null,r),Fs:dB.bind(null,r),Fr:lB.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ts(function(){var s=(0,Ie.Z)(function*(u){yield function cB(n,t){return a1.apply(this,arguments)}(i.Ta.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):u||i.gcScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}ga(t){const e=XR();if(!gA.vt(e))throw new Pe(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=rA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new gA(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class f1{initialize(t,e){var i=this;return(0,Ie.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>pO(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=sB.bind(null,i.syncEngine),yield RA(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new GV}createDatastore(t){const e=t0(t.databaseInfo.databaseId),i=new DV(t.databaseInfo);return new MV(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=h=>pO(this.syncEngine,h,0),u=JR.vt()?new JR:new TV,new RV(e,i,r,s,u);var e,i,r,s,u}createSyncEngine(t,e){return function(i,r,s,u,h,p,y){const E=new YV(i,r,s,u,h,p);return y&&(E.da=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Ie.Z)(function*(e){const i=We(e);Be("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield Ry(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function wO(n,t=10240){let e=0;return{read:()=>(0,Ie.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class gI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ea(this.observer.next,t)}error(t){this.observer.error?this.Ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Aa(){this.muted=!0}Ea(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class mB{constructor(t,e){this.Ra=t,this.M=e,this.metadata=new rr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(i=>{i&&i.Mu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ra.cancel()}getMetadata(){var t=this;return(0,Ie.Z)(function*(){return t.metadata.promise})()}ma(){var t=this;return(0,Ie.Z)(function*(){return yield t.getMetadata(),t.Pa()})()}Pa(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.Va();if(null===e)return null;const i=t.ba.decode(e),r=Number(i);isNaN(r)&&t.va(`length string (${i}) is not valid number`);const s=yield t.Sa(r);return new qV(JSON.parse(s),e.length+r)})()}Da(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Va(){var t=this;return(0,Ie.Z)(function*(){for(;t.Da()<0&&!(yield t.Ca()););if(0===t.buffer.length)return null;const e=t.Da();e<0&&t.va("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Sa(t){var e=this;return(0,Ie.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ca())&&e.va("Reached the end of bundle when more is expected.");const i=e.ba.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}va(t){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${t}`)}Ca(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.Ra.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class _B{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Pe(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ie.Z)(function*(s,u){const h=We(s),p=hd(h.M)+"/documents",y={documents:u.map(P=>dg(h.M,P))},E=yield h._o("BatchGetDocuments",p,y),I=new Map;E.forEach(P=>{const B=function Fb(n,t){return"found"in t?function(e,i){kt(!!i.found);const r=Za(e,i.found.name),s=Cr(i.found.updateTime),u=new wr({mapValue:{fields:i.found.fields}});return Pn.newFoundDocument(r,s,u)}(n,t):"missing"in t?function(e,i){kt(!!i.missing),kt(!!i.readTime);const r=Za(e,i.missing),s=Cr(i.readTime);return Pn.newNoDocument(r,s)}(n,t):ut()}(h.M,P);I.set(B.key.toString(),B)});const M=[];return u.forEach(P=>{const B=I.get(P.toString());kt(!!B),M.push(B)}),M}),function(s,u){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new of(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=qe.fromPath(r);t.mutations.push(new gy(s,t.precondition(s)))}),yield(i=(0,Ie.Z)(function*(r,s){const u=We(r),h=hd(u.M)+"/documents",p={writes:s.map(y=>hg(u.M,y))};yield u.co("Commit",h,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ut();e=St.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Pe(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ui.updateTime(e):ui.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(St.min()))throw new Pe(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ui.updateTime(e)}return ui.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class yB{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.xa=i.maxAttempts,this.No=new mA(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var t=this;this.No.Ro((0,Ie.Z)(function*(){const e=new _B(t.datastore),i=t.ka(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Ma(s)}))}).catch(r=>{t.Ma(r)})}))}ka(t){try{const e=this.updateFunction(t);return!za(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ma(t){this.xa>0&&this.Oa(t)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(t)}Oa(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!OT(e)}return!1}}class vB{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=vr.UNAUTHENTICATED,this.clientId=gT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var u=(0,Ie.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(i,u=>(Be("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var t=this;return(0,Ie.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Ny(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function bO(n,t){return p1.apply(this,arguments)}function p1(){return p1=(0,Ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ie.Z)(function*(s){i.isEqual(s)||(yield GR(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),p1.apply(this,arguments)}function CO(n,t){return g1.apply(this,arguments)}function g1(){return g1=(0,Ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield m1(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>oO(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>oO(t.remoteStore,s)),n.onlineComponents=t}),g1.apply(this,arguments)}function m1(n){return _1.apply(this,arguments)}function _1(){return _1=(0,Ie.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield bO(n,new yO)),n.offlineComponents}),_1.apply(this,arguments)}function mI(n){return y1.apply(this,arguments)}function y1(){return y1=(0,Ie.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield CO(n,new f1)),n.onlineComponents}),y1.apply(this,arguments)}function EO(n){return m1(n).then(t=>t.persistence)}function v1(n){return m1(n).then(t=>t.localStore)}function TO(n){return mI(n).then(t=>t.remoteStore)}function w1(n){return mI(n).then(t=>t.syncEngine)}function By(n){return b1.apply(this,arguments)}function b1(){return b1=(0,Ie.Z)(function*(n){const t=yield mI(n),e=t.eventManager;return e.onListen=QV.bind(null,t.syncEngine),e.onUnlisten=JV.bind(null,t.syncEngine),e}),b1.apply(this,arguments)}function IO(n,t,e={}){const i=new rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,s,u,h,p){const y=new gI({next:I=>{s.enqueueAndForget(()=>LA(r,E));const M=I.docs.has(u);!M&&I.fromCache?p.reject(new Pe(he.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&I.fromCache&&h&&"server"===h.source?p.reject(new Pe(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),E=new UA(od(u.path),y,{includeMetadataChanges:!0,ku:!0});return NA(r,E)}(yield By(n),n.asyncQueue,t,e,i)})),i.promise}function SO(n,t,e={}){const i=new rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,s,u,h,p){const y=new gI({next:I=>{s.enqueueAndForget(()=>LA(r,E)),I.fromCache&&"server"===h.source?p.reject(new Pe(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),E=new UA(u,y,{includeMetadataChanges:!0,ku:!0});return NA(r,E)}(yield By(n),n.asyncQueue,t,e,i)})),i.promise}const DO=new Map;function C1(n,t,e){if(!e)throw new Pe(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function xO(n,t,e,i){if(!0===t&&!0===i)throw new Pe(he.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function AO(n){if(!qe.isDocumentKey(n))throw new Pe(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MO(n){if(qe.isDocumentKey(n))throw new Pe(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _I(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":ut()}function an(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Pe(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=_I(n);throw new Pe(he.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function kO(n,t){if(t<=0)throw new Pe(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class RO{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Pe(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Pe(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,xO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class s0{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RO({}),this._settingsFrozen=!1,t instanceof Nl?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Pe(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(r.options.projectId)}(t))}get app(){if(!this._app)throw new Pe(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Pe(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RO(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new ob;switch(e.type){case"gapi":const i=e.client;return kt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new hT(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Pe(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=DO.get(t);e&&(Be("ComponentProvider","Removing Datastore"),DO.delete(t),e.terminate())}(this),Promise.resolve()}}class Qn{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Qn(this.firestore,t,this._key)}}class vs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new vs(this.firestore,t,this._query)}}class rc extends vs{constructor(t,e,i){super(t,e,od(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Qn(this.firestore,null,new qe(t))}withConverter(t){return new rc(this.firestore,t,this._path)}}function OO(n,t,...e){if(n=(0,F.m9)(n),C1("collection","path",t),n instanceof s0){const i=en.fromString(t,...e);return MO(i),new rc(n,null,i)}{if(!(n instanceof Qn||n instanceof rc))throw new Pe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(en.fromString(t,...e));return MO(i),new rc(n.firestore,null,i)}}function yI(n,t,...e){if(n=(0,F.m9)(n),1===arguments.length&&(t=gT.R()),C1("doc","path",t),n instanceof s0){const i=en.fromString(t,...e);return AO(i),new Qn(n,null,new qe(i))}{if(!(n instanceof Qn||n instanceof rc))throw new Pe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(en.fromString(t,...e));return AO(i),new Qn(n.firestore,n instanceof rc?n.converter:null,new qe(i))}}function PO(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),(n instanceof Qn||n instanceof rc)&&(t instanceof Qn||t instanceof rc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function NO(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),n instanceof vs&&t instanceof vs&&n.firestore===t.firestore&&Hi(n._query,t._query)&&n.converter===t.converter}class MB{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new mA(this,"async_queue_retry"),this.Qa=()=>{const e=hI();e&&Be("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const t=hI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ja(),this.Wa(t)}enterRestrictedMode(t){if(!this.Ba){this.Ba=!0,this.Ka=t||!1;const e=hI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Qa)}}enqueue(t){if(this.ja(),this.Ba)return new Promise(()=>{});const e=new rr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.$a.push(t),this.za()))}za(){var t=this;return(0,Ie.Z)(function*(){if(0!==t.$a.length){try{yield t.$a[0](),t.$a.shift(),t.No.reset()}catch(e){if(!pd(e))throw e;Be("AsyncQueue","Operation failed with retryable error: "+e)}t.$a.length>0&&t.No.Ro(()=>t.za())}})()}Wa(t){const e=this.Fa.then(()=>(this.qa=!0,t().catch(i=>{throw this.Ua=i,this.qa=!1,Ii("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(i)),i}).then(i=>(this.qa=!1,i))));return this.Fa=e,e}enqueueAfterDelay(t,e,i){this.ja(),this.Ga.indexOf(t)>-1&&(e=0);const r=PA.createAndSchedule(this,t,e,i,s=>this.Ha(s));return this.La.push(r),r}ja(){this.Ua&&ut()}verifyOperationInProgress(){}Ja(){var t=this;return(0,Ie.Z)(function*(){let e;do{e=t.Fa,yield e}while(e!==t.Fa)})()}Ya(t){for(const e of this.La)if(e.timerId===t)return!0;return!1}Xa(t){return this.Ja().then(()=>{this.La.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.La)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Ja()})}Za(t){this.Ga.push(t)}Ha(t){const e=this.La.indexOf(t);this.La.splice(e,1)}}function E1(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class kB{constructor(){this._progressObserver={},this._taskCompletionResolver=new rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class ci extends s0{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new MB,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||FO(this),this._firestoreClient.terminate()}}function or(n){return n._firestoreClient||FO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function FO(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new bx(n._databaseId,s,n._persistenceKey,(h=e).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new vB(n._authCredentials,n._appCheckCredentials,n._queue,i)}function LO(n,t,e){const i=new rr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield bO(n,e),yield CO(n,t),i.resolve()}catch(r){if(!("FirebaseError"===(s=r).name?s.code===he.FAILED_PRECONDITION||s.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var s})).then(()=>i.promise)}function VO(n){if(n._initialized||n._terminated)throw new Pe(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class wd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Pe(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class sc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new sc(Bi.fromBase64String(t))}catch(e){throw new Pe(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new sc(Bi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class bg{constructor(t){this._methodName=t}}class vI{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Pe(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Pe(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Rt(this._lat,t._lat)||Rt(this._long,t._long)}}const HB=/^__.*__$/;class jB{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new ud(t,this.data,this.fieldMask,e,this.fieldTransforms):new sf(t,this.data,e,this.fieldTransforms)}}class BO{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ud(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function UO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class wI{constructor(t,e,i,r,s,u){this.settings=t,this.databaseId=e,this.M=i,this.ignoreUndefinedProperties=r,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(t){return new wI(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.nc({path:i,ic:!1});return r.rc(t),r}oc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.nc({path:i,ic:!1});return r.tc(),r}uc(t){return this.nc({path:void 0,ic:!0})}ac(t){return EI(t,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}tc(){if(this.path)for(let t=0;t<this.path.length;t++)this.rc(this.path.get(t))}rc(t){if(0===t.length)throw this.ac("Document fields must not be empty");if(UO(this.ec)&&HB.test(t))throw this.ac('Document fields cannot begin and end with "__"')}}class GB{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=i||t0(t)}lc(t,e,i,r=!1){return new wI({ec:t,methodName:e,hc:i,path:pi.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Cg(n){const t=n._freezeSettings(),e=t0(n._databaseId);return new GB(n._databaseId,!!t.ignoreUndefinedProperties,e)}function bI(n,t,e,i,r,s={}){const u=n.lc(s.merge||s.mergeFields?2:0,t,e,r);D1("Data must be an object, but it was:",u,i);const h=GO(i,u);let p,y;if(s.merge)p=new Ol(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const E=[];for(const I of s.mergeFields){const M=x1(t,I,e);if(!u.contains(M))throw new Pe(he.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);$O(E,M)||E.push(M)}p=new Ol(E),y=u.fieldTransforms.filter(I=>p.covers(I.field))}else p=null,y=u.fieldTransforms;return new jB(new wr(h),p,y)}class o0 extends bg{_toFieldTransform(t){if(2!==t.ec)throw t.ac(1===t.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof o0}}function HO(n,t,e){return new wI({ec:3,hc:t.settings.hc,methodName:n._methodName,ic:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class T1 extends bg{_toFieldTransform(t){return new rf(t.path,new ld)}isEqual(t){return t instanceof T1}}class zB extends bg{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=HO(this,t,!0),i=this.fc.map(s=>Eg(s,e)),r=new Wa(i);return new rf(t.path,r)}isEqual(t){return this===t}}class $B extends bg{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=HO(this,t,!0),i=this.fc.map(s=>Eg(s,e)),r=new tf(i);return new rf(t.path,r)}isEqual(t){return this===t}}class qB extends bg{constructor(t,e){super(t),this.dc=e}_toFieldTransform(t){const e=new nf(t.M,Tb(t.M,this.dc));return new rf(t.path,e)}isEqual(t){return this===t}}function I1(n,t,e,i){const r=n.lc(1,t,e);D1("Data must be an object, but it was:",r,i);const s=[],u=wr.empty();td(i,(p,y)=>{const E=CI(t,p,e);y=(0,F.m9)(y);const I=r.oc(E);if(y instanceof o0)s.push(E);else{const M=Eg(y,I);null!=M&&(s.push(E),u.set(E,M))}});const h=new Ol(s);return new BO(u,h,r.fieldTransforms)}function S1(n,t,e,i,r,s){const u=n.lc(1,t,e),h=[x1(t,i,e)],p=[r];if(s.length%2!=0)throw new Pe(he.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)h.push(x1(t,s[M])),p.push(s[M+1]);const y=[],E=wr.empty();for(let M=h.length-1;M>=0;--M)if(!$O(y,h[M])){const P=h[M];let B=p[M];B=(0,F.m9)(B);const Q=u.oc(P);if(B instanceof o0)y.push(P);else{const we=Eg(B,Q);null!=we&&(y.push(P),E.set(P,we))}}const I=new Ol(y);return new BO(E,I,u.fieldTransforms)}function jO(n,t,e,i=!1){return Eg(e,n.lc(i?4:3,t))}function Eg(n,t){if(zO(n=(0,F.m9)(n)))return D1("Unsupported field value:",t,n),GO(n,t);if(n instanceof bg)return function(e,i){if(!UO(i.ec))throw i.ac(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ac(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const u of e){let h=Eg(u,i.uc(s));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,F.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Tb(i.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Si.fromDate(e);return{timestampValue:dd(i.M,r)}}if(e instanceof Si){const r=new Si(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:dd(i.M,r)}}if(e instanceof vI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sc)return{bytesValue:LT(i.M,e._byteString)};if(e instanceof Qn){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:VT(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ac(`Unsupported field value: ${_I(e)}`)}(n,t)}function GO(n,t){const e={};return yT(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):td(n,(i,r)=>{const s=Eg(r,t.sc(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function zO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Si||n instanceof vI||n instanceof sc||n instanceof Qn||n instanceof bg)}function D1(n,t,e){if(!zO(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=_I(e);throw t.ac("an object"===i?n+" a custom object":n+" "+i)}var i}function x1(n,t,e){if((t=(0,F.m9)(t))instanceof wd)return t._internalPath;if("string"==typeof t)return CI(n,t);throw EI("Field path arguments must be of type string or ",n,!1,void 0,e)}const WB=new RegExp("[~\\*/\\[\\]]");function CI(n,t,e){if(t.search(WB)>=0)throw EI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new wd(...t.split("."))._internalPath}catch(i){throw EI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function EI(n,t,e,i,r){const s=i&&!i.isEmpty(),u=void 0!==r;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${i}`),u&&(p+=` in document ${r}`),p+=")"),new Pe(he.INVALID_ARGUMENT,h+n+p)}function $O(n,t){return n.some(e=>e.isEqual(t))}class a0{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new ZB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(TI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class ZB extends a0{data(){return super.data()}}function TI(n,t){return"string"==typeof t?CI(n,t):t instanceof wd?t._internalPath:t._delegate._internalPath}class Tg{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class bd extends a0{constructor(t,e,i,r,s,u){super(t,e,i,r,u),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new l0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(TI("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class l0 extends bd{data(t={}){return super.data(t)}}class gf{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Tg(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new l0(this._firestore,this._userDataWriter,i.key,i,new Tg(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Pe(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(u=>({type:"added",doc:new l0(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Tg(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||3!==u.type).map(u=>{const h=new l0(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Tg(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:KB(u.type),doc:h,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function KB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function qO(n,t){return n instanceof bd&&t instanceof bd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof gf&&t instanceof gf&&n._firestore===t._firestore&&NO(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function WO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u0{}function mf(n,...t){for(const e of t)n=e._apply(n);return n}class YB extends u0{constructor(t,e,i){super(),this._c=t,this.wc=e,this.mc=i,this.type="where"}_apply(t){const e=Cg(t.firestore),i=function(r,s,u,h,p,y,E){let I;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Pe(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){XO(E,y);const P=[];for(const B of E)P.push(JO(h,r,B));I={arrayValue:{values:P}}}else I=JO(h,r,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||XO(E,y),I=jO(u,"where",E,"in"===y||"not-in"===y);const M=br.create(p,y,I);return function(P,B){if(B.S()){const we=ly(P);if(null!==we&&!we.isEqual(B.field))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${we.toString()}' and '${B.field.toString()}'`);const et=wb(P);null!==et&&eP(0,B.field,et)}const Q=function(we,et){for(const nt of we.filters)if(et.indexOf(nt.op)>=0)return nt.op;return null}(P,function(we){switch(we){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==Q)throw new Pe(he.INVALID_ARGUMENT,Q===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${Q.toString()}' filters.`)}(r,M),M}(t._query,0,e,t.firestore._databaseId,this._c,this.wc,this.mc);return new vs(t.firestore,t.converter,function(r,s){const u=r.filters.concat([s]);return new qa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),u,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class JB extends u0{constructor(t,e){super(),this._c=t,this.gc=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Pe(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Pe(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Jh(r,s);return function(h,p){if(null===wb(h)){const y=ly(h);null!==y&&eP(0,y,p.field)}}(i,u),u}(t._query,this._c,this.gc);return new vs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new qa(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class ZO extends u0{constructor(t,e,i){super(),this.type=t,this.yc=e,this.Ic=i}_apply(t){return new vs(t.firestore,t.converter,bb(t._query,this.yc,this.Ic))}}class KO extends u0{constructor(t,e,i){super(),this.type=t,this.Tc=e,this.Ec=i}_apply(t){const e=QO(t,this.type,this.Tc,this.Ec);return new vs(t.firestore,t.converter,(r=e,new qa((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class YO extends u0{constructor(t,e,i){super(),this.type=t,this.Tc=e,this.Ec=i}_apply(t){const e=QO(t,this.type,this.Tc,this.Ec);return new vs(t.firestore,t.converter,(r=e,new qa((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function QO(n,t,e,i){if(e[0]=(0,F.m9)(e[0]),e[0]instanceof a0)return function(r,s,u,h,p){if(!h)throw new Pe(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const E of Xh(r))if(E.field.isKeyField())y.push(nc(s,h.key));else{const I=h.data.field(E.field);if(Xp(I))throw new Pe(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const M=E.field.canonicalString();throw new Pe(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(I)}return new ic(y,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Cg(n.firestore);return function(s,u,h,p,y,E){const I=s.explicitOrderBy;if(y.length>I.length)throw new Pe(he.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let P=0;P<y.length;P++){const B=y[P];if(I[P].field.isKeyField()){if("string"!=typeof B)throw new Pe(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!uy(s)&&-1!==B.indexOf("/"))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const Q=s.path.child(en.fromString(B));if(!qe.isDocumentKey(Q))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const we=new qe(Q);M.push(nc(u,we))}else{const Q=jO(h,p,B);M.push(Q)}}return new ic(M,E)}(n._query,n.firestore._databaseId,r,t,e,i)}}function JO(n,t,e){if("string"==typeof(e=(0,F.m9)(e))){if(""===e)throw new Pe(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uy(t)&&-1!==e.indexOf("/"))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(en.fromString(e));if(!qe.isDocumentKey(i))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return nc(n,new qe(i))}if(e instanceof Qn)return nc(n,e._key);throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_I(e)}.`)}function XO(n,t){if(!Array.isArray(n)||0===n.length)throw new Pe(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Pe(he.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function eP(n,t,e){if(!e.isEqual(t))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const oU={maxAttempts:5};class A1{convertValue(t,e="none"){switch(Kh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return li(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(nd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ut()}}convertObject(t,e){const i={};return td(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new vI(li(t.latitude),li(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=bT(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(K_(t));default:return null}}convertTimestamp(t){const e=Pl(t);return new Si(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=en.fromString(t);kt(ZT(i));const r=new Nl(i.get(1),i.get(3)),s=new qe(i.popFirst(5));return r.isEqual(e)||Ii(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function II(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class aU extends A1{constructor(t){super(),this.firestore=t}convertBytes(t){return new sc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qn(this.firestore,null,e)}}class tP{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Cg(t)}set(t,e,i){this._verifyNotCommitted();const r=_f(t,this._firestore),s=II(r.converter,e,i),u=bI(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(u.toMutation(r._key,ui.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=_f(t,this._firestore);let u;return u="string"==typeof(e=(0,F.m9)(e))||e instanceof wd?S1(this._dataReader,"WriteBatch.update",s._key,e,i,r):I1(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(u.toMutation(s._key,ui.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=_f(t,this._firestore);return this._mutations=this._mutations.concat(new of(e._key,ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _f(n,t){if((n=(0,F.m9)(n)).firestore!==t)throw new Pe(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ig extends A1{constructor(t){super(),this.firestore=t}convertBytes(t){return new sc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qn(this.firestore,null,e)}}function nP(n,t,e){n=an(n,Qn);const i=an(n.firestore,ci),r=II(n.converter,t,e);return Uy(i,[bI(Cg(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,ui.none())])}function iP(n,t,e,...i){n=an(n,Qn);const r=an(n.firestore,ci),s=Cg(r);let u;return u="string"==typeof(t=(0,F.m9)(t))||t instanceof wd?S1(s,"updateDoc",n._key,t,e,i):I1(s,"updateDoc",n._key,t),Uy(r,[u.toMutation(n._key,ui.exists(!0))])}function rP(n,...t){var e,i,r;n=(0,F.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof t[u]||E1(t[u])||(s=t[u],u++);const h={includeMetadataChanges:s.includeMetadataChanges};if(E1(t[u])){const I=t[u];t[u]=null===(e=I.next)||void 0===e?void 0:e.bind(I),t[u+1]=null===(i=I.error)||void 0===i?void 0:i.bind(I),t[u+2]=null===(r=I.complete)||void 0===r?void 0:r.bind(I)}let p,y,E;if(n instanceof Qn)y=an(n.firestore,ci),E=od(n._key.path),p={next:I=>{t[u]&&t[u](M1(y,n,I))},error:t[u+1],complete:t[u+2]};else{const I=an(n,vs);y=an(I.firestore,ci),E=I._query;const M=new Ig(y);p={next:P=>{t[u]&&t[u](new gf(y,M,I,P))},error:t[u+1],complete:t[u+2]},WO(n._query)}return function(I,M,P,B){const Q=new gI(B),we=new UA(M,Q,P);return I.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return NA(yield By(I),we)})),()=>{Q.Aa(),I.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return LA(yield By(I),we)}))}}(or(y),E,h,p)}function Uy(n,t){return function(e,i){const r=new rr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function XV(n,t,e){return $A.apply(this,arguments)}(yield w1(e),i,r)})),r.promise}(or(n),t)}function M1(n,t,e){const i=e.docs.get(t._key),r=new Ig(n);return new bd(n,r,t._key,i,new Tg(e.hasPendingWrites,e.fromCache),t.converter)}class _U extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Cg(t)}get(t){const e=_f(t,this._firestore),i=new aU(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return ut();const s=r[0];if(s.isFoundDocument())return new a0(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new a0(this._firestore,i,e._key,null,e.converter);throw ut()})}set(t,e,i){const r=_f(t,this._firestore),s=II(r.converter,e,i),u=bI(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,u),this}update(t,e,i,...r){const s=_f(t,this._firestore);let u;return u="string"==typeof(e=(0,F.m9)(e))||e instanceof wd?S1(this._dataReader,"Transaction.update",s._key,e,i,r):I1(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,u),this}delete(t){const e=_f(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=_f(t,this._firestore),i=new Ig(this._firestore);return super.get(t).then(r=>new bd(this._firestore,i,e._key,r._document,new Tg(!1,!1),e.converter))}}function k1(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function oP(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function aP(){if(!function Jp(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){qh=yo.SDK_VERSION,(0,yo._registerComponent)(new Al.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),s=new ci(r,new dT(e.getProvider("auth-internal")),new pT(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),(0,yo.registerVersion)(lT,"3.4.9",n),(0,yo.registerVersion)(lT,"3.4.9","esm2017")}();class c0{constructor(t){this._delegate=t}static fromBase64String(t){return aP(),new c0(sc.fromBase64String(t))}static fromUint8Array(t){return oP(),new c0(sc.fromUint8Array(t))}toBase64(){return aP(),this._delegate.toBase64()}toUint8Array(){return oP(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function R1(n){return function SU(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class DU{enableIndexedDbPersistence(t,e){return function OB(n,t){VO(n=an(n,ci));const e=or(n),i=n._freezeSettings(),r=new f1;return LO(e,r,new vO(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function PB(n){VO(n=an(n,ci));const t=or(n),e=n._freezeSettings(),i=new f1;return LO(t,i,new gB(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function NB(n){if(n._initialized&&!n._terminated)throw new Pe(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new rr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(e=(0,Ie.Z)(function*(i){if(!la.vt())return Promise.resolve();const r=i+"main";yield la.delete(r)}),function(i){return e.apply(this,arguments)})(rA(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class lP{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Nl||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Wh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function xB(n,t,e,i={}){var r;const s=(n=an(n,s0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Wh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let u,h;if("string"==typeof i.mockUserToken)u=i.mockUserToken,h=vr.MOCK_USER;else{u=(0,F.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Pe(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new vr(p)}n._authCredentials=new vx(new cT(u,h))}}(this._delegate,t,e,i)}enableNetwork(){return function LB(n){return function wB(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const t=yield EO(n),e=yield TO(n);return t.setNetworkEnabled(!0),function(i){const r=We(i);return r.wu.delete(0),n0(r)}(e)}))}(or(n=an(n,ci)))}(this._delegate)}disableNetwork(){return function VB(n){return function bB(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const t=yield EO(n),e=yield TO(n);return t.setNetworkEnabled(!1),(i=(0,Ie.Z)(function*(r){const s=We(r);s.wu.add(0),yield Ry(s),s.yu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(or(n=an(n,ci)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,xO("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function FB(n){return function(t){const e=new rr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function iB(n,t){return YA.apply(this,arguments)}(yield w1(t),e)})),e.promise}(or(n=an(n,ci)))}(this._delegate)}onSnapshotsInSync(t){return function mU(n,t){return function TB(n,t){const e=new gI(t);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield By(n),r=e,We(i).bu.add(r),void r.next();var i,r})),()=>{e.Aa(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield By(n),r=e,void We(i).bu.delete(r);var i,r}))}}(or(n=an(n,ci)),E1(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Hy(this,OO(this._delegate,t))}catch(e){throw js(e,"collection()","Firestore.collection()")}}doc(t){try{return new Qa(this,yI(this._delegate,t))}catch(e){throw js(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Gs(this,function AB(n,t){if(n=an(n,s0),C1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pe(he.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vs(n,null,(e=t,new qa(en.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw js(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function yU(n,t,e){n=an(n,ci);const i=Object.assign(Object.assign({},oU),e);return function(r){if(r.maxAttempts<1)throw new Pe(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function IB(n,t,e){const i=new rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const r=yield(s=n,mI(s).then(u=>u.datastore));var s;new yB(n.asyncQueue,r,e,t,i).run()})),i.promise}(or(n),r=>t(new _U(n,r)),i)}(this._delegate,e=>t(new uP(this,e)))}batch(){return or(this._delegate),new cP(new tP(this._delegate,t=>Uy(this._delegate,t)))}loadBundle(t){return function BB(n,t){const e=or(n=an(n,ci)),i=new kB;return function SB(n,t,e,i){const r=function(s,u){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return wO(p,y);if(p instanceof ArrayBuffer)return wO(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new mB(p,u);var p}(e,t0(t));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function pB(n,t,e){const i=We(n);var r;(r=(0,Ie.Z)(function*(s,u,h){try{const p=yield u.getMetadata();if(yield function(M,P){const B=We(M),Q=Cr(P.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",we=>B._s.getBundleMetadata(we,P.id)).then(we=>!!we&&we.createTime.compareTo(Q)>=0)}(s.localStore,p))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);h._updateProgress(uO(p));const y=new WV(p,s.localStore,u.M);let E=yield u.ma();for(;E;){const M=yield y.Fu(E);M&&h._updateProgress(M),E=yield u.ma()}const I=yield y.complete();return yield vd(s,I.Lu,void 0),yield function(M,P){const B=We(M);return B.persistence.runTransaction("Save bundle","readwrite",Q=>B._s.saveBundleMetadata(Q,P))}(s.localStore,p),h._completeWith(I.progress),Promise.resolve(I.Bu)}catch(p){return Wh("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var M}),function(s,u,h){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield w1(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function UB(n,t){return function DB(n,t){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(e,i){const r=We(e);return r.persistence.runTransaction("Get named query","readonly",s=>r._s.getNamedQuery(s,i))}(yield v1(n),t)}))}(or(n=an(n,ci)),t).then(e=>e?new vs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Gs(this,e):null)}}class SI extends A1{constructor(t){super(),this.firestore=t}convertBytes(t){return new c0(new sc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Qa.forKey(e,this.firestore,null)}}class uP{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new SI(t)}get(t){const e=Dg(t);return this._delegate.get(e).then(i=>new d0(this._firestore,new bd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Dg(t);return i?(k1("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Dg(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Dg(t);return this._delegate.delete(e),this}}class cP{constructor(t){this._delegate=t}set(t,e,i){const r=Dg(t);return i?(k1("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Dg(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Dg(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Sg{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new l0(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new h0(this._firestore,i),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Sg.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Sg(t,new SI(t),e),r.set(e,s)),s}}Sg.INSTANCES=new WeakMap;class Qa{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new SI(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Qa(e,new Qn(e._delegate,i,new qe(t)))}static forKey(t,e,i){return new Qa(e,new Qn(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Hy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Hy(this.firestore,OO(this._delegate,t))}catch(e){throw js(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,F.m9)(t))instanceof Qn&&PO(this._delegate,t)}set(t,e){e=k1("DocumentReference.set",e);try{return e?nP(this._delegate,t,e):nP(this._delegate,t)}catch(i){throw js(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?iP(this._delegate,t):iP(this._delegate,t,e,...i)}catch(r){throw js(r,"updateDoc()","DocumentReference.update()")}}delete(){return function pU(n){return Uy(an(n.firestore,ci),[new of(n._key,ui.none())])}(this._delegate)}onSnapshot(...t){const e=dP(t),i=hP(t,r=>new d0(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return rP(this._delegate,e,i)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function uU(n){n=an(n,Qn);const t=an(n.firestore,ci),e=or(t),i=new Ig(t);return function CB(n,t){const e=new rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,s,u){try{const h=yield function(p,y){const E=We(p);return E.persistence.runTransaction("read document","readonly",I=>E.fi.Ls(I,y))}(r,s);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Pe(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Ny(h,`Failed to get document '${s} from cache`);u.reject(p)}}),function(r,s,u){return i.apply(this,arguments)})(yield v1(n),t,e);var i})),e.promise}(e,n._key).then(r=>new bd(t,i,n._key,r,new Tg(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function cU(n){n=an(n,Qn);const t=an(n.firestore,ci);return IO(or(t),n._key,{source:"server"}).then(e=>M1(t,n,e))}(this._delegate):function lU(n){n=an(n,Qn);const t=an(n.firestore,ci);return IO(or(t),n._key).then(e=>M1(t,n,e))}(this._delegate),e.then(i=>new d0(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Qa(this.firestore,this._delegate.withConverter(t?Sg.getInstance(this.firestore,t):null))}}function js(n,t,e){return n.message=n.message.replace(t,e),n}function dP(n){for(const t of n)if("object"==typeof t&&!R1(t))return t;return{}}function hP(n,t){var e,i;let r;return r=R1(n[0])?n[0]:R1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class d0{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Qa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return qO(this._delegate,t._delegate)}}class h0 extends d0{data(t){const e=this._delegate.data(t);return function sb(n,t){n||ut()}(void 0!==e),e}}class Gs{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new SI(t)}where(t,e,i){try{return new Gs(this.firestore,mf(this._delegate,function QB(n,t,e){const i=t,r=TI("where",n);return new YB(r,i,e)}(t,e,i)))}catch(r){throw js(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Gs(this.firestore,mf(this._delegate,function XB(n,t="asc"){const e=t,i=TI("orderBy",n);return new JB(i,e)}(t,e)))}catch(i){throw js(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Gs(this.firestore,mf(this._delegate,function eU(n){return kO("limit",n),new ZO("limit",n,"F")}(t)))}catch(e){throw js(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Gs(this.firestore,mf(this._delegate,function tU(n){return kO("limitToLast",n),new ZO("limitToLast",n,"L")}(t)))}catch(e){throw js(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Gs(this.firestore,mf(this._delegate,function nU(...n){return new KO("startAt",n,!0)}(...t)))}catch(e){throw js(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Gs(this.firestore,mf(this._delegate,function iU(...n){return new KO("startAfter",n,!1)}(...t)))}catch(e){throw js(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Gs(this.firestore,mf(this._delegate,function rU(...n){return new YO("endBefore",n,!1)}(...t)))}catch(e){throw js(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Gs(this.firestore,mf(this._delegate,function sU(...n){return new YO("endAt",n,!0)}(...t)))}catch(e){throw js(e,"endAt()","Query.endAt()")}}isEqual(t){return NO(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function hU(n){n=an(n,vs);const t=an(n.firestore,ci),e=or(t),i=new Ig(t);return function EB(n,t){const e=new rr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,s,u){try{const h=yield uI(r,s,!0),p=new hO(s,h._i),y=p.Wu(h.documents),E=p.applyChanges(y,!1);u.resolve(E.snapshot)}catch(h){const p=Ny(h,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(r,s,u){return i.apply(this,arguments)})(yield v1(n),t,e);var i})),e.promise}(e,n._query).then(r=>new gf(t,i,n,r))}(this._delegate):"server"===(null==t?void 0:t.source)?function fU(n){n=an(n,vs);const t=an(n.firestore,ci),e=or(t),i=new Ig(t);return SO(e,n._query,{source:"server"}).then(r=>new gf(t,i,n,r))}(this._delegate):function dU(n){n=an(n,vs);const t=an(n.firestore,ci),e=or(t),i=new Ig(t);return WO(n._query),SO(e,n._query).then(r=>new gf(t,i,n,r))}(this._delegate),e.then(i=>new O1(this.firestore,new gf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=dP(t),i=hP(t,r=>new O1(this.firestore,new gf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return rP(this._delegate,e,i)}withConverter(t){return new Gs(this.firestore,this._delegate.withConverter(t?Sg.getInstance(this.firestore,t):null))}}class AU{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new h0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class O1{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new h0(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new AU(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new h0(this._firestore,i))})}isEqual(t){return qO(this._delegate,t._delegate)}}class Hy extends Gs{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Qa(this.firestore,t):null}doc(t){try{return new Qa(this.firestore,void 0===t?yI(this._delegate):yI(this._delegate,t))}catch(e){throw js(e,"doc()","CollectionReference.doc()")}}add(t){return function gU(n,t){const e=an(n.firestore,ci),i=yI(n),r=II(n.converter,t);return Uy(e,[bI(Cg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,ui.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Qa(this.firestore,e))}isEqual(t){return PO(this._delegate,t._delegate)}withConverter(t){return new Hy(this.firestore,this._delegate.withConverter(t?Sg.getInstance(this.firestore,t):null))}}function Dg(n){return an(n,Qn)}class P1{constructor(...t){this._delegate=new wd(...t)}static documentId(){return new P1(pi.keyField().canonicalString())}isEqual(t){return(t=(0,F.m9)(t))instanceof wd&&this._delegate._internalPath.isEqual(t._internalPath)}}class xg{constructor(t){this._delegate=t}static serverTimestamp(){const t=function wU(){return new T1("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new xg(t)}static delete(){const t=function vU(){return new o0("deleteField")}();return t._methodName="FieldValue.delete",new xg(t)}static arrayUnion(...t){const e=function bU(...n){return new zB("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new xg(e)}static arrayRemove(...t){const e=function CU(...n){return new $B("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new xg(e)}static increment(t){const e=function EU(n){return new qB("increment",n)}(t);return e._methodName="FieldValue.increment",new xg(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const MU={Firestore:lP,GeoPoint:vI,Timestamp:Si,Blob:c0,Transaction:uP,WriteBatch:cP,DocumentReference:Qa,DocumentSnapshot:d0,Query:Gs,QueryDocumentSnapshot:h0,QuerySnapshot:O1,CollectionReference:Hy,FieldPath:P1,FieldValue:xg,setLogLevel:function xU(n){!function uT(n){tc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function RU(n){(function kU(n,t){n.INTERNAL.registerComponent(new Al.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},MU)))})(n,(t,e)=>new lP(t,e,new DU)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(dE.Z);var N1=N(6451),DI=N(5363),OU=N(6063);class PU extends mn.x{constructor(t=1/0,e=1/0,i=OU.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:u}=this;e||(i.push(t),!r&&i.push(s.now()+u)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let u=0;u<s.length&&!t.closed;u+=i?1:2)t.next(s[u]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const u=e.now();let h=0;for(let p=1;p<i.length&&i[p]<=u;p+=2)h=p;h&&i.splice(0,h+1)}}}var fP=N(3099);function F1(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=null!=n?n:1/0,(0,fP.B)({connector:()=>new PU(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function pP(n,t){return(0,pr.m)(t)?gr(()=>n,t):gr(()=>n)}var L1=N(9468);N(5867);const mP=new Map,BU={activated:!1,tokenObservers:[]},UU={initialized:!1,enabled:!1};function Ur(n){return mP.get(n)||BU}function Hl(n,t){mP.set(n,t)}function AI(){return UU}class $U{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ie.Z)(function*(){e.stop();try{e.pending=new F.BH,yield function qU(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new F.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const zs=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yP(n){if(!Ur(n).activated)throw zs.create("use-before-activation",{appName:n.name})}function H1(n,t){return j1.apply(this,arguments)}function j1(){return j1=(0,Ie.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const I=yield r.getHeartbeatsHeader();I&&(i["X-Firebase-Client"]=I)}const s={method:"POST",body:JSON.stringify(t),headers:i};let u,h;try{u=yield fetch(n,s)}catch(I){throw zs.create("fetch-network-error",{originalErrorMessage:I.message})}if(200!==u.status)throw zs.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(I){throw zs.create("fetch-parse-error",{originalErrorMessage:I.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw zs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),E=Date.now();return{token:h.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}}),j1.apply(this,arguments)}function QU(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const f0="firebase-app-check-store";let RI=null;function wP(){return RI||(RI=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(zs.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(f0,{keyPath:"compositeKey"})}}catch(e){t(zs.create("storage-open",{originalErrorMessage:e.message}))}}),RI)}function G1(){return G1=(0,Ie.Z)(function*(n,t){const i=(yield wP()).transaction(f0,"readwrite"),s=i.objectStore(f0).put({compositeKey:n,value:t});return new Promise((u,h)=>{s.onsuccess=p=>{u()},i.onerror=p=>{var y;h(zs.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),G1.apply(this,arguments)}const p0=new vo.Yd("@firebase/app-check");function TP(n,t){return(0,F.hl)()?function tH(n,t){return function bP(n,t){return G1.apply(this,arguments)}(function EP(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{p0.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function IP(){return AI().enabled}function SP(){return W1.apply(this,arguments)}function W1(){return W1=(0,Ie.Z)(function*(){const n=AI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),W1.apply(this,arguments)}const aH={error:"UNKNOWN_ERROR"};function lH(n){return F.US.encodeString(JSON.stringify(n),!1)}function OI(n){return Z1.apply(this,arguments)}function Z1(){return Z1=(0,Ie.Z)(function*(n,t=!1){const e=n.app;yP(e);const i=Ur(e);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&PI(p)&&(r=p)}if(!t&&r&&PI(r))return{token:r.token};let h,u=!1;if(IP()){i.exchangeTokenPromise||(i.exchangeTokenPromise=H1(QU(e,yield SP()),n.heartbeatServiceProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),u=!0);const p=yield i.exchangeTokenPromise;return yield TP(e,p),Hl(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),u=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?p0.warn(p.message):p0.error(p),s=p}return r?(h={token:r.token},Hl(e,Object.assign(Object.assign({},i),{token:r})),yield TP(e,r)):h=cH(s),u&&xP(e,h),h}),Z1.apply(this,arguments)}function Y1(n,t){const e=Ur(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),Hl(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function DP(n){const{app:t}=n,e=Ur(t);let i=e.tokenRefresher;i||(i=function uH(n){const{app:t}=n;return new $U((0,Ie.Z)(function*(){let i;if(i=Ur(t).token?yield OI(n,!0):yield OI(n),i.error)throw i.error}),()=>!0,()=>{const e=Ur(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Hl(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function xP(n,t){const e=Ur(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function PI(n){return n.expireTimeMillis-Date.now()>0}function cH(n){return{token:lH(aH),error:n}}class dH{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Ur(this.app);for(const e of t)Y1(this.app,e.next);return Promise.resolve()}}const FP="app-check-internal";!function IH(){(0,yo._registerComponent)(new Al.wA("app-check",n=>function hH(n,t){return new dH(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(FP).initialize()})),(0,yo._registerComponent)(new Al.wA(FP,n=>function fH(n){return{getToken:t=>OI(n,t),addTokenListener:t=>function K1(n,t,e,i){const{app:r}=n,s=Ur(r),u={next:e,error:i,type:t};if(Hl(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,u]})),s.token&&PI(s.token)){const h=s.token;Promise.resolve().then(()=>{e({token:h.token}),DP(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>DP(n))}(n,"INTERNAL",t),removeTokenListener:t=>Y1(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,yo.registerVersion)("@firebase/app-check","0.5.8")}();class FI{constructor(){return(0,Mn.vb)("app-check")}}"undefined"!=typeof window&&window;var VP=N(127);const tM=new o.OlP("angularfire2.auth.use-emulator"),nM=new o.OlP("angularfire2.auth.settings"),iM=new o.OlP("angularfire2.auth.tenant-id"),rM=new o.OlP("angularfire2.auth.langugage-code"),sM=new o.OlP("angularfire2.auth.use-device-language"),oM=new o.OlP("angularfire.auth.persistence"),aM=(n,t,e,i,r,s,u,h)=>(0,Nr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),u)for(const[y,E]of Object.entries(u))p.settings[y]=E;return h&&p.setPersistence(h),p},[e,i,r,s,u,h]);let lM=(()=>{class n{constructor(e,i,r,s,u,h,p,y,E,I,M,P){const B=new mn.x,Q=bt(void 0).pipe((0,DI.Q)(u.outsideAngular),gr(()=>s.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,8775)))),(0,ve.U)(()=>(0,Nr.on)(e,s,i)),(0,ve.U)(we=>aM(we,s,h,y,E,I,p,M)),F1({bufferSize:1,refCount:!1}));if(ga(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=bt(null);else{Q.pipe(Uu()).subscribe();const et=Q.pipe(gr(st=>st.getRedirectResult().then(At=>At,()=>null)),Mn.iC,F1({bufferSize:1,refCount:!1})),nt=Q.pipe(gr(st=>new v.y(At=>({unsubscribe:s.runOutsideAngular(()=>st.onAuthStateChanged(Pt=>At.next(Pt),Pt=>At.error(Pt),()=>At.complete()))})))),it=Q.pipe(gr(st=>new v.y(At=>({unsubscribe:s.runOutsideAngular(()=>st.onIdTokenChanged(Pt=>At.next(Pt),Pt=>At.error(Pt),()=>At.complete()))}))));this.authState=et.pipe(pP(nt),(0,L1.R)(u.outsideAngular),(0,DI.Q)(u.insideAngular)),this.user=et.pipe(pP(it),(0,L1.R)(u.outsideAngular),(0,DI.Q)(u.insideAngular)),this.idToken=this.user.pipe(gr(st=>st?(0,An.D)(st.getIdToken()):bt(null))),this.idTokenResult=this.user.pipe(gr(st=>st?(0,An.D)(st.getIdTokenResult()):bt(null))),this.credential=(0,N1.T)(et,B,this.authState.pipe(Qo(st=>!st))).pipe((0,ve.U)(st=>(null==st?void 0:st.user)?st:null),(0,L1.R)(u.outsideAngular),(0,DI.Q)(u.insideAngular))}return(0,Nr.pX)(this,Q,s,{spy:{apply:(we,et,nt)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&nt.then(it=>B.next(it))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nr.Dh),o.LFG(Nr.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Mn.HU),o.LFG(tM,8),o.LFG(nM,8),o.LFG(iM,8),o.LFG(rM,8),o.LFG(sM,8),o.LFG(oM,8),o.LFG(FI,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function BP(n,t){return function kH(n,t=Dp.z){return new v.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=i&&i()}})}(n,t)}function uM(n,t){return BP(n,t).pipe((0,ve.U)(e=>({payload:e,type:"query"})))}function LI(n,t){return uM(n,t).pipe(Gc(void 0),d_(),(0,ve.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(u=>({type:u.type,payload:u}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,h)=>{const p=r.find(E=>E.doc.ref.isEqual(u.ref)),y=null==e?void 0:e.payload.docs.find(E=>E.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),s}))}function UP(n,t,e){return LI(n,e).pipe(Ps((i,r)=>function OH(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function PH(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return cM(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return cM(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return cM(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),h_(),(0,ve.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function cM(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function HP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class jP{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=LI(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ve.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Gc(void 0),d_(),Qo(([i,r])=>r.length>0||!i),(0,ve.U)(([i,r])=>r),Mn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ps((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=HP(t);return UP(this.query,e,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}valueChanges(t={}){return uM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Mn.iC)}get(t){return(0,An.D)(this.query.get(t)).pipe(Mn.iC)}add(t){return this.ref.add(t)}doc(t){return new GP(this.ref.doc(t),this.afs)}}class GP{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=qP(i,e);return new jP(r,s,this.afs)}snapshotChanges(){return function RH(n,t){return BP(n,t).pipe(Gc(void 0),d_(),(0,ve.U)(([e,i])=>i.exists?(null==e?void 0:e.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ve.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,An.D)(this.ref.get(t)).pipe(Mn.iC)}}class NH{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?LI(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Qo(e=>e.length>0),Mn.iC):LI(this.query,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ps((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=HP(t);return UP(this.query,e,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}valueChanges(t={}){return uM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ve.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Mn.iC)}get(t){return(0,An.D)(this.query.get(t)).pipe(Mn.iC)}}const zP=new o.OlP("angularfire2.enableFirestorePersistence"),$P=new o.OlP("angularfire2.firestore.persistenceSettings"),FH=new o.OlP("angularfire2.firestore.settings"),LH=new o.OlP("angularfire2.firestore.use-emulator");function qP(n,t=(e=>e)){return{query:t(n),ref:n}}let WP=(()=>{class n{constructor(e,i,r,s,u,h,p,y,E,I,M,P,B,Q,we,et,nt){this.schedulers=p;const it=(0,Nr.on)(e,h,i),st=E;I&&aM(it,h,M,B,Q,we,P,et),[this.firestore,this.persistenceEnabled$]=(0,Nr.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const At=h.runOutsideAngular(()=>it.firestore());if(s&&At.settings(s),st&&At.useEmulator(...st),r&&!ga(u)){const Pt=()=>{try{return(0,An.D)(At.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(tn){return"undefined"!=typeof console&&console.warn(tn),bt(!1)}};return[At,h.runOutsideAngular(Pt)]}return[At,bt(!1)]},[s,st,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:u}=qP(r,i),h=this.schedulers.ngZone.run(()=>s);return new jP(h,u,this)}collectionGroup(e,i){const r=i||(u=>u),s=this.firestore.collectionGroup(e);return new NH(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new GP(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nr.Dh),o.LFG(Nr.xv,8),o.LFG(zP,8),o.LFG(FH,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Mn.HU),o.LFG($P,8),o.LFG(LH,8),o.LFG(lM,8),o.LFG(tM,8),o.LFG(nM,8),o.LFG(iM,8),o.LFG(rM,8),o.LFG(sM,8),o.LFG(oM,8),o.LFG(FI,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),VH=(()=>{class n{constructor(){VP.Z.registerVersion("angularfire",Mn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:zP,useValue:!0},{provide:$P,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[WP]}),n})(),BH=(()=>{class n{constructor(e){this.firestore=e}read_All_LordInHouse(){return this.firestore.collection("lordinhouse").snapshotChanges()}create_LordInHouse(e){return this.firestore.collection("lordinhouse").add(e)}update_LordInHouse(e,i){this.firestore.doc("lordinhouse/"+e).update(i)}delete_LordInHouse(e){this.firestore.doc("lordinhouse/"+e).delete()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(WP))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fe=(()=>{class n{static addClass(e,i){e.classList?e.classList.add(i):e.className+=" "+i}static addMultipleClasses(e,i){if(e.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,i){e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,i){return e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return e?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==e)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(e,i){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var u=0;u<r.length;u++){if(r[u]==e)return s;r[u].attributes&&r[u].attributes[i]&&1==r[u].nodeType&&s++}return-1}static relativePosition(e,i){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=i.offsetHeight,u=i.getBoundingClientRect(),h=this.getViewport();let p,y;u.top+s+r.height>h.height?(p=-1*r.height,e.style.transformOrigin="bottom",u.top+p<0&&(p=-1*u.top)):(p=s,e.style.transformOrigin="top"),y=r.width>h.width?-1*u.left:u.left+r.width>h.width?-1*(u.left+r.width-h.width):0,e.style.top=p+"px",e.style.left=y+"px"}static absolutePosition(e,i){let P,B,r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,u=r.width,h=i.offsetHeight,p=i.offsetWidth,y=i.getBoundingClientRect(),E=this.getWindowScrollTop(),I=this.getWindowScrollLeft(),M=this.getViewport();y.top+h+s>M.height?(P=y.top+E-s,e.style.transformOrigin="bottom",P<0&&(P=E)):(P=h+y.top+E,e.style.transformOrigin="top"),B=y.left+u>M.width?Math.max(0,y.left+I+p-u):y.left+I,e.style.top=P+"px",e.style.left=B+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,u=h=>{let p=window.getComputedStyle(h,null);return s.test(p.getPropertyValue("overflow"))||s.test(p.getPropertyValue("overflowX"))||s.test(p.getPropertyValue("overflowY"))};for(let h of r){let p=1===h.nodeType&&h.dataset.scrollselectors;if(p){let y=p.split(",");for(let E of y){let I=this.findSingle(h,E);I&&u(I)&&i.push(I)}}9!==h.nodeType&&u(h)&&i.push(h)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,u=getComputedStyle(e).getPropertyValue("paddingTop"),h=u?parseFloat(u):0,p=e.getBoundingClientRect(),E=i.getBoundingClientRect().top+document.body.scrollTop-(p.top+document.body.scrollTop)-s-h,I=e.scrollTop,M=e.clientHeight,P=this.getOuterHeight(i);E<0?e.scrollTop=I+E:E+P>M&&(e.scrollTop=I+E-M+P)}static fadeIn(e,i){e.style.opacity=0;let r=+new Date,s=0,u=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(u)||setTimeout(u,16))};u()}static fadeOut(e,i){var r=1,h=50/i;let p=setInterval(()=>{(r-=h)<=0&&(r=0,clearInterval(p)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(u){return-1!==[].indexOf.call(document.querySelectorAll(u),this)}).call(e,i)}static getOuterWidth(e,i){let r=e.offsetWidth;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(e,i){let r=e.offsetHeight;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let e=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,r){e[i].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})();class dM{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=fe.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let g0=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let i=this.getInk();if(!i||"none"===getComputedStyle(i,null).display)return;if(fe.removeClass(i,"p-ink-active"),!fe.getHeight(i)&&!fe.getWidth(i)){let h=Math.max(fe.getOuterWidth(this.el.nativeElement),fe.getOuterHeight(this.el.nativeElement));i.style.height=h+"px",i.style.width=h+"px"}let r=fe.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-fe.getWidth(i)/2,u=e.pageY-r.top+document.body.scrollLeft-fe.getHeight(i)/2;i.style.top=u+"px",i.style.left=s+"px",fe.addClass(i,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&fe.removeClass(e,"p-ink-active")}onAnimationEnd(e){fe.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),fe.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Ba,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),jy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi]]}),n})();const ZP=["container"],UH=function(n,t,e,i){return{"pi-info-circle":n,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":i}};function HH(n,t){if(1&n&&(o.ynx(0),o._UZ(1,"span",6),o.TgZ(2,"div",7)(3,"div",8),o._uU(4),o.qZA(),o.TgZ(5,"div",9),o._uU(6),o.qZA()(),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Tol("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),o.Q6J("ngClass",o.l5B(5,UH,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),o.xp6(3),o.Oqu(e.message.summary),o.xp6(2),o.Oqu(e.message.detail)}}function jH(n,t){1&n&&o.GkF(0)}function GH(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",10),o.NdJ("click",function(r){return o.CHM(e),o.oxw().onCloseIconClick(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw().onCloseIconClick(r)}),o._UZ(1,"span",11),o.qZA()}}const zH=function(n){return[n,"p-toast-message"]},$H=function(n,t,e,i){return{showTransformParams:n,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:i}},qH=function(n){return{value:"visible",params:n}},WH=function(n){return{$implicit:n}};function ZH(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-toastItem",3),o.NdJ("onClose",function(r){return o.CHM(e),o.oxw().onMessageClose(r)})("@toastAnimation.start",function(r){return o.CHM(e),o.oxw().onAnimationStart(r)})("@toastAnimation.done",function(r){return o.CHM(e),o.oxw().onAnimationEnd(r)}),o.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=o.oxw();o.Q6J("message",e)("index",i)("template",r.template)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}let KH=(()=>{class n{constructor(e){this.zone=e,this.onClose=new o.vpe}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-toastItem"]],viewQuery:function(e,i){if(1&e&&o.Gf(ZP,5),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.NdJ("mouseenter",function(){return i.onMouseEnter()})("mouseleave",function(){return i.onMouseLeave()}),o.TgZ(2,"div",2),o.YNc(3,HH,7,10,"ng-container",3),o.YNc(4,jH,1,0,"ng-container",4),o.YNc(5,GH,2,0,"button",5),o.qZA()()),2&e&&(o.Tol(i.message.styleClass),o.Q6J("ngClass",o.VKq(10,zH,"p-toast-message-"+i.message.severity))("@messageState",o.VKq(17,qH,o.l5B(12,$H,i.showTransformOptions,i.hideTransformOptions,i.showTransitionOptions,i.hideTransitionOptions))),o.uIk("id",i.message.id),o.xp6(2),o.Q6J("ngClass",i.message.contentStyleClass),o.xp6(1),o.Q6J("ngIf",!i.template),o.xp6(1),o.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",o.VKq(19,WH,i.message)),o.xp6(1),o.Q6J("ngIf",!1!==i.message.closable))},directives:[$n,fn,to,g0],encapsulation:2,data:{animation:[ds("messageState",[Ho("visible",Ki({transform:"translateY(0)",opacity:1})),dn("void => *",[Ki({transform:"{{showTransformParams}}",opacity:0}),ao("{{showTransitionParams}}")]),dn("* => void",[ao("{{hideTransitionParams}}",Ki({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),n})(),YH=(()=>{class n{constructor(e,i,r){this.messageService=e,this.cd=i,this.config=r,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new o.vpe,this.id=Va()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const i=e.filter(r=>this.canAdd(r));this.add(i)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let i=this.key===e.key;return i&&this.preventOpenDuplicates&&(i=!this.containsMessage(this.messages,e)),i&&this.preventDuplicates&&(i=!this.containsMessage(this.messagesArchieve,e)),i}containsMessage(e,i){return!!e&&null!=e.find(r=>r.summary===i.summary&&r.detail==i.detail&&r.severity===i.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&Un.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&at.isEmpty(this.messages)&&Un.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let i in this.breakpoints){let r="";for(let s in this.breakpoints[i])r+=s+":"+this.breakpoints[i][s]+" !important;";e+=`\n                    @media screen and (max-width: ${i}) {\n                        .p-toast[${this.id}] {\n                           ${r}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Un.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(qu),o.Y36(o.sBO),o.Y36(Ba))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-toast"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Yc,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&o.Gf(ZP,5),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.YNc(2,ZH,1,8,"p-toastItem",2),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass","p-toast p-component p-toast-"+i.position)("ngStyle",i.style),o.xp6(2),o.Q6J("ngForOf",i.messages))},directives:[KH,$n,Dr,Tn],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[ds("toastAnimation",[dn(":enter, :leave",[zd("@*",Ea())])])]},changeDetection:0}),n})(),QH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi,jy],xl]}),n})(),KP=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Ag=(()=>{class n extends KP{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const $s=new o.OlP("NgValueAccessor"),e3={provide:$s,useExisting:(0,o.Gpc)(()=>VI),multi:!0},n3=new o.OlP("CompositionEventMode");let VI=(()=>{class n extends KP{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function t3(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(n3,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([e3]),o.qOj]}),n})();const ws=new o.OlP("NgValidators"),vf=new o.OlP("NgAsyncValidators");function oN(n){return null!=n}function aN(n){const t=(0,o.QGY)(n)?(0,An.D)(n):n;return(0,o.CqO)(t),t}function lN(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function uN(n,t){return t.map(e=>e(n))}function cN(n){return n.map(t=>function r3(n){return!n.validate}(t)?t:e=>t.validate(e))}function hM(n){return null!=n?function dN(n){if(!n)return null;const t=n.filter(oN);return 0==t.length?null:function(e){return lN(uN(e,t))}}(cN(n)):null}function fM(n){return null!=n?function hN(n){if(!n)return null;const t=n.filter(oN);return 0==t.length?null:function(e){return function JH(...n){const t=(0,bl.jO)(n),{args:e,keys:i}=O(n),r=new v.y(s=>{const{length:u}=e;if(!u)return void s.complete();const h=new Array(u);let p=u,y=u;for(let E=0;E<u;E++){let I=!1;(0,go.Xf)(e[E]).subscribe((0,rn.x)(s,M=>{I||(I=!0,y--),h[E]=M},()=>p--,void 0,()=>{(!p||!I)&&(y||s.next(i?Yn(i,h):h),s.complete())}))}});return t?r.pipe(ht(t)):r}(uN(e,t).map(aN)).pipe((0,ve.U)(lN))}}(cN(n)):null}function fN(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function pM(n){return n?Array.isArray(n)?n:[n]:[]}function UI(n,t){return Array.isArray(n)?n.includes(t):n===t}function mN(n,t){const e=pM(t);return pM(n).forEach(r=>{UI(e,r)||e.push(r)}),e}function _N(n,t){return pM(t).filter(e=>!UI(n,e))}class yN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=hM(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=fM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class wf extends yN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qs extends yN{get formDirective(){return null}get path(){return null}}let gM=(()=>{class n extends class vN{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(wf,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[o.qOj]}),n})();function m0(n,t){(function yM(n,t){const e=function pN(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(fN(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=function gN(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(fN(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();zI(t._rawValidators,r),zI(t._rawAsyncValidators,r)})(n,t),t.valueAccessor.writeValue(n.value),function f3(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&bN(n,t)})}(n,t),function g3(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function p3(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&bN(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function h3(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function zI(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function bN(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function bM(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const _0="VALID",qI="INVALID",Gy="PENDING",y0="DISABLED";function EM(n){return(WI(n)?n.validators:n)||null}function IN(n){return Array.isArray(n)?hM(n):n||null}function TM(n,t){return(WI(t)?t.asyncValidators:n)||null}function SN(n){return Array.isArray(n)?fM(n):n||null}function WI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const IM=n=>n instanceof DM;function xN(n){return(n=>n instanceof kN)(n)?n.value:n.getRawValue()}function AN(n,t){const e=IM(n),i=n.controls;if(!(e?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[t])throw new o.vHH(1001,"")}function MN(n,t){IM(n),n._forEachChild((i,r)=>{if(void 0===t[r])throw new o.vHH(1002,"")})}class SM{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=IN(this._rawValidators),this._composedAsyncValidatorFn=SN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===_0}get invalid(){return this.status===qI}get pending(){return this.status==Gy}get disabled(){return this.status===y0}get enabled(){return this.status!==y0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=IN(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=SN(t)}addValidators(t){this.setValidators(mN(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(mN(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(_N(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(_N(t,this._rawAsyncValidators))}hasValidator(t){return UI(this._rawValidators,t)}hasAsyncValidator(t){return UI(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Gy,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=y0,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=_0,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_0||this.status===Gy)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?y0:_0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Gy,this._hasOwnPendingAsyncValidator=!0;const e=aN(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function v3(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=IM(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof b3)(i)&&i.at(r)||null}),i}(this,t,".")}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?y0:this.errors?qI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gy)?Gy:this._anyControlsHaveStatus(qI)?qI:_0}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){WI(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class kN extends SM{constructor(t=null,e,i){super(EM(e),TM(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),WI(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){bM(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){bM(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class DM extends SM{constructor(t,e,i){super(EM(e),TM(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){MN(this,t),Object.keys(t).forEach(i=>{AN(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=xN(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class b3 extends SM{constructor(t,e,i){super(EM(e),TM(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){MN(this,t),t.forEach((i,r)=>{AN(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>xN(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const T3={provide:wf,useExisting:(0,o.Gpc)(()=>w0)},PN=(()=>Promise.resolve(null))();let w0=(()=>{class n extends wf{constructor(e,i,r,s,u){super(),this._changeDetectorRef=u,this.control=new kN,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function wM(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===VI?e=s:function y3(n){return Object.getPrototypeOf(n.constructor)===Ag}(s)?i=s:r=s}),r||i||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function vM(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){m0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){PN.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;PN.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(e){return this._parent?function jI(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(qs,9),o.Y36(ws,10),o.Y36(vf,10),o.Y36($s,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([T3]),o.qOj,o.TTD]}),n})(),FN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),Y3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[FN]]}),n})(),ZI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Y3]}),n})();function KI(n,t=0){return function J3(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}var ej=N(1144);const tj=["addListener","removeListener"],nj=["addEventListener","removeEventListener"],ij=["on","off"];function YI(n,t,e,i){if((0,pr.m)(e)&&(i=e,e=void 0),i)return YI(n,t,e).pipe(ht(i));const[r,s]=function oj(n){return(0,pr.m)(n.addEventListener)&&(0,pr.m)(n.removeEventListener)}(n)?nj.map(u=>h=>n[u](t,h,e)):function rj(n){return(0,pr.m)(n.addListener)&&(0,pr.m)(n.removeListener)}(n)?tj.map(eF(n,t)):function sj(n){return(0,pr.m)(n.on)&&(0,pr.m)(n.off)}(n)?ij.map(eF(n,t)):[];if(!r&&(0,ej.z)(n))return(0,mr.z)(u=>YI(u,t,e))((0,go.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new v.y(u=>{const h=(...p)=>u.next(1<p.length?p:p[0]);return r(h),()=>s(h)})}function eF(n,t){return e=>i=>n[e](t,i)}var tF=N(4408);const b0={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=b0;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new up.w0(()=>null==e?void 0:e(r))},requestAnimationFrame(...n){const{delegate:t}=b0;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=b0;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var nF=N(7565);const uj=new class lj extends nF.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class aj extends tF.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=b0.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(b0.cancelAnimationFrame(e),t._scheduled=void 0)}});let NM,cj=1;const QI={};function iF(n){return n in QI&&(delete QI[n],!0)}const dj={setImmediate(n){const t=cj++;return QI[t]=!0,NM||(NM=Promise.resolve()),NM.then(()=>iF(t)&&n()),t},clearImmediate(n){iF(n)}},{setImmediate:hj,clearImmediate:fj}=dj,JI={setImmediate(...n){const{delegate:t}=JI;return((null==t?void 0:t.setImmediate)||hj)(...n)},clearImmediate(n){const{delegate:t}=JI;return((null==t?void 0:t.clearImmediate)||fj)(n)},delegate:void 0},mj=new class gj extends nF.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class pj extends tF.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=JI.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(JI.clearImmediate(e),t._scheduled=void 0)}});function rF(n){return!!n&&(n instanceof v.y||(0,pr.m)(n.lift)&&(0,pr.m)(n.subscribe))}var yj=N(3532);function FM(n,t=Dp.z){return function _j(n){return(0,Vi.e)((t,e)=>{let i=!1,r=null,s=null,u=!1;const h=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const y=r;r=null,e.next(y)}u&&e.complete()},p=()=>{s=null,u&&e.complete()};t.subscribe((0,rn.x)(e,y=>{i=!0,r=y,s||(0,go.Xf)(n(y)).subscribe(s=(0,rn.x)(e,h,p))},()=>{u=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>function wj(n=0,t,e=Dp.P){let i=-1;return null!=t&&((0,yj.K)(t)?e=t:i=t),new v.y(r=>{let s=function vj(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let u=0;return e.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,t))}var sF=N(5032);function LM(n){return(0,Vi.e)((t,e)=>{(0,go.Xf)(n).subscribe((0,rn.x)(e,()=>e.complete(),sF.Z)),!e.closed&&t.subscribe(e)})}let VM;try{VM="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){VM=!1}let XI,kg,oF=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Pi(n){return n===Ro}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!VM)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.Lbi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function E0(){if("object"!=typeof document||!document)return 0;if(null==XI){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),XI=0,0===n.scrollLeft&&(n.scrollLeft=1,XI=0===n.scrollLeft?1:2),n.remove()}return XI}const Tj=new o.OlP("cdk-dir-doc",{providedIn:"root",factory:function Ij(){return(0,o.f3M)(ce)}}),Sj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let lF=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new o.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function Dj(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Sj.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Tj,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();class Mj extends class xj{}{constructor(t){super(),this._data=t}connect(){return rF(this._data)?this._data:bt(this._data)}disconnect(){}}class kj{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(t,e,i,r,s){t.forEachOperation((u,h,p)=>{let y,E;null==u.previousIndex?(y=this._insertView(()=>i(u,h,p),p,e,r(u)),E=y?1:0):null==p?(this._detachAndCacheView(h,e),E=3):(y=this._moveView(h,p,e,r(u)),E=2),s&&s({context:null==y?void 0:y.context,operation:E,record:u})})}detach(){for(const t of this._viewCache)t.destroy();this._viewCache=[]}_insertView(t,e,i,r){const s=this._insertViewFromCache(e,i);if(s)return void(s.context.$implicit=r);const u=t();return i.createEmbeddedView(u.templateRef,u.context,u.index)}_detachAndCacheView(t,e){const i=e.detach(t);this._maybeCacheView(i,e)}_moveView(t,e,i,r){const s=i.get(t);return i.move(s,e),s.context.$implicit=r,s}_maybeCacheView(t,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(t);else{const i=e.indexOf(t);-1===i?t.destroy():e.remove(i)}}_insertViewFromCache(t,e){const i=this._viewCache.pop();return i&&e.insert(i,t),i||null}}const cF=new o.OlP("_ViewRepeater"),Rj=["contentWrapper"],Oj=["*"],dF=new o.OlP("VIRTUAL_SCROLL_STRATEGY");class Pj{constructor(t,e,i){this._scrolledIndexChange=new mn.x,this.scrolledIndexChange=this._scrolledIndexChange.pipe(h_()),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,i){this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const t=this._viewport.getRenderedRange(),e={start:t.start,end:t.end},i=this._viewport.getViewportSize(),r=this._viewport.getDataLength();let s=this._viewport.measureScrollOffset(),u=this._itemSize>0?s/this._itemSize:0;if(e.end>r){const p=Math.ceil(i/this._itemSize),y=Math.max(0,Math.min(u,r-p));u!=y&&(u=y,s=y*this._itemSize,e.start=Math.floor(u)),e.end=Math.max(0,Math.min(r,e.start+p))}const h=s-e.start*this._itemSize;if(h<this._minBufferPx&&0!=e.start){const p=Math.ceil((this._maxBufferPx-h)/this._itemSize);e.start=Math.max(0,e.start-p),e.end=Math.min(r,Math.ceil(u+(i+this._minBufferPx)/this._itemSize))}else{const p=e.end*this._itemSize-(s+i);if(p<this._minBufferPx&&e.end!=r){const y=Math.ceil((this._maxBufferPx-p)/this._itemSize);y>0&&(e.end=Math.min(r,e.end+y),e.start=Math.max(0,Math.floor(u-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(u))}}function Nj(n){return n._scrollStrategy}let hF=(()=>{class n{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new Pj(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=KI(e)}get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=KI(e)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=KI(e)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[o._Bn([{provide:dF,useFactory:Nj,deps:[(0,o.Gpc)(()=>n)]}]),o.TTD]}),n})(),fF=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new mn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new v.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(FM(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):bt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Qo(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=function X3(n){return n instanceof o.SBq?n.nativeElement:n}(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>YI(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(oF),o.LFG(ce,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pF=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new mn.x,this._elementScrolled=new v.y(u=>this.ngZone.runOutsideAngular(()=>YI(this.elementRef.nativeElement,"scroll").pipe(LM(this._destroyed)).subscribe(u)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=E0()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==E0()?e.left=e.right:1==E0()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;!function Cj(){if(null==kg){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return kg=!1,kg;if("scrollBehavior"in document.documentElement.style)kg=!0;else{const n=Element.prototype.scrollTo;kg=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return kg}()?(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left)):i.scrollTo(e)}measureScrollOffset(e){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const u=this.dir&&"rtl"==this.dir.value;return"start"==e?e=u?r:i:"end"==e&&(e=u?i:r),u&&2==E0()?e==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:u&&1==E0()?e==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(fF),o.Y36(o.R0b),o.Y36(lF,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),Vj=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new mn.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(FM(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(oF),o.LFG(o.R0b),o.LFG(ce,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Uj="undefined"!=typeof requestAnimationFrame?uj:mj;let T0=(()=>{class n extends pF{constructor(e,i,r,s,u,h,p){super(e,h,r,u),this.elementRef=e,this._changeDetectorRef=i,this._scrollStrategy=s,this._detachedSubject=new mn.x,this._renderedRangeSubject=new mn.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new v.y(y=>this._scrollStrategy.scrolledIndexChange.subscribe(E=>Promise.resolve().then(()=>this.ngZone.run(()=>y.next(E))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=up.w0.EMPTY,this._viewportChanges=p.change().subscribe(()=>{this.checkViewportSize()})}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=function Q3(n){return null!=n&&"false"!=`${n}`}(e)}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe(Gc(null),FM(0,Uj)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(LM(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function Bj(n,t){return n.start==t.start&&n.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){const s="horizontal"==this.orientation,u=s?"X":"Y";let p=`translate${u}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e=this.appendOnly&&"to-start"===i?0:e,"to-end"===i&&(p+=` translate${u}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=p&&(this._renderedContentTransform=p,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollTo(r)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){return super.measureScrollOffset(e||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const e=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?e.clientWidth:e.clientHeight}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of e)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(dF,8),o.Y36(lF,8),o.Y36(fF),o.Y36(Vj))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,i){if(1&e&&o.Gf(Rj,7),2&e){let r;o.iGM(r=o.CRH())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[o._Bn([{provide:pF,useExisting:n}]),o.qOj],ngContentSelectors:Oj,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"div",0,1),o.Hsn(2),o.qZA(),o._UZ(3,"div",2)),2&e&&(o.xp6(3),o.Udp("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),n})();function gF(n,t,e){if(!e.getBoundingClientRect)return 0;const r=e.getBoundingClientRect();return"horizontal"===n?"start"===t?r.left:r.right:"start"===t?r.top:r.bottom}let mF=(()=>{class n{constructor(e,i,r,s,u,h){this._viewContainerRef=e,this._template=i,this._differs=r,this._viewRepeater=s,this._viewport=u,this.viewChange=new mn.x,this._dataSourceChanges=new mn.x,this.dataStream=this._dataSourceChanges.pipe(Gc(null),d_(),gr(([p,y])=>this._changeDataSource(p,y)),F1(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new mn.x,this.dataStream.subscribe(p=>{this._data=p,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(LM(this._destroyed)).subscribe(p=>{this._renderedRange=p,this.viewChange.observers.length&&h.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(e){this._cdkVirtualForOf=e,function Aj(n){return n&&"function"==typeof n.connect}(e)?this._dataSourceChanges.next(e):this._dataSourceChanges.next(new Mj(rF(e)?e:Array.from(e||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(e){this._needsUpdate=!0,this._cdkVirtualForTrackBy=e?(i,r)=>e(i+(this._renderedRange?this._renderedRange.start:0),r):void 0}set cdkVirtualForTemplate(e){e&&(this._needsUpdate=!0,this._template=e)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(e){this._viewRepeater.viewCacheSize=KI(e)}measureRangeSize(e,i){if(e.start>=e.end)return 0;const r=e.start-this._renderedRange.start,s=e.end-e.start;let u,h;for(let p=0;p<s;p++){const y=this._viewContainerRef.get(p+r);if(y&&y.rootNodes.length){u=h=y.rootNodes[0];break}}for(let p=s-1;p>-1;p--){const y=this._viewContainerRef.get(p+r);if(y&&y.rootNodes.length){h=y.rootNodes[y.rootNodes.length-1];break}}return u&&h?gF(i,"end",h)-gF(i,"start",u):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const e=this._differ.diff(this._renderedItems);e?this._applyChanges(e):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){!this._renderedRange||(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((e,i)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(e,i):i)),this._needsUpdate=!0)}_changeDataSource(e,i){return e&&e.disconnect(this),this._needsUpdate=!0,i?i.connect(this):bt()}_updateContext(){const e=this._data.length;let i=this._viewContainerRef.length;for(;i--;){const r=this._viewContainerRef.get(i);r.context.index=this._renderedRange.start+i,r.context.count=e,this._updateComputedContextProperties(r.context),r.detectChanges()}}_applyChanges(e){this._viewRepeater.applyChanges(e,this._viewContainerRef,(s,u,h)=>this._getEmbeddedViewArgs(s,h),s=>s.item),e.forEachIdentityChange(s=>{this._viewContainerRef.get(s.currentIndex).context.$implicit=s.item});const i=this._data.length;let r=this._viewContainerRef.length;for(;r--;){const s=this._viewContainerRef.get(r);s.context.index=this._renderedRange.start+r,s.context.count=i,this._updateComputedContextProperties(s.context)}}_updateComputedContextProperties(e){e.first=0===e.index,e.last=e.index===e.count-1,e.even=e.index%2==0,e.odd=!e.even}_getEmbeddedViewArgs(e,i){return{templateRef:this._template,context:{$implicit:e.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:i}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(cF),o.Y36(T0,4),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[o._Bn([{provide:cF,useClass:kj}])]}),n})(),_F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),eS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[uF,_F],uF,_F]}),n})(),Hj=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r,this.escape=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions=Object.assign(Object.assign({},this._tooltipOptions),e.tooltipOptions.currentValue),this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?fe.appendChild(this.container,this.el.nativeElement):fe.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block"}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),fe.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Un.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Un.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+fe.getWindowScrollLeft(),top:e.top+fe.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),i=e.left+fe.getOuterWidth(this.el.nativeElement),r=e.top+(fe.getOuterHeight(this.el.nativeElement)-fe.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),i=e.left-fe.getOuterWidth(this.container),r=e.top+(fe.getOuterHeight(this.el.nativeElement)-fe.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),i=e.left+(fe.getOuterWidth(this.el.nativeElement)-fe.getOuterWidth(this.container))/2,r=e.top-fe.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),i=e.left+(fe.getOuterWidth(this.el.nativeElement)-fe.getOuterWidth(this.container))/2,r=e.top+fe.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions=Object.assign(Object.assign({},this._tooltipOptions),e)}getOption(e){return this._tooltipOptions[e]}getTarget(e){return fe.hasClass(e,"p-inputwrapper")?fe.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let e=this.container.getBoundingClientRect(),i=e.top,r=e.left,s=fe.getOuterWidth(this.container),u=fe.getOuterHeight(this.container),h=fe.getViewport();return r+s>h.width||r<0||i<0||i+u>h.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new dM(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):fe.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Un.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Ba))},n.\u0275dir=o.lG2({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[o.TTD]}),n})(),jj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi]]}),n})();function Gj(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Oqu(e.label||"empty")}}function zj(n,t){1&n&&o.GkF(0)}const yF=function(n){return{height:n}},$j=function(n,t){return{"p-dropdown-item":!0,"p-highlight":n,"p-disabled":t}},UM=function(n){return{$implicit:n}},qj=["container"],Wj=["filter"],Zj=["in"],Kj=["editableInput"];function Yj(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.label||"empty")}}function Qj(n,t){1&n&&o.GkF(0)}const Jj=function(n){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":n}};function Xj(n,t){if(1&n&&(o.TgZ(0,"span",12),o.YNc(1,Yj,2,1,"ng-container",13),o.YNc(2,Qj,1,0,"ng-container",14),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngClass",o.VKq(9,Jj,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),o.uIk("id",e.labelId),o.xp6(1),o.Q6J("ngIf",!e.selectedItemTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",o.VKq(11,UM,e.selectedOption))}}const e6=function(n){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":n}};function t6(n,t){if(1&n&&(o.TgZ(0,"span",15),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngClass",o.VKq(2,e6,null==e.placeholder||0===e.placeholder.length)),o.xp6(1),o.Oqu(e.placeholder||"empty")}}function n6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"input",16,17),o.NdJ("click",function(){return o.CHM(e),o.oxw().onEditableInputClick()})("input",function(r){return o.CHM(e),o.oxw().onEditableInputChange(r)})("focus",function(r){return o.CHM(e),o.oxw().onEditableInputFocus(r)})("blur",function(r){return o.CHM(e),o.oxw().onInputBlur(r)}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("disabled",e.disabled),o.uIk("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function r6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",18),o.NdJ("click",function(r){return o.CHM(e),o.oxw().clear(r)}),o.qZA()}}function s6(n,t){1&n&&o.GkF(0)}function o6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",26)(1,"div",27),o.NdJ("click",function(r){return r.stopPropagation()}),o.TgZ(2,"input",28,29),o.NdJ("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){return o.CHM(e),o.oxw(2).onKeydown(r,!1)})("input",function(r){return o.CHM(e),o.oxw(2).onFilterInputChange(r)}),o.qZA(),o._UZ(4,"span",30),o.qZA()()}if(2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("value",e.filterValue||""),o.uIk("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function a6(n,t){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.xp6(1),o.Oqu(i.getOptionGroupLabel(e)||"empty")}}function l6(n,t){1&n&&o.GkF(0)}function u6(n,t){1&n&&o.GkF(0)}const vF=function(n,t){return{$implicit:n,selectedOption:t}};function c6(n,t){if(1&n&&(o.TgZ(0,"li",32),o.YNc(1,a6,2,1,"span",13),o.YNc(2,l6,1,0,"ng-container",14),o.qZA(),o.YNc(3,u6,1,0,"ng-container",14)),2&n){const e=t.$implicit;o.oxw(2);const i=o.MAs(8),r=o.oxw();o.xp6(1),o.Q6J("ngIf",!r.groupTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",r.groupTemplate)("ngTemplateOutletContext",o.VKq(5,UM,e)),o.xp6(1),o.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",o.WLB(7,vF,r.getOptionGroupChildren(e),r.selectedOption))}}function d6(n,t){if(1&n&&(o.ynx(0),o.YNc(1,c6,4,10,"ng-template",31),o.BQk()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e.optionsToDisplay)}}function h6(n,t){1&n&&o.GkF(0)}function f6(n,t){if(1&n&&(o.ynx(0),o.YNc(1,h6,1,0,"ng-container",14),o.BQk()),2&n){o.oxw();const e=o.MAs(8),i=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",o.WLB(2,vF,i.optionsToDisplay,i.selectedOption))}}function p6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-dropdownItem",35),o.NdJ("onClick",function(r){return o.CHM(e),o.oxw(4).onItemClick(r)}),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(2).selectedOption,r=o.oxw(2);o.Q6J("option",e)("selected",i==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function g6(n,t){if(1&n&&(o.ynx(0),o.YNc(1,p6,1,5,"ng-template",31),o.BQk()),2&n){const e=o.oxw().$implicit;o.xp6(1),o.Q6J("ngForOf",e)}}function m6(n,t){if(1&n){const e=o.EpF();o.ynx(0),o.TgZ(1,"p-dropdownItem",35),o.NdJ("onClick",function(r){return o.CHM(e),o.oxw(5).onItemClick(r)}),o.qZA(),o.BQk()}if(2&n){const e=t.$implicit,i=o.oxw(3).selectedOption,r=o.oxw(2);o.xp6(1),o.Q6J("option",e)("selected",i==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function _6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"cdk-virtual-scroll-viewport",37,38),o.NdJ("scrolledIndexChange",function(){return o.CHM(e),o.oxw(4).scrollToSelectedVirtualScrollElement()}),o.YNc(2,m6,2,5,"ng-container",39),o.qZA()}if(2&n){const e=o.oxw(2).$implicit,i=o.oxw(2);o.Q6J("ngStyle",o.VKq(3,yF,i.scrollHeight))("itemSize",i.itemSize),o.xp6(2),o.Q6J("cdkVirtualForOf",e)}}function y6(n,t){if(1&n&&o.YNc(0,_6,3,5,"cdk-virtual-scroll-viewport",36),2&n){const e=o.oxw(3);o.Q6J("ngIf",e.virtualScroll&&e.optionsToDisplay&&e.optionsToDisplay.length)}}function v6(n,t){if(1&n&&(o.YNc(0,g6,2,1,"ng-container",33),o.YNc(1,y6,1,1,"ng-template",null,34,o.W1O)),2&n){const e=o.MAs(2),i=o.oxw(2);o.Q6J("ngIf",!i.virtualScroll)("ngIfElse",e)}}function w6(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(3);o.xp6(1),o.hij(" ",e.emptyFilterMessageLabel," ")}}function b6(n,t){1&n&&o.GkF(0,null,41)}function C6(n,t){if(1&n&&(o.TgZ(0,"li",40),o.YNc(1,w6,2,1,"ng-container",33),o.YNc(2,b6,2,0,"ng-container",20),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),o.xp6(1),o.Q6J("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function E6(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(3);o.xp6(1),o.hij(" ",e.emptyMessageLabel," ")}}function T6(n,t){1&n&&o.GkF(0,null,42)}function I6(n,t){if(1&n&&(o.TgZ(0,"li",40),o.YNc(1,E6,2,1,"ng-container",33),o.YNc(2,T6,2,0,"ng-container",20),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),o.xp6(1),o.Q6J("ngTemplateOutlet",e.emptyTemplate)}}function S6(n,t){1&n&&o.GkF(0)}const D6=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},x6=function(n){return{value:"visible",params:n}},A6=function(n){return{"p-dropdown-virtualscroll":n}};function M6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",19),o.NdJ("click",function(r){return o.CHM(e),o.oxw().onOverlayClick(r)})("@overlayAnimation.start",function(r){return o.CHM(e),o.oxw().onOverlayAnimationStart(r)})("@overlayAnimation.start",function(r){return o.CHM(e),o.oxw().onOverlayAnimationEnd(r)}),o.YNc(1,s6,1,0,"ng-container",20),o.YNc(2,o6,5,4,"div",21),o.TgZ(3,"div",22)(4,"ul",23),o.YNc(5,d6,2,1,"ng-container",13),o.YNc(6,f6,2,5,"ng-container",13),o.YNc(7,v6,3,2,"ng-template",null,24,o.W1O),o.YNc(9,C6,3,3,"li",25),o.YNc(10,I6,3,3,"li",25),o.qZA()(),o.YNc(11,S6,1,0,"ng-container",20),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.panelStyleClass),o.Q6J("ngClass","p-dropdown-panel p-component")("@overlayAnimation",o.VKq(19,x6,o.WLB(16,D6,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),o.xp6(1),o.Q6J("ngTemplateOutlet",e.headerTemplate),o.xp6(1),o.Q6J("ngIf",e.filter),o.xp6(1),o.Udp("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),o.xp6(1),o.Q6J("ngClass",o.VKq(21,A6,e.virtualScroll)),o.uIk("id",e.listId),o.xp6(1),o.Q6J("ngIf",e.group),o.xp6(1),o.Q6J("ngIf",!e.group),o.xp6(3),o.Q6J("ngIf",e.filterValue&&e.isEmpty()),o.xp6(1),o.Q6J("ngIf",!e.filterValue&&e.isEmpty()),o.xp6(1),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}const k6=function(n,t,e,i){return{"p-dropdown p-component":!0,"p-disabled":n,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":i}},R6={provide:$s,useExisting:(0,o.Gpc)(()=>wF),multi:!0};let O6=(()=>{class n{constructor(){this.onClick=new o.vpe}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.TgZ(0,"li",0),o.NdJ("click",function(s){return i.onOptionClick(s)}),o.YNc(1,Gj,2,1,"span",1),o.YNc(2,zj,1,0,"ng-container",2),o.qZA()),2&e&&(o.Q6J("ngStyle",o.VKq(8,yF,i.itemSize+"px"))("id",i.selected?"p-highlighted-option":"")("ngClass",o.WLB(10,$j,i.selected,i.disabled)),o.uIk("aria-label",i.label)("aria-selected",i.selected),o.xp6(1),o.Q6J("ngIf",!i.template),o.xp6(1),o.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",o.VKq(13,UM,i.option)))},directives:[g0,Dr,$n,fn,to],encapsulation:2}),n})(),wF=(()=>{class n{constructor(e,i,r,s,u,h,p){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.filterService=u,this.config=h,this.overlayService=p,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new o.vpe,this.onFilter=new o.vpe,this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onClick=new o.vpe,this.onShow=new o.vpe,this.onHide=new o.vpe,this.onClear=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.viewPortOffsetTop=0,this.id=Va()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list"}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),this.selectedOption||(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(yr.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(yr.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?at.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?at.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?at.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?at.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?at.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const i=e.option;this.isOptionDisabled(i)||(this.selectItem(e.originalEvent,i),this.accessibleViewChild.nativeElement.focus()),setTimeout(()=>{this.hide()},150)}selectItem(e,i){this.selectedOption!=i&&(this.selectedOption=i,this.value=this.getOptionValue(i),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}),this.virtualScroll&&setTimeout(()=>{this.viewPortOffsetTop=this.viewPort?this.viewPort.measureScrollOffset():0},1))}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.virtualScroll&&this.updateVirtualScrollSelectedIndex(!0),this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){if(this.virtualScroll&&this.viewPort){let i=this.viewPort.getRenderedRange();this.updateVirtualScrollSelectedIndex(!1),(i.start>this.virtualScrollSelectedIndex||i.end<this.virtualScrollSelectedIndex)&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)}fe.findSingle(this.overlay,"li.p-highlight")&&fe.scrollInView(this.itemsWrapper,fe.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1}}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus(),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return fe.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=fe.findSingle(this.overlay,this.virtualScroll?".cdk-virtual-scroll-viewport":".p-dropdown-items-wrapper"),this.appendOverlay(),this.autoZIndex&&Un.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length&&!this.virtualScroll){let r=fe.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");r&&r.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){"void"===e.toState&&Un.clear(e.element)}scrollToSelectedVirtualScrollElement(){this.virtualAutoScrolled||(this.viewPortOffsetTop?this.viewPort.scrollToOffset(this.viewPortOffsetTop):this.virtualScrollSelectedIndex>-1&&this.viewPort.scrollToIndex(this.virtualScrollSelectedIndex)),this.virtualAutoScrolled=!0}updateVirtualScrollSelectedIndex(e){this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&(e&&(this.viewPortOffsetTop=0),this.virtualScrollSelectedIndex=this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay))}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):fe.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=fe.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.virtualScroll&&(this.virtualAutoScrolled=!1),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?fe.absolutePosition(this.overlay,this.containerViewChild.nativeElement):fe.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}findNextEnabledOption(e){let i;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}if(!i)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){i=s;break}}}return i}onKeydown(e,i){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let u=this.optionsToDisplay[r.groupIndex-1];u&&(this.selectItem(e,this.getOptionGroupChildren(u)[this.getOptionGroupChildren(u).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:i&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:i&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const i=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=i,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+i:i,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let i;return this.searchValue&&(i=this.searchOptionInRange(e,this.optionsToDisplay.length),i||(i=this.searchOptionInRange(0,e))),i}searchOptionInRange(e,i){for(let r=e;r<i;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let u=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(u).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(u))return u}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let u=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(u).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(u))return u}}return null}findOptionIndex(e,i){let r=-1;if(i)for(let s=0;s<i.length;s++)if(null==e&&null==this.getOptionValue(i[s])||at.equals(e,this.getOptionValue(i[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,i){let r,s;if(i)for(let u=0;u<i.length&&(r=u,s=this.findOptionIndex(e,this.getOptionGroupChildren(i[u])),-1===s);u++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,i,r){if(this.group&&!r){let s;if(i&&i.length)for(let u of i)if(s=this.findOption(e,this.getOptionGroupChildren(u),!0),s)break;return s}{let s=this.findOptionIndex(e,i);return-1!=s?i[s]:null}}onFilterInputChange(e){let i=e.target.value;i&&i.length?(this._filterValue=i,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let i=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&i.push(Object.assign(Object.assign({},r),{[this.optionGroupChildren]:s}))}this.optionsToDisplay=i}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?fe.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():fe.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",i=>{!this.preventDocumentDefault&&this.isOutsideClicked(i)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!fe.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new dM(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Un.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(Kc),o.Y36(Ba),o.Y36(Wu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-dropdown"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Yc,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(qj,5),o.Gf(Wj,5),o.Gf(Zj,5),o.Gf(T0,5),o.Gf(Kj,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.filterViewChild=r.first),o.iGM(r=o.CRH())&&(i.accessibleViewChild=r.first),o.iGM(r=o.CRH())&&(i.viewPort=r.first),o.iGM(r=o.CRH())&&(i.editableInputViewChild=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused||i.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",virtualScroll:"virtualScroll",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear"},features:[o._Bn([R6])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],["onOverlayAnimationEnd","",3,"ngClass","ngStyle","click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",4,"ngIf"],[1,"p-dropdown-items-wrapper"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["itemslist",""],["class","p-dropdown-empty-message",4,"ngIf"],[1,"p-dropdown-header"],[1,"p-dropdown-filter-container",3,"click"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],[3,"option","selected","label","disabled","template","onClick"],[3,"ngStyle","itemSize","scrolledIndexChange",4,"ngIf"],[3,"ngStyle","itemSize","scrolledIndexChange"],["viewport",""],[4,"cdkVirtualFor","cdkVirtualForOf"],[1,"p-dropdown-empty-message"],["emptyFilter",""],["empty",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.NdJ("click",function(s){return i.onMouseclick(s)}),o.TgZ(2,"div",2)(3,"input",3,4),o.NdJ("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)})("keydown",function(s){return i.onKeydown(s,!0)}),o.qZA()(),o.YNc(5,Xj,3,13,"span",5),o.YNc(6,t6,2,4,"span",6),o.YNc(7,n6,2,4,"input",7),o.YNc(8,r6,1,0,"i",8),o.TgZ(9,"div",9),o._UZ(10,"span",10),o.qZA(),o.YNc(11,M6,12,23,"div",11),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.l5B(20,k6,i.disabled,i.overlayVisible,i.focused,i.showClear&&!i.disabled))("ngStyle",i.style),o.xp6(3),o.Q6J("disabled",i.disabled),o.uIk("id",i.inputId)("placeholder",i.placeholder)("aria-label",i.ariaLabel)("aria-expanded",!1)("aria-labelledby",i.ariaLabelledBy)("tabindex",i.tabindex)("autofocus",i.autofocus)("aria-activedescendant",i.overlayVisible?i.labelId:null),o.xp6(2),o.Q6J("ngIf",!i.editable&&null!=i.label),o.xp6(1),o.Q6J("ngIf",!i.editable&&null==i.label),o.xp6(1),o.Q6J("ngIf",i.editable),o.xp6(1),o.Q6J("ngIf",null!=i.value&&i.showClear&&!i.disabled),o.xp6(1),o.uIk("aria-expanded",i.overlayVisible),o.xp6(1),o.Q6J("ngClass",i.dropdownIcon),o.xp6(1),o.Q6J("ngIf",i.overlayVisible))},directives:[O6,T0,$n,Dr,fn,Hj,to,Tn,hF,mF],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[ds("overlayAnimation",[dn(":enter",[Ki({opacity:0,transform:"scaleY(0.8)"}),ao("{{showTransitionParams}}")]),dn(":leave",[ao("{{hideTransitionParams}}",Ki({opacity:0}))])])]},changeDetection:0}),n})(),HM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi,xl,eS,jj,jy],xl,eS]}),n})(),P6=(()=>{class n{constructor(e,i,r){this.el=e,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(w0,8),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i.onInput(s)}),2&e&&o.ekj("p-filled",i.filled)}}),n})(),bF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi]]}),n})(),CF=(()=>{class n{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,fe.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&fe.addClass(e,i);let r=this.getIconClass();r&&fe.addMultipleClasses(e,r);let s=fe.findSingle(this.el.nativeElement,".p-button-label");s?this.el.nativeElement.insertBefore(e,s):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=fe.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=fe.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(fe.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),n})(),I0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi,jy]]}),n})();const F6=["input"];function L6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",6),o.NdJ("click",function(){return o.CHM(e),o.oxw().clear()}),o.qZA()}}const EF=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},TF=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function V6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",7)(1,"button",8),o.NdJ("mousedown",function(r){return o.CHM(e),o.oxw().onUpButtonMouseDown(r)})("mouseup",function(){return o.CHM(e),o.oxw().onUpButtonMouseUp()})("mouseleave",function(){return o.CHM(e),o.oxw().onUpButtonMouseLeave()})("keydown",function(r){return o.CHM(e),o.oxw().onUpButtonKeyDown(r)})("keyup",function(){return o.CHM(e),o.oxw().onUpButtonKeyUp()}),o.qZA(),o.TgZ(2,"button",8),o.NdJ("mousedown",function(r){return o.CHM(e),o.oxw().onDownButtonMouseDown(r)})("mouseup",function(){return o.CHM(e),o.oxw().onDownButtonMouseUp()})("mouseleave",function(){return o.CHM(e),o.oxw().onDownButtonMouseLeave()})("keydown",function(r){return o.CHM(e),o.oxw().onDownButtonKeyDown(r)})("keyup",function(){return o.CHM(e),o.oxw().onDownButtonKeyUp()}),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Tol(e.incrementButtonClass),o.Q6J("ngClass",o.DdM(10,EF))("icon",e.incrementButtonIcon)("disabled",e.disabled),o.xp6(1),o.Tol(e.decrementButtonClass),o.Q6J("ngClass",o.DdM(11,TF))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function B6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",8),o.NdJ("mousedown",function(r){return o.CHM(e),o.oxw().onUpButtonMouseDown(r)})("mouseup",function(){return o.CHM(e),o.oxw().onUpButtonMouseUp()})("mouseleave",function(){return o.CHM(e),o.oxw().onUpButtonMouseLeave()})("keydown",function(r){return o.CHM(e),o.oxw().onUpButtonKeyDown(r)})("keyup",function(){return o.CHM(e),o.oxw().onUpButtonKeyUp()}),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.incrementButtonClass),o.Q6J("ngClass",o.DdM(5,EF))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function U6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",8),o.NdJ("mousedown",function(r){return o.CHM(e),o.oxw().onDownButtonMouseDown(r)})("mouseup",function(){return o.CHM(e),o.oxw().onDownButtonMouseUp()})("mouseleave",function(){return o.CHM(e),o.oxw().onDownButtonMouseLeave()})("keydown",function(r){return o.CHM(e),o.oxw().onDownButtonKeyDown(r)})("keyup",function(){return o.CHM(e),o.oxw().onDownButtonKeyUp()}),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.decrementButtonClass),o.Q6J("ngClass",o.DdM(5,TF))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const H6=function(n,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":n,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},j6={provide:$s,useExisting:(0,o.Gpc)(()=>IF),multi:!0};let IF=(()=>{class n{constructor(e,i){this.el=e,this.cd=i,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new o.vpe,this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onKeyDown=new o.vpe,this.onClear=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),i=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>i.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,Object.assign(Object.assign({},this.getOptions()),{useGrouping:!1}));return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let i=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(i){if("-"===i)return i;let r=+i;return isNaN(r)?null:r}return null}repeat(e,i,r){if(this.readonly)return;let s=i||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,i){let r=this.step*i,s=this.parseValue(this.input.nativeElement.value)||0,u=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(u).length||(this.updateInput(u,null,"spin",null),this.updateModel(e,u),this.handleOnInput(e,s,u))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let i=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,u=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(s.charAt(i-1))||e.preventDefault();break;case 39:this.isNumeralChar(s.charAt(i))||e.preventDefault();break;case 13:u=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(u),this.input.nativeElement.setAttribute("aria-valuenow",u),this.updateModel(e,u);break;case 8:if(e.preventDefault(),i===r){const h=s.charAt(i-1),{decimalCharIndex:p,decimalCharIndexWithoutPrefix:y}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(h)){const E=this.getDecimalLength(s);if(this._group.test(h))this._group.lastIndex=0,u=s.slice(0,i-2)+s.slice(i-1);else if(this._decimal.test(h))this._decimal.lastIndex=0,E?this.input.nativeElement.setSelectionRange(i-1,i-1):u=s.slice(0,i-1)+s.slice(i);else if(p>0&&i>p){const I=this.isDecimalMode()&&(this.minFractionDigits||0)<E?"":"0";u=s.slice(0,i-1)+I+s.slice(i)}else 1===y?(u=s.slice(0,i-1)+"0"+s.slice(i),u=this.parseValue(u)>0?u:""):u=s.slice(0,i-1)+s.slice(i)}this.updateValue(e,u,null,"delete-single")}else u=this.deleteRange(s,i,r),this.updateValue(e,u,null,"delete-range");break;case 46:if(e.preventDefault(),i===r){const h=s.charAt(i),{decimalCharIndex:p,decimalCharIndexWithoutPrefix:y}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(h)){const E=this.getDecimalLength(s);if(this._group.test(h))this._group.lastIndex=0,u=s.slice(0,i)+s.slice(i+2);else if(this._decimal.test(h))this._decimal.lastIndex=0,E?this.input.nativeElement.setSelectionRange(i+1,i+1):u=s.slice(0,i)+s.slice(i+1);else if(p>0&&i>p){const I=this.isDecimalMode()&&(this.minFractionDigits||0)<E?"":"0";u=s.slice(0,i)+I+s.slice(i+1)}else 1===y?(u=s.slice(0,i)+"0"+s.slice(i+1),u=this.parseValue(u)>0?u:""):u=s.slice(0,i)+s.slice(i+1)}this.updateValue(e,u,null,"delete-back-single")}else u=this.deleteRange(s,i,r),this.updateValue(e,u,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let i=e.which||e.keyCode,r=String.fromCharCode(i);const s=this.isDecimalSign(r),u=this.isMinusSign(r);(48<=i&&i<=57||u||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:u})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let i=(e.clipboardData||window.clipboardData).getData("Text");if(i){let r=this.parseValue(i);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let i=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:i,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){const i=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const u=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:i,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:u}}insert(e,i,r={isDecimalSign:!1,isMinusSign:!1}){const s=i.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let u=this.input.nativeElement.selectionStart,h=this.input.nativeElement.selectionEnd,p=this.input.nativeElement.value.trim();const{decimalCharIndex:y,minusCharIndex:E,suffixCharIndex:I,currencyCharIndex:M}=this.getCharIndexes(p);let P;if(r.isMinusSign)0===u&&(P=p,(-1===E||0!==h)&&(P=this.insertText(p,i,0,h)),this.updateValue(e,P,i,"insert"));else if(r.isDecimalSign)y>0&&u===y?this.updateValue(e,p,i,"insert"):(y>u&&y<h||-1===y&&this.maxFractionDigits)&&(P=this.insertText(p,i,u,h),this.updateValue(e,P,i,"insert"));else{const B=this.numberFormat.resolvedOptions().maximumFractionDigits,Q=u!==h?"range-insert":"insert";if(y>0&&u>y){if(u+i.length-(y+1)<=B){const we=M>=u?M-1:I>=u?I:p.length;P=p.slice(0,u)+i+p.slice(u+i.length,we)+p.slice(we),this.updateValue(e,P,i,Q)}}else P=this.insertText(p,i,u,h),this.updateValue(e,P,i,Q)}}insertText(e,i,r,s){if(2===("."===i?i:i.split(".")).length){const h=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,h>0?e.slice(0,r)+this.formatValue(i)+e.slice(s):e||this.formatValue(i)}return s-r===e.length?this.formatValue(i):0===r?i+e.slice(s):s===e.length?e.slice(0,r)+i:e.slice(0,r)+i+e.slice(s)}deleteRange(e,i,r){let s;return s=r-i===e.length?"":0===i?e.slice(r):r===e.length?e.slice(0,i):e.slice(0,i)+e.slice(r),s}initCursor(){let e=this.input.nativeElement.selectionStart,i=this.input.nativeElement.value,r=i.length,s=null,u=(this.prefixChar||"").length;i=i.replace(this._prefix,""),e-=u;let h=i.charAt(e);if(this.isNumeralChar(h))return e+u;let p=e-1;for(;p>=0;){if(h=i.charAt(p),this.isNumeralChar(h)){s=p+u;break}p--}if(null!==s)this.input.nativeElement.setSelectionRange(s+1,s+1);else{for(p=e;p<r;){if(h=i.charAt(p),this.isNumeralChar(h)){s=p+u;break}p++}null!==s&&this.input.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,i,r,s){let u=this.input.nativeElement.value,h=null;null!=i&&(h=this.parseValue(i),h=h||this.allowEmpty?h:0,this.updateInput(h,r,s,i),this.handleOnInput(e,u,h))}handleOnInput(e,i,r){this.isValueChanged(i,r)&&this.onInput.emit({originalEvent:e,value:r})}isValueChanged(e,i){return null===i&&null!==e||null!=i&&i!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,i,r,s){i=i||"";let u=this.input.nativeElement.value,h=this.formatValue(e),p=u.length;if(h!==s&&(h=this.concatValues(h,s)),0===p){this.input.nativeElement.value=h,this.input.nativeElement.setSelectionRange(0,0);const E=this.initCursor()+i.length;this.input.nativeElement.setSelectionRange(E,E)}else{let y=this.input.nativeElement.selectionStart,E=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<h.length)return;this.input.nativeElement.value=h;let I=h.length;if("range-insert"===r){const M=this.parseValue((u||"").slice(0,y)),B=(null!==M?M.toString():"").split("").join(`(${this.groupChar})?`),Q=new RegExp(B,"g");Q.test(h);const we=i.split("").join(`(${this.groupChar})?`),et=new RegExp(we,"g");et.test(h.slice(Q.lastIndex)),E=Q.lastIndex+et.lastIndex,this.input.nativeElement.setSelectionRange(E,E)}else if(I===p)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(E+1,E+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(E-1,E-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(E,E);else if("delete-back-single"===r){let M=u.charAt(E-1),P=u.charAt(E),B=p-I,Q=this._group.test(P);Q&&1===B?E+=1:!Q&&this.isNumeralChar(M)&&(E+=-1*B+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(E,E)}else if("-"===u&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const P=this.initCursor()+i.length+1;this.input.nativeElement.setSelectionRange(P,P)}else E+=I-p,this.input.nativeElement.setSelectionRange(E,E)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,i){if(e&&i){let r=i.search(this._decimal);return this._decimal.lastIndex=0,-1!==r?e.split(this._decimal)[0]+i.slice(r):e}return e}getDecimalLength(e){if(e){const i=e.split(this._decimal);if(2===i.length)return i[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let i=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(i),this.input.nativeElement.setAttribute("aria-valuenow",i),this.updateModel(e,i),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,i){this.value!==i&&(this.value=i,this.onModelChange(i)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-inputNumber"]],viewQuery:function(e,i){if(1&e&&o.Gf(F6,5),2&e){let r;o.iGM(r=o.CRH())&&(i.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused)("p-inputnumber-clearable",i.showClear&&"vertical"!=i.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[o._Bn([j6]),o.TTD],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,i){1&e&&(o.TgZ(0,"span",0)(1,"input",1,2),o.NdJ("input",function(s){return i.onUserInput(s)})("keydown",function(s){return i.onInputKeyDown(s)})("keypress",function(s){return i.onInputKeyPress(s)})("paste",function(s){return i.onPaste(s)})("click",function(){return i.onInputClick()})("focus",function(s){return i.onInputFocus(s)})("blur",function(s){return i.onInputBlur(s)}),o.qZA(),o.YNc(3,L6,1,0,"i",3),o.YNc(4,V6,3,12,"span",4),o.YNc(5,B6,1,6,"button",5),o.YNc(6,U6,1,6,"button",5),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.kEZ(28,H6,i.showButtons&&"stacked"===i.buttonLayout,i.showButtons&&"horizontal"===i.buttonLayout,i.showButtons&&"vertical"===i.buttonLayout))("ngStyle",i.style),o.xp6(1),o.Tol(i.inputStyleClass),o.Q6J("ngClass","p-inputnumber-input")("ngStyle",i.inputStyle)("value",i.formattedValue())("disabled",i.disabled)("readonly",i.readonly),o.uIk("placeholder",i.placeholder)("title",i.title)("id",i.inputId)("size",i.size)("name",i.name)("autocomplete",i.autocomplete)("maxlength",i.maxlength)("tabindex",i.tabindex)("aria-label",i.ariaLabel)("aria-required",i.ariaRequired)("required",i.required)("min",i.min)("max",i.max),o.xp6(2),o.Q6J("ngIf","vertical"!=i.buttonLayout&&i.showClear&&i.value),o.xp6(1),o.Q6J("ngIf",i.showButtons&&"stacked"===i.buttonLayout),o.xp6(1),o.Q6J("ngIf",i.showButtons&&"stacked"!==i.buttonLayout),o.xp6(1),o.Q6J("ngIf",i.showButtons&&"stacked"!==i.buttonLayout))},directives:[$n,Dr,P6,fn,CF],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),jM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi,bF,I0]]}),n})();function G6(n,t){1&n&&o.GkF(0)}const GM=function(n){return{$implicit:n}};function z6(n,t){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,G6,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",o.VKq(2,GM,e.paginatorState))}}function $6(n,t){if(1&n&&(o.TgZ(0,"span",17),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Oqu(e.currentPageReport)}}const tS=function(n){return{"p-disabled":n}};function q6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",18),o.NdJ("click",function(r){return o.CHM(e),o.oxw(2).changePageToFirst(r)}),o._UZ(1,"span",19),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("disabled",e.isFirstPage()||e.empty())("ngClass",o.VKq(2,tS,e.isFirstPage()||e.empty()))}}const W6=function(n){return{"p-highlight":n}};function Z6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",22),o.NdJ("click",function(r){const u=o.CHM(e).$implicit;return o.oxw(3).onPageLinkClick(r,u-1)}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(3);o.Q6J("ngClass",o.VKq(2,W6,e-1==i.getPage())),o.xp6(1),o.Oqu(e)}}function K6(n,t){if(1&n&&(o.TgZ(0,"span",20),o.YNc(1,Z6,2,4,"button",21),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",e.pageLinks)}}function Y6(n,t){if(1&n&&o._uU(0),2&n){const e=o.oxw(3);o.Oqu(e.currentPageReport)}}function Q6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-dropdown",23),o.NdJ("onChange",function(r){return o.CHM(e),o.oxw(2).onPageDropdownChange(r)}),o.YNc(1,Y6,1,1,"ng-template",24),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function J6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(r){return o.CHM(e),o.oxw(2).changePageToLast(r)}),o._UZ(1,"span",26),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("disabled",e.isLastPage()||e.empty())("ngClass",o.VKq(2,tS,e.isLastPage()||e.empty()))}}function X6(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-inputNumber",27),o.NdJ("ngModelChange",function(r){return o.CHM(e),o.oxw(2).changePage(r-1)}),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("ngModel",e.currentPage())("disabled",e.empty())}}function eG(n,t){1&n&&o.GkF(0)}function tG(n,t){if(1&n&&o.YNc(0,eG,1,0,"ng-container",16),2&n){const e=t.$implicit,i=o.oxw(4);o.Q6J("ngTemplateOutlet",i.dropdownItemTemplate)("ngTemplateOutletContext",o.VKq(2,GM,e))}}function nG(n,t){1&n&&(o.ynx(0),o.YNc(1,tG,1,4,"ng-template",30),o.BQk())}function iG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-dropdown",28),o.NdJ("ngModelChange",function(r){return o.CHM(e),o.oxw(2).rows=r})("onChange",function(r){return o.CHM(e),o.oxw(2).onRppChange(r)}),o.YNc(1,nG,2,0,"ng-container",29),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),o.xp6(1),o.Q6J("ngIf",e.dropdownItemTemplate)}}function rG(n,t){1&n&&o.GkF(0)}function sG(n,t){if(1&n&&(o.TgZ(0,"div",31),o.YNc(1,rG,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",o.VKq(2,GM,e.paginatorState))}}function oG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",1),o.YNc(1,z6,2,4,"div",2),o.YNc(2,$6,2,1,"span",3),o.YNc(3,q6,2,4,"button",4),o.TgZ(4,"button",5),o.NdJ("click",function(r){return o.CHM(e),o.oxw().changePageToPrev(r)}),o._UZ(5,"span",6),o.qZA(),o.YNc(6,K6,2,1,"span",7),o.YNc(7,Q6,2,5,"p-dropdown",8),o.TgZ(8,"button",9),o.NdJ("click",function(r){return o.CHM(e),o.oxw().changePageToNext(r)}),o._UZ(9,"span",10),o.qZA(),o.YNc(10,J6,2,4,"button",11),o.YNc(11,X6,1,2,"p-inputNumber",12),o.YNc(12,iG,2,6,"p-dropdown",13),o.YNc(13,sG,2,4,"div",14),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.styleClass),o.Q6J("ngStyle",e.style)("ngClass","p-paginator p-component"),o.xp6(1),o.Q6J("ngIf",e.templateLeft),o.xp6(1),o.Q6J("ngIf",e.showCurrentPageReport),o.xp6(1),o.Q6J("ngIf",e.showFirstLastIcon),o.xp6(1),o.Q6J("disabled",e.isFirstPage()||e.empty())("ngClass",o.VKq(17,tS,e.isFirstPage()||e.empty())),o.xp6(2),o.Q6J("ngIf",e.showPageLinks),o.xp6(1),o.Q6J("ngIf",e.showJumpToPageDropdown),o.xp6(1),o.Q6J("disabled",e.isLastPage()||e.empty())("ngClass",o.VKq(19,tS,e.isLastPage()||e.empty())),o.xp6(2),o.Q6J("ngIf",e.showFirstLastIcon),o.xp6(1),o.Q6J("ngIf",e.showJumpToPageInput),o.xp6(1),o.Q6J("ngIf",e.rowsPerPageOptions),o.xp6(1),o.Q6J("ngIf",e.templateRight)}}let aG=(()=>{class n{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new o.vpe,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),i=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-i/2)),s=Math.min(e-1,r+i-1);return r=Math.max(0,r-(this.pageLinkSize-(s-r+1))),[r,s]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let s=e[0];s<=r;s++)this.pageLinks.push(s+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let s=0;s<this.getPageCount();s++)this.pageItems.push({label:String(s+1),value:s})}}changePage(e){var i=this.getPageCount();if(e>=0&&e<i){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:i};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,i){this.changePage(i),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[o.TTD],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,i){1&e&&o.YNc(0,oG,14,21,"div",0),2&e&&o.Q6J("ngIf",!!i.alwaysShow||i.pageLinks&&i.pageLinks.length>1)},directives:[wF,IF,fn,Dr,$n,to,g0,Tn,gM,w0,Yc],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),n})(),lG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi,HM,jM,ZI,xl,jy],HM,jM,ZI,xl]}),n})();function uG(n,t){if(1&n&&o._UZ(0,"span",8),2&n){const e=o.oxw(2).$implicit;o.Tol(e.icon),o.Q6J("ngClass","p-button-icon p-button-icon-left")}}function cG(n,t){if(1&n&&(o.ynx(0),o.YNc(1,uG,1,3,"span",6),o.TgZ(2,"span",7),o._uU(3),o.qZA(),o.BQk()),2&n){const e=o.oxw().$implicit,i=o.oxw();o.xp6(1),o.Q6J("ngIf",e.icon),o.xp6(2),o.Oqu(i.getOptionLabel(e))}}function dG(n,t){1&n&&o.GkF(0)}const hG=function(n,t){return{$implicit:n,index:t}};function fG(n,t){if(1&n&&o.YNc(0,dG,1,0,"ng-container",9),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw();o.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",o.WLB(2,hG,i,r))}}const pG=function(n,t,e){return{"p-highlight":n,"p-disabled":t,"p-button-icon-only":e}};function gG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2,3),o.NdJ("click",function(r){const s=o.CHM(e),u=s.$implicit,h=s.index;return o.oxw().onItemClick(r,u,h)})("keydown.enter",function(r){const s=o.CHM(e),u=s.$implicit,h=s.index;return o.oxw().onItemClick(r,u,h)})("blur",function(){return o.CHM(e),o.oxw().onBlur()}),o.YNc(2,cG,4,2,"ng-container",4),o.YNc(3,fG,1,5,"ng-template",null,5,o.W1O),o.qZA()}if(2&n){const e=t.$implicit,i=o.MAs(4),r=o.oxw();o.Tol(e.styleClass),o.Q6J("ngClass",o.kEZ(10,pG,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),o.uIk("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),o.xp6(2),o.Q6J("ngIf",!r.itemTemplate)("ngIfElse",i)}}const mG={provide:$s,useExisting:(0,o.Gpc)(()=>_G),multi:!0};let _G=(()=>{class n{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new o.vpe,this.onChange=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?at.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?at.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?at.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,i,r){if(!this.disabled&&!this.isOptionDisabled(i)){if(this.multiple)this.isSelected(i)?this.removeOption(i):this.value=[...this.value||[],this.getOptionValue(i)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let s=this.getOptionValue(i);this.value!==s&&(this.value=this.getOptionValue(i),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:i,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(i=>!at.equals(i,this.getOptionValue(e),this.dataKey))}isSelected(e){let i=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(at.equals(s,r,this.dataKey)){i=!0;break}}else i=at.equals(this.getOptionValue(e),this.value,this.dataKey);return i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-selectButton"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,o.Rgc,5),2&e){let s;o.iGM(s=o.CRH())&&(i.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[o._Bn([mG])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,gG,5,14,"div",1),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",i.style),o.xp6(1),o.Q6J("ngForOf",i.options))},directives:[$n,Dr,Tn,g0,fn,to],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),n})(),yG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi,jy]]}),n})();const vG=function(n,t,e){return{"p-checkbox-label-active":n,"p-disabled":t,"p-checkbox-label-focus":e}};function wG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"label",7),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw(),u=o.MAs(3);return s.onClick(r,u)}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("ngClass",o.kEZ(3,vG,null!=e.value,e.disabled,e.focused)),o.uIk("for",e.inputId),o.xp6(1),o.Oqu(e.label)}}const bG=function(n,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":n,"p-checkbox-focused":t}},CG=function(n,t,e){return{"p-highlight":n,"p-disabled":t,"p-focus":e}},EG={provide:$s,useExisting:(0,o.Gpc)(()=>TG),multi:!0};let TG=(()=>{class n{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,i){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,i.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[o._Bn([EG])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),o.NdJ("keyup",function(u){return i.onKeyup(u)})("keydown",function(u){return i.onKeydown(u)})("focus",function(){return i.onFocus()})("blur",function(){return i.onBlur()}),o.qZA()(),o.TgZ(4,"div",4),o.NdJ("click",function(u){o.CHM(r);const h=o.MAs(3);return i.onClick(u,h)}),o._UZ(5,"span",5),o.qZA()(),o.YNc(6,wG,2,7,"label",6)}2&e&&(o.Tol(i.styleClass),o.Q6J("ngStyle",i.style)("ngClass",o.WLB(14,bG,i.disabled,i.focused)),o.xp6(2),o.Q6J("name",i.name)("readonly",i.readonly)("disabled",i.disabled),o.uIk("id",i.inputId)("tabindex",i.tabindex)("aria-labelledby",i.ariaLabelledBy),o.xp6(2),o.Q6J("ngClass",o.kEZ(17,CG,null!=i.value,i.disabled,i.focused)),o.uIk("aria-checked",!0===i.value),o.xp6(1),o.Q6J("ngClass",!0===i.value?i.checkboxTrueIcon:!1===i.value?i.checkboxFalseIcon:""),o.xp6(1),o.Q6J("ngIf",i.label))},directives:[Dr,$n,fn],encapsulation:2,changeDetection:0}),n})(),IG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi]]}),n})();const SG=["container"],DG=["inputfield"],xG=["contentWrapper"];function AG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"i",8),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).clear()}),o.qZA()}}function MG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(r){o.CHM(e),o.oxw();const s=o.MAs(1);return o.oxw().onButtonClick(r,s)}),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("icon",e.icon)("disabled",e.disabled),o.uIk("aria-label",e.iconAriaLabel)}}function kG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"input",4,5),o.NdJ("focus",function(r){return o.CHM(e),o.oxw().onInputFocus(r)})("keydown",function(r){return o.CHM(e),o.oxw().onInputKeydown(r)})("click",function(){return o.CHM(e),o.oxw().onInputClick()})("blur",function(r){return o.CHM(e),o.oxw().onInputBlur(r)})("input",function(r){return o.CHM(e),o.oxw().onUserInput(r)}),o.qZA(),o.YNc(2,AG,1,0,"i",6),o.YNc(3,MG,1,3,"button",7)}if(2&n){const e=o.oxw();o.Tol(e.inputStyleClass),o.Q6J("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),o.uIk("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),o.xp6(2),o.Q6J("ngIf",e.showClear&&!e.disabled&&null!=e.value),o.xp6(1),o.Q6J("ngIf",e.showIcon)}}function RG(n,t){1&n&&o.GkF(0)}function OG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",30),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(4).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(4).onPrevButtonClick(r)}),o._UZ(1,"span",31),o.qZA()}}function PG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",32),o.NdJ("click",function(r){return o.CHM(e),o.oxw(4).switchToMonthView(r)})("keydown",function(r){return o.CHM(e),o.oxw(4).onContainerButtonKeydown(r)}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.Q6J("disabled",i.switchViewButtonDisabled()),o.xp6(1),o.hij(" ",i.getMonthName(e.month)," ")}}function NG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(r){return o.CHM(e),o.oxw(4).switchToYearView(r)})("keydown",function(r){return o.CHM(e),o.oxw(4).onContainerButtonKeydown(r)}),o._uU(1),o.qZA()}if(2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.Q6J("disabled",i.switchViewButtonDisabled()),o.xp6(1),o.hij(" ",i.getYear(e)," ")}}function FG(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(5);o.xp6(1),o.AsE("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function LG(n,t){1&n&&o.GkF(0)}const SF=function(n){return{$implicit:n}};function VG(n,t){if(1&n&&(o.TgZ(0,"span",34),o.YNc(1,FG,2,2,"ng-container",13),o.YNc(2,LG,1,0,"ng-container",35),o.qZA()),2&n){const e=o.oxw(4);o.xp6(1),o.Q6J("ngIf",!e.decadeTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",o.VKq(3,SF,e.yearPickerValues))}}function BG(n,t){if(1&n&&(o.TgZ(0,"th",41)(1,"span"),o._uU(2),o.qZA()()),2&n){const e=o.oxw(5);o.xp6(2),o.Oqu(e.getTranslation("weekHeader"))}}function UG(n,t){if(1&n&&(o.TgZ(0,"th",42)(1,"span"),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.Oqu(e)}}function HG(n,t){if(1&n&&(o.TgZ(0,"td",45)(1,"span",46),o._uU(2),o.qZA()()),2&n){const e=o.oxw().index,i=o.oxw(2).$implicit;o.xp6(2),o.hij(" ",i.weekNumbers[e]," ")}}function jG(n,t){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const e=o.oxw(2).$implicit;o.xp6(1),o.Oqu(e.day)}}function GG(n,t){1&n&&o.GkF(0)}const zG=function(n,t){return{"p-highlight":n,"p-disabled":t}};function $G(n,t){if(1&n){const e=o.EpF();o.ynx(0),o.TgZ(1,"span",48),o.NdJ("click",function(r){o.CHM(e);const s=o.oxw().$implicit;return o.oxw(6).onDateSelect(r,s)})("keydown",function(r){o.CHM(e);const s=o.oxw().$implicit,u=o.oxw(3).index;return o.oxw(3).onDateCellKeydown(r,s,u)}),o.YNc(2,jG,2,1,"ng-container",13),o.YNc(3,GG,1,0,"ng-container",35),o.qZA(),o.BQk()}if(2&n){const e=o.oxw().$implicit,i=o.oxw(6);o.xp6(1),o.Q6J("ngClass",o.WLB(4,zG,i.isSelected(e),!e.selectable)),o.xp6(1),o.Q6J("ngIf",!i.dateTemplate),o.xp6(1),o.Q6J("ngTemplateOutlet",i.dateTemplate)("ngTemplateOutletContext",o.VKq(7,SF,e))}}const qG=function(n,t){return{"p-datepicker-other-month":n,"p-datepicker-today":t}};function WG(n,t){if(1&n&&(o.TgZ(0,"td",47),o.YNc(1,$G,4,9,"ng-container",13),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(6);o.Q6J("ngClass",o.WLB(2,qG,e.otherMonth,e.today)),o.xp6(1),o.Q6J("ngIf",!e.otherMonth||i.showOtherMonths)}}function ZG(n,t){if(1&n&&(o.TgZ(0,"tr"),o.YNc(1,HG,3,1,"td",43),o.YNc(2,WG,2,5,"td",44),o.qZA()),2&n){const e=t.$implicit,i=o.oxw(5);o.xp6(1),o.Q6J("ngIf",i.showWeek),o.xp6(1),o.Q6J("ngForOf",e)}}function KG(n,t){if(1&n&&(o.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),o.YNc(4,BG,3,1,"th",38),o.YNc(5,UG,3,1,"th",39),o.qZA()(),o.TgZ(6,"tbody"),o.YNc(7,ZG,3,2,"tr",40),o.qZA()()()),2&n){const e=o.oxw().$implicit,i=o.oxw(3);o.xp6(4),o.Q6J("ngIf",i.showWeek),o.xp6(1),o.Q6J("ngForOf",i.weekDays),o.xp6(2),o.Q6J("ngForOf",e.dates)}}function YG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",20)(1,"div",21),o.YNc(2,OG,2,0,"button",22),o.TgZ(3,"div",23),o.YNc(4,PG,2,2,"button",24),o.YNc(5,NG,2,2,"button",25),o.YNc(6,VG,3,5,"span",26),o.qZA(),o.TgZ(7,"button",27),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(3).onNextButtonClick(r)}),o._UZ(8,"span",28),o.qZA()(),o.YNc(9,KG,8,3,"div",29),o.qZA()}if(2&n){const e=t.index,i=o.oxw(3);o.xp6(2),o.Q6J("ngIf",0===e),o.xp6(2),o.Q6J("ngIf","date"===i.currentView),o.xp6(1),o.Q6J("ngIf","year"!==i.currentView),o.xp6(1),o.Q6J("ngIf","year"===i.currentView),o.xp6(1),o.Udp("display",1===i.numberOfMonths||e===i.numberOfMonths-1?"inline-flex":"none"),o.xp6(2),o.Q6J("ngIf","date"===i.currentView)}}const DF=function(n){return{"p-highlight":n}};function QG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",51),o.NdJ("click",function(r){const u=o.CHM(e).index;return o.oxw(4).onMonthSelect(r,u)})("keydown",function(r){const u=o.CHM(e).index;return o.oxw(4).onMonthCellKeydown(r,u)}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=t.index,r=o.oxw(4);o.Q6J("ngClass",o.VKq(2,DF,r.isMonthSelected(i))),o.xp6(1),o.hij(" ",e," ")}}function JG(n,t){if(1&n&&(o.TgZ(0,"div",49),o.YNc(1,QG,2,4,"span",50),o.qZA()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",e.monthPickerValues())}}function XG(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",54),o.NdJ("click",function(r){const u=o.CHM(e).$implicit;return o.oxw(4).onYearSelect(r,u)})("keydown",function(r){const u=o.CHM(e).$implicit;return o.oxw(4).onYearCellKeydown(r,u)}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(4);o.Q6J("ngClass",o.VKq(2,DF,i.isYearSelected(e))),o.xp6(1),o.hij(" ",e," ")}}function ez(n,t){if(1&n&&(o.TgZ(0,"div",52),o.YNc(1,XG,2,4,"span",53),o.qZA()),2&n){const e=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",e.yearPickerValues())}}function tz(n,t){if(1&n&&(o.ynx(0),o.TgZ(1,"div",16),o.YNc(2,YG,10,7,"div",17),o.qZA(),o.YNc(3,JG,2,1,"div",18),o.YNc(4,ez,2,1,"div",19),o.BQk()),2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",e.months),o.xp6(1),o.Q6J("ngIf","month"===e.currentView),o.xp6(1),o.Q6J("ngIf","year"===e.currentView)}}function nz(n,t){1&n&&(o.ynx(0),o._uU(1,"0"),o.BQk())}function iz(n,t){1&n&&(o.ynx(0),o._uU(1,"0"),o.BQk())}function rz(n,t){if(1&n&&(o.TgZ(0,"div",60)(1,"span"),o._uU(2),o.qZA()()),2&n){const e=o.oxw(3);o.xp6(2),o.Oqu(e.timeSeparator)}}function sz(n,t){1&n&&(o.ynx(0),o._uU(1,"0"),o.BQk())}function oz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",65)(1,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(3).incrementSecond(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(3).incrementSecond(r)})("mousedown",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseDown(r,2,1)})("mouseup",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(3).onTimePickerElementMouseLeave()}),o._UZ(2,"span",58),o.qZA(),o.TgZ(3,"span"),o.YNc(4,sz,2,0,"ng-container",13),o._uU(5),o.qZA(),o.TgZ(6,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(3).decrementSecond(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(3).decrementSecond(r)})("mousedown",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseDown(r,2,-1)})("mouseup",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(3).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(3).onTimePickerElementMouseLeave()}),o._UZ(7,"span",59),o.qZA()()}if(2&n){const e=o.oxw(3);o.xp6(4),o.Q6J("ngIf",e.currentSecond<10),o.xp6(1),o.Oqu(e.currentSecond)}}function az(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",66)(1,"button",67),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(3).toggleAMPM(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(3).toggleAMPM(r)}),o._UZ(2,"span",58),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA(),o.TgZ(5,"button",67),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(3).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(3).toggleAMPM(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(3).toggleAMPM(r)}),o._UZ(6,"span",59),o.qZA()()}if(2&n){const e=o.oxw(3);o.xp6(4),o.Oqu(e.pm?"PM":"AM")}}function lz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",55)(1,"div",56)(2,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(2).incrementHour(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(2).incrementHour(r)})("mousedown",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseDown(r,0,1)})("mouseup",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(2).onTimePickerElementMouseLeave()}),o._UZ(3,"span",58),o.qZA(),o.TgZ(4,"span"),o.YNc(5,nz,2,0,"ng-container",13),o._uU(6),o.qZA(),o.TgZ(7,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(2).decrementHour(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(2).decrementHour(r)})("mousedown",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseDown(r,0,-1)})("mouseup",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(2).onTimePickerElementMouseLeave()}),o._UZ(8,"span",59),o.qZA()(),o.TgZ(9,"div",60)(10,"span"),o._uU(11),o.qZA()(),o.TgZ(12,"div",61)(13,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(2).incrementMinute(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(2).incrementMinute(r)})("mousedown",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseDown(r,1,1)})("mouseup",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(2).onTimePickerElementMouseLeave()}),o._UZ(14,"span",58),o.qZA(),o.TgZ(15,"span"),o.YNc(16,iz,2,0,"ng-container",13),o._uU(17),o.qZA(),o.TgZ(18,"button",57),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("keydown.enter",function(r){return o.CHM(e),o.oxw(2).decrementMinute(r)})("keydown.space",function(r){return o.CHM(e),o.oxw(2).decrementMinute(r)})("mousedown",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseDown(r,1,-1)})("mouseup",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.enter",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("keyup.space",function(r){return o.CHM(e),o.oxw(2).onTimePickerElementMouseUp(r)})("mouseleave",function(){return o.CHM(e),o.oxw(2).onTimePickerElementMouseLeave()}),o._UZ(19,"span",59),o.qZA()(),o.YNc(20,rz,3,1,"div",62),o.YNc(21,oz,8,2,"div",63),o.YNc(22,az,7,1,"div",64),o.qZA()}if(2&n){const e=o.oxw(2);o.xp6(5),o.Q6J("ngIf",e.currentHour<10),o.xp6(1),o.Oqu(e.currentHour),o.xp6(5),o.Oqu(e.timeSeparator),o.xp6(5),o.Q6J("ngIf",e.currentMinute<10),o.xp6(1),o.Oqu(e.currentMinute),o.xp6(3),o.Q6J("ngIf",e.showSeconds),o.xp6(1),o.Q6J("ngIf",e.showSeconds),o.xp6(1),o.Q6J("ngIf","12"==e.hourFormat)}}const xF=function(n){return[n]};function uz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",68)(1,"button",69),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(2).onTodayButtonClick(r)}),o.qZA(),o.TgZ(2,"button",69),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw(2).onContainerButtonKeydown(r)})("click",function(r){return o.CHM(e),o.oxw(2).onClearButtonClick(r)}),o.qZA()()}if(2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("label",e.getTranslation("today"))("ngClass",o.VKq(4,xF,e.todayButtonStyleClass)),o.xp6(1),o.Q6J("label",e.getTranslation("clear"))("ngClass",o.VKq(6,xF,e.clearButtonStyleClass))}}function cz(n,t){1&n&&o.GkF(0)}const dz=function(n,t,e,i,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":n,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":i,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},AF=function(n,t){return{showTransitionParams:n,hideTransitionParams:t}},hz=function(n){return{value:"visibleTouchUI",params:n}},fz=function(n){return{value:"visible",params:n}};function pz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",10,11),o.NdJ("@overlayAnimation.start",function(r){return o.CHM(e),o.oxw().onOverlayAnimationStart(r)})("@overlayAnimation.done",function(r){return o.CHM(e),o.oxw().onOverlayAnimationDone(r)})("click",function(r){return o.CHM(e),o.oxw().onOverlayClick(r)}),o.Hsn(2),o.YNc(3,RG,1,0,"ng-container",12),o.YNc(4,tz,5,3,"ng-container",13),o.YNc(5,lz,23,8,"div",14),o.YNc(6,uz,3,8,"div",15),o.Hsn(7,1),o.YNc(8,cz,1,0,"ng-container",12),o.qZA()}if(2&n){const e=o.oxw();o.Tol(e.panelStyleClass),o.Q6J("ngStyle",e.panelStyle)("ngClass",o.HTZ(11,dz,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?o.VKq(21,hz,o.WLB(18,AF,e.showTransitionOptions,e.hideTransitionOptions)):o.VKq(26,fz,o.WLB(23,AF,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),o.xp6(3),o.Q6J("ngTemplateOutlet",e.headerTemplate),o.xp6(1),o.Q6J("ngIf",!e.timeOnly),o.xp6(1),o.Q6J("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),o.xp6(1),o.Q6J("ngIf",e.showButtonBar),o.xp6(2),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}const gz=[[["p-header"]],[["p-footer"]]],mz=function(n,t,e,i){return{"p-calendar":!0,"p-calendar-w-btn":n,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":i}},_z=["p-header","p-footer"],yz={provide:$s,useExisting:(0,o.Gpc)(()=>vz),multi:!0};let vz=(()=>{class n{constructor(e,i,r,s,u,h){this.el=e,this.renderer=i,this.cd=r,this.zone=s,this.config=u,this.overlayService=h,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new o.vpe,this.onBlur=new o.vpe,this.onClose=new o.vpe,this.onSelect=new o.vpe,this.onClear=new o.vpe,this.onInput=new o.vpe,this.onTodayClick=new o.vpe,this.onClearClick=new o.vpe,this.onMonthChange=new o.vpe,this.onYearChange=new o.vpe,this.onClickOutside=new o.vpe,this.onShow=new o.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(p,y){return"12"==this.hourFormat?12===p?y?12:0:y?p+12:p:p}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const i=e||new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.initTime(i),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const i=e.split(":"),r=parseInt(i[0]),s=parseInt(i[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=Va();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=fe.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,i){this.yearOptions=[];for(let r=e;r<=i;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),i=this.getTranslation(yr.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(i[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let i=0;i<=11;i++)e.push(this.config.getTranslation("monthNamesShort")[i]);return e}yearPickerValues(){let e=[],i=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(i+r);return e}createMonths(e,i){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,u=i;s>11&&(s=s%11-1,u=i+1),this.months.push(this.createMonth(s,u))}}getWeekNumber(e){let i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));let r=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((r-i.getTime())/864e5)/7)+1}createMonth(e,i){let r=[],s=this.getFirstDayOfMonthIndex(e,i),u=this.getDaysCountInMonth(e,i),h=this.getDaysCountInPrevMonth(e,i),p=1,y=new Date,E=[],I=Math.ceil((u+s)/7);for(let M=0;M<I;M++){let P=[];if(0==M){for(let Q=h-s+1;Q<=h;Q++){let we=this.getPreviousMonthAndYear(e,i);P.push({day:Q,month:we.month,year:we.year,otherMonth:!0,today:this.isToday(y,Q,we.month,we.year),selectable:this.isSelectable(Q,we.month,we.year,!0)})}let B=7-P.length;for(let Q=0;Q<B;Q++)P.push({day:p,month:e,year:i,today:this.isToday(y,p,e,i),selectable:this.isSelectable(p,e,i,!1)}),p++}else for(let B=0;B<7;B++){if(p>u){let Q=this.getNextMonthAndYear(e,i);P.push({day:p-u,month:Q.month,year:Q.year,otherMonth:!0,today:this.isToday(y,p-u,Q.month,Q.year),selectable:this.isSelectable(p-u,Q.month,Q.year,!0)})}else P.push({day:p,month:e,year:i,today:this.isToday(y,p,e,i),selectable:this.isSelectable(p,e,i,!1)});p++}this.showWeek&&E.push(this.getWeekNumber(new Date(P[0].year,P[0].month,P[0].day))),r.push(P)}return{month:e,year:i,dates:r,weekNumbers:E}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,i){!this.disabled&&i.selectable?(this.isMultipleSelection()&&this.isSelected(i)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,i)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(i)&&this.selectDate(i),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,i){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:i,day:1,selectable:!0}):(this.currentMonth=i,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,i){"year"===this.view?this.onDateSelect(e,{year:i,month:0,day:1,selectable:!0}):(this.currentYear=i,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let i=0;i<this.value.length;i++)e+=this.formatDateTime(this.value[i]),i!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let i=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?i=this.formatTime(e):(i=this.formatDate(e,this.getDateFormat()),this.showTime&&(i+=" "+this.formatTime(e)))),i}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let i=new Date(e.year,e.month,e.day);if(this.showTime&&(i.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),i.setMinutes(this.currentMinute),i.setSeconds(this.currentSecond)),this.minDate&&this.minDate>i&&(i=this.minDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.maxDate&&this.maxDate<i&&(i=this.maxDate,this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds()),this.isSingleSelection())this.updateModel(i);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,i]:[i]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&i.getTime()>=r.getTime()?s=i:(r=i,s=null),this.updateModel([r,s])}else this.updateModel([i,null]);this.onSelect.emit(i)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let i=null;this.value&&(i=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(i)}}getFirstDayOfMonthIndex(e,i){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(i);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,i){return 32-this.daylightSavingAdjust(new Date(i,e,32)).getDate()}getDaysCountInPrevMonth(e,i){let r=this.getPreviousMonthAndYear(e,i);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,i){let r,s;return 0===e?(r=11,s=i-1):(r=e-1,s=i),{month:r,year:s}}getNextMonthAndYear(e,i){let r,s;return 11===e?(r=0,s=i+1):(r=e+1,s=i),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let i=!1;for(let r of this.value)if(i=this.isDateEquals(r,e),i)break;return i}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getMonth()===e&&i.getFullYear()===this.currentYear}return!1}isYearSelected(e){if(this.isComparable()){let i=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&i.getFullYear()===e}return!1}isDateEquals(e,i){return!!(e&&e instanceof Date)&&e.getDate()===i.day&&e.getMonth()===i.month&&e.getFullYear()===i.year}isDateBetween(e,i,r){if(e&&i){let u=new Date(r.year,r.month,r.day);return e.getTime()<=u.getTime()&&i.getTime()>=u.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,i,r,s){return e.getDate()===i&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,i,r,s){let u=!0,h=!0,p=!0,y=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>i||this.minDate.getMonth()===i&&this.minDate.getDate()>e))&&(u=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<i||this.maxDate.getMonth()===i&&this.maxDate.getDate()<e))&&(h=!1),this.disabledDates&&(p=!this.isDateDisabled(e,i,r)),this.disabledDays&&(y=!this.isDayDisabled(e,i,r)),u&&h&&p&&y)}isDateDisabled(e,i,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===i&&s.getDate()===e)return!0;return!1}isDayDisabled(e,i,r){if(this.disabledDays){let u=new Date(r,i,e).getDay();return-1!==this.disabledDays.indexOf(u)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,i){this.overlayVisible?this.hideOverlay():(i.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(fe.getFocusableElements(this.contentViewChild.nativeElement).forEach(i=>i.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,i,r){const s=e.currentTarget,u=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let h=fe.index(u),p=u.parentElement.nextElementSibling;p?fe.hasClass(p.children[h].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(p.children[h].children[0].tabIndex="0",p.children[h].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let h=fe.index(u),p=u.parentElement.previousElementSibling;if(p){let y=p.children[h].children[0];fe.hasClass(y,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(y.tabIndex="0",y.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let h=u.previousElementSibling;if(h){let p=h.children[0];fe.hasClass(p,"p-disabled")||fe.hasClass(p.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(p.tabIndex="0",p.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let h=u.nextElementSibling;if(h){let p=h.children[0];fe.hasClass(p,"p-disabled")?this.navigateToMonth(!1,r):(p.tabIndex="0",p.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,u=fe.index(r);let h=s[40===e.which?u+3:u-3];h&&(h.tabIndex="0",h.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let h=r.previousElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let h=r.nextElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,i),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,i){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,u=fe.index(r);let h=s[40===e.which?u+2:u-2];h&&(h.tabIndex="0",h.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let h=r.previousElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let h=r.nextElementSibling;h?(h.tabIndex="0",h.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,i),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,i){if(e)if(1===this.numberOfMonths||0===i)this.navigationState={backward:!0},this.navBackward(event);else{let s=fe.find(this.contentViewChild.nativeElement.children[i-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),u=s[s.length-1];u.tabIndex="0",u.focus()}else if(1===this.numberOfMonths||i===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=fe.findSingle(this.contentViewChild.nativeElement.children[i+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?fe.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():fe.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let i;i=fe.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),i&&i.length>0&&(e=i[i.length-1])}else e=fe.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.currentView){let i=fe.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=fe.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");i.forEach(s=>s.tabIndex=-1),e=r||i[0],0===i.length&&fe.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(u=>u.tabIndex=-1)}else if("year"===this.currentView){let i=fe.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=fe.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");i.forEach(s=>s.tabIndex=-1),e=r||i[0],0===i.length&&fe.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(u=>u.tabIndex=-1)}else if(e=fe.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){let i=fe.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");e=i||fe.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{e.focus()},1),this.preventFocus=!1)}trapFocus(e){let i=fe.getFocusableElements(this.contentViewChild.nativeElement);if(i&&i.length>0)if(i[0].ownerDocument.activeElement){let r=i.indexOf(i[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)i[i.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else i[r-1].focus();else if(-1==r||r===i.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();i[0].focus()}else i[r+1].focus()}else i[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,i,r,s){let u=this.value;const h=this.convertTo24Hour(e,s);this.isRangeSelection()&&(u=this.value[1]||this.value[0]),this.isMultipleSelection()&&(u=this.value[this.value.length-1]);const p=u?u.toDateString():null;return!(this.minDate&&p&&this.minDate.toDateString()===p&&(this.minDate.getHours()>h||this.minDate.getHours()===h&&(this.minDate.getMinutes()>i||this.minDate.getMinutes()===i&&this.minDate.getSeconds()>r))||this.maxDate&&p&&this.maxDate.toDateString()===p&&(this.maxDate.getHours()<h||this.maxDate.getHours()===h&&(this.maxDate.getMinutes()<i||this.maxDate.getMinutes()===i&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,i,r){this.disabled||(this.repeat(e,null,i,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,i,r,s){let u=i||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},u),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let i=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?i=i<0?24+i:i:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),i=i<=0?12+i:i),this.validateTime(i,this.currentMinute,this.currentSecond,r)&&(this.currentHour=i,this.pm=r),e.preventDefault()}incrementMinute(e){let i=this.currentMinute+this.stepMinute;i=i>59?i-60:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}decrementMinute(e){let i=this.currentMinute-this.stepMinute;i=i<0?60+i:i,this.validateTime(this.currentHour,i,this.currentSecond,this.pm)&&(this.currentMinute=i),e.preventDefault()}incrementSecond(e){let i=this.currentSecond+this.stepSecond;i=i>59?i-60:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}decrementSecond(e){let i=this.currentSecond-this.stepSecond;i=i<0?60+i:i,this.validateTime(this.currentHour,this.currentMinute,i,this.pm)&&(this.currentSecond=i),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const i=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,i)&&(this.pm=i,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let i=e.target.value;try{let r=this.parseValueFromString(i);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch(r){this.updateModel(this.keepInvalid?i:null)}this.filled=null!=i&&i.length,this.onInput.emit(e)}isValidSelection(e){let i=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(i=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(i=e.length>1&&e[1]>e[0]),i}parseValueFromString(e){if(!e||0===e.trim().length)return null;let i;if(this.isSingleSelection())i=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);i=[];for(let s of r)i.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");i=[];for(let s=0;s<r.length;s++)i[s]=this.parseDateTime(r[s].trim())}return i}parseDateTime(e){let i,r=e.split(" ");if(this.timeOnly)i=new Date,this.populateTime(i,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let u="12"==this.hourFormat?r.pop():null,h=r.pop();i=this.parseDate(r.join(" "),s),this.populateTime(i,h,u)}else i=this.parseDate(e,s)}return i}populateTime(e,i,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(i);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&at.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let i=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=i.getMonth(),this.currentYear=i.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(i.getHours()),this.currentMinute=i.getMinutes(),this.currentSecond=i.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?Un.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Un.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Un.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):fe.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=fe.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=fe.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=fe.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",fe.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):fe.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),fe.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),fe.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(fe.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){document.body.removeChild(this.mask);let i,e=document.body.children;for(let r=0;r<e.length;r++)if(fe.hasClass(e[r],"p-datepicker-mask-scrollblocker")){i=!0;break}i||fe.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch(i){this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(yr.FIRST_DAY_OF_WEEK)}formatDate(e,i){if(!e)return"";let r;const s=E=>{const I=r+1<i.length&&i.charAt(r+1)===E;return I&&r++,I},u=(E,I,M)=>{let P=""+I;if(s(E))for(;P.length<M;)P="0"+P;return P},h=(E,I,M,P)=>s(E)?P[I]:M[I];let p="",y=!1;if(e)for(r=0;r<i.length;r++)if(y)"'"!==i.charAt(r)||s("'")?p+=i.charAt(r):y=!1;else switch(i.charAt(r)){case"d":p+=u("d",e.getDate(),2);break;case"D":p+=h("D",e.getDay(),this.getTranslation(yr.DAY_NAMES_SHORT),this.getTranslation(yr.DAY_NAMES));break;case"o":p+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":p+=u("m",e.getMonth()+1,2);break;case"M":p+=h("M",e.getMonth(),this.getTranslation(yr.MONTH_NAMES_SHORT),this.getTranslation(yr.MONTH_NAMES));break;case"y":p+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":p+=e.getTime();break;case"!":p+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?p+="'":y=!0;break;default:p+=i.charAt(r)}return p}formatTime(e){if(!e)return"";let i="",r=e.getHours(),s=e.getMinutes(),u=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),i+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,i+=":",i+=s<10?"0"+s:s,this.showSeconds&&(i+=":",i+=u<10?"0"+u:u),"12"==this.hourFormat&&(i+=e.getHours()>11?" PM":" AM"),i}parseTime(e){let i=e.split(":");if(i.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(i[0]),u=parseInt(i[1]),h=this.showSeconds?parseInt(i[2]):null;if(isNaN(s)||isNaN(u)||s>23||u>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(h)||h>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:u,second:h}}parseDate(e,i){if(null==i||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,u,B,h=0,p="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),y=-1,E=-1,I=-1,M=-1,P=!1,Q=it=>{let st=r+1<i.length&&i.charAt(r+1)===it;return st&&r++,st},we=it=>{let st=Q(it),At="@"===it?14:"!"===it?20:"y"===it&&st?4:"o"===it?3:2,tn=new RegExp("^\\d{"+("y"===it?At:1)+","+At+"}"),Jn=e.substring(h).match(tn);if(!Jn)throw"Missing number at position "+h;return h+=Jn[0].length,parseInt(Jn[0],10)},et=(it,st,At)=>{let Pt=-1,tn=Q(it)?At:st,Jn=[];for(let ji=0;ji<tn.length;ji++)Jn.push([ji,tn[ji]]);Jn.sort((ji,Zs)=>-(ji[1].length-Zs[1].length));for(let ji=0;ji<Jn.length;ji++){let Zs=Jn[ji][1];if(e.substr(h,Zs.length).toLowerCase()===Zs.toLowerCase()){Pt=Jn[ji][0],h+=Zs.length;break}}if(-1!==Pt)return Pt+1;throw"Unknown name at position "+h},nt=()=>{if(e.charAt(h)!==i.charAt(r))throw"Unexpected literal at position "+h;h++};for("month"===this.view&&(I=1),r=0;r<i.length;r++)if(P)"'"!==i.charAt(r)||Q("'")?nt():P=!1;else switch(i.charAt(r)){case"d":I=we("d");break;case"D":et("D",this.getTranslation(yr.DAY_NAMES_SHORT),this.getTranslation(yr.DAY_NAMES));break;case"o":M=we("o");break;case"m":E=we("m");break;case"M":E=et("M",this.getTranslation(yr.MONTH_NAMES_SHORT),this.getTranslation(yr.MONTH_NAMES));break;case"y":y=we("y");break;case"@":B=new Date(we("@")),y=B.getFullYear(),E=B.getMonth()+1,I=B.getDate();break;case"!":B=new Date((we("!")-this.ticksTo1970)/1e4),y=B.getFullYear(),E=B.getMonth()+1,I=B.getDate();break;case"'":Q("'")?nt():P=!0;break;default:nt()}if(h<e.length&&(u=e.substr(h),!/^\s+/.test(u)))throw"Extra/unparsed characters found in date: "+u;if(-1===y?y=(new Date).getFullYear():y<100&&(y+=(new Date).getFullYear()-(new Date).getFullYear()%100+(y<=p?0:-100)),M>-1)for(E=1,I=M;s=this.getDaysCountInMonth(y,E-1),!(I<=s);)E++,I-=s;if(B=this.daylightSavingAdjust(new Date(y,E-1,I)),B.getFullYear()!==y||B.getMonth()+1!==E||B.getDate()!==I)throw"Invalid date";return B}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let i=new Date,r={day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),otherMonth:i.getMonth()!==this.currentMonth||i.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let i=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<i.length;r++){let{breakpoint:s,numMonths:u}=i[r],h=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${u}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let p=u;p<this.numberOfMonths;p++)h+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${p+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${h}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",i=>{this.isOutsideClicked(i)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(i),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new dM(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return fe.hasClass(e.target,"p-datepicker-prev")||fe.hasClass(e.target,"p-datepicker-prev-icon")||fe.hasClass(e.target,"p-datepicker-next")||fe.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!fe.isAndroid()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Un.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(Ba),o.Y36(Wu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-calendar"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Yc,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(SG,5),o.Gf(DG,5),o.Gf(xG,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.inputfieldViewChild=r.first),o.iGM(r=o.CRH())&&(i.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,i){2&e&&o.ekj("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focus)("p-calendar-clearable",i.showClear&&!i.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[o._Bn([yz])],ngContentSelectors:_z,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,i){1&e&&(o.F$t(gz),o.TgZ(0,"span",0,1),o.YNc(2,kG,4,17,"ng-template",2),o.YNc(3,pz,9,28,"div",3),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.l5B(6,mz,i.showIcon,i.timeOnly,i.disabled,i.focus))("ngStyle",i.style),o.xp6(2),o.Q6J("ngIf",!i.inline),o.xp6(1),o.Q6J("ngIf",i.inline||i.overlayVisible))},directives:[$n,Dr,fn,CF,g0,to,Tn],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[ds("overlayAnimation",[Ho("visibleTouchUI",Ki({transform:"translate(-50%,-50%)",opacity:1})),dn("void => visible",[Ki({opacity:0,transform:"scaleY(0.8)"}),ao("{{showTransitionParams}}",Ki({opacity:1,transform:"*"}))]),dn("visible => void",[ao("{{hideTransitionParams}}",Ki({opacity:0}))]),dn("void => visibleTouchUI",[Ki({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),ao("{{showTransitionParams}}")]),dn("visibleTouchUI => void",[ao("{{hideTransitionParams}}",Ki({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),n})(),wz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi,I0,xl,jy],I0,xl]}),n})();const bz=["container"],Cz=["resizeHelper"],Ez=["reorderIndicatorUp"],Tz=["reorderIndicatorDown"],Iz=["wrapper"],Sz=["table"],Dz=["tableHeader"];function xz(n,t){if(1&n&&(o.TgZ(0,"div",14),o._UZ(1,"i"),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Tol("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function Az(n,t){1&n&&o.GkF(0)}function Mz(n,t){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,Az,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.captionTemplate)}}function kz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-paginator",17),o.NdJ("onPageChange",function(r){return o.CHM(e),o.oxw().onPageChange(r)}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function Rz(n,t){1&n&&o.GkF(0)}function Oz(n,t){1&n&&o.GkF(0)}function Pz(n,t){if(1&n&&o._UZ(0,"tbody",25),2&n){const e=o.oxw(2);o.Q6J("value",e.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",e.frozenBodyTemplate)("frozen",!0)}}function Nz(n,t){1&n&&o.GkF(0)}const bf=function(n){return{$implicit:n}};function Fz(n,t){if(1&n&&(o.TgZ(0,"tfoot",26),o.YNc(1,Nz,1,0,"ng-container",20),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.footerGroupedTemplate||e.footerTemplate)("ngTemplateOutletContext",o.VKq(2,bf,e.columns))}}function Lz(n,t){if(1&n&&(o.TgZ(0,"table",18,19),o.YNc(2,Rz,1,0,"ng-container",20),o.TgZ(3,"thead",21),o.YNc(4,Oz,1,0,"ng-container",20),o.qZA(),o.YNc(5,Pz,1,5,"tbody",22),o._UZ(6,"tbody",23),o.YNc(7,Fz,2,4,"tfoot",24),o.qZA()),2&n){const e=o.oxw();o.Q6J("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),o.uIk("id",e.id+"-table"),o.xp6(2),o.Q6J("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",o.VKq(12,bf,e.columns)),o.xp6(2),o.Q6J("ngTemplateOutlet",e.headerGroupedTemplate||e.headerTemplate)("ngTemplateOutletContext",o.VKq(14,bf,e.columns)),o.xp6(1),o.Q6J("ngIf",e.frozenValue||e.frozenBodyTemplate),o.xp6(1),o.Q6J("value",e.dataToRender)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate),o.xp6(1),o.Q6J("ngIf",e.footerGroupedTemplate||e.footerTemplate)}}function Vz(n,t){1&n&&o.GkF(0)}function Bz(n,t){1&n&&o.GkF(0)}function Uz(n,t){if(1&n&&o._UZ(0,"tbody",25),2&n){const e=o.oxw(2);o.Q6J("value",e.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate)("frozen",!0)}}function Hz(n,t){1&n&&o.GkF(0)}function jz(n,t){if(1&n&&(o.TgZ(0,"tfoot",26),o.YNc(1,Hz,1,0,"ng-container",20),o.qZA()),2&n){const e=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",e.footerGroupedTemplate||e.footerTemplate)("ngTemplateOutletContext",o.VKq(2,bf,e.columns))}}function Gz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"cdk-virtual-scroll-viewport",27),o.NdJ("scrolledIndexChange",function(r){return o.CHM(e),o.oxw().onScrollIndexChange(r)}),o.TgZ(1,"table",18,19),o.YNc(3,Vz,1,0,"ng-container",20),o.TgZ(4,"thead",21,28),o.YNc(6,Bz,1,0,"ng-container",20),o.qZA(),o.YNc(7,Uz,1,5,"tbody",22),o._UZ(8,"tbody",23),o.YNc(9,jz,2,4,"tfoot",24),o.qZA()()}if(2&n){const e=o.oxw();o.Udp("height","flex"!==e.scrollHeight?e.scrollHeight:void 0),o.Q6J("itemSize",e.virtualRowHeight)("minBufferPx",e.minBufferPx)("maxBufferPx",e.maxBufferPx),o.xp6(1),o.Q6J("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),o.uIk("id",e.id+"-table"),o.xp6(2),o.Q6J("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",o.VKq(17,bf,e.columns)),o.xp6(3),o.Q6J("ngTemplateOutlet",e.headerGroupedTemplate||e.headerTemplate)("ngTemplateOutletContext",o.VKq(19,bf,e.columns)),o.xp6(1),o.Q6J("ngIf",e.frozenValue||e.frozenBodyTemplate),o.xp6(1),o.Q6J("value",e.dataToRender)("pTableBody",e.columns)("pTableBodyTemplate",e.bodyTemplate),o.xp6(1),o.Q6J("ngIf",e.footerGroupedTemplate||e.footerTemplate)}}function zz(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"p-paginator",29),o.NdJ("onPageChange",function(r){return o.CHM(e),o.oxw().onPageChange(r)}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function $z(n,t){1&n&&o.GkF(0)}function qz(n,t){if(1&n&&(o.TgZ(0,"div",30),o.YNc(1,$z,1,0,"ng-container",16),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.summaryTemplate)}}function Wz(n,t){1&n&&o._UZ(0,"div",31,32)}function Zz(n,t){1&n&&o._UZ(0,"span",33,34)}function Kz(n,t){1&n&&o._UZ(0,"span",35,36)}const Yz=function(n,t,e,i,r,s,u,h,p,y,E,I,M,P){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":n,"p-datatable-auto-layout":t,"p-datatable-resizable":e,"p-datatable-resizable-fit":i,"p-datatable-scrollable":r,"p-datatable-scrollable-vertical":s,"p-datatable-scrollable-horizontal":u,"p-datatable-scrollable-both":h,"p-datatable-flex-scrollable":p,"p-datatable-responsive-stack":y,"p-datatable-responsive-scroll":E,"p-datatable-responsive":I,"p-datatable-grouped-header":M,"p-datatable-grouped-footer":P}},Qz=function(n){return{height:n}},Jz=["pTableBody",""];function Xz(n,t){1&n&&o.GkF(0)}const nS=function(n,t,e,i,r){return{$implicit:n,rowIndex:t,columns:e,editing:i,frozen:r}};function e$(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,Xz,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",o.qbA(2,nS,i,s.dt.paginator?s.dt.first+r:r,s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function t$(n,t){1&n&&o.GkF(0)}function n$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,t$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.template)("ngTemplateOutletContext",o.qbA(2,nS,i,s.dt.paginator?s.dt.first+r:r,s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function i$(n,t){1&n&&o.GkF(0)}const r$=function(n,t,e,i,r,s,u){return{$implicit:n,rowIndex:t,columns:e,editing:i,frozen:r,rowgroup:s,rowspan:u}};function s$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,i$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.template)("ngTemplateOutletContext",o.Hh0(2,r$,i,s.dt.paginator?s.dt.first+r:r,s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen,s.shouldRenderRowspan(s.value,i,r),s.calculateRowGroupSize(s.value,i,r)))}}function o$(n,t){1&n&&o.GkF(0)}function a$(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,o$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",o.qbA(2,nS,i,s.dt.paginator?s.dt.first+r:r,s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function l$(n,t){if(1&n&&(o.YNc(0,e$,2,8,"ng-container",2),o.YNc(1,n$,2,8,"ng-container",0),o.YNc(2,s$,2,10,"ng-container",0),o.YNc(3,a$,2,8,"ng-container",2)),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,i)),o.xp6(1),o.Q6J("ngIf","rowspan"!==r.dt.rowGroupMode),o.xp6(1),o.Q6J("ngIf","rowspan"===r.dt.rowGroupMode),o.xp6(1),o.Q6J("ngIf",r.dt.groupFooterTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,i))}}function u$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,l$,4,4,"ng-template",1),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function c$(n,t){1&n&&o.GkF(0)}function d$(n,t){if(1&n&&o.YNc(0,c$,1,0,"ng-container",4),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngTemplateOutlet",e?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",o.qbA(2,nS,e,r.dt.paginator?r.dt.first+i:i,r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen))}}function h$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,d$,1,8,"ng-template",5),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("cdkVirtualForOf",e.dt.filteredValue||e.dt.value)("cdkVirtualForTrackBy",e.dt.rowTrackBy)("cdkVirtualForTemplateCacheSize",0)}}function f$(n,t){1&n&&o.GkF(0)}const iS=function(n,t,e,i,r,s){return{$implicit:n,rowIndex:t,columns:e,expanded:i,editing:r,frozen:s}};function p$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,f$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.template)("ngTemplateOutletContext",o.HTZ(2,iS,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.dt.isRowExpanded(i),"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function g$(n,t){1&n&&o.GkF(0)}function m$(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,g$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",o.HTZ(2,iS,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.dt.isRowExpanded(i),"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}function _$(n,t){1&n&&o.GkF(0)}function y$(n,t){1&n&&o.GkF(0)}function v$(n,t){if(1&n&&(o.ynx(0,3),o.YNc(1,y$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(2),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",o.HTZ(2,iS,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.dt.isRowExpanded(i),"row"===s.dt.editMode&&s.dt.isRowEditing(i),s.frozen))}}const MF=function(n,t,e,i){return{$implicit:n,rowIndex:t,columns:e,frozen:i}};function w$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,_$,1,0,"ng-container",4),o.YNc(2,v$,2,9,"ng-container",2),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.expandedRowTemplate)("ngTemplateOutletContext",o.l5B(3,MF,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.frozen)),o.xp6(1),o.Q6J("ngIf",s.dt.groupFooterTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,i,r))}}function b$(n,t){if(1&n&&(o.YNc(0,p$,2,9,"ng-container",0),o.YNc(1,m$,2,9,"ng-container",2),o.YNc(2,w$,3,8,"ng-container",0)),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngIf",!r.dt.groupHeaderTemplate),o.xp6(1),o.Q6J("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,i)),o.xp6(1),o.Q6J("ngIf",r.dt.isRowExpanded(e))}}function C$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,b$,3,3,"ng-template",1),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function E$(n,t){1&n&&o.GkF(0)}function T$(n,t){1&n&&o.GkF(0)}function I$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,T$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw(),i=e.$implicit,r=e.index,s=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",s.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",o.l5B(2,MF,i,s.dt.paginator?s.dt.first+r:r,s.columns,s.frozen))}}function S$(n,t){if(1&n&&(o.YNc(0,E$,1,0,"ng-container",4),o.YNc(1,I$,2,7,"ng-container",0)),2&n){const e=t.$implicit,i=t.index,r=o.oxw(2);o.Q6J("ngTemplateOutlet",r.template)("ngTemplateOutletContext",o.HTZ(3,iS,e,r.dt.paginator?r.dt.first+i:i,r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),o.xp6(1),o.Q6J("ngIf",r.dt.isRowExpanded(e))}}function D$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,S$,2,10,"ng-template",1),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function x$(n,t){1&n&&o.GkF(0)}const kF=function(n,t){return{$implicit:n,frozen:t}};function A$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,x$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",o.WLB(2,kF,e.columns,e.frozen))}}function M$(n,t){1&n&&o.GkF(0)}function k$(n,t){if(1&n&&(o.ynx(0),o.YNc(1,M$,1,0,"ng-container",4),o.BQk()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",o.WLB(2,kF,e.columns,e.frozen))}}let rS=(()=>{class n{constructor(){this.sortSource=new mn.x,this.selectionSource=new mn.x,this.contextMenuSource=new mn.x,this.valueSource=new mn.x,this.totalRecordsSource=new mn.x,this.columnsSource=new mn.x,this.resetSource=new mn.x,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),zM=(()=>{class n{constructor(e,i,r,s,u,h){this.el=e,this.zone=i,this.tableService=r,this.cd=s,this.filterService=u,this.overlayService=h,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new o.vpe,this.selectionChange=new o.vpe,this.contextMenuSelectionChange=new o.vpe,this.contextMenuSelectionMode="separate",this.rowTrackBy=(p,y)=>y,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.virtualRowHeight=28,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new o.vpe,this.onRowUnselect=new o.vpe,this.onPage=new o.vpe,this.onSort=new o.vpe,this.onFilter=new o.vpe,this.onLazyLoad=new o.vpe,this.onRowExpand=new o.vpe,this.onRowCollapse=new o.vpe,this.onContextMenuSelect=new o.vpe,this.onColResize=new o.vpe,this.onColReorder=new o.vpe,this.onRowReorder=new o.vpe,this.onEditInit=new o.vpe,this.onEditComplete=new o.vpe,this.onEditCancel=new o.vpe,this.onHeaderCheckboxToggle=new o.vpe,this.sortFunction=new o.vpe,this.firstChange=new o.vpe,this.rowsChange=new o.vpe,this.onStateSave=new o.vpe,this.onStateRestore=new o.vpe,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=Va(),this.virtualScrollInitialized=!1}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths(),this.scrollable&&this.virtualScroll&&(this.virtualScrollSubscription=this.virtualScrollBody.renderedRangeStream.subscribe(e=>{this.tableHeaderViewChild.nativeElement.style.top=e.start*this.virtualRowHeight*-1+"px"}))}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get dataToRender(){let e=this.filteredValue||this.value;return e?this.paginator&&!this.lazy?e.slice(this.first,this.first+this.rows):e:[]}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(at.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(at.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let i=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=i.metaKey||i.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,i=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&i){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:i}):(this.value.sort((s,u)=>{let h=at.resolveFieldData(s,e),p=at.resolveFieldData(u,e),y=null;return y=null==h&&null!=p?-1:null!=h&&null==p?1:null==h&&null==p?0:"string"==typeof h&&"string"==typeof p?h.localeCompare(p):h<p?-1:h>p?1:0,i*y}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:i};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,i)=>this.multisortField(e,i,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,i,r,s){let u=at.resolveFieldData(e,r[s].field),h=at.resolveFieldData(i,r[s].field),p=null;if(null==u&&null!=h)p=-1;else if(null!=u&&null==h)p=1;else if(null==u&&null==h)p=0;else if("string"==typeof u||u instanceof String){if(u.localeCompare&&u!=h)return r[s].order*u.localeCompare(h)}else p=u<h?-1:1;return u==h?r.length-1>s?this.multisortField(e,i,r,s+1):0:r[s].order*p}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let i=0;i<this.multiSortMeta.length;i++)if(this.multiSortMeta[i].field===e)return this.multiSortMeta[i];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let i=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){i=!0;break}return i}}handleRowClick(e){let i=e.originalEvent.target,r=i.nodeName,s=i.parentElement&&i.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!fe.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let u=e.rowData,h=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)fe.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=h,this.selectRange(e.originalEvent,h);else{let p=this.isSelected(u);if(!p&&!this.isRowSelectable(u,h))return;let y=!this.rowTouched&&this.metaKeySelection,E=this.dataKey?String(at.resolveFieldData(u,this.dataKey)):null;if(this.anchorRowIndex=h,this.rangeRowIndex=h,y){let I=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(p&&I){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let M=this.findIndexInSelection(u);this._selection=this.selection.filter((P,B)=>B!=M),this.selectionChange.emit(this.selection),E&&delete this.selectionKeys[E]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:u,type:"row"})}else this.isSingleSelectionMode()?(this._selection=u,this.selectionChange.emit(u),E&&(this.selectionKeys={},this.selectionKeys[E]=1)):this.isMultipleSelectionMode()&&(I?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,u],this.selectionChange.emit(this.selection),E&&(this.selectionKeys[E]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h})}else if("single"===this.selectionMode)p?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h})):(this._selection=u,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h}),E&&(this.selectionKeys={},this.selectionKeys[E]=1));else if("multiple"===this.selectionMode)if(p){let I=this.findIndexInSelection(u);this._selection=this.selection.filter((M,P)=>P!=I),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h}),E&&delete this.selectionKeys[E]}else this._selection=this.selection?[...this.selection,u]:[u],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:u,type:"row",index:h}),E&&(this.selectionKeys[E]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const i=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=i,this.contextMenuSelectionChange.emit(i),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:i,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(i);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let s=this.isSelected(i),u=this.dataKey?String(at.resolveFieldData(i,this.dataKey)):null;if(!s){if(!this.isRowSelectable(i,r))return;this.isSingleSelectionMode()?(this.selection=i,this.selectionChange.emit(i),u&&(this.selectionKeys={},this.selectionKeys[u]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,i]:[i],this.selectionChange.emit(this.selection),u&&(this.selectionKeys[u]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:i,index:e.rowIndex})}}}selectRange(e,i){let r,s;this.anchorRowIndex>i?(r=i,s=this.anchorRowIndex):this.anchorRowIndex<i?(r=this.anchorRowIndex,s=i):(r=i,s=i),this.lazy&&this.paginator&&(r-=this.first,s-=this.first);let u=[];for(let h=r;h<=s;h++){let p=this.filteredValue?this.filteredValue[h]:this.value[h];if(!this.isSelected(p)){if(!this.isRowSelectable(p,i))continue;u.push(p),this._selection=[...this.selection,p];let y=this.dataKey?String(at.resolveFieldData(p,this.dataKey)):null;y&&(this.selectionKeys[y]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:u,type:"row"})}clearSelectionRange(e){let i,r;this.rangeRowIndex>this.anchorRowIndex?(i=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(i=this.rangeRowIndex,r=this.anchorRowIndex):(i=this.rangeRowIndex,r=this.rangeRowIndex);for(let s=i;s<=r;s++){let u=this.value[s],h=this.findIndexInSelection(u);this._selection=this.selection.filter((y,E)=>E!=h);let p=this.dataKey?String(at.resolveFieldData(u,this.dataKey)):null;p&&delete this.selectionKeys[p],this.onRowUnselect.emit({originalEvent:e,data:u,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[at.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let i=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){i=r;break}return i}isRowSelectable(e,i){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:i}))}toggleRowWithRadio(e,i){if(this.preventSelectionSetterPropagation=!0,this.selection!=i){if(!this.isRowSelectable(i,e.rowIndex))return;this._selection=i,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(at.resolveFieldData(i,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,i){this.selection=this.selection||[];let r=this.isSelected(i),s=this.dataKey?String(at.resolveFieldData(i,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let u=this.findIndexInSelection(i);this._selection=this.selection.filter((h,p)=>p!=u),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"checkbox"}),s&&delete this.selectionKeys[s]}else{if(!this.isRowSelectable(i,e.rowIndex))return;this._selection=this.selection?[...this.selection,i]:[i],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:i,type:"checkbox"}),s&&(this.selectionKeys[s]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,i){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:i});else{const r=this.selectionPageOnly?this.dataToRender:this.filteredValue||this.value||[];let s=this.selectionPageOnly&&this._selection?this._selection.filter(u=>!r.some(h=>this.equals(u,h))):[];i&&(s=this.frozenValue?[...s,...this.frozenValue,...r]:[...s,...r],s=this.rowSelectable?s.filter((u,h)=>this.rowSelectable({data:u,index:h})):s),this._selection=s,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:i}),this.isStateful()&&this.saveState()}}equals(e,i){return"equals"===this.compareSelectionBy?e===i:at.equals(e,i,this.dataKey)}filter(e,i,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[i]&&delete this.filters[i]:this.filters[i]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,i){this.filter(e,"global",i)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let i=0;i<this.value.length;i++){let h,r=!0,s=!1,u=!1;for(let p in this.filters)if(this.filters.hasOwnProperty(p)&&"global"!==p){u=!0;let y=p,E=this.filters[y];if(Array.isArray(E)){for(let I of E)if(r=this.executeLocalFilter(y,this.value[i],I),I.operator===dw.OR&&r||I.operator===dw.AND&&!r)break}else r=this.executeLocalFilter(y,this.value[i],E);if(!r)break}if(this.filters.global&&!s&&e)for(let p=0;p<e.length&&(s=this.filterService.filters[this.filters.global.matchMode](at.resolveFieldData(this.value[i],e[p].field||e[p]),this.filters.global.value,this.filterLocale),!s);p++);h=this.filters.global?u?u&&r&&s:s:u&&r,h&&this.filteredValue.push(this.value[i])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,i,r){let s=r.value,u=r.matchMode||si.STARTS_WITH,h=at.resolveFieldData(i,e);return this.filterService.filters[u](h,s,this.filterLocale)}hasFilter(){let e=!0;for(let i in this.filters)if(this.filters.hasOwnProperty(i)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let i,r="",s=this.columns;e&&e.selectionOnly?i=this.selection||[]:(i=this.filteredValue||this.value,this.frozenValue&&(i=i?[...this.frozenValue,...i]:this.frozenValue));for(let p=0;p<s.length;p++){let y=s[p];!1!==y.exportable&&y.field&&(r+='"'+this.getExportHeader(y)+'"',p<s.length-1&&(r+=this.csvSeparator))}i.forEach((p,y)=>{r+="\n";for(let E=0;E<s.length;E++){let I=s[E];if(!1!==I.exportable&&I.field){let M=at.resolveFieldData(p,I.field);M=null!=M?this.exportFunction?this.exportFunction({data:M,field:I.field}):String(M).replace(/"/g,'""'):"",r+='"'+M+'"',E<s.length-1&&(r+=this.csvSeparator)}}});let u=new Blob([r],{type:"text/csv;charset=utf-8;"}),h=document.createElement("a");h.style.display="none",document.body.appendChild(h),void 0!==h.download?(h.setAttribute("href",URL.createObjectURL(u)),h.setAttribute("download",this.exportFilename+".csv"),h.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(h)}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScrollBody&&this.virtualScrollBody.scrollToIndex(e)}onScrollIndexChange(e){this.lazy&&(this.virtualScrollTimeout&&clearTimeout(this.virtualScrollTimeout),this.virtualScrollTimeout=setTimeout(()=>{let i=Math.floor(e/this.rows),r=0===i?0:(i-1)*this.rows,s=0===i?2*this.rows:3*this.rows;i!==this.virtualPage&&(this.virtualPage=i,this.lazyLoadOnInit||this.virtualScrollInitialized?this.onLazyLoad.emit({first:r,rows:s,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta}):this.virtualScrollInitialized=!0)},this.virtualScrollDelay))}scrollTo(e){this.virtualScrollBody?this.virtualScrollBody.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,i,r,s){this.editingCell=e,this.editingCellData=i,this.editingCellField=r,this.editingCellRowIndex=s,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===fe.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(fe.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let i=String(at.resolveFieldData(e,this.dataKey));this.editingRowKeys[i]=!0}saveRowEdit(e,i){if(0===fe.find(i,".ng-invalid.ng-dirty").length){let r=String(at.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let i=String(at.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[i]}toggleRow(e,i){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(at.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:i,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:i,data:e})),i&&i.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(at.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(at.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let i=fe.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-i+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let i=fe.getOffset(this.containerViewChild.nativeElement).left;fe.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-i+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let h=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&h>15&&this.resizeTableCells(r,h)}else if("expand"===this.columnResizeMode){let u=this.tableViewChild.nativeElement.offsetWidth+e;this.tableViewChild.nativeElement.style.width=u+"px",this.tableViewChild.nativeElement.style.minWidth=u+"px",this.resizeTableCells(r,null)}this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",fe.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,i){let r=fe.index(this.resizeColumnElement),s=[];const u=fe.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");fe.find(u,"tr > th").forEach(y=>s.push(fe.getOuterWidth(y))),this.destroyStyleElement(),this.createStyleElement();let p="";s.forEach((y,E)=>{let I=E===r?e:i&&E===r+1?i:y;p+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${E+1}),\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${E+1}),\n                #${this.id} .p-datatable-tfoot > tr > td:nth-child(${E+1}) {\n                    ${this.scrollable?`flex: 1 1 ${I}px !important`:`width: ${I}px !important`}\n                }\n            `}),this.styleElement.innerHTML=p}onColumnDragStart(e,i){this.reorderIconWidth=fe.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=fe.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=i,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,i){if(this.reorderableColumns&&this.draggedColumn&&i){e.preventDefault();let r=fe.getOffset(this.containerViewChild.nativeElement),s=fe.getOffset(i);if(this.draggedColumn!=i){let u=fe.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),h=fe.indexWithinGroup(i,"preorderablecolumn"),p=s.left-r.left,E=s.left+i.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+i.offsetHeight+"px",e.pageX>E?(this.reorderIndicatorUpViewChild.nativeElement.style.left=p+i.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=p+i.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=p-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=p-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),h-u==1&&-1===this.dropPosition||h-u==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,i){if(e.preventDefault(),this.draggedColumn){let r=fe.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=fe.indexWithinGroup(i,"preorderablecolumn"),u=r!=s;u&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(u=!1),u&&s<r&&1===this.dropPosition&&(s+=1),u&&s>r&&-1===this.dropPosition&&(s-=1),u&&(at.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,i){this.rowDragging=!0,this.draggedRowIndex=i,e.dataTransfer.setData("text","b")}onRowDragOver(e,i,r){if(this.rowDragging&&this.draggedRowIndex!==i){let s=fe.getOffset(r).top+fe.getWindowScrollTop(),u=e.pageY,h=s+fe.getOuterHeight(r)/2,p=r.previousElementSibling;u<h?(fe.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=i,p?fe.addClass(p,"p-datatable-dragpoint-bottom"):fe.addClass(r,"p-datatable-dragpoint-top")):(p?fe.removeClass(p,"p-datatable-dragpoint-bottom"):fe.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=i+1,fe.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,i){let r=i.previousElementSibling;r&&fe.removeClass(r,"p-datatable-dragpoint-bottom"),fe.removeClass(i,"p-datatable-dragpoint-bottom"),fe.removeClass(i,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,i){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;at.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,i),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let i={};this.paginator&&(i.first=this.first,i.rows=this.rows),this.sortField&&(i.sortField=this.sortField,i.sortOrder=this.sortOrder),this.multiSortMeta&&(i.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(i.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(i),this.reorderableColumns&&this.saveColumnOrder(i),this.selection&&(i.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(i.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(i)),this.onStateSave.emit(i)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const i=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(i){let u=JSON.parse(i,function(u,h){return"string"==typeof h&&r.test(h)?new Date(h):h});this.paginator&&(void 0!==this.first&&(this.first=u.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=u.rows,this.rowsChange.emit(this.rows))),u.sortField&&(this.restoringSort=!0,this._sortField=u.sortField,this._sortOrder=u.sortOrder),u.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=u.multiSortMeta),u.filters&&(this.restoringFilter=!0,this.filters=u.filters),this.resizableColumns&&(this.columnWidthsState=u.columnWidths,this.tableWidthState=u.tableWidth),u.expandedRowKeys&&(this.expandedRowKeys=u.expandedRowKeys),u.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(u.selection)),this.stateRestored=!0,this.onStateRestore.emit(u)}}saveColumnWidths(e){let i=[];fe.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(s=>i.push(fe.getOuterWidth(s))),e.columnWidths=i.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=fe.getOuterWidth(this.tableViewChild.nativeElement)+"px")}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&(this.tableViewChild.nativeElement.style.width=this.tableWidthState,this.tableViewChild.nativeElement.style.minWidth=this.tableWidthState,this.containerViewChild.nativeElement.style.width=this.tableWidthState),at.isNotEmpty(e)){this.createStyleElement();let i="";e.forEach((r,s)=>{i+=`\n                        #${this.id} .p-datatable-thead > tr > th:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tbody > tr > td:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tfoot > tr > td:nth-child(${s+1}) {\n                            ${this.scrollable?`flex: 1 1 ${r}px !important`:`width: ${r}px !important`}\n                        }\n                    `}),this.styleElement.innerHTML=i}}}saveColumnOrder(e){if(this.columns){let i=[];this.columns.map(r=>{i.push(r.field||r.key)}),e.columnOrder=i}}restoreColumnOrder(){const i=this.getStorage().getItem(this.stateKey);if(i){let s=JSON.parse(i).columnOrder;if(s){let u=[];s.map(h=>{let p=this.findColumnByKey(h);p&&u.push(p)}),this.columnOrderStateRestored=!0,this.columns=u}}}findColumnByKey(e){if(!this.columns)return null;for(let i of this.columns)if(i.key===e||i.field===e)return i}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.virtualScrollInitialized=null,this.virtualScrollSubscription&&this.virtualScrollSubscription.unsubscribe(),this.destroyStyleElement(),this.destroyResponsiveStyle()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(rS),o.Y36(o.sBO),o.Y36(Kc),o.Y36(Wu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-table"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Yc,4),2&e){let s;o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(bz,5),o.Gf(Cz,5),o.Gf(Ez,5),o.Gf(Tz,5),o.Gf(Iz,5),o.Gf(Sz,5),o.Gf(Dz,5),o.Gf(T0,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.containerViewChild=r.first),o.iGM(r=o.CRH())&&(i.resizeHelperViewChild=r.first),o.iGM(r=o.CRH())&&(i.reorderIndicatorUpViewChild=r.first),o.iGM(r=o.CRH())&&(i.reorderIndicatorDownViewChild=r.first),o.iGM(r=o.CRH())&&(i.wrapperViewChild=r.first),o.iGM(r=o.CRH())&&(i.tableViewChild=r.first),o.iGM(r=o.CRH())&&(i.tableHeaderViewChild=r.first),o.iGM(r=o.CRH())&&(i.virtualScrollBody=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollDelay:"virtualScrollDelay",virtualRowHeight:"virtualRowHeight",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[o._Bn([rS]),o.TTD],decls:14,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],["role","table","class","p-datatable-table",3,"ngClass","ngStyle",4,"ngIf"],["tabindex","0","class","p-datatable-virtual-scrollable-body",3,"itemSize","height","minBufferPx","maxBufferPx","scrolledIndexChange",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"value","pTableBody","pTableBodyTemplate"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["tabindex","0",1,"p-datatable-virtual-scrollable-body",3,"itemSize","minBufferPx","maxBufferPx","scrolledIndexChange"],["tableHeader",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1),o.YNc(2,xz,2,2,"div",2),o.YNc(3,Mz,2,1,"div",3),o.YNc(4,kz,1,17,"p-paginator",4),o.TgZ(5,"div",5,6),o.YNc(7,Lz,8,16,"table",7),o.YNc(8,Gz,10,21,"cdk-virtual-scroll-viewport",8),o.qZA(),o.YNc(9,zz,1,17,"p-paginator",9),o.YNc(10,qz,2,1,"div",10),o.YNc(11,Wz,2,0,"div",11),o.YNc(12,Zz,2,0,"span",12),o.YNc(13,Kz,2,0,"span",13),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngStyle",i.style)("ngClass",o.rFY(16,Yz,[i.rowHover||i.selectionMode,i.autoLayout,i.resizableColumns,i.resizableColumns&&"fit"===i.columnResizeMode,i.scrollable,i.scrollable&&"vertical"===i.scrollDirection,i.scrollable&&"horizontal"===i.scrollDirection,i.scrollable&&"both"===i.scrollDirection,i.scrollable&&"flex"===i.scrollHeight,"stack"===i.responsiveLayout,"scroll"===i.responsiveLayout,i.responsive,null!=i.headerGroupedTemplate,null!=i.footerGroupedTemplate])),o.uIk("id",i.id),o.xp6(2),o.Q6J("ngIf",i.loading&&i.showLoader),o.xp6(1),o.Q6J("ngIf",i.captionTemplate),o.xp6(1),o.Q6J("ngIf",i.paginator&&("top"===i.paginatorPosition||"both"==i.paginatorPosition)),o.xp6(1),o.Q6J("ngStyle",o.VKq(31,Qz,i.scrollHeight)),o.xp6(2),o.Q6J("ngIf",!i.virtualScroll),o.xp6(1),o.Q6J("ngIf",i.virtualScroll),o.xp6(1),o.Q6J("ngIf",i.paginator&&("bottom"===i.paginatorPosition||"both"==i.paginatorPosition)),o.xp6(1),o.Q6J("ngIf",i.summaryTemplate),o.xp6(1),o.Q6J("ngIf",i.resizableColumns),o.xp6(1),o.Q6J("ngIf",i.reorderableColumns),o.xp6(1),o.Q6J("ngIf",i.reorderableColumns))},directives:function(){return[aG,n4,T0,Dr,$n,fn,to,hF]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;min-width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper>table,.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-thead,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot{display:block}.p-datatable-scrollable .p-datatable-thead>tr,.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-thead>tr>th,.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-thead,.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-virtual-scrollable-body>.cdk-virtual-scroll-content-wrapper>.p-datatable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th .p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td{display:table-cell}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-thead>tr>th,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}cdk-virtual-scroll-viewport{outline:0 none}\n"],encapsulation:2}),n})(),n4=(()=>{class n{constructor(e,i,r,s){this.dt=e,this.tableService=i,this.cd=r,this.el=s,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}shouldRenderRowGroupHeader(e,i,r){let s=at.resolveFieldData(i,this.dt.groupRowsBy),u=e[r-1];return!u||s!==at.resolveFieldData(u,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,i,r){let s=at.resolveFieldData(i,this.dt.groupRowsBy),u=e[r+1];return!u||s!==at.resolveFieldData(u,this.dt.groupRowsBy)}shouldRenderRowspan(e,i,r){let s=at.resolveFieldData(i,this.dt.groupRowsBy),u=e[r-1];return!u||s!==at.resolveFieldData(u,this.dt.groupRowsBy)}calculateRowGroupSize(e,i,r){let s=at.resolveFieldData(i,this.dt.groupRowsBy),u=s,h=0;for(;s===u;){h++;let p=e[++r];if(!p)break;u=at.resolveFieldData(p,this.dt.groupRowsBy)}return 1===h?null:h}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=fe.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=fe.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(zM),o.Y36(rS),o.Y36(o.sBO),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows"},attrs:Jz,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["cdkVirtualFor","",3,"cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"]],template:function(e,i){1&e&&(o.YNc(0,u$,2,2,"ng-container",0),o.YNc(1,h$,2,3,"ng-container",0),o.YNc(2,C$,2,2,"ng-container",0),o.YNc(3,D$,2,2,"ng-container",0),o.YNc(4,A$,2,5,"ng-container",0),o.YNc(5,k$,2,5,"ng-container",0)),2&e&&(o.Q6J("ngIf",!i.dt.expandedRowTemplate&&!i.dt.virtualScroll),o.xp6(1),o.Q6J("ngIf",!i.dt.expandedRowTemplate&&i.dt.virtualScroll),o.xp6(1),o.Q6J("ngIf",i.dt.expandedRowTemplate&&!(i.frozen&&i.dt.frozenExpandedRowTemplate)),o.xp6(1),o.Q6J("ngIf",i.dt.frozenExpandedRowTemplate&&i.frozen),o.xp6(1),o.Q6J("ngIf",i.dt.loading),o.xp6(1),o.Q6J("ngIf",i.dt.isEmpty()&&!i.dt.loading))},directives:[fn,Tn,to,mF],encapsulation:2}),n})(),r4=(()=>{class n{constructor(e,i){this.dt=e,this.tableService=i,this.isEnabled()&&(this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.selected=this.dt.isSelected(this.data)}))}ngOnInit(){this.isEnabled()&&(this.selected=this.dt.isSelected(this.data))}onClick(e){this.isEnabled()&&this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onTouchEnd(e){this.isEnabled()&&this.dt.handleRowTouchEnd(e)}onArrowDownKeyDown(e){if(!this.isEnabled())return;const r=this.findNextSelectableRow(e.currentTarget);r&&r.focus(),e.preventDefault()}onArrowUpKeyDown(e){if(!this.isEnabled())return;const r=this.findPrevSelectableRow(e.currentTarget);r&&r.focus(),e.preventDefault()}onEnterKeyDown(e){!this.isEnabled()||this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onPageDownKeyDown(){this.dt.virtualScroll&&this.dt.virtualScrollBody.elementRef.nativeElement.focus()}onSpaceKeydown(){this.dt.virtualScroll&&!this.dt.editingCell&&this.dt.virtualScrollBody.elementRef.nativeElement.focus()}findNextSelectableRow(e){let i=e.nextElementSibling;return i?fe.hasClass(i,"p-selectable-row")?i:this.findNextSelectableRow(i):null}findPrevSelectableRow(e){let i=e.previousElementSibling;return i?fe.hasClass(i,"p-selectable-row")?i:this.findPrevSelectableRow(i):null}isEnabled(){return!0!==this.pSelectableRowDisabled}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(zM),o.Y36(rS))},n.\u0275dir=o.lG2({type:n,selectors:[["","pSelectableRow",""]],hostAttrs:[1,"p-element"],hostVars:5,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i.onClick(s)})("touchend",function(s){return i.onTouchEnd(s)})("keydown.arrowdown",function(s){return i.onArrowDownKeyDown(s)})("keydown.arrowup",function(s){return i.onArrowUpKeyDown(s)})("keydown.enter",function(s){return i.onEnterKeyDown(s)})("keydown.shift.enter",function(s){return i.onEnterKeyDown(s)})("keydown.meta.enter",function(s){return i.onEnterKeyDown(s)})("keydown.pagedown",function(){return i.onPageDownKeyDown()})("keydown.pageup",function(){return i.onPageDownKeyDown()})("keydown.home",function(){return i.onPageDownKeyDown()})("keydown.end",function(){return i.onPageDownKeyDown()})("keydown.space",function(){return i.onSpaceKeydown()}),2&e&&(o.uIk("tabindex",i.isEnabled()?0:void 0),o.ekj("p-selectable-row",i.isEnabled())("p-highlight",i.selected))},inputs:{data:["pSelectableRow","data"],index:["pSelectableRowIndex","index"],pSelectableRowDisabled:"pSelectableRowDisabled"}}),n})(),s4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Oi,lG,bF,HM,eS,ZI,I0,yG,wz,jM,IG],xl,eS]}),n})();const o4=["lordinhouseTable"];function a4(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2)(1,"button",12),o.NdJ("click",function(){return o.CHM(e),o.oxw().create_LordInHouse()}),o._uU(2,"+ Create"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("disabled",!e.house||!e.lord||!e.trait)}}function l4(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2)(1,"button",12),o.NdJ("click",function(){return o.CHM(e),o.oxw().Update_LordInHouse()}),o._uU(2," Update"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("disabled",!e.house||!e.lord||!e.trait)}}function u4(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2)(1,"button",12),o.NdJ("click",function(){return o.CHM(e),o.oxw().Delete_LordInHouse()}),o._uU(2," Delete"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("disabled",!e.house||!e.lord||!e.trait)}}function c4(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2)(1,"button",12),o.NdJ("click",function(){return o.CHM(e),o.oxw().cancel_LordInHouse()}),o._uU(2," Cancel"),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("disabled",!e.house||!e.lord||!e.trait)}}function d4(n,t){if(1&n&&(o.TgZ(0,"th"),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e.header," ")}}function h4(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"th",15)(1,"input",16,17),o.NdJ("input",function(){const s=o.CHM(e).$implicit,u=o.MAs(2);return o.oxw(2),o.MAs(16).filter(u.value,s.field,"contains")}),o.qZA()()}2&n&&o.Q6J("ngSwitch",t.$implicit.field)}function f4(n,t){if(1&n&&(o.TgZ(0,"tr"),o.YNc(1,d4,2,1,"th",13),o.qZA(),o.TgZ(2,"tr"),o.YNc(3,h4,3,1,"th",14),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Q6J("ngForOf",e),o.xp6(2),o.Q6J("ngForOf",e)}}function p4(n,t){if(1&n&&(o.TgZ(0,"tr",18)(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA()()),2&n){const e=t.$implicit;o.Q6J("pSelectableRow",e),o.xp6(2),o.Oqu(e.house),o.xp6(2),o.Oqu(e.lord),o.xp6(2),o.Oqu(e.trait)}}const g4=function(){return["house","lord","trait"]};let m4=(()=>{class n{constructor(e,i){this.lordInHouseService=e,this.messageService=i,this.selecteForEditorDel=!1}ngOnInit(){this.cols=[{field:"house",header:"House"},{field:"lord",header:"Lord"},{field:"trait",header:"Trait"}],this.read_All_LordInHouse()}onRowSelect(e){this.idToEditorDelete=this.selectedLordInHouse.id,this.house=this.selectedLordInHouse.house,this.lord=this.selectedLordInHouse.lord,this.trait=this.selectedLordInHouse.trait,this.selecteForEditorDel=!0}cancel_LordInHouse(){this.selectedLordInHouse=null,this.house="",this.lord="",this.trait="",this.selecteForEditorDel=!1}read_All_LordInHouse(){this.lordInHouseService.read_All_LordInHouse().subscribe(e=>{this.lordInHouseList=e.map(i=>({id:i.payload.doc.id,isEdit:!1,house:i.payload.doc.data().house,lord:i.payload.doc.data().lord,trait:i.payload.doc.data().trait}))})}create_LordInHouse(){let e={};e.house=this.house,e.lord=this.lord,e.trait=this.trait,this.lordInHouseService.create_LordInHouse(e).then(i=>{this.messageService.add({severity:"success",closable:!1,summary:"Lord-in-house added",detail:"Lord-in-house added to database"}),this.cancel_LordInHouse()}).catch(i=>{this.messageService.add({severity:"error",closable:!1,summary:"some error occured",detail:i})})}Update_LordInHouse(){let e={};e.house=this.house,e.lord=this.lord,e.trait=this.trait,this.lordInHouseService.update_LordInHouse(this.idToEditorDelete,e),this.messageService.add({severity:"success",closable:!1,summary:"Lord-in-house updated",detail:this.selectedLordInHouse.id+" is updated"}),this.cancel_LordInHouse()}Delete_LordInHouse(){this.lordInHouseService.delete_LordInHouse(this.idToEditorDelete),this.messageService.add({severity:"success",closable:!1,summary:"Lord-in-house deleted",detail:this.selectedLordInHouse.id+" is deleted"}),this.cancel_LordInHouse()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(BH),o.Y36(qu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-lordinhouse"]],viewQuery:function(e,i){if(1&e&&o.Gf(o4,5),2&e){let r;o.iGM(r=o.CRH())&&(i.lordinhouseTable=r.first)}},features:[o._Bn([qu])],decls:19,vars:14,consts:[[1,"container"],[1,"row",2,"margin-top","25px"],[1,"col-md-3"],["type","text","placeholder","House",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Lord",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Trait",1,"form-control",3,"ngModel","ngModelChange"],["class","col-md-3",4,"ngIf"],[1,"card",2,"margin-top","25px"],["selectionMode","single","dataKey","id","responsiveLayout","scroll",3,"columns","paginator","rows","value","globalFilterFields","selection","onRowSelect","selectionChange"],["lordinhouseTable",""],["pTemplate","header"],["pTemplate","body"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[4,"ngFor","ngForOf"],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["pInputText","","type","text",3,"input"],["colInput",""],[3,"pSelectableRow"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"p-toast"),o.TgZ(2,"div",1)(3,"div",2)(4,"input",3),o.NdJ("ngModelChange",function(s){return i.house=s}),o.qZA()(),o.TgZ(5,"div",2)(6,"input",4),o.NdJ("ngModelChange",function(s){return i.lord=s}),o.qZA()(),o.TgZ(7,"div",2)(8,"input",5),o.NdJ("ngModelChange",function(s){return i.trait=s}),o.qZA()()(),o.TgZ(9,"div",1),o.YNc(10,a4,3,1,"div",6),o.YNc(11,l4,3,1,"div",6),o.YNc(12,u4,3,1,"div",6),o.YNc(13,c4,3,1,"div",6),o.qZA(),o.TgZ(14,"div",7)(15,"p-table",8,9),o.NdJ("onRowSelect",function(s){return i.onRowSelect(s)})("selectionChange",function(s){return i.selectedLordInHouse=s}),o.YNc(17,f4,4,2,"ng-template",10),o.YNc(18,p4,7,4,"ng-template",11),o.qZA()()()),2&e&&(o.xp6(4),o.Q6J("ngModel",i.house),o.xp6(2),o.Q6J("ngModel",i.lord),o.xp6(2),o.Q6J("ngModel",i.trait),o.xp6(2),o.Q6J("ngIf",!i.selecteForEditorDel),o.xp6(1),o.Q6J("ngIf",i.selecteForEditorDel),o.xp6(1),o.Q6J("ngIf",i.selecteForEditorDel),o.xp6(1),o.Q6J("ngIf",i.selecteForEditorDel),o.xp6(2),o.Q6J("columns",i.cols)("paginator",!0)("rows",5)("value",i.lordInHouseList)("globalFilterFields",o.DdM(13,g4))("selection",i.selectedLordInHouse))},directives:[YH,VI,gM,w0,fn,zM,Yc,Tn,Wi,r4],styles:[""]}),n})(),_4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[l_.forRoot([{path:"",component:La},{path:"pranavam/lordinhouse",component:m4},{path:"**",redirectTo:"pages/notfound"}])],l_]}),n})();const y4=function(n){return{active:n}};function v4(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"li",7),o.NdJ("click",function(r){const u=o.CHM(e).$implicit;return o.oxw().listClick(r,u)}),o.TgZ(1,"a",8),o._UZ(2,"i",3),o.TgZ(3,"span",3),o._uU(4),o.qZA()()()}if(2&n){const e=t.$implicit,i=o.oxw();o.Q6J("ngClass",o.VKq(4,y4,i.selectedItem==e.name)),o.xp6(1),o.Q6J("routerLink",e.link),o.xp6(1),o.uIk("data-feather",e.icon),o.xp6(2),o.Oqu(e.name)}}let w4=(()=>{class n{constructor(){this.menuItems=[{name:"Dashboard",icon:"sliders",link:""},{name:"Lord In House",icon:"user",link:"/pranavam/lordinhouse"}],this.selectedItem="Dashboard"}ngOnInit(){}listClick(e,i){console.log(i),this.selectedItem=i.name}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-menu"]],decls:9,vars:1,consts:[["id","sidebar",1,"sidebar","js-sidebar"],[1,"sidebar-content","js-simplebar"],["href","index.html",1,"sidebar-brand"],[1,"align-middle"],[1,"sidebar-nav"],[1,"sidebar-header"],["class","sidebar-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"sidebar-item",3,"ngClass","click"],["routerLinkActive","active",1,"sidebar-link",3,"routerLink"]],template:function(e,i){1&e&&(o.TgZ(0,"nav",0)(1,"div",1)(2,"a",2)(3,"span",3),o._uU(4,"Pranavam"),o.qZA()(),o.TgZ(5,"ul",4)(6,"li",5),o._uU(7," Pages "),o.qZA(),o.YNc(8,v4,5,6,"li",6),o.qZA()()()),2&e&&(o.xp6(8),o.Q6J("ngForOf",i.menuItems))},directives:[Tn,$n,Cp,ID],styles:[""]}),n})(),b4=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-main"]],decls:140,vars:0,consts:[[1,"navbar","navbar-expand","navbar-light","navbar-bg"],[1,"sidebar-toggle","js-sidebar-toggle"],[1,"hamburger","align-self-center"],[1,"navbar-collapse","collapse"],[1,"navbar-nav","navbar-align"],[1,"nav-item","dropdown"],["href","#","id","alertsDropdown","data-bs-toggle","dropdown",1,"nav-icon","dropdown-toggle"],[1,"position-relative"],["data-feather","bell",1,"align-middle"],[1,"indicator"],["aria-labelledby","alertsDropdown",1,"dropdown-menu","dropdown-menu-lg","dropdown-menu-end","py-0"],[1,"dropdown-menu-header"],[1,"list-group"],["href","#",1,"list-group-item"],[1,"row","g-0","align-items-center"],[1,"col-2"],["data-feather","alert-circle",1,"text-danger"],[1,"col-10"],[1,"text-dark"],[1,"text-muted","small","mt-1"],["data-feather","bell",1,"text-warning"],["data-feather","home",1,"text-primary"],["data-feather","user-plus",1,"text-success"],[1,"dropdown-menu-footer"],["href","#",1,"text-muted"],["href","#","id","messagesDropdown","data-bs-toggle","dropdown",1,"nav-icon","dropdown-toggle"],["data-feather","message-square",1,"align-middle"],["aria-labelledby","messagesDropdown",1,"dropdown-menu","dropdown-menu-lg","dropdown-menu-end","py-0"],["src","img/avatars/avatar-5.jpg","alt","Vanessa Tucker",1,"avatar","img-fluid","rounded-circle"],[1,"col-10","ps-2"],["src","img/avatars/avatar-2.jpg","alt","William Harris",1,"avatar","img-fluid","rounded-circle"],["src","img/avatars/avatar-4.jpg","alt","Christina Mason",1,"avatar","img-fluid","rounded-circle"],["src","img/avatars/avatar-3.jpg","alt","Sharon Lessman",1,"avatar","img-fluid","rounded-circle"],["href","#","data-bs-toggle","dropdown",1,"nav-icon","dropdown-toggle","d-inline-block","d-sm-none"],["data-feather","settings",1,"align-middle"],["href","#","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle","d-none","d-sm-inline-block"],["src","../assets/img/avatars/avatar.jpg","alt","Charles Hall",1,"avatar","img-fluid","rounded","me-1"],[1,"dropdown-menu","dropdown-menu-end"],["href","pages-profile.html",1,"dropdown-item"],["data-feather","user",1,"align-middle","me-1"],["href","#",1,"dropdown-item"],["data-feather","pie-chart",1,"align-middle","me-1"],[1,"dropdown-divider"],["href","index.html",1,"dropdown-item"],["data-feather","settings",1,"align-middle","me-1"],["data-feather","help-circle",1,"align-middle","me-1"]],template:function(e,i){1&e&&(o.TgZ(0,"nav",0)(1,"a",1),o._UZ(2,"i",2),o.qZA(),o.TgZ(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6)(7,"div",7),o._UZ(8,"i",8),o.TgZ(9,"span",9),o._uU(10,"4"),o.qZA()()(),o.TgZ(11,"div",10)(12,"div",11),o._uU(13," 4 New Notifications "),o.qZA(),o.TgZ(14,"div",12)(15,"a",13)(16,"div",14)(17,"div",15),o._UZ(18,"i",16),o.qZA(),o.TgZ(19,"div",17)(20,"div",18),o._uU(21,"Update completed"),o.qZA(),o.TgZ(22,"div",19),o._uU(23,"Restart server 12 to complete the update."),o.qZA(),o.TgZ(24,"div",19),o._uU(25,"30m ago"),o.qZA()()()(),o.TgZ(26,"a",13)(27,"div",14)(28,"div",15),o._UZ(29,"i",20),o.qZA(),o.TgZ(30,"div",17)(31,"div",18),o._uU(32,"Lorem ipsum"),o.qZA(),o.TgZ(33,"div",19),o._uU(34,"Aliquam ex eros, imperdiet vulputate hendrerit et."),o.qZA(),o.TgZ(35,"div",19),o._uU(36,"2h ago"),o.qZA()()()(),o.TgZ(37,"a",13)(38,"div",14)(39,"div",15),o._UZ(40,"i",21),o.qZA(),o.TgZ(41,"div",17)(42,"div",18),o._uU(43,"Login from 192.186.1.8"),o.qZA(),o.TgZ(44,"div",19),o._uU(45,"5h ago"),o.qZA()()()(),o.TgZ(46,"a",13)(47,"div",14)(48,"div",15),o._UZ(49,"i",22),o.qZA(),o.TgZ(50,"div",17)(51,"div",18),o._uU(52,"New connection"),o.qZA(),o.TgZ(53,"div",19),o._uU(54,"Christina accepted your request."),o.qZA(),o.TgZ(55,"div",19),o._uU(56,"14h ago"),o.qZA()()()()(),o.TgZ(57,"div",23)(58,"a",24),o._uU(59,"Show all notifications"),o.qZA()()()(),o.TgZ(60,"li",5)(61,"a",25)(62,"div",7),o._UZ(63,"i",26),o.qZA()(),o.TgZ(64,"div",27)(65,"div",11)(66,"div",7),o._uU(67," 4 New Messages "),o.qZA()(),o.TgZ(68,"div",12)(69,"a",13)(70,"div",14)(71,"div",15),o._UZ(72,"img",28),o.qZA(),o.TgZ(73,"div",29)(74,"div",18),o._uU(75,"Vanessa Tucker"),o.qZA(),o.TgZ(76,"div",19),o._uU(77,"Nam pretium turpis et arcu. Duis arcu tortor."),o.qZA(),o.TgZ(78,"div",19),o._uU(79,"15m ago"),o.qZA()()()(),o.TgZ(80,"a",13)(81,"div",14)(82,"div",15),o._UZ(83,"img",30),o.qZA(),o.TgZ(84,"div",29)(85,"div",18),o._uU(86,"William Harris"),o.qZA(),o.TgZ(87,"div",19),o._uU(88,"Curabitur ligula sapien euismod vitae."),o.qZA(),o.TgZ(89,"div",19),o._uU(90,"2h ago"),o.qZA()()()(),o.TgZ(91,"a",13)(92,"div",14)(93,"div",15),o._UZ(94,"img",31),o.qZA(),o.TgZ(95,"div",29)(96,"div",18),o._uU(97,"Christina Mason"),o.qZA(),o.TgZ(98,"div",19),o._uU(99,"Pellentesque auctor neque nec urna."),o.qZA(),o.TgZ(100,"div",19),o._uU(101,"4h ago"),o.qZA()()()(),o.TgZ(102,"a",13)(103,"div",14)(104,"div",15),o._UZ(105,"img",32),o.qZA(),o.TgZ(106,"div",29)(107,"div",18),o._uU(108,"Sharon Lessman"),o.qZA(),o.TgZ(109,"div",19),o._uU(110,"Aenean tellus metus, bibendum sed, posuere ac, mattis non."),o.qZA(),o.TgZ(111,"div",19),o._uU(112,"5h ago"),o.qZA()()()()(),o.TgZ(113,"div",23)(114,"a",24),o._uU(115,"Show all messages"),o.qZA()()()(),o.TgZ(116,"li",5)(117,"a",33),o._UZ(118,"i",34),o.qZA(),o.TgZ(119,"a",35),o._UZ(120,"img",36),o.TgZ(121,"span",18),o._uU(122,"Charles Hall"),o.qZA()(),o.TgZ(123,"div",37)(124,"a",38),o._UZ(125,"i",39),o._uU(126," Profile"),o.qZA(),o.TgZ(127,"a",40),o._UZ(128,"i",41),o._uU(129," Analytics"),o.qZA(),o._UZ(130,"div",42),o.TgZ(131,"a",43),o._UZ(132,"i",44),o._uU(133," Settings & Privacy"),o.qZA(),o.TgZ(134,"a",40),o._UZ(135,"i",45),o._uU(136," Help Center"),o.qZA(),o._UZ(137,"div",42),o.TgZ(138,"a",40),o._uU(139,"Log out"),o.qZA()()()()()())},styles:[""]}),n})(),C4=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-footer"]],decls:23,vars:0,consts:[[1,"footer"],[1,"container-fluid"],[1,"row","text-muted"],[1,"col-6","text-start"],[1,"mb-0"],["href","https://adminkit.io/","target","_blank",1,"text-muted"],[1,"col-6","text-end"],[1,"list-inline"],[1,"list-inline-item"]],template:function(e,i){1&e&&(o.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4)(5,"a",5)(6,"strong"),o._uU(7,"AdminKit"),o.qZA()(),o._uU(8," \xa9 "),o.qZA()(),o.TgZ(9,"div",6)(10,"ul",7)(11,"li",8)(12,"a",5),o._uU(13,"Support"),o.qZA()(),o.TgZ(14,"li",8)(15,"a",5),o._uU(16,"Help Center"),o.qZA()(),o.TgZ(17,"li",8)(18,"a",5),o._uU(19,"Privacy"),o.qZA()(),o.TgZ(20,"li",8)(21,"a",5),o._uU(22,"Terms"),o.qZA()()()()()()())},styles:[""]}),n})(),E4=(()=>{class n{ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"wrapper"],[1,"main"],[1,"content"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"app-menu"),o.TgZ(2,"div",1),o._UZ(3,"app-main"),o.TgZ(4,"main",2),o._UZ(5,"router-outlet"),o.qZA(),o._UZ(6,"app-footer"),o.qZA()())},directives:[w4,b4,$v,C4],styles:[""]}),n})();const RF="@firebase/database";let $M="";function PF(n){$M=n}class S4{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,F.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,F.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class D4{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,F.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const NF=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new S4(t)}}catch(t){}return new D4},Rg=NF("localStorage"),qM=NF("sessionStorage"),$y=new vo.Yd("@firebase/database"),FF=function(){let n=1;return function(){return n++}}(),LF=function(n){const t=(0,F.dS)(n),e=new F.gQ;e.update(t);const i=e.digest();return F.US.encodeByteArray(i)},S0=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=S0.apply(null,i):t+="object"==typeof i?(0,F.Pz)(i):i,t+=" "}return t};let Og=null,VF=!0;const BF=function(n,t){(0,F.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($y.logLevel=vo.in.VERBOSE,Og=$y.log.bind($y),t&&qM.set("logging_enabled",!0)):"function"==typeof n?Og=n:(Og=null,qM.remove("logging_enabled"))},Hr=function(...n){if(!0===VF&&(VF=!1,null===Og&&!0===qM.get("logging_enabled")&&BF(!0)),Og){const t=S0.apply(null,n);Og(t)}},D0=function(n){return function(...t){Hr(n,...t)}},WM=function(...n){const t="FIREBASE INTERNAL ERROR: "+S0(...n);$y.error(t)},oc=function(...n){const t=`FIREBASE FATAL ERROR: ${S0(...n)}`;throw $y.error(t),new Error(t)},bs=function(...n){const t="FIREBASE WARNING: "+S0(...n);$y.warn(t)},sS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Cd="[MIN_NAME]",ac="[MAX_NAME]",Pg=function(n,t){if(n===t)return 0;if(n===Cd||t===ac)return-1;if(t===Cd||n===ac)return 1;{const e=oS(n),i=oS(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},M4=function(n,t){return n===t?0:n<t?-1:1},x0=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(t))},ZM=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,F.Pz)(t[i]),e+=":",e+=ZM(n[t[i]]);return e+="}",e},UF=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function jr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const HF=function(n){(0,F.hu)(!sS(n),"Invalid JSON number");const i=1023;let r,s,u,h,p;0===n?(s=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=h+i,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const E=y.join("");let I="";for(p=0;p<64;p+=8){let M=parseInt(E.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),I+=M}return I.toLowerCase()},P4=new RegExp("^-?(0*)\\d{1,10}$"),jF=-2147483648,KM=2147483647,oS=function(n){if(P4.test(n)){const t=Number(n);if(t>=jF&&t<=KM)return t}return null},qy=function(n){try{n()}catch(t){setTimeout(()=>{throw bs("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},A0=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class F4{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){bs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class L4{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Hr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bs(t)}}let M0=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const WF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YF="websocket",QF="long_polling";class QM{constructor(t,e,i,r,s=!1,u="",h=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rg.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Rg.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function JF(n,t,e){let i;if((0,F.hu)("string"==typeof t,"typeof type must == string"),(0,F.hu)("object"==typeof e,"typeof params must == object"),t===YF)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==QF)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function V4(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return jr(e,(s,u)=>{r.push(s+"="+u)}),i+r.join("&")}class B4{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,F.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,F.p$)(this.counters_)}}const JM={},XM={};function ek(n){const t=n.toString();return JM[t]||(JM[t]=new B4),JM[t]}class H4{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&qy(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Cf{constructor(t,e,i,r,s,u,h){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=D0(t),this.stats_=ek(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),JF(e,QF,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new H4(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tk((...s)=>{const[u,h,p,y,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&WF.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Cf.forceAllow_=!0}static forceDisallow(){Cf.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Cf.forceAllow_&&(Cf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,F.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,F.h$)(e),r=UF(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,F.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class tk{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=FF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=tk.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Hr("frame writing exception"),h.stack&&Hr(h.stack),Hr(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Hr("No IE domain setting required")}catch(e){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,F.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Hr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let lS=null;"undefined"!=typeof MozWebSocket?lS=MozWebSocket:"undefined"!=typeof WebSocket&&(lS=WebSocket);let Wy=(()=>{class n{constructor(e,i,r,s,u,h,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=D0(this.connId),this.stats_=ek(i),this.connURL=n.connectionURL_(i,h,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,u){const h={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&WF.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),s&&(h.ac=s),u&&(h.p=u),JF(e,YF,h)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rg.set("previous_websocket_failure",!0);try{let r;if((0,F.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${$M}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,p=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;p&&(u.proxy={origin:p})}this.mySock=new lS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==lS&&!n.forceDisallow_}static previouslyFailed(){return Rg.isInMemoryStorage||!0===Rg.get("previous_websocket_failure")}markConnectionHealthy(){Rg.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,F.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,F.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=UF(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),sL=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Cf,Wy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Wy&&Wy.isAvailable();let r=i&&!Wy.previouslyFailed();if(e.webSocketOnly&&(i||bs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Wy];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class hL{constructor(t,e,i,r,s,u,h,p,y,E){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=D0("c:"+this.id+":"),this.transportManager_=new sL(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=A0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=x0("t",t),i=x0("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=x0("t",t),i=x0("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=x0("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?WM("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):WM("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&bs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),A0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):A0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class fL{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class pL{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,F.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,F.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class uS extends pL{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new uS}getInitialEvent(t){return(0,F.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class In{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function wn(){return new In("")}function Kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ef(n){return n.pieces_.length-n.pieceNum_}function Nn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new In(n.pieces_,t)}function ik(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function k0(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function _L(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new In(t,0)}function di(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof In)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new In(e,0)}function Yt(n){return n.pieceNum_>=n.pieces_.length}function Ws(n,t){const e=Kt(n),i=Kt(t);if(null===e)return t;if(e===i)return Ws(Nn(n),Nn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function uq(n,t){const e=k0(n,0),i=k0(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Pg(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function rk(n,t){if(Ef(n)!==Ef(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Ja(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Ef(n)>Ef(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class cq{constructor(t,e){this.errorPrefix_=e,this.parts_=k0(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,F.ug)(this.parts_[i]);yL(this)}}function yL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ng(n))}function Ng(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class sk extends pL{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new sk}getInitialEvent(t){return(0,F.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const R0=1e3;let dS,Fg=(()=>{class n extends fL{constructor(e,i,r,s,u,h,p,y){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=D0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=R0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sk.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&uS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,u={r:s,a:e,b:i};this.log_((0,F.Pz)(u)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new F.BH,r={p:e._path.toString(),q:e._queryObject},s={action:"g",request:r,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(r.p,p,!1,null),i.resolve(p)):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||s!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),i.promise}listen(e,i,r,s){this.initConnection_();const u=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(h).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const u={p:r};e.tag&&(u.q=i._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest("q",u,p=>{const y=p.d,E=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(r,s),e.onComplete&&e.onComplete(E,y))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,F.r3)(e,"w")){const r=(0,F.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();bs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,F.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,F.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const u=s.s,h=s.d||"error";this.authToken_===e&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const u={p:e};s&&(u.q=r,u.t=s),this.sendRequest("n",u)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const u={p:i,d:r};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,u){this.initConnection_();const h={p:i,d:r};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:e,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,F.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):WM("Unrecognized action received from server: "+(0,F.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=R0,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=R0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=R0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ie.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),u=e.id+":"+n.nextConnectionId_++,h=e.lastSessionId;let p=!1,y=null;const E=function(){y?y.close():(p=!0,s())};e.realtime_={close:E,sendRequest:function(P){(0,F.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[P,B]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);p?Hr("getToken() completed but was canceled"):(Hr("getToken() completed. Creating connection."),e.authToken_=P&&P.accessToken,e.appCheckToken_=B&&B.token,y=new hL(u,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,Q=>{bs(Q+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(P){e.log_("Failed to get token: "+P),p||(e.repoInfo_.nodeAdmin&&bs(P),E())}}})()}interrupt(e){Hr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=R0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(u=>ZM(u)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new In(e).toString();let s;if(this.listens.has(r)){const u=this.listens.get(r);s=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Hr("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Hr("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,F.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+$M.replace(/\./g,"-")]=1,(0,F.uI)()?e["framework.cordova"]=1:(0,F.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=uS.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Xt{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Xt(t,e)}}class cS{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Xt(Cd,t),r=new Xt(Cd,e);return 0!==this.compare(i,r)}minPost(){return Xt.MIN}}class bL extends cS{static get __EMPTY_NODE(){return dS}static set __EMPTY_NODE(t){dS=t}compare(t,e){return Pg(t.name,e.name)}isDefinedOn(t){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Xt.MIN}maxPost(){return new Xt(ac,dS)}makePost(t,e){return(0,F.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Xt(t,dS)}toString(){return".key"}}const lc=new bL;class hS{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!t.isEmpty();)if(t=t,u=e?i(t.key,e):1,r&&(u*=-1),u<0)t=this.isReverse_?t.left:t.right;else{if(0===u){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let ak,jl=(()=>{class n{constructor(e,i,r,s,u){this.key=e,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Io.EMPTY_NODE,this.right=null!=u?u:Io.EMPTY_NODE}copy(e,i,r,s,u){return new n(null!=e?e:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===u?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Io.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Io.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Io{constructor(t,e=Io.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Io(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,jl.BLACK,null,null))}remove(t){return new Io(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,jl.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new hS(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new hS(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new hS(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new hS(this.root_,null,this.comparator_,!0,t)}}function vq(n,t){return Pg(n.name,t.name)}function ok(n,t){return Pg(n,t)}Io.EMPTY_NODE=new class yq{copy(t,e,i,r,s){return this}insert(t,e,i){return new jl(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const CL=function(n){return"number"==typeof n?"number:"+HF(n):"string:"+n},EL=function(n){if(n.isLeafNode()){const t=n.val();(0,F.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,F.r3)(t,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===ak||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===ak||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let TL,IL,SL,Zy=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),EL(this.priorityNode_)}static set __childrenNodeConstructor(e){TL=e}static get __childrenNodeConstructor(){return TL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Yt(e)?this:".priority"===Kt(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=Kt(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,F.hu)(".priority"!==r||1===Ef(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Nn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+CL(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?HF(this.value_):this.value_,this.lazyHash_=LF(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return(0,F.hu)(s>=0,"Unknown leaf type: "+i),(0,F.hu)(u>=0,"Unknown leaf type: "+r),s===u?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const jn=new class Eq extends cS{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Pg(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Xt.MIN}maxPost(){return new Xt(ac,new Zy("[PRIORITY-POST]",SL))}makePost(t,e){const i=IL(t);return new Xt(e,new Zy("[PRIORITY-POST]",i))}toString(){return".priority"}},Tq=Math.log(2);class Iq{constructor(t){this.count=parseInt(Math.log(t+1)/Tq,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const fS=function(n,t,e,i){n.sort(t);const r=function(p,y){const E=y-p;let I,M;if(0===E)return null;if(1===E)return I=n[p],M=e?e(I):I,new jl(M,I.node,jl.BLACK,null,null);{const P=parseInt(E/2,10)+p,B=r(p,P),Q=r(P+1,y);return I=n[P],M=e?e(I):I,new jl(M,I.node,jl.BLACK,B,Q)}},h=function(p){let y=null,E=null,I=n.length;const M=function(B,Q){const we=I-B,et=I;I-=B;const nt=r(we+1,et),it=n[we],st=e?e(it):it;P(new jl(st,it.node,Q,null,nt))},P=function(B){y?(y.left=B,y=B):(E=B,y=B)};for(let B=0;B<p.count;++B){const Q=p.nextBitIsOne(),we=Math.pow(2,p.count-(B+1));Q?M(we,jl.BLACK):(M(we,jl.BLACK),M(we,jl.RED))}return E}(new Iq(n.length));return new Io(i||t,h)};let lk;const Ky={};class Ed{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,F.hu)(Ky&&jn,"ChildrenNode.ts has not been loaded"),lk=lk||new Ed({".priority":Ky},{".priority":jn}),lk}get(t){const e=(0,F.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Io?e:null}hasIndex(t){return(0,F.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,F.hu)(t!==lc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(Xt.Wrap);let h,u=s.getNext();for(;u;)r=r||t.isDefinedOn(u.node),i.push(u),u=s.getNext();h=r?fS(i,t.getCompare()):Ky;const p=t.toString(),y=Object.assign({},this.indexSet_);y[p]=t;const E=Object.assign({},this.indexes_);return E[p]=h,new Ed(E,y)}addToIndexes(t,e){const i=(0,F.UI)(this.indexes_,(r,s)=>{const u=(0,F.DV)(this.indexSet_,s);if((0,F.hu)(u,"Missing index implementation for "+s),r===Ky){if(u.isDefinedOn(t.node)){const h=[],p=e.getIterator(Xt.Wrap);let y=p.getNext();for(;y;)y.name!==t.name&&h.push(y),y=p.getNext();return h.push(t),fS(h,u.getCompare())}return Ky}{const h=e.get(t.name);let p=r;return h&&(p=p.remove(new Xt(t.name,h))),p.insert(t,t.node)}});return new Ed(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,F.UI)(this.indexes_,r=>{if(r===Ky)return r;{const s=e.get(t.name);return s?r.remove(new Xt(t.name,s)):r}});return new Ed(i,this.indexSet_)}}let O0,Bt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&EL(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return O0||(O0=new n(new Io(ok),null,Ed.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||O0}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?O0:i}}getChild(e){const i=Kt(e);return null===i?this:this.getImmediateChild(i).getChild(Nn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,F.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new Xt(e,i);let s,u;i.isEmpty()?(s=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),u=this.indexMap_.addToIndexes(r,this.children_));const h=s.isEmpty()?O0:this.priorityNode_;return new n(s,h,u)}}updateChild(e,i){const r=Kt(e);if(null===r)return i;{(0,F.hu)(".priority"!==Kt(e)||1===Ef(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Nn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,u=!0;if(this.forEachChild(jn,(h,p)=>{i[h]=p.val(e),r++,u&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):u=!1}),!e&&u&&s<2*r){const h=[];for(const p in i)h[p]=i[p];return h}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+CL(this.getPriority().val())+":"),this.forEachChild(jn,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":LF(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const u=s.getPredecessorKey(new Xt(e,i));return u?u.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Xt(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Xt(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Xt.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,e)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Xt.Wrap);let u=s.peek();for(;null!=u&&i.compare(u,e)>0;)s.getNext(),u=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===P0?-1:0}withIndex(e){if(e===lc||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===lc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(jn),s=i.getIterator(jn);let u=r.getNext(),h=s.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=r.getNext(),h=s.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(e){return e===lc?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const P0=new class Sq extends Bt{constructor(){super(new Io(ok),Bt.EMPTY_NODE,Ed.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Bt.EMPTY_NODE}isEmpty(){return!1}};function mi(n,t=null){if(null===n)return Bt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,F.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Zy(n,mi(t));if(n instanceof Array){let e=Bt.EMPTY_NODE;return jr(n,(i,r)=>{if((0,F.r3)(n,i)&&"."!==i.substring(0,1)){const s=mi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(mi(t))}{const e=[];let i=!1;if(jr(n,(u,h)=>{if("."!==u.substring(0,1)){const p=mi(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new Xt(u,p)))}}),0===e.length)return Bt.EMPTY_NODE;const s=fS(e,vq,u=>u.name,ok);if(i){const u=fS(e,jn.getCompare());return new Bt(s,mi(t),new Ed({".priority":u},{".priority":jn}))}return new Bt(s,mi(t),Ed.Default)}}Object.defineProperties(Xt,{MIN:{value:new Xt(Cd,Bt.EMPTY_NODE)},MAX:{value:new Xt(ac,P0)}}),bL.__EMPTY_NODE=Bt.EMPTY_NODE,Zy.__childrenNodeConstructor=Bt,function wq(n){ak=n}(P0),function Cq(n){SL=n}(P0),function bq(n){IL=n}(mi);class uk extends cS{constructor(t){super(),this.indexPath_=t,(0,F.hu)(!Yt(t)&&".priority"!==Kt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Pg(t.name,e.name):s}makePost(t,e){const i=mi(t),r=Bt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Xt(e,r)}maxPost(){const t=Bt.EMPTY_NODE.updateChild(this.indexPath_,P0);return new Xt(ac,t)}toString(){return k0(this.indexPath_,0).join("/")}}const ck=new class xq extends cS{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Pg(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Xt.MIN}maxPost(){return Xt.MAX}makePost(t,e){const i=mi(t);return new Xt(e,i)}toString(){return".value"}},Yy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Aq=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Yy.charAt(e%64),e=Math.floor(e/64);(0,F.hu)(0===e,"Cannot push at time == 0");let u=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)u+=Yy.charAt(t[r]);return(0,F.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),AL=function(n){if(n===""+KM)return"-";const t=oS(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let u=0;u<e.length;u++)e[u]=n.charAt(u);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return ac;const s=Yy.charAt(Yy.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},ML=function(n){if(n===""+jF)return Cd;const t=oS(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+KM:(delete e[e.length-1],e.join("")):(e[e.length-1]=Yy.charAt(Yy.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function kL(n){return{type:"value",snapshotNode:n}}function Qy(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function N0(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function F0(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class hk{constructor(t){this.index_=t}updateChild(t,e,i,r,s,u){(0,F.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=u&&(i.isEmpty()?t.hasChild(e)?u.trackChildChange(N0(e,h)):(0,F.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(Qy(e,i)):u.trackChildChange(F0(e,i,h))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(jn,(r,s)=>{e.hasChild(r)||i.trackChildChange(N0(r,s))}),e.isLeafNode()||e.forEachChild(jn,(r,s)=>{if(t.hasChild(r)){const u=t.getImmediateChild(r);u.equals(s)||i.trackChildChange(F0(r,s,u))}else i.trackChildChange(Qy(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Bt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class L0{constructor(t){this.indexedFilter_=new hk(t.getIndex()),this.index_=t.getIndex(),this.startPost_=L0.getStartPost_(t),this.endPost_=L0.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,u){return this.matches(new Xt(e,i))||(i=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,u)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Bt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Bt.EMPTY_NODE);const s=this;return e.forEachChild(jn,(u,h)=>{s.matches(new Xt(u,h))||(r=r.updateImmediateChild(u,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class kq{constructor(t){this.rangedFilter_=new L0(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,u){return this.rangedFilter_.matches(new Xt(e,i))||(i=Bt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,u):this.fullLimitUpdateChild_(t,e,i,s,u)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=Bt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(h.name,h.node),u++}}else{let s,u,h,p;if(r=e.withIndex(this.index_),r=r.updatePriority(Bt.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const I=this.index_.getCompare();h=(M,P)=>I(P,M)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,E=!1;for(;p.hasNext();){const I=p.getNext();!E&&h(s,I)<=0&&(E=!0),E&&y<this.limit_&&h(I,u)<=0?y++:r=r.updateImmediateChild(I.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let u;if(this.reverse_){const I=this.index_.getCompare();u=(M,P)=>I(P,M)}else u=this.index_.getCompare();const h=t;(0,F.hu)(h.numChildren()===this.limit_,"");const p=new Xt(e,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(h.hasChild(e)){const I=h.getImmediateChild(e);let M=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===e||h.hasChild(M.name));)M=r.getChildAfterChild(this.index_,M,this.reverse_);const P=null==M?1:u(M,p);if(E&&!i.isEmpty()&&P>=0)return null!=s&&s.trackChildChange(F0(e,i,I)),h.updateImmediateChild(e,i);{null!=s&&s.trackChildChange(N0(e,I));const Q=h.updateImmediateChild(e,Bt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=s&&s.trackChildChange(Qy(M.name,M.node)),Q.updateImmediateChild(M.name,M.node)):Q}}return i.isEmpty()?t:E&&u(y,p)>=0?(null!=s&&(s.trackChildChange(N0(y.name,y.node)),s.trackChildChange(Qy(e,i))),h.updateImmediateChild(e,i).updateImmediateChild(y.name,Bt.EMPTY_NODE)):t}}class pS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ac}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jn}copy(){const t=new pS;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function fk(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function pk(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function gS(n,t){const e=n.copy();return e.index_=t,e}function RL(n){const t={};if(n.isDefault())return t;let e;return n.index_===jn?e="$priority":n.index_===ck?e="$value":n.index_===lc?e="$key":((0,F.hu)(n.index_ instanceof uk,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,F.Pz)(e),n.startSet_&&(t.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function OL(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==jn&&(t.i=n.index_.toString()),t}class mS extends fL{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=D0("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,F.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const u=mS.getListenId_(t,i),h={};this.listens_[u]=h;const p=RL(t._queryParams);this.restRequest_(s+".json",p,(y,E)=>{let I=E;if(404===y&&(I=null,y=null),null===y&&this.onDataUpdate_(s,I,!1,i),(0,F.DV)(this.listens_,u)===h){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(M,null)}})}unlisten(t,e){const i=mS.getListenId_(t,e);delete this.listens_[i]}get(t){const e=RL(t._queryParams),i=t._path.toString(),r=new F.BH;return this.restRequest_(i+".json",e,(s,u)=>{let h=u;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,F.xO)(e);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,F.cI)(h.responseText)}catch(y){bs("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,p)}else 401!==h.status&&404!==h.status&&bs("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}class Lq{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function _S(){return{value:null,children:new Map}}function Jy(n,t,e){if(Yt(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=Kt(t);n.children.has(i)||n.children.set(i,_S()),Jy(n.children.get(i),t=Nn(t),e)}}function gk(n,t){if(Yt(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(jn,(i,r)=>{Jy(n,new In(i),r)}),gk(n,t)}}if(n.children.size>0){const e=Kt(t);return t=Nn(t),n.children.has(e)&&gk(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function mk(n,t,e){null!==n.value?e(t,n.value):function Vq(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{mk(r,new In(t.toString()+"/"+i),e)})}class Bq{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&jr(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class jq{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Bq(t);const i=1e4+2e4*Math.random();A0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;jr(t,(r,s)=>{s>0&&(0,F.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),A0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Xa||(Xa={})),Xa))();function vk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class yS{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Xa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Yt(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new In(t));return new yS(wn(),e,this.revert)}}return(0,F.hu)(Kt(this.path)===t,"operationForChild called for unrelated child."),new yS(Nn(this.path),this.affectedTree,this.revert)}}class V0{constructor(t,e){this.source=t,this.path=e,this.type=Xa.LISTEN_COMPLETE}operationForChild(t){return Yt(this.path)?new V0(this.source,wn()):new V0(this.source,Nn(this.path))}}class Lg{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Xa.OVERWRITE}operationForChild(t){return Yt(this.path)?new Lg(this.source,wn(),this.snap.getImmediateChild(t)):new Lg(this.source,Nn(this.path),this.snap)}}class Xy{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Xa.MERGE}operationForChild(t){if(Yt(this.path)){const e=this.children.subtree(new In(t));return e.isEmpty()?null:e.value?new Lg(this.source,wn(),e.value):new Xy(this.source,wn(),e)}return(0,F.hu)(Kt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Xy(this.source,Nn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Tf{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Yt(t))return this.isFullyInitialized()&&!this.filtered_;const e=Kt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Gq{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function B0(n,t,e,i,r,s){const u=i.filter(h=>h.type===e);u.sort((h,p)=>function qq(n,t,e){if(null==t.childName||null==e.childName)throw(0,F.g5)("Should only compare child_ events.");const i=new Xt(t.childName,t.snapshotNode),r=new Xt(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,h,p)),u.forEach(h=>{const p=function $q(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,h,s);r.forEach(y=>{y.respondsTo(h.type)&&t.push(y.createEvent(p,n.query_))})})}function vS(n,t){return{eventCache:n,serverCache:t}}function U0(n,t,e,i){return vS(new Tf(t,e,i),n.serverCache)}function NL(n,t,e,i){return vS(n.eventCache,new Tf(t,e,i))}function wS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Vg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let wk;class Gn{constructor(t,e=(()=>(wk||(wk=new Io(M4)),wk))()){this.value=t,this.children=e}static fromObject(t){let e=new Gn(null);return jr(t,(i,r)=>{e=e.set(new In(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:wn(),value:this.value};if(Yt(t))return null;{const i=Kt(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Nn(t),e);return null!=s?{path:di(new In(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Yt(t))return this;{const e=Kt(t),i=this.children.get(e);return null!==i?i.subtree(Nn(t)):new Gn(null)}}set(t,e){if(Yt(t))return new Gn(e,this.children);{const i=Kt(t),s=(this.children.get(i)||new Gn(null)).set(Nn(t),e),u=this.children.insert(i,s);return new Gn(this.value,u)}}remove(t){if(Yt(t))return this.children.isEmpty()?new Gn(null):new Gn(null,this.children);{const e=Kt(t),i=this.children.get(e);if(i){const r=i.remove(Nn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new Gn(null):new Gn(this.value,s)}return this}}get(t){if(Yt(t))return this.value;{const e=Kt(t),i=this.children.get(e);return i?i.get(Nn(t)):null}}setTree(t,e){if(Yt(t))return e;{const i=Kt(t),s=(this.children.get(i)||new Gn(null)).setTree(Nn(t),e);let u;return u=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Gn(this.value,u)}}fold(t){return this.fold_(wn(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(di(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,wn(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(Yt(t))return null;{const s=Kt(t),u=this.children.get(s);return u?u.findOnPath_(Nn(t),di(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,wn(),e)}foreachOnPath_(t,e,i){if(Yt(t))return this;{this.value&&i(e,this.value);const r=Kt(t),s=this.children.get(r);return s?s.foreachOnPath_(Nn(t),di(e,r),i):new Gn(null)}}foreach(t){this.foreach_(wn(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(di(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Gl{constructor(t){this.writeTree_=t}static empty(){return new Gl(new Gn(null))}}function H0(n,t,e){if(Yt(t))return new Gl(new Gn(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const u=Ws(r,t);return s=s.updateChild(u,e),new Gl(n.writeTree_.set(r,s))}{const r=new Gn(e),s=n.writeTree_.setTree(t,r);return new Gl(s)}}}function bk(n,t,e){let i=n;return jr(e,(r,s)=>{i=H0(i,di(t,r),s)}),i}function FL(n,t){if(Yt(t))return Gl.empty();{const e=n.writeTree_.setTree(t,new Gn(null));return new Gl(e)}}function Ck(n,t){return null!=Bg(n,t)}function Bg(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Ws(e.path,t)):null}function LL(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(jn,(i,r)=>{t.push(new Xt(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new Xt(i,r.value))}),t}function If(n,t){if(Yt(t))return n;{const e=Bg(n,t);return new Gl(null!=e?new Gn(e):n.writeTree_.subtree(t))}}function Ek(n){return n.writeTree_.isEmpty()}function ev(n,t){return VL(wn(),n.writeTree_,t)}function VL(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,F.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=VL(di(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(di(n,".priority"),i)),e}}function bS(n,t){return GL(t,n)}function Jq(n,t){if(n.snap)return Ja(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Ja(di(n.path,e),t))return!0;return!1}function eW(n){return n.visible}function BL(n,t,e){let i=Gl.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const u=s.path;let h;if(s.snap)Ja(e,u)?(h=Ws(e,u),i=H0(i,h,s.snap)):Ja(u,e)&&(h=Ws(u,e),i=H0(i,wn(),s.snap.getChild(h)));else{if(!s.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(Ja(e,u))h=Ws(e,u),i=bk(i,h,s.children);else if(Ja(u,e))if(h=Ws(u,e),Yt(h))i=bk(i,wn(),s.children);else{const p=(0,F.DV)(s.children,Kt(h));if(p){const y=p.getChild(Nn(h));i=H0(i,wn(),y)}}}}}return i}function UL(n,t,e,i,r){if(i||r){const s=If(n.visibleWrites,t);return!r&&Ek(s)?e:r||null!=e||Ck(s,wn())?ev(BL(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(Ja(y.path,t)||Ja(t,y.path))},t),e||Bt.EMPTY_NODE):null}{const s=Bg(n.visibleWrites,t);if(null!=s)return s;{const u=If(n.visibleWrites,t);return Ek(u)?e:null!=e||Ck(u,wn())?ev(u,e||Bt.EMPTY_NODE):null}}}function CS(n,t,e,i){return UL(n.writeTree,n.treePath,t,e,i)}function Tk(n,t){return function tW(n,t,e){let i=Bt.EMPTY_NODE;const r=Bg(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(jn,(s,u)=>{i=i.updateImmediateChild(s,u)}),i;if(e){const s=If(n.visibleWrites,t);return e.forEachChild(jn,(u,h)=>{const p=ev(If(s,new In(u)),h);i=i.updateImmediateChild(u,p)}),LL(s).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return LL(If(n.visibleWrites,t)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,t)}function HL(n,t,e,i){return function nW(n,t,e,i,r){(0,F.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=di(t,e);if(Ck(n.visibleWrites,s))return null;{const u=If(n.visibleWrites,s);return Ek(u)?r.getChild(e):ev(u,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function ES(n,t){return function rW(n,t){return Bg(n.visibleWrites,t)}(n.writeTree,di(n.treePath,t))}function Ik(n,t,e){return function iW(n,t,e,i){const r=di(t,e),s=Bg(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?ev(If(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function jL(n,t){return GL(di(n.treePath,t),n.writeTree)}function GL(n,t){return{treePath:n,writeTree:t}}class lW{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,F.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,F0(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,N0(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,Qy(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,F.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,F0(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const zL=new class uW{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class Sk{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Tf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ik(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Vg(this.viewCache_),s=function aW(n,t,e,i,r,s){return function sW(n,t,e,i,r,s,u){let h;const p=If(n.visibleWrites,t),y=Bg(p,wn());if(null!=y)h=y;else{if(null==e)return[];h=ev(p,e)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const E=[],I=u.getCompare(),M=s?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let P=M.getNext();for(;P&&E.length<r;)0!==I(P,i)&&E.push(P),P=M.getNext();return E}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function $L(n,t,e,i,r,s){const u=t.eventCache;if(null!=ES(i,e))return t;{let h,p;if(Yt(e))if((0,F.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=Vg(t),I=Tk(i,y instanceof Bt?y:Bt.EMPTY_NODE);h=n.filter.updateFullNode(t.eventCache.getNode(),I,s)}else{const y=CS(i,Vg(t));h=n.filter.updateFullNode(t.eventCache.getNode(),y,s)}else{const y=Kt(e);if(".priority"===y){(0,F.hu)(1===Ef(e),"Can't have a priority with additional path components");const E=u.getNode();p=t.serverCache.getNode();const I=HL(i,e,E,p);h=null!=I?n.filter.updatePriority(E,I):u.getNode()}else{const E=Nn(e);let I;if(u.isCompleteForChild(y)){p=t.serverCache.getNode();const M=HL(i,e,u.getNode(),p);I=null!=M?u.getNode().getImmediateChild(y).updateChild(E,M):u.getNode().getImmediateChild(y)}else I=Ik(i,y,t.serverCache);h=null!=I?n.filter.updateChild(u.getNode(),y,I,E,r,s):u.getNode()}}return U0(t,h,u.isFullyInitialized()||Yt(e),n.filter.filtersNodes())}}function TS(n,t,e,i,r,s,u,h){const p=t.serverCache;let y;const E=u?n.filter:n.filter.getIndexedFilter();if(Yt(e))y=E.updateFullNode(p.getNode(),i,null);else if(E.filtersNodes()&&!p.isFiltered()){const P=p.getNode().updateChild(e,i);y=E.updateFullNode(p.getNode(),P,null)}else{const P=Kt(e);if(!p.isCompleteForPath(e)&&Ef(e)>1)return t;const B=Nn(e),we=p.getNode().getImmediateChild(P).updateChild(B,i);y=".priority"===P?E.updatePriority(p.getNode(),we):E.updateChild(p.getNode(),P,we,B,zL,null)}const I=NL(t,y,p.isFullyInitialized()||Yt(e),E.filtersNodes());return $L(n,I,e,r,new Sk(r,I,s),h)}function Dk(n,t,e,i,r,s,u){const h=t.eventCache;let p,y;const E=new Sk(r,t,s);if(Yt(e))y=n.filter.updateFullNode(t.eventCache.getNode(),i,u),p=U0(t,y,!0,n.filter.filtersNodes());else{const I=Kt(e);if(".priority"===I)y=n.filter.updatePriority(t.eventCache.getNode(),i),p=U0(t,y,h.isFullyInitialized(),h.isFiltered());else{const M=Nn(e),P=h.getNode().getImmediateChild(I);let B;if(Yt(M))B=i;else{const Q=E.getCompleteChild(I);B=null!=Q?".priority"===ik(M)&&Q.getChild(_L(M)).isEmpty()?Q:Q.updateChild(M,i):Bt.EMPTY_NODE}p=P.equals(B)?t:U0(t,n.filter.updateChild(h.getNode(),I,B,M,E,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function qL(n,t){return n.eventCache.isCompleteForChild(t)}function WL(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function xk(n,t,e,i,r,s,u,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,p=t;y=Yt(e)?i:new Gn(null).setTree(e,i);const E=t.serverCache.getNode();return y.children.inorderTraversal((I,M)=>{if(E.hasChild(I)){const B=WL(0,t.serverCache.getNode().getImmediateChild(I),M);p=TS(n,p,new In(I),B,r,s,u,h)}}),y.children.inorderTraversal((I,M)=>{const P=!t.serverCache.isCompleteForChild(I)&&void 0===M.value;if(!E.hasChild(I)&&!P){const Q=WL(0,t.serverCache.getNode().getImmediateChild(I),M);p=TS(n,p,new In(I),Q,r,s,u,h)}}),p}class yW{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new hk(i.getIndex()),s=function Rq(n){return n.loadsAllData()?new hk(n.getIndex()):n.hasLimit()?new kq(n):new L0(n)}(i);this.processor_=function cW(n){return{filter:n}}(s);const u=e.serverCache,h=e.eventCache,p=r.updateFullNode(Bt.EMPTY_NODE,u.getNode(),null),y=s.updateFullNode(Bt.EMPTY_NODE,h.getNode(),null),E=new Tf(p,u.isFullyInitialized(),r.filtersNodes()),I=new Tf(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=vS(I,E),this.eventGenerator_=new Gq(this.query_)}get query(){return this.query_}}function bW(n,t){const e=Vg(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Yt(t)&&!e.getImmediateChild(Kt(t)).isEmpty())?e.getChild(t):null}function ZL(n){return 0===n.eventRegistrations_.length}function KL(n,t,e){const i=[];if(e){(0,F.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(e,r);u&&i.push(u)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(u)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function YL(n,t,e,i){t.type===Xa.MERGE&&null!==t.source.queryId&&((0,F.hu)(Vg(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(wS(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function hW(n,t,e,i,r){const s=new lW;let u,h;if(e.type===Xa.OVERWRITE){const y=e;y.source.fromUser?u=Dk(n,t,y.path,y.snap,i,r,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered()&&!Yt(y.path),u=TS(n,t,y.path,y.snap,i,r,h,s))}else if(e.type===Xa.MERGE){const y=e;y.source.fromUser?u=function pW(n,t,e,i,r,s,u){let h=t;return i.foreach((p,y)=>{const E=di(e,p);qL(t,Kt(E))&&(h=Dk(n,h,E,y,r,s,u))}),i.foreach((p,y)=>{const E=di(e,p);qL(t,Kt(E))||(h=Dk(n,h,E,y,r,s,u))}),h}(n,t,y.path,y.children,i,r,s):((0,F.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||t.serverCache.isFiltered(),u=xk(n,t,y.path,y.children,i,r,h,s))}else if(e.type===Xa.ACK_USER_WRITE){const y=e;u=y.revert?function _W(n,t,e,i,r,s){let u;if(null!=ES(i,e))return t;{const h=new Sk(i,t,r),p=t.eventCache.getNode();let y;if(Yt(e)||".priority"===Kt(e)){let E;if(t.serverCache.isFullyInitialized())E=CS(i,Vg(t));else{const I=t.serverCache.getNode();(0,F.hu)(I instanceof Bt,"serverChildren would be complete if leaf node"),E=Tk(i,I)}E=E,y=n.filter.updateFullNode(p,E,s)}else{const E=Kt(e);let I=Ik(i,E,t.serverCache);null==I&&t.serverCache.isCompleteForChild(E)&&(I=p.getImmediateChild(E)),y=null!=I?n.filter.updateChild(p,E,I,Nn(e),h,s):t.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Bt.EMPTY_NODE,Nn(e),h,s):p,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(u=CS(i,Vg(t)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=t.serverCache.isFullyInitialized()||null!=ES(i,wn()),U0(t,y,u,n.filter.filtersNodes())}}(n,t,y.path,i,r,s):function gW(n,t,e,i,r,s,u){if(null!=ES(r,e))return t;const h=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(Yt(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return TS(n,t,e,p.getNode().getChild(e),r,s,h,u);if(Yt(e)){let y=new Gn(null);return p.getNode().forEachChild(lc,(E,I)=>{y=y.set(new In(E),I)}),xk(n,t,e,y,r,s,h,u)}return t}{let y=new Gn(null);return i.foreach((E,I)=>{const M=di(e,E);p.isCompleteForPath(M)&&(y=y.set(E,p.getNode().getChild(M)))}),xk(n,t,e,y,r,s,h,u)}}(n,t,y.path,y.affectedTree,i,r,s)}else{if(e.type!==Xa.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+e.type);u=function mW(n,t,e,i,r){const s=t.serverCache;return $L(n,NL(t,s.getNode(),s.isFullyInitialized()||Yt(e),s.isFiltered()),e,i,zL,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function fW(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=wS(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(kL(wS(t)))}}(t,u,p),{viewCache:u,changes:p}}(n.processor_,r,t,e,i);return function dW(n,t){(0,F.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,F.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,QL(n,s.changes,s.viewCache.eventCache.getNode(),null)}function QL(n,t,e,i){return function zq(n,t,e,i){const r=[],s=[];return t.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function Mq(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(u.childName,u.snapshotNode))}),B0(n,r,"child_removed",t,i,e),B0(n,r,"child_added",t,i,e),B0(n,r,"child_moved",s,i,e),B0(n,r,"child_changed",t,i,e),B0(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let IS,DS;class JL{constructor(){this.views=new Map}}function Ak(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,F.hu)(null!=s,"SyncTree gave us an op for an invalid query."),YL(s,t,e,i)}{let s=[];for(const u of n.views.values())s=s.concat(YL(u,t,e,i));return s}}function XL(n,t,e,i,r){const u=n.views.get(t._queryIdentifier);if(!u){let h=CS(e,r?i:null),p=!1;h?p=!0:i instanceof Bt?(h=Tk(e,i),p=!1):(h=Bt.EMPTY_NODE,p=!1);const y=vS(new Tf(h,p,!1),new Tf(i,r,!1));return new yW(t,y)}return u}function e2(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Sf(n,t){let e=null;for(const i of n.views.values())e=e||bW(i,t);return e}function t2(n,t){return t._queryParams.loadsAllData()?SS(n):n.views.get(t._queryIdentifier)}function n2(n,t){return null!=t2(n,t)}function Df(n){return null!=SS(n)}function SS(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let kW=1;class r2{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Gn(null),this.pendingWriteTree_=function oW(){return{visibleWrites:Gl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Mk(n,t,e,i,r){return function Zq(n,t,e,i,r){(0,F.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=H0(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?tv(n,new Lg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function xf(n,t,e=!1){const i=function Yq(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function Qq(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);(0,F.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=e&&Jq(h,i.path)?r=!1:Ja(i.path,h.path)&&(s=!0)),u--}return!!r&&(s?(function Xq(n){n.visibleWrites=BL(n.allWrites,eW,wn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=FL(n.visibleWrites,i.path):jr(i.children,p=>{n.visibleWrites=FL(n.visibleWrites,di(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new Gn(null);return null!=i.snap?s=s.set(wn(),!0):jr(i.children,u=>{s=s.set(new In(u),!0)}),tv(n,new yS(i.path,s,e))}return[]}function j0(n,t,e){return tv(n,new Lg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function kk(n,t,e,i){const r=t._path,s=n.syncPointTree_.get(r);let u=[];if(s&&("default"===t._queryIdentifier||n2(s,t))){const h=function xW(n,t,e,i){const r=t._queryIdentifier,s=[];let u=[];const h=Df(n);if("default"===r)for(const[p,y]of n.views.entries())u=u.concat(KL(y,e,i)),ZL(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(r);p&&(u=u.concat(KL(p,e,i)),ZL(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!Df(n)&&s.push(new(function IW(){return(0,F.hu)(IS,"Reference.ts has not been loaded"),IS}())(t._repo,t._path)),{removed:s,events:u}}(s,t,e,i);(function SW(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=h.removed;u=h.events;const y=-1!==p.findIndex(I=>I._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(r,(I,M)=>Df(M));if(y&&!E){const I=n.syncPointTree_.subtree(r);if(!I.isEmpty()){const M=function BW(n){return n.fold((t,e,i)=>{if(e&&Df(e))return[SS(e)];{let r=[];return e&&(r=e2(e)),jr(i,(s,u)=>{r=r.concat(u)}),r}})}(I);for(let P=0;P<M.length;++P){const B=M[P],Q=B.query,we=l2(n,B);n.listenProvider_.startListening(G0(Q),AS(n,Q),we.hashFn,we.onComplete)}}}!E&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(G0(t),null):p.forEach(I=>{const M=n.queryToTagMap.get(MS(I));n.listenProvider_.stopListening(G0(I),M)})),function UW(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=MS(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return u}function s2(n,t,e){const i=t._path;let r=null,s=!1;n.syncPointTree_.foreachOnPath(i,(I,M)=>{const P=Ws(I,i);r=r||Sf(M,P),s=s||Df(M)});let h,u=n.syncPointTree_.get(i);u?(s=s||Df(u),r=r||Sf(u,wn())):(u=new JL,n.syncPointTree_=n.syncPointTree_.set(i,u)),null!=r?h=!0:(h=!1,r=Bt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((M,P)=>{const B=Sf(P,wn());B&&(r=r.updateImmediateChild(M,B))}));const p=n2(u,t);if(!p&&!t._queryParams.loadsAllData()){const I=MS(t);(0,F.hu)(!n.queryToTagMap.has(I),"View does not exist, but we have a tag");const M=function HW(){return kW++}();n.queryToTagMap.set(I,M),n.tagToQueryMap.set(M,I)}let E=function DW(n,t,e,i,r,s){const u=XL(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,u),function CW(n,t){n.eventRegistrations_.push(t)}(u,e),function EW(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(jn,(s,u)=>{i.push(Qy(s,u))}),e.isFullyInitialized()&&i.push(kL(e.getNode())),QL(n,i,e.getNode(),t)}(u,e)}(u,t,e,bS(n.pendingWriteTree_,i),r,h);if(!p&&!s){const I=t2(u,t);E=E.concat(function jW(n,t,e){const i=t._path,r=AS(n,t),s=l2(n,e),u=n.listenProvider_.startListening(G0(t),r,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,F.hu)(!Df(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,E,I)=>{if(!Yt(y)&&E&&Df(E))return[SS(E).query];{let M=[];return E&&(M=M.concat(e2(E).map(P=>P.query))),jr(I,(P,B)=>{M=M.concat(B)}),M}});for(let y=0;y<p.length;++y){const E=p[y];n.listenProvider_.stopListening(G0(E),AS(n,E))}}return u}(n,t,I))}return E}function xS(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(u,h)=>{const y=Sf(h,Ws(u,t));if(y)return y});return UL(r,t,s,e,!0)}function tv(n,t){return o2(t,n.syncPointTree_,null,bS(n.pendingWriteTree_,wn()))}function o2(n,t,e,i){if(Yt(n.path))return a2(n,t,e,i);{const r=t.get(wn());null==e&&null!=r&&(e=Sf(r,wn()));let s=[];const u=Kt(n.path),h=n.operationForChild(u),p=t.children.get(u);if(p&&h){const y=e?e.getImmediateChild(u):null,E=jL(i,u);s=s.concat(o2(h,p,y,E))}return r&&(s=s.concat(Ak(r,n,i,e))),s}}function a2(n,t,e,i){const r=t.get(wn());null==e&&null!=r&&(e=Sf(r,wn()));let s=[];return t.children.inorderTraversal((u,h)=>{const p=e?e.getImmediateChild(u):null,y=jL(i,u),E=n.operationForChild(u);E&&(s=s.concat(a2(E,h,p,y)))}),r&&(s=s.concat(Ak(r,n,i,e))),s}function l2(n,t){const e=t.query,i=AS(n,e);return{hashFn:()=>(function vW(n){return n.viewCache_.serverCache.getNode()}(t)||Bt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function NW(n,t,e){const i=Rk(n,e);if(i){const r=Ok(i),s=r.path,u=r.queryId,h=Ws(s,t);return Pk(n,s,new V0(vk(u),h))}return[]}(n,e._path,i):function PW(n,t){return tv(n,new V0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function O4(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return kk(n,e,null,s)}}}}function AS(n,t){const e=MS(t);return n.queryToTagMap.get(e)}function MS(n){return n._path.toString()+"$"+n._queryIdentifier}function Rk(n,t){return n.tagToQueryMap.get(t)}function Ok(n){const t=n.indexOf("$");return(0,F.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new In(n.substr(0,t))}}function Pk(n,t,e){const i=n.syncPointTree_.get(t);return(0,F.hu)(i,"Missing sync point for query tag that we're tracking"),Ak(i,e,bS(n.pendingWriteTree_,t),null)}function G0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function MW(){return(0,F.hu)(DS,"Reference.ts has not been loaded"),DS}())(n._repo,n._path):n}class Nk{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Nk(e)}node(){return this.node_}}class Fk{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=di(this.path_,t);return new Fk(this.syncTree_,e)}node(){return xS(this.syncTree_,this.path_)}}const u2=function(n,t,e){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?zW(n[".sv"],t,e):"object"==typeof n[".sv"]?$W(n[".sv"],t):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},zW=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},$W=function(n,t,e){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,F.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,F.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},c2=function(n,t,e,i){return Vk(t,new Fk(e,n),i)},Lk=function(n,t,e){return Vk(n,new Nk(t),e)};function Vk(n,t,e){const i=n.getPriority().val(),r=u2(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const u=n,h=u2(u.getValue(),t,e);return h!==u.getValue()||r!==u.getPriority().val()?new Zy(h,mi(r)):n}{const u=n;return s=u,r!==u.getPriority().val()&&(s=s.updatePriority(new Zy(r))),u.forEachChild(jn,(h,p)=>{const y=Vk(p,t.getImmediateChild(h),e);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class Bk{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function kS(n,t){let e=t instanceof In?t:new In(t),i=n,r=Kt(e);for(;null!==r;){const s=(0,F.DV)(i.node.children,r)||{children:{},childCount:0};i=new Bk(r,i,s),e=Nn(e),r=Kt(e)}return i}function Ug(n){return n.node.value}function Uk(n,t){n.node.value=t,Hk(n)}function d2(n){return n.node.childCount>0}function RS(n,t){jr(n.node.children,(e,i)=>{t(new Bk(e,n,i))})}function h2(n,t,e,i){e&&!i&&t(n),RS(n,r=>{h2(r,t,!0,i)}),e&&i&&t(n)}function z0(n){return new In(null===n.parent?n.name:z0(n.parent)+"/"+n.name)}function Hk(n){null!==n.parent&&function ZW(n,t,e){const i=function qW(n){return void 0===Ug(n)&&!d2(n)}(e),r=(0,F.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,Hk(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,Hk(n))}(n.parent,n.name,n)}const KW=/[\[\].#$\/\u0000-\u001F\u007F]/,YW=/[\[\].#$\u0000-\u001F\u007F]/,jk=10485760,OS=function(n){return"string"==typeof n&&0!==n.length&&!KW.test(n)},f2=function(n){return"string"==typeof n&&0!==n.length&&!YW.test(n)},$0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!sS(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},uc=function(n,t,e,i){i&&void 0===t||q0((0,F.gK)(n,"value"),t,e)},q0=function(n,t,e){const i=e instanceof In?new cq(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Ng(i));if("function"==typeof t)throw new Error(n+"contains a function "+Ng(i)+" with contents = "+t.toString());if(sS(t))throw new Error(n+"contains "+t.toString()+" "+Ng(i));if("string"==typeof t&&t.length>jk/3&&(0,F.ug)(t)>jk)throw new Error(n+"contains a string greater than "+jk+" utf8 bytes "+Ng(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(jr(t,(u,h)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!OS(u)))throw new Error(n+" contains an invalid key ("+u+") "+Ng(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function dq(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,F.ug)(t),yL(n)})(i,u),q0(n,h,i),function hq(n){const t=n.parts_.pop();n.byteLength_-=(0,F.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Ng(i)+" in addition to actual children.")}},p2=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,F.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];jr(t,(u,h)=>{const p=new In(u);if(q0(r,h,di(e,p)),".priority"===ik(p)&&!$0(h))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=k0(i);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!OS(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(uq);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&Ja(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},Gk=function(n,t,e){if(!e||void 0!==t){if(sS(t))throw new Error((0,F.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$0(t))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},W0=function(n,t,e,i){if(!(i&&void 0===e||OS(e)))throw new Error((0,F.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Z0=function(n,t,e,i){if(!(i&&void 0===e||f2(e)))throw new Error((0,F.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},el=function(n,t){if(".info"===Kt(t))throw new Error(n+" failed = Can't modify data under /.info/")},g2=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!OS(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),f2(n)}(e))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class eZ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function PS(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!rk(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function zk(n,t,e){PS(n,e),m2(n,i=>rk(i,t))}function tl(n,t,e){PS(n,e),m2(n,i=>Ja(i,t)||Ja(t,i))}function m2(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(tZ(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function tZ(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Og&&Hr("event: "+e.toString()),qy(i)}}}const _2="repo_interrupt";class iZ{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eZ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_S(),this.transactionQueueTree_=new Bk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function y2(n){const e=n.infoData_.getNode(new In(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function K0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:y2(n)})}function v2(n,t,e,i,r){n.dataUpdateCount++;const s=new In(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let u=[];if(r)if(i){const p=(0,F.UI)(e,y=>mi(y));u=function LW(n,t,e,i){const r=Rk(n,i);if(r){const s=Ok(r),u=s.path,h=s.queryId,p=Ws(u,t),y=Gn.fromObject(e);return Pk(n,u,new Xy(vk(h),p,y))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=mi(e);u=function FW(n,t,e,i){const r=Rk(n,i);if(null!=r){const s=Ok(r),u=s.path,h=s.queryId,p=Ws(u,t);return Pk(n,u,new Lg(vk(h),p,e))}return[]}(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,F.UI)(e,y=>mi(y));u=function OW(n,t,e){const i=Gn.fromObject(e);return tv(n,new Xy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=mi(e);u=j0(n.serverSyncTree_,s,p)}let h=s;u.length>0&&(h=iv(n,s)),tl(n.eventQueue_,h,u)}function w2(n,t){$k(n,"connected",t),!1===t&&function lZ(n){nv(n,"onDisconnectEvents");const t=K0(n),e=_S();mk(n.onDisconnect_,wn(),(r,s)=>{const u=c2(r,s,n.serverSyncTree_,t);Jy(e,r,u)});let i=[];mk(e,wn(),(r,s)=>{i=i.concat(j0(n.serverSyncTree_,r,s));const u=Kk(n,r);iv(n,u)}),n.onDisconnect_=_S(),tl(n.eventQueue_,wn(),i)}(n)}function $k(n,t,e){const i=new In("/.info/"+t),r=mi(e);n.infoData_.updateSnapshot(i,r);const s=j0(n.infoSyncTree_,i,r);tl(n.eventQueue_,i,s)}function NS(n){return n.nextWriteId_++}function qk(n,t,e,i,r){nv(n,"set",{path:t.toString(),value:e,priority:i});const s=K0(n),u=mi(e,i),h=xS(n.serverSyncTree_,t),p=Lk(u,h,s),y=NS(n),E=Mk(n.serverSyncTree_,t,p,y,!0);PS(n.eventQueue_,E),n.server_.put(t.toString(),u.val(!0),(M,P)=>{const B="ok"===M;B||bs("set at "+t+" failed: "+M);const Q=xf(n.serverSyncTree_,y,!B);tl(n.eventQueue_,t,Q),Af(0,r,M,P)});const I=Kk(n,t);iv(n,I),tl(n.eventQueue_,I,[])}function uZ(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&gk(n.onDisconnect_,t),Af(0,e,i,r)})}function b2(n,t,e,i){const r=mi(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,u)=>{"ok"===s&&Jy(n.onDisconnect_,t,r),Af(0,i,s,u)})}function Wk(n,t,e){let i;i=".info"===Kt(t._path)?kk(n.infoSyncTree_,t,e):kk(n.serverSyncTree_,t,e),zk(n.eventQueue_,t._path,i)}function C2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(_2)}function nv(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Hr(e,...t)}function Af(n,t,e,i){t&&qy(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const u=new Error(s);u.code=r,t(u)}})}function Zk(n,t,e){return xS(n.serverSyncTree_,t,e)||Bt.EMPTY_NODE}function FS(n,t=n.transactionQueueTree_){if(t||LS(n,t),Ug(t)){const e=T2(n,t);(0,F.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function gZ(n,t,e){const i=e.map(y=>y.currentWriteId),r=Zk(n,t,i);let s=r;const u=r.hash();for(let y=0;y<e.length;y++){const E=e[y];(0,F.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const I=Ws(t,E.path);s=s.updateChild(I,E.currentOutputSnapshotRaw)}const h=s.val(!0),p=t;n.server_.put(p.toString(),h,y=>{nv(n,"transaction put response",{path:p.toString(),status:y});let E=[];if("ok"===y){const I=[];for(let M=0;M<e.length;M++)e[M].status=2,E=E.concat(xf(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&I.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();LS(n,kS(n.transactionQueueTree_,t)),FS(n,n.transactionQueueTree_),tl(n.eventQueue_,t,E);for(let M=0;M<I.length;M++)qy(I[M])}else{if("datastale"===y)for(let I=0;I<e.length;I++)e[I].status=3===e[I].status?4:0;else{bs("transaction at "+p.toString()+" failed: "+y);for(let I=0;I<e.length;I++)e[I].status=4,e[I].abortReason=y}iv(n,t)}},u)}(n,z0(t),e)}else d2(t)&&RS(t,e=>{FS(n,e)})}function iv(n,t){const e=E2(n,t),i=z0(e);return function mZ(n,t,e){if(0===t.length)return;const i=[];let r=[];const u=t.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const p=t[h],y=Ws(e,p.path);let I,E=!1;if((0,F.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,I=p.abortReason,r=r.concat(xf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,I="maxretry",r=r.concat(xf(n.serverSyncTree_,p.currentWriteId,!0));else{const M=Zk(n,p.path,u);p.currentInputSnapshot=M;const P=t[h].update(M.val());if(void 0!==P){q0("transaction failed: Data returned ",P,p.path);let B=mi(P);"object"==typeof P&&null!=P&&(0,F.r3)(P,".priority")||(B=B.updatePriority(M.getPriority()));const we=p.currentWriteId,et=K0(n),nt=Lk(B,M,et);p.currentOutputSnapshotRaw=B,p.currentOutputSnapshotResolved=nt,p.currentWriteId=NS(n),u.splice(u.indexOf(we),1),r=r.concat(Mk(n.serverSyncTree_,p.path,nt,p.currentWriteId,p.applyLocally)),r=r.concat(xf(n.serverSyncTree_,we,!0))}else E=!0,I="nodata",r=r.concat(xf(n.serverSyncTree_,p.currentWriteId,!0))}tl(n.eventQueue_,e,r),r=[],E&&(t[h].status=2,setTimeout(t[h].unwatcher,Math.floor(0)),t[h].onComplete&&i.push("nodata"===I?()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot):()=>t[h].onComplete(new Error(I),!1,null)))}LS(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)qy(i[h]);FS(n,n.transactionQueueTree_)}(n,T2(n,e),i),i}function E2(n,t){let e,i=n.transactionQueueTree_;for(e=Kt(t);null!==e&&void 0===Ug(i);)i=kS(i,e),e=Kt(t=Nn(t));return i}function T2(n,t){const e=[];return I2(n,t,e),e.sort((i,r)=>i.order-r.order),e}function I2(n,t,e){const i=Ug(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);RS(t,r=>{I2(n,r,e)})}function LS(n,t){const e=Ug(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,Uk(t,e.length>0?e:void 0)}RS(t,i=>{LS(n,i)})}function Kk(n,t){const e=z0(E2(n,t)),i=kS(n.transactionQueueTree_,t);return function WW(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{Yk(n,r)}),Yk(n,i),h2(i,r=>{Yk(n,r)}),e}function Yk(n,t){const e=Ug(t);if(e){const i=[];let r=[],s=-1;for(let u=0;u<e.length;u++)3===e[u].status||(1===e[u].status?((0,F.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,e[u].status=3,e[u].abortReason="set"):((0,F.hu)(0===e[u].status,"Unexpected transaction status in abort"),e[u].unwatcher(),r=r.concat(xf(n.serverSyncTree_,e[u].currentWriteId,!0)),e[u].onComplete&&i.push(e[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Uk(t,void 0):e.length=s+1,tl(n.eventQueue_,z0(t),r);for(let u=0;u<i.length;u++)qy(i[u])}}const Qk=function(n,t){const e=vZ(n),i=e.namespace;return"firebase.com"===e.domain&&oc(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&bs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new QM(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new In(e.pathString)}},vZ=function(n){let t="",e="",i="",r="",s="",u=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),t=n.substring(0,Math.min(E,I)),E<I&&(r=function _Z(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}t+="/"+r}return t}(n.substring(E,I)));const M=function yZ(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):bs(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,I)));y=t.indexOf(":"),y>=0?(u="https"===h||"wss"===h,p=parseInt(t.substring(y+1),10)):y=t.length;const P=t.slice(0,y);if("localhost"===P.toLowerCase())e="localhost";else if(P.split(".").length<=2)e=P;else{const B=t.indexOf(".");i=t.substring(0,B).toLowerCase(),e=t.substring(B+1),s=i}"ns"in M&&(s=M.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:u,scheme:h,pathString:r,namespace:s}};class S2{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class D2{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class x2{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class A2{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new F.BH;return uZ(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){el("OnDisconnect.remove",this._path);const t=new F.BH;return b2(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){el("OnDisconnect.set",this._path),uc("OnDisconnect.set",t,this._path,!1);const e=new F.BH;return b2(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){el("OnDisconnect.setWithPriority",this._path),uc("OnDisconnect.setWithPriority",t,this._path,!1),Gk("OnDisconnect.setWithPriority",e,!1);const i=new F.BH;return function cZ(n,t,e,i,r){const s=mi(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(u,h)=>{"ok"===u&&Jy(n.onDisconnect_,t,s),Af(0,r,u,h)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){el("OnDisconnect.update",this._path),p2("OnDisconnect.update",t,this._path,!1);const e=new F.BH;return function dZ(n,t,e,i){if((0,F.xb)(e))return Hr("onDisconnect().update() called with empty data.  Don't do anything."),void Af(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&jr(e,(u,h)=>{const p=mi(h);Jy(n.onDisconnect_,di(t,u),p)}),Af(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class So{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return Yt(this._path)?null:ik(this._path)}get ref(){return new nl(this._repo,this._path)}get _queryIdentifier(){const t=OL(this._queryParams),e=ZM(t);return"{}"===e?"default":e}get _queryObject(){return OL(this._queryParams)}isEqual(t){if(!((t=(0,F.m9)(t))instanceof So))return!1;const e=this._repo===t._repo,i=rk(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function lq(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function VS(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Mf(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===lc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Cd)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==ac)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===jn){if(null!=t&&!$0(t)||null!=e&&!$0(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof uk||n.getIndex()===ck,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function BS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class nl extends So{constructor(t,e){super(t,e,new pS,!1)}get parent(){const t=_L(this._path);return null===t?null:new nl(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Hg{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new In(t),i=jg(this.ref,t);return new Hg(this._node.getChild(e),i,jn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new Hg(r,jg(this.ref,i),jn)))}hasChild(t){const e=new In(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function M2(n,t){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==t?jg(n._root,t):n._root}function k2(n,t){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const e=Qk(t,n._repo.repoInfo_.nodeAdmin);g2("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&oc("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),M2(n,e.path.toString())}function jg(n,t){return null===Kt((n=(0,F.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Z0("child","path",e,!1)):Z0("child","path",t,!1),new nl(n._repo,di(n._path,t));var e}function Jk(n,t){n=(0,F.m9)(n),el("set",n._path),uc("set",t,n._path,!1);const e=new F.BH;return qk(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function TZ(n,t){p2("update",t,n._path,!1);const e=new F.BH;return function aZ(n,t,e,i){nv(n,"update",{path:t.toString(),value:e});let r=!0;const s=K0(n),u={};if(jr(e,(h,p)=>{r=!1,u[h]=c2(di(t,h),mi(p),n.serverSyncTree_,s)}),r)Hr("update() called with empty data.  Don't do anything."),Af(0,i,"ok",void 0);else{const h=NS(n),p=function RW(n,t,e,i){!function Kq(n,t,e,i){(0,F.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=bk(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Gn.fromObject(e);return tv(n,new Xy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,u,h);PS(n.eventQueue_,p),n.server_.merge(t.toString(),e,(y,E)=>{const I="ok"===y;I||bs("update at "+t+" failed: "+y);const M=xf(n.serverSyncTree_,h,!I),P=M.length>0?iv(n,t):t;tl(n.eventQueue_,P,M),Af(0,i,y,E)}),jr(e,y=>{const E=Kk(n,di(t,y));iv(n,E)}),tl(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function IZ(n){return function oZ(n,t){const e=function VW(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(y,E)=>{const I=Ws(y,e);i=i||Sf(E,I)});let r=n.syncPointTree_.get(e);r?i=i||Sf(r,wn()):(r=new JL,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,u=s?new Tf(i,!0,!1):null;return function wW(n){return wS(n.viewCache_)}(XL(r,t,bS(n.pendingWriteTree_,t._path),s?u.getNode():Bt.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(i=>{const r=mi(i).withIndex(t._queryParams.getIndex()),s=j0(n.serverSyncTree_,t._path,r);return zk(n.eventQueue_,t._path,s),Promise.resolve(r)},i=>(nv(n,"get for query "+(0,F.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,F.m9)(n))._repo,n).then(t=>new Hg(t,new nl(n._repo,n._path),n._queryParams.getIndex()))}class US{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new S2("value",this,new Hg(t.snapshotNode,new nl(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new D2(this,t,e):null}matches(t){return t instanceof US&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class HS{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new D2(this,t,e):null}createEvent(t,e){(0,F.hu)(null!=t.childName,"Child events should have a childName.");const i=jg(new nl(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new S2(t.type,this,new Hg(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof HS&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Y0(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,y=(E,I)=>{Wk(n._repo,n,h),p(E,I)};y.userCallback=e.userCallback,y.context=e.context,e=y}const u=new x2(e,s||void 0),h="value"===t?new US(u):new HS(t,u);return function hZ(n,t,e){let i;i=".info"===Kt(t._path)?s2(n.infoSyncTree_,t,e):s2(n.serverSyncTree_,t,e),zk(n.eventQueue_,t._path,i)}(n._repo,n,h),()=>Wk(n._repo,n,h)}function Xk(n,t,e,i){return Y0(n,"value",t,e,i)}function R2(n,t,e,i){return Y0(n,"child_added",t,e,i)}function O2(n,t,e,i){return Y0(n,"child_changed",t,e,i)}function P2(n,t,e,i){return Y0(n,"child_moved",t,e,i)}function N2(n,t,e,i){return Y0(n,"child_removed",t,e,i)}function F2(n,t,e){let i=null;const r=e?new x2(e):null;"value"===t?i=new US(r):t&&(i=new HS(t,r)),Wk(n._repo,n,i)}class zl{}class L2 extends zl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uc("endAt",this._value,t._path,!0);const e=pk(t._queryParams,this._value,this._key);if(BS(e),Mf(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new So(t._repo,t._path,e,t._orderByCalled)}}class DZ extends zl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uc("endBefore",this._value,t._path,!1);const e=function Fq(n,t,e){let i,r;return n.index_===lc?("string"==typeof t&&(t=ML(t)),r=pk(n,t,e)):(i=null==e?Cd:ML(e),r=pk(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(BS(e),Mf(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new So(t._repo,t._path,e,t._orderByCalled)}}class V2 extends zl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uc("startAt",this._value,t._path,!0);const e=fk(t._queryParams,this._value,this._key);if(BS(e),Mf(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new So(t._repo,t._path,e,t._orderByCalled)}}class MZ extends zl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){uc("startAfter",this._value,t._path,!1);const e=function Nq(n,t,e){let i;if(n.index_===lc)"string"==typeof t&&(t=AL(t)),i=fk(n,t,e);else{let r;r=null==e?ac:AL(e),i=fk(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(BS(e),Mf(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new So(t._repo,t._path,e,t._orderByCalled)}}class RZ extends zl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new So(t._repo,t._path,function Oq(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class PZ extends zl{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new So(t._repo,t._path,function Pq(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class FZ extends zl{constructor(t){super(),this._path=t}_apply(t){VS(t,"orderByChild");const e=new In(this._path);if(Yt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new uk(e),r=gS(t._queryParams,i);return Mf(r),new So(t._repo,t._path,r,!0)}}class VZ extends zl{_apply(t){VS(t,"orderByKey");const e=gS(t._queryParams,lc);return Mf(e),new So(t._repo,t._path,e,!0)}}class UZ extends zl{_apply(t){VS(t,"orderByPriority");const e=gS(t._queryParams,jn);return Mf(e),new So(t._repo,t._path,e,!0)}}class jZ extends zl{_apply(t){VS(t,"orderByValue");const e=gS(t._queryParams,ck);return Mf(e),new So(t._repo,t._path,e,!0)}}class zZ extends zl{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(uc("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new L2(this._value,this._key)._apply(new V2(this._value,this._key)._apply(t))}}function $l(n,...t){let e=(0,F.m9)(n);for(const i of t)e=i._apply(e);return e}(function TW(n){(0,F.hu)(!IS,"__referenceConstructor has already been defined"),IS=n})(nl),function AW(n){(0,F.hu)(!DS,"__referenceConstructor has already been defined"),DS=n}(nl);const eR={};function U2(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||oc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,u=Qk(s,r),h=u.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,u=Qk(s,r),h=u.repoInfo):p=!u.repoInfo.secure;const E=r&&p?new M0(M0.OWNER):new L4(n.name,n.options,t);g2("Invalid Firebase Database URL",u),Yt(u.path)||oc("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function KZ(n,t,e,i){let r=eR[t.name];r||(r={},eR[t.name]=r);let s=r[n.toURLString()];return s&&oc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new iZ(n,false,e,i),r[n.toURLString()]=s,s}(h,n,E,new F4(n.name,e));return new QZ(I,n)}class QZ{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function rZ(n,t,e){if(n.stats_=ek(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new mS(n.repoInfo_,(i,r,s,u)=>{v2(n,i,r,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>w2(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Fg(n.repoInfo_,t,(i,r,s,u)=>{v2(n,i,r,s,u)},i=>{w2(n,i)},i=>{!function sZ(n,t){jr(t,(e,i)=>{$k(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function U4(n,t){const e=n.toString();return XM[e]||(XM[e]=t()),XM[e]}(n.repoInfo_,()=>new jq(n.stats_,n.server_)),n.infoData_=new Lq,n.infoSyncTree_=new r2({startListening:(i,r,s,u)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=j0(n.infoSyncTree_,i._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),$k(n,"connected",!1),n.serverSyncTree_=new r2({startListening:(i,r,s,u)=>(n.server_.listen(i,s,r,(h,p)=>{const y=u(h,p);tl(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nl(this._repo,wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ZZ(n,t){const e=eR[t];(!e||e[n.key]!==n)&&oc(`Database ${t}(${n.repoInfo_}) has already been deleted.`),C2(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&oc("Cannot call "+t+" on a deleted database.")}}function H2(){sL.IS_TRANSPORT_INITIALIZED&&bs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function JZ(){H2(),Cf.forceDisallow()}function XZ(){H2(),Wy.forceDisallow(),Cf.forceAllow()}function r5(n,t){BF(n,t)}const o5={".sv":"timestamp"};class u5{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Fg.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Fg.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function s5(n){PF(yo.SDK_VERSION),(0,yo._registerComponent)(new Al.wA("database",(t,{instanceIdentifier:e})=>U2(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,yo.registerVersion)(RF,"0.13.0",n),(0,yo.registerVersion)(RF,"0.13.0","esm2017")}();const f5=new vo.Yd("@firebase/database-compat"),j2=function(n){f5.warn("FIREBASE WARNING: "+n)};class m5{constructor(t){this._delegate=t}cancel(t){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,j2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class _5{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class kf{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Z0("DataSnapshot.child","path",t,!1),new kf(this._database,this._delegate.child(t))}hasChild(t){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Z0("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new kf(this._database,e)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new ua(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Xr{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",e,!1);const u=Xr.getCancelAndContextArgs_("Query.on",i,r),h=(y,E)=>{e.call(u.context,new kf(this.database,y),E)};h.userCallback=e,h.context=u.context;const p=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(t){case"value":return Xk(this._delegate,h,p),e;case"child_added":return R2(this._delegate,h,p),e;case"child_removed":return N2(this._delegate,h,p),e;case"child_changed":return O2(this._delegate,h,p),e;case"child_moved":return P2(this._delegate,h,p),e;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,F.Wj)("Query.off","callback",e,!0),(0,F.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,F2(this._delegate,t,r)}else F2(this._delegate,t)}get(){return IZ(this._delegate).then(t=>new kf(this.database,t))}once(t,e,i,r){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",e,!0);const s=Xr.getCancelAndContextArgs_("Query.once",i,r),u=new F.BH,h=(y,E)=>{const I=new kf(this.database,y);e&&e.call(s.context,I,E),u.resolve(I)};h.userCallback=e,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),u.reject(y)};switch(t){case"value":Xk(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":R2(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":N2(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":O2(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":P2(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(t){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Xr(this.database,$l(this._delegate,function OZ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new RZ(n)}(t)))}limitToLast(t){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Xr(this.database,$l(this._delegate,function NZ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new PZ(n)}(t)))}orderByChild(t){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Xr(this.database,$l(this._delegate,function LZ(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Z0("orderByChild","path",n,!1),new FZ(n)}(t)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Xr(this.database,$l(this._delegate,function BZ(){return new VZ}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Xr(this.database,$l(this._delegate,function HZ(){return new UZ}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Xr(this.database,$l(this._delegate,function GZ(){return new jZ}()))}startAt(t=null,e){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Xr(this.database,$l(this._delegate,function AZ(n=null,t){return W0("startAt","key",t,!0),new V2(n,t)}(t,e)))}startAfter(t=null,e){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Xr(this.database,$l(this._delegate,function kZ(n,t){return W0("startAfter","key",t,!0),new MZ(n,t)}(t,e)))}endAt(t=null,e){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Xr(this.database,$l(this._delegate,function SZ(n,t){return W0("endAt","key",t,!0),new L2(n,t)}(t,e)))}endBefore(t=null,e){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Xr(this.database,$l(this._delegate,function xZ(n,t){return W0("endBefore","key",t,!0),new DZ(n,t)}(t,e)))}equalTo(t,e){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Xr(this.database,$l(this._delegate,function $Z(n,t){return W0("equalTo","key",t,!0),new zZ(n,t)}(t,e)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Xr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,F.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,F.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,F.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new ua(this.database,new nl(this._delegate._repo,this._delegate._path))}}class ua extends Xr{constructor(t,e){super(t,new So(e._repo,e._path,new pS,!1)),this.database=t,this._delegate=e}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new ua(this.database,jg(this._delegate,t))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new ua(this.database,t):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new ua(this.database,this._delegate.root)}set(t,e){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",e,!0);const i=Jk(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,j2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}el("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",e,!0);const i=TZ(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function EZ(n,t,e){if(el("setWithPriority",n._path),uc("setWithPriority",t,n._path,!1),Gk("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new F.BH;return qk(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",t,!0);const e=function bZ(n){return el("remove",n._path),Jk(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,F.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function c5(n,t,e){var i;if(n=(0,F.m9)(n),el("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==e?void 0:e.applyLocally)||void 0===i||i,s=new F.BH,h=Xk(n,()=>{});return function pZ(n,t,e,i,r,s){nv(n,"transaction on "+t);const u={path:t,update:e,onComplete:i,status:null,order:FF(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Zk(n,t,void 0);u.currentInputSnapshot=h;const p=u.update(h.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{q0("transaction failed: Data returned ",p,u.path),u.status=0;const y=kS(n.transactionQueueTree_,t),E=Ug(y)||[];let I;E.push(u),Uk(y,E),"object"==typeof p&&null!==p&&(0,F.r3)(p,".priority")?(I=(0,F.DV)(p,".priority"),(0,F.hu)($0(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(xS(n.serverSyncTree_,t)||Bt.EMPTY_NODE).getPriority().val();const M=K0(n),P=mi(p,I),B=Lk(P,h,M);u.currentOutputSnapshotRaw=P,u.currentOutputSnapshotResolved=B,u.currentWriteId=NS(n);const Q=Mk(n.serverSyncTree_,t,B,u.currentWriteId,u.applyLocally);tl(n.eventQueue_,t,Q),FS(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,y,E)=>{let I=null;p?s.reject(p):(I=new Hg(E,new nl(n._repo,n._path),jn),s.resolve(new u5(y,I)))},h,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new _5(s.committed,new kf(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",e,!0);const i=function CZ(n,t){n=(0,F.m9)(n),el("setPriority",n._path),Gk("setPriority",t,!1);const e=new F.BH;return qk(n._repo,di(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",e,!0);const i=function wZ(n,t){n=(0,F.m9)(n),el("push",n._path),uc("push",t,n._path,!0);const e=y2(n._repo),i=Aq(e),r=jg(n,i),s=jg(n,i);let u;return u=null!=t?Jk(s,t).then(()=>s):Promise.resolve(s),r.then=u.then.bind(u),r.catch=u.then.bind(u,void 0),r}(this._delegate,t),r=i.then(u=>new ua(this.database,u));e&&r.then(()=>e(null),u=>e(u));const s=new ua(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return el("Reference.onDisconnect",this._delegate._path),new m5(new A2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Q0{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:JZ,forceLongPolling:XZ}}useEmulator(t,e,i={}){!function e5(n,t,e,i={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&oc("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&oc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new M0(M0.OWNER);else if(i.mockUserToken){const u="string"==typeof i.mockUserToken?i.mockUserToken:(0,F.Sg)(i.mockUserToken,n.app.options.projectId);s=new M0(u)}!function WZ(n,t,e,i){n.repoInfo_=new QM(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,F.Dv)("database.ref",0,1,arguments.length),t instanceof ua){const e=k2(this._delegate,t.toString());return new ua(this,e)}{const e=M2(this._delegate,t);return new ua(this,e)}}refFromURL(t){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const i=k2(this._delegate,t);return new ua(this,i)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function t5(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),C2(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function n5(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function fZ(n){n.persistentConnection_&&n.persistentConnection_.resume(_2)}(n._repo)}(this._delegate)}}Q0.ServerValue={TIMESTAMP:function a5(){return o5}(),increment:n=>function l5(n){return{".sv":{increment:n}}}(n)};var v5=Object.freeze({__proto__:null,initStandalone:function y5({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){PF(e);const u=new Al.zt("auth-internal",new Al.H0("database-standalone"));return u.setComponent(new Al.wA("auth-internal",()=>i,"PRIVATE")),{instance:new Q0(U2(n,u,void 0,t,s),n),namespace:r}}});const w5=Q0.ServerValue;function G2(n){return null==n}function z2(n){return"function"==typeof n.set}function $2(n,t){return z2(t)?t:n.ref(t)}function q2(n,t){if(function C5(n){return"string"==typeof n}(n))return t.stringCase();if(z2(n))return t.firebaseCase();if(function E5(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function J0(n,t,e="on",i=Dp.z){return new v.y(r=>{let s=null;return s=n[e](t,(u,h)=>{i.schedule(()=>{r.next({snapshot:u,prevKey:h})}),"once"===e&&i.schedule(()=>r.complete())},u=>{i.schedule(()=>r.error(u))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,ve.U)(r=>{const{snapshot:s,prevKey:u}=r;let h=null;return s.exists()&&(h=s.key),{type:t,payload:s,prevKey:u,key:h}}),(0,fP.B)())}function W2(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function S5(n,t){const{payload:e,prevKey:i,key:r}=t,s=W2(n,r),u=function I5(n,t){if(G2(t))return 0;{const e=W2(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let h=null;t.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(u,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(u,0,t)}return n;case"child_removed":return n.filter(h=>h.payload.key!==e.key);case"child_changed":return n.map(h=>h.payload.key===r?t:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function Z2(n){return(G2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function K2(n,t,e){return function T5(n,t,e){return J0(n,"value","once",e).pipe(gr(i=>{const r=[bt(i)];return t.forEach(s=>r.push(J0(n,s,"on",e))),(0,N1.T)(...r).pipe(Ps(S5,[]))}),h_())}(n,t=Z2(t),e)}function Y2(n,t,e){const i=(t=Z2(t)).map(r=>J0(n,r,"on",e));return(0,N1.T)(...i)}function Q2(n,t){return function(i,r){return q2(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function M5(n){return function(e){return e?q2(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function J2(n,t){return function(){return J0(n,"value","on",t)}}!function b5(n){n.INTERNAL.registerComponent(new Al.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new Q0(r,i)},"PUBLIC").setServiceProps({Reference:ua,Query:Xr,Database:Q0,DataSnapshot:kf,enableLogging:r5,INTERNAL:v5,ServerValue:w5}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(dE.Z);const O5=new o.OlP("angularfire2.realtimeDatabaseURL"),P5=new o.OlP("angularfire2.database.use-emulator");let N5=(()=>{class n{constructor(e,i,r,s,u,h,p,y,E,I,M,P,B,Q,we){this.schedulers=h;const et=p,nt=(0,Nr.on)(e,u,i);y&&aM(nt,u,E,M,P,B,I,Q),this.database=(0,Nr.cc)(`${nt.name}.database.${r}`,"AngularFireDatabase",nt.name,()=>{const it=u.runOutsideAngular(()=>nt.database(r||void 0));return et&&it.useEmulator(...et),it},[et])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>$2(this.database,e));let s=r;return i&&(s=i(r)),function k5(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Q2(i,"update"),set:Q2(i,"set"),push:r=>i.push(r),remove:M5(i),snapshotChanges:r=>K2(n,r,e).pipe(Mn.iC),stateChanges:r=>Y2(n,r,e).pipe(Mn.iC),auditTrail:r=>function D5(n,t,e){return function A5(n,t,e){return function x5(n,t){return J0(n,"value","on",t).pipe((0,ve.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function T4(...n){const t=(0,bl.jO)(n);return(0,Vi.e)((e,i)=>{const r=n.length,s=new Array(r);let u=n.map(()=>!1),h=!1;for(let p=0;p<r;p++)(0,go.Xf)(n[p]).subscribe((0,rn.x)(i,y=>{s[p]=y,!h&&!u[p]&&(u[p]=!0,(h=u.every(de.y))&&(u=null))},sF.Z));e.subscribe((0,rn.x)(i,p=>{if(h){const y=[p,...s];i.next(t?t(...y):y)}}))})}(t),(0,ve.U)(([r,s])=>{const u=r.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),function I4(n){return(0,Vi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,rn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ve.U)(r=>r.actions))}(n,Y2(n,t).pipe(Ps((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Mn.iC),valueChanges:(r,s)=>K2(n,r,e).pipe((0,ve.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Mn.iC)}}(s,this)}object(e){return function R5(n,t){return{query:n,snapshotChanges:()=>J2(n,t.schedulers.outsideAngular)().pipe(Mn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>J2(n,t.schedulers.outsideAngular)().pipe(Mn.iC,(0,ve.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>$2(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nr.Dh),o.LFG(Nr.xv,8),o.LFG(O5,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Mn.HU),o.LFG(P5,8),o.LFG(lM,8),o.LFG(tM,8),o.LFG(nM,8),o.LFG(iM,8),o.LFG(rM,8),o.LFG(sM,8),o.LFG(oM,8),o.LFG(FI,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),F5=(()=>{class n{constructor(){VP.Z.registerVersion("angularfire",Mn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[N5]}),n})();const X2_firebaseConfig={apiKey:"AIzaSyBubQfS5FkzpTBdeJF3WgQmCk3XRIX2muE",authDomain:"pranavam-759d0.firebaseapp.com",projectId:"pranavam-759d0",storageBucket:"pranavam-759d0.appspot.com",messagingSenderId:"1036267670449",appId:"1:1036267670449:web:78a97a16efd91192044b90"};let L5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[E4]}),n.\u0275inj=o.cJS({providers:[],imports:[[va,xm,_4,ZI,Nr.hO.initializeApp(X2_firebaseConfig),VH,F5,s4,I0,QH]]}),n})();(0,o.G48)(),ru().bootstrapModule(L5).catch(n=>console.error(n))},5867:(Qe,be,N)=>{N.d(be,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=N(9681);(0,o.registerVersion)("firebase","9.8.2","app")},127:(Qe,be,N)=>{N.d(be,{Z:()=>o.Z});var o=N(3942);o.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Qe,be,N)=>{N.r(be);var o=N(5861),ee=N(3942),L=N(2090),ue=N(9681),re=N(655),_e=N(1877),ce=N(4859);const Fe=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},He=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$e=new _e.Yd("@firebase/auth");function Ye(v,...g){$e.logLevel<=_e.in.ERROR&&$e.error(`Auth (${ue.SDK_VERSION}): ${v}`,...g)}function Ae(v,...g){throw Ge(v,...g)}function Te(v,...g){return Ge(v,...g)}function Se(v,g,_){const b=Object.assign(Object.assign({},He()),{[g]:_});return new L.LL("auth","Firebase",b).create(g,{appName:v.name})}function je(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ae(v,"argument-error"),Se(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...g){if("string"!=typeof v){const _=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(_,...b)}return ge.create(v,...g)}function z(v,g,..._){if(!v)throw Ge(g,..._)}function Ee(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Ye(g),new Error(g)}function Y(v,g){v||Ee(g)}const se=new Map;function ne(v){Y(v instanceof Function,"Expected a class definition");let g=se.get(v);return g?(Y(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,se.set(v,g),g)}function Ve(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function gt(){return"http:"===$t()||"https:"===$t()}function $t(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ln{constructor(g,_){this.shortDelay=g,this.longDelay=_,Y(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fn(v,g){Y(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class un{static initialize(g,_,b){this.fetchImpl=g,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gi=new ln(3e4,6e4);function Qt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Ht(v,g,_,b){return es.apply(this,arguments)}function es(){return(es=(0,o.Z)(function*(v,g,_,b,A={}){return Er(v,A,(0,o.Z)(function*(){let O={},K={};b&&("GET"===g?K=b:O={body:JSON.stringify(b)});const de=(0,L.xO)(Object.assign({key:v.config.apiKey},K)).slice(1),ve=yield v._getAdditionalHeaders();return ve["Content-Type"]="application/json",v.languageCode&&(ve["X-Firebase-Locale"]=v.languageCode),un.fetch()(Ys(v,v.config.apiHost,_,de),Object.assign({method:g,headers:ve,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Er(v,g,_){return Di.apply(this,arguments)}function Di(){return(Di=(0,o.Z)(function*(v,g,_){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},nn),g);try{const A=new ar(v),O=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const K=yield O.json();if("needConfirmation"in K)throw zr(v,"account-exists-with-different-credential",K);if(O.ok&&!("errorMessage"in K))return K;{const de=O.ok?K.errorMessage:K.error.message,[ve,Xe]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ve)throw zr(v,"credential-already-in-use",K);if("EMAIL_EXISTS"===ve)throw zr(v,"email-already-in-use",K);if("USER_DISABLED"===ve)throw zr(v,"user-disabled",K);const mt=b[ve]||ve.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Se(v,mt,Xe);Ae(v,mt)}}catch(A){if(A instanceof L.ZR)throw A;Ae(v,"network-request-failed")}})).apply(this,arguments)}function zi(v,g,_,b){return ts.apply(this,arguments)}function ts(){return(ts=(0,o.Z)(function*(v,g,_,b,A={}){const O=yield Ht(v,g,_,b,A);return"mfaPendingCredential"in O&&Ae(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Ys(v,g,_,b){const A=`${g}${_}?${b}`;return v.config.emulator?Fn(v.config,A):`${v.config.apiScheme}://${A}`}class ar{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(Te(this.auth,"network-request-failed")),Gi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zr(v,g,_){const b={appName:v.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const A=Te(v,g,b);return A.customData._tokenResponse=_,A}function Tr(){return(Tr=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function kn(v,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Qs(v,g){return lr.apply(this,arguments)}function lr(){return(lr=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function hi(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Do(){return(Do=(0,o.Z)(function*(v,g=!1){const _=(0,L.m9)(v),b=yield _.getIdToken(g),A=ct(b);z(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,K=null==O?void 0:O.sign_in_provider;return{claims:A,token:b,authTime:hi(qt(A.auth_time)),issuedAtTime:hi(qt(A.iat)),expirationTime:hi(qt(A.exp)),signInProvider:K||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function qt(v){return 1e3*Number(v)}function ct(v){const[g,_,b]=v.split(".");if(void 0===g||void 0===_||void 0===b)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,L.tV)(_);return A?JSON.parse(A):(Ye("Failed to decode base64 JWT payload"),null)}catch(A){return Ye("Caught error parsing JWT payload as JSON",A),null}}function xi(v,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,o.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(b){throw b instanceof L.ZR&&Gt(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function Gt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class xo{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),b)}iteration(){var g=this;return(0,o.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Ai{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Mi(v){return H.apply(this,arguments)}function H(){return(H=(0,o.Z)(function*(v){var g;const _=v.auth,b=yield v.getIdToken(),A=yield xi(v,Qs(_,{idToken:b}));z(null==A?void 0:A.users.length,_,"internal-error");const O=A.users[0];v._notifyReloadListener(O);const K=(null===(g=O.providerUserInfo)||void 0===g?void 0:g.length)?q(O.providerUserInfo):[],de=xe(v.providerData,K),mt=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==de?void 0:de.length)),ht={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:de,metadata:new Ai(O.createdAt,O.lastLoginAt),isAnonymous:mt};Object.assign(v,ht)})).apply(this,arguments)}function Z(){return(Z=(0,o.Z)(function*(v){const g=(0,L.m9)(v);yield Mi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function xe(v,g){return[...v.filter(b=>!g.some(A=>A.providerId===b.providerId)),...g]}function q(v){return v.map(g=>{var{providerId:_}=g,b=(0,re._T)(g,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ne(){return(Ne=(0,o.Z)(function*(v,g){const _=yield Er(v,{},(0,o.Z)(function*(){const b=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:O}=v.config,K=Ys(v,A,"/v1/token",`key=${O}`),de=yield v._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",un.fetch()(K,{method:"POST",headers:de,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){z(g.idToken,"internal-error"),z(void 0!==g.idToken,"internal-error"),z(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function Ct(v){const g=ct(v);return z(g,"internal-error"),z(void 0!==g.exp,"internal-error"),z(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var b=this;return(0,o.Z)(function*(){return z(!b.accessToken||b.refreshToken,g,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var b=this;return(0,o.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:K}=yield function te(v,g){return Ne.apply(this,arguments)}(g,_);b.updateTokensAndExpiration(A,O,Number(K))})()}updateTokensAndExpiration(g,_,b){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,_){const{refreshToken:b,accessToken:A,expirationTime:O}=_,K=new Je;return b&&(z("string"==typeof b,"internal-error",{appName:g}),K.refreshToken=b),A&&(z("string"==typeof A,"internal-error",{appName:g}),K.accessToken=A),O&&(z("number"==typeof O,"internal-error",{appName:g}),K.expirationTime=O),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Je,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function _t(v,g){z("string"==typeof v||void 0===v,"internal-error",{appName:g})}class xt{constructor(g){var{uid:_,auth:b,stsTokenManager:A}=g,O=(0,re._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Ai(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,o.Z)(function*(){const b=yield xi(_,_.stsTokenManager.getToken(_.auth,g));return z(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(g){return function Ir(v){return Do.apply(this,arguments)}(this,g)}reload(){return function W(v){return Z.apply(this,arguments)}(this)}_assign(g){this!==g&&(z(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new xt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var b=this;return(0,o.Z)(function*(){let A=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),A=!0),_&&(yield Mi(b)),yield b.auth._persistUserIfCurrent(b),A&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,o.Z)(function*(){const _=yield g.getIdToken();return yield xi(g,function vt(v,g){return Tr.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var b,A,O,K,de,ve,Xe,mt;const ht=null!==(b=_.displayName)&&void 0!==b?b:void 0,Yn=null!==(A=_.email)&&void 0!==A?A:void 0,rn=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Lu=null!==(K=_.photoURL)&&void 0!==K?K:void 0,ap=null!==(de=_.tenantId)&&void 0!==de?de:void 0,Am=null!==(ve=_._redirectEventId)&&void 0!==ve?ve:void 0,Oa=null!==(Xe=_.createdAt)&&void 0!==Xe?Xe:void 0,pr=null!==(mt=_.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:Cl,emailVerified:Mm,isAnonymous:El,providerData:Vu,stsTokenManager:km}=_;z(Cl&&km,g,"internal-error");const lp=Je.fromJSON(this.name,km);z("string"==typeof Cl,g,"internal-error"),_t(ht,g.name),_t(Yn,g.name),z("boolean"==typeof Mm,g,"internal-error"),z("boolean"==typeof El,g,"internal-error"),_t(rn,g.name),_t(Lu,g.name),_t(ap,g.name),_t(Am,g.name),_t(Oa,g.name),_t(pr,g.name);const go=new xt({uid:Cl,auth:g,email:Yn,emailVerified:Mm,displayName:ht,isAnonymous:El,photoURL:Lu,phoneNumber:rn,tenantId:ap,stsTokenManager:lp,createdAt:Oa,lastLoginAt:pr});return Vu&&Array.isArray(Vu)&&(go.providerData=Vu.map(Rm=>Object.assign({},Rm))),Am&&(go._redirectEventId=Am),go}static _fromIdTokenResponse(g,_,b=!1){return(0,o.Z)(function*(){const A=new Je;A.updateFromServerResponse(_);const O=new xt({uid:_.localId,auth:g,stsTokenManager:A,isAnonymous:b});return yield Mi(O),O})()}}const It=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,b){var A=this;return(0,o.Z)(function*(){A.storage[_]=b})()}_get(_){var b=this;return(0,o.Z)(function*(){const A=b.storage[_];return void 0===A?null:A})()}_remove(_){var b=this;return(0,o.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return v.type="NONE",v})();function Xn(v,g,_){return`firebase:${v}:${g}:${_}`}class $i{constructor(g,_,b){this.persistence=g,this.auth=_,this.userKey=b;const{config:A,name:O}=this.auth;this.fullUserKey=Xn(this.userKey,A.apiKey,O),this.fullPersistenceKey=Xn("persistence",A.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,o.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?xt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,o.Z)(function*(){if(_.persistence===g)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,b="authUser"){return(0,o.Z)(function*(){if(!_.length)return new $i(ne(It),g,b);const A=(yield Promise.all(_.map(function(){var Xe=(0,o.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=A[0]||ne(It);const K=Xn(b,g.config.apiKey,g.name);let de=null;for(const Xe of _)try{const mt=yield Xe._get(K);if(mt){const ht=xt._fromJSON(g,mt);Xe!==O&&(de=ht),O=Xe;break}}catch(mt){}const ve=A.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&ve.length?(O=ve[0],de&&(yield O._set(K,de.toJSON())),yield Promise.all(_.map(function(){var Xe=(0,o.Z)(function*(mt){if(mt!==O)try{yield mt._remove(K)}catch(ht){}});return function(mt){return Xe.apply(this,arguments)}}())),new $i(O,g,b)):new $i(O,g,b)})()}}function ql(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ei(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(il(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Cs(g))return"Blackberry";if(ti(g))return"Webos";if(Wl(g))return"Safari";if((g.includes("chrome/")||rl(g))&&!g.includes("edge/"))return"Chrome";if(qi(g))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function il(v=(0,L.z$)()){return/firefox\//i.test(v)}function Wl(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function rl(v=(0,L.z$)()){return/crios\//i.test(v)}function ei(v=(0,L.z$)()){return/iemobile/i.test(v)}function qi(v=(0,L.z$)()){return/android/i.test(v)}function Cs(v=(0,L.z$)()){return/blackberry/i.test(v)}function ti(v=(0,L.z$)()){return/webos/i.test(v)}function ur(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Js(v=(0,L.z$)()){return ur(v)||qi(v)||ti(v)||Cs(v)||/windows phone/i.test(v)||ei(v)}function da(v,g=[]){let _;switch(v){case"Browser":_=ql((0,L.z$)());break;case"Worker":_=`${ql((0,L.z$)())}-${v}`;break;default:_=v}const b=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${ue.SDK_VERSION}/${b}`}class cr{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const b=O=>new Promise((K,de)=>{try{K(g(O))}catch(ve){de(ve)}});b.onAbort=_,this.queue.push(b);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,o.Z)(function*(){if(_.auth.currentUser===g)return;const b=[];try{for(const A of _.queue)yield A(g),A.onAbort&&b.push(A.onAbort)}catch(A){b.reverse();for(const O of b)try{O()}catch(K){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:A.message})}})()}}class Ze{constructor(g,_,b){this.app=g,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cn(this),this.idTokenSubscription=new cn(this),this.beforeStateQueue=new cr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(g,_){var b=this;return _&&(this._popupRedirectResolver=ne(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var A,O;if(!b._deleted&&(b.persistenceManager=yield $i.create(b,g),!b._deleted)){if(null===(A=b._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(K){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(O=b.currentUser)||void 0===O?void 0:O.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,o.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,o.Z)(function*(){var b;const A=yield _.assertedPersistence.getCurrentUser();let O=A,K=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const de=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,ve=null==O?void 0:O._redirectEventId,Xe=yield _.tryRedirectSignIn(g);(!de||de===ve)&&(null==Xe?void 0:Xe.user)&&(O=Xe.user,K=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(K)try{yield _.beforeStateQueue.runMiddleware(O)}catch(de){O=A,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(de))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return z(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,o.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(A){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,o.Z)(function*(){try{yield Mi(g)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ke(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,o.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,o.Z)(function*(){const b=g?(0,L.m9)(g):null;return b&&z(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(g,_=!1){var b=this;return(0,o.Z)(function*(){if(!b._deleted)return g&&z(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,o.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,o.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(ne(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,_,b){return this.registerStateListener(this.authStateSubscription,g,_,b)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,b){return this.registerStateListener(this.idTokenSubscription,g,_,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var b=this;return(0,o.Z)(function*(){const A=yield b.getOrInitRedirectPersistenceManager(_);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const b=g&&ne(g)||_._popupRedirectResolver;z(b,_,"argument-error"),_.redirectPersistenceManager=yield $i.create(_,[ne(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,o.Z)(function*(){var b,A;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===g?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,o.Z)(function*(){if(g===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,b,A){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),K=this._isInitialized?Promise.resolve():this._initializationPromise;return z(K,this,"internal-error"),K.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,b,A):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=da(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,o.Z)(function*(){var _;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const A=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(b["X-Firebase-Client"]=A),b})()}}function pt(v){return(0,L.m9)(v)}class cn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ns(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function is(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class $r{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Ee("not implemented")}_getIdTokenResponse(g){return Ee("not implemented")}_linkToIdToken(g,_){return Ee("not implemented")}_getReauthenticationResolver(g){return Ee("not implemented")}}function Bn(v,g){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:resetPassword",Qt(v,g))})).apply(this,arguments)}function ol(v,g){return $n.apply(this,arguments)}function $n(){return($n=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Zl(v,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",Qt(v,g))})).apply(this,arguments)}function Mo(){return(Mo=(0,o.Z)(function*(v,g){return zi(v,"POST","/v1/accounts:signInWithPassword",Qt(v,g))})).apply(this,arguments)}function eo(v,g){return fn.apply(this,arguments)}function fn(){return(fn=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:sendOobCode",Qt(v,g))})).apply(this,arguments)}function pn(v,g){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,o.Z)(function*(v,g){return eo(v,g)})).apply(this,arguments)}function al(v,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,o.Z)(function*(v,g){return eo(v,g)})).apply(this,arguments)}function rs(v,g){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,o.Z)(function*(v,g){return eo(v,g)})).apply(this,arguments)}function Id(v,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,o.Z)(function*(v,g){return eo(v,g)})).apply(this,arguments)}function Dr(){return(Dr=(0,o.Z)(function*(v,g){return zi(v,"POST","/v1/accounts:signInWithEmailLink",Qt(v,g))})).apply(this,arguments)}function Sd(){return(Sd=(0,o.Z)(function*(v,g){return zi(v,"POST","/v1/accounts:signInWithEmailLink",Qt(v,g))})).apply(this,arguments)}class ki extends $r{constructor(g,_,b,A=null){super("password",b),this._email=g,this._password=_,this._tenantId=A}static _fromEmailAndPassword(g,_){return new ki(g,_,"password")}static _fromEmailAndCode(g,_,b=null){return new ki(g,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,o.Z)(function*(){switch(_.signInMethod){case"password":return function Tn(v,g){return Mo.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function os(v,g){return Dr.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ae(g,"internal-error")}})()}_linkToIdToken(g,_){var b=this;return(0,o.Z)(function*(){switch(b.signInMethod){case"password":return ol(g,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function to(v,g){return Sd.apply(this,arguments)}(g,{idToken:_,email:b._email,oobCode:b._password});default:Ae(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function no(v,g){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,o.Z)(function*(v,g){return zi(v,"POST","/v1/accounts:signInWithIdp",Qt(v,g))})).apply(this,arguments)}class Es extends $r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Es(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ae("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:A}=_,O=(0,re._T)(_,["providerId","signInMethod"]);if(!b||!A)return null;const K=new Es(b,A);return K.idToken=O.idToken||void 0,K.accessToken=O.accessToken||void 0,K.secret=O.secret,K.nonce=O.nonce,K.pendingToken=O.pendingToken||null,K}_getIdTokenResponse(g){return no(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,no(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,no(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,L.xO)(_)}return g}}function Wg(v,g){return xd.apply(this,arguments)}function xd(){return(xd=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:sendVerificationCode",Qt(v,g))})).apply(this,arguments)}function io(){return(io=(0,o.Z)(function*(v,g){return zi(v,"POST","/v1/accounts:signInWithPhoneNumber",Qt(v,g))})).apply(this,arguments)}function Ad(){return(Ad=(0,o.Z)(function*(v,g){const _=yield zi(v,"POST","/v1/accounts:signInWithPhoneNumber",Qt(v,g));if(_.temporaryProof)throw zr(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Kg={USER_NOT_FOUND:"user-not-found"};function Md(){return(Md=(0,o.Z)(function*(v,g){return zi(v,"POST","/v1/accounts:signInWithPhoneNumber",Qt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Kg)})).apply(this,arguments)}class ha extends $r{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new ha({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new ha({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function dc(v,g){return io.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Zg(v,g){return Ad.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Yg(v,g){return Md.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:b,verificationCode:A}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:b,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:b,phoneNumber:A,temporaryProof:O}=g;return b||_||A||O?new ha({verificationId:_,verificationCode:b,phoneNumber:A,temporaryProof:O}):null}}class Ql{constructor(g){var _,b,A,O,K,de;const ve=(0,L.zd)((0,L.pd)(g)),Xe=null!==(_=ve.apiKey)&&void 0!==_?_:null,mt=null!==(b=ve.oobCode)&&void 0!==b?b:null,ht=function Pf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=ve.mode)&&void 0!==A?A:null);z(Xe&&mt&&ht,"argument-error"),this.apiKey=Xe,this.operation=ht,this.code=mt,this.continueUrl=null!==(O=ve.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(K=ve.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(de=ve.tenantId)&&void 0!==de?de:null}static parseLink(g){const _=function ll(v){const g=(0,L.zd)((0,L.pd)(v)).link,_=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,b=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(b?(0,L.zd)((0,L.pd)(b)).link:null)||b||_||g||v}(g);try{return new Ql(_)}catch(b){return null}}}let Rd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,b){return ki._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const A=Ql.parseLink(b);return z(A,"argument-error"),ki._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ri{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ko extends Ri{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class as extends ko{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return z("providerId"in _&&"signInMethod"in _,"argument-error"),Es._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return z(g.idToken||g.accessToken,"argument-error"),Es._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return as.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return as.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:A,pendingToken:O,nonce:K,providerId:de}=g;if(!b&&!A&&!_&&!O||!de)return null;try{return new as(de)._credential({idToken:_,accessToken:b,nonce:K,pendingToken:O})}catch(ve){return null}}}let fa=(()=>{class v extends ko{constructor(){super("facebook.com")}static credential(_){return Es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(b){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Od=(()=>{class v extends ko{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return Es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:A}=_;if(!b&&!A)return null;try{return v.credential(b,A)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Nf=(()=>{class v extends ko{constructor(){super("github.com")}static credential(_){return Es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(b){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ro extends $r{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return no(g,this.buildRequest())}_linkToIdToken(g,_){const b=this.buildRequest();return b.idToken=_,no(g,b)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,no(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:A,pendingToken:O}=_;return b&&A&&O&&b===A?new Ro(b,O):null}static _create(g,_){return new Ro(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zi extends Ri{constructor(g){z(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Zi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Zi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Ro.fromJSON(g);return z(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:b}=g;if(!_||!b)return null;try{return Ro._create(b,_)}catch(A){return null}}}let Pd=(()=>{class v extends ko{constructor(){super("twitter.com")}static credential(_,b){return Es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:A}=_;if(!b||!A)return null;try{return v.credential(b,A)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Pi(v,g){return ga.apply(this,arguments)}function ga(){return(ga=(0,o.Z)(function*(v,g){return zi(v,"POST","/v1/accounts:signUp",Qt(v,g))})).apply(this,arguments)}class xr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,b,A=!1){return(0,o.Z)(function*(){const O=yield xt._fromIdTokenResponse(g,b,A),K=hc(b);return new xr({user:O,providerId:K,_tokenResponse:b,operationType:_})})()}static _forOperation(g,_,b){return(0,o.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const A=hc(b);return new xr({user:g,providerId:A,_tokenResponse:b,operationType:_})})()}}function hc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function fc(){return(fc=(0,o.Z)(function*(v){var g;const _=pt(v);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new xr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Pi(_,{returnSecureToken:!0}),A=yield xr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class ma extends L.ZR{constructor(g,_,b,A){var O;super(_.code,_.message),this.operationType=b,this.user=A,Object.setPrototypeOf(this,ma.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,_,b,A){return new ma(g,_,b,A)}}function pc(v,g,_,b){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?ma._fromErrorAndOperation(v,O,g,b):O})}function ls(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function gn(){return(gn=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v);yield on(!0,_,g);const{providerUserInfo:b}=yield kn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),A=ls(b||[]);return _.providerData=_.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ul(v,g){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,o.Z)(function*(v,g,_=!1){const b=yield xi(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return xr._forOperation(v,"link",b)})).apply(this,arguments)}function on(v,g,_){return cl.apply(this,arguments)}function cl(){return(cl=(0,o.Z)(function*(v,g,_){yield Mi(g);const A=!1===v?"provider-already-linked":"no-such-provider";z(ls(g.providerData).has(_)===v,g.auth,A)})).apply(this,arguments)}function Jl(v,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,o.Z)(function*(v,g,_=!1){const{auth:b}=v,A="reauthenticate";try{const O=yield xi(v,pc(b,A,g,v),_);z(O.idToken,b,"internal-error");const K=ct(O.idToken);z(K,b,"internal-error");const{sub:de}=K;return z(v.uid===de,b,"user-mismatch"),xr._forOperation(v,A,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Ae(b,"user-mismatch"),O}})).apply(this,arguments)}function vi(v,g){return gc.apply(this,arguments)}function gc(){return(gc=(0,o.Z)(function*(v,g,_=!1){const b="signIn",A=yield pc(v,b,g),O=yield xr._fromIdTokenResponse(v,b,A);return _||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Dn(v,g){return us.apply(this,arguments)}function us(){return(us=(0,o.Z)(function*(v,g){return vi(pt(v),g)})).apply(this,arguments)}function wi(v,g){return Po.apply(this,arguments)}function Po(){return(Po=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v);return yield on(!1,_,g.providerId),ul(_,g)})).apply(this,arguments)}function Ts(v,g){return dl.apply(this,arguments)}function dl(){return(dl=(0,o.Z)(function*(v,g){return Jl((0,L.m9)(v),g)})).apply(this,arguments)}function qr(v,g){return cs.apply(this,arguments)}function cs(){return(cs=(0,o.Z)(function*(v,g){return zi(v,"POST","/v1/accounts:signInWithCustomToken",Qt(v,g))})).apply(this,arguments)}function wt(){return(wt=(0,o.Z)(function*(v,g){const _=pt(v),b=yield qr(_,{token:g,returnSecureToken:!0}),A=yield xr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class so{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?mc._fromServerResponse(g,_):Ae(g,"internal-error")}}class mc extends so{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new mc(_)}}function hl(v,g,_){var b;z((null===(b=_.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),z(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(z(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(z(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Xl(){return(Xl=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),A={requestType:"PASSWORD_RESET",email:g};_&&hl(b,A,_),yield al(b,A)})).apply(this,arguments)}function yc(){return(yc=(0,o.Z)(function*(v,g,_){yield Bn((0,L.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function ke(){return(ke=(0,o.Z)(function*(v,g){yield Zl((0,L.m9)(v),{oobCode:g})})).apply(this,arguments)}function jt(v,g){return No.apply(this,arguments)}function No(){return(No=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v),b=yield Bn(_,{oobCode:g}),A=b.requestType;switch(z(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(b.mfaInfo,_,"internal-error");default:z(b.email,_,"internal-error")}let O=null;return b.mfaInfo&&(O=so._fromServerResponse(pt(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function tu(){return(tu=(0,o.Z)(function*(v,g){const{data:_}=yield jt((0,L.m9)(v),g);return _.email})).apply(this,arguments)}function Ar(){return(Ar=(0,o.Z)(function*(v,g,_){const b=pt(v),A=yield Pi(b,{returnSecureToken:!0,email:g,password:_}),O=yield xr._fromIdTokenResponse(b,"signIn",A);return yield b._updateCurrentUser(O.user),O})).apply(this,arguments)}function bc(){return(bc=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};z(_.handleCodeInApp,b,"argument-error"),_&&hl(b,A,_),yield rs(b,A)})).apply(this,arguments)}function Is(){return(Is=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),A=Rd.credentialWithLink(g,_||Ve());return z(A._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Dn(b,A)})).apply(this,arguments)}function Ni(v,g){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:createAuthUri",Qt(v,g))})).apply(this,arguments)}function oo(){return(oo=(0,o.Z)(function*(v,g){const b={identifier:g,continueUri:gt()?Ve():"http://localhost"},{signinMethods:A}=yield Ni((0,L.m9)(v),b);return A||[]})).apply(this,arguments)}function Cc(){return(Cc=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&hl(_.auth,A,g);const{email:O}=yield pn(_.auth,A);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function ru(){return(ru=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&hl(b.auth,O,_);const{email:K}=yield Id(b.auth,O);K!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ec(v,g){return va.apply(this,arguments)}function va(){return(va=(0,o.Z)(function*(v,g){return Ht(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ou(){return(ou=(0,o.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const b=(0,L.m9)(v),O={idToken:yield b.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},K=yield xi(b,Ec(b.auth,O));b.displayName=K.displayName||null,b.photoURL=K.photoUrl||null;const de=b.providerData.find(({providerId:ve})=>"password"===ve);de&&(de.displayName=b.displayName,de.photoURL=b.photoURL),yield b._updateTokensIfNecessary(K)})).apply(this,arguments)}function au(v,g,_){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,o.Z)(function*(v,g,_){const{auth:b}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const K=yield xi(v,ol(b,O));yield v._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class wa{constructor(g,_,b={}){this.isNewUser=g,this.providerId=_,this.profile=b}}class Ud extends wa{constructor(g,_,b,A){super(g,_,b),this.username=A}}class lu extends wa{constructor(g,_){super(g,"facebook.com",_)}}class hr extends Ud{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Lf extends wa{constructor(g,_){super(g,"google.com",_)}}class Tc extends Ud{constructor(g,_,b){super(g,"twitter.com",_,b)}}function fi(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Bd(v){var g,_;if(!v)return null;const{providerId:b}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&(null==v?void 0:v.idToken)){const K=null===(_=null===(g=ct(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(K)return new wa(O,"anonymous"!==K&&"custom"!==K?K:null)}if(!b)return null;switch(b){case"facebook.com":return new lu(O,A);case"github.com":return new hr(O,A);case"google.com":return new Lf(O,A);case"twitter.com":return new Tc(O,A,v.screenName||null);case"custom":case"anonymous":return new wa(O,null);default:return new wa(O,b,A)}}(_)}class Ss{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Ss("enroll",g)}static _fromMfaPendingCredential(g){return new Ss("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,b;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ss._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(b=g.multiFactorSession)||void 0===b?void 0:b.idToken)return Ss._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Bo{constructor(g,_,b){this.session=g,this.hints=_,this.signInResolver=b}static _fromError(g,_){const b=pt(g),A=_.customData._serverResponse,O=(A.mfaInfo||[]).map(de=>so._fromServerResponse(b,de));z(A.mfaPendingCredential,b,"internal-error");const K=Ss._fromMfaPendingCredential(A.mfaPendingCredential);return new Bo(K,O,function(){var de=(0,o.Z)(function*(ve){const Xe=yield ve._process(b,K);delete A.mfaInfo,delete A.mfaPendingCredential;const mt=Object.assign(Object.assign({},A),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(_.operationType){case"signIn":const ht=yield xr._fromIdTokenResponse(b,_.operationType,mt);return yield b._updateCurrentUser(ht.user),ht;case"reauthenticate":return z(_.user,b,"internal-error"),xr._forOperation(_.user,_.operationType,mt);default:Ae(b,"internal-error")}});return function(ve){return de.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,o.Z)(function*(){return _.signInResolver(g)})()}}function jd(v,g){return Ht(v,"POST","/v2/accounts/mfaEnrollment:start",Qt(v,g))}class ba{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>so._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new ba(g)}getSession(){var g=this;return(0,o.Z)(function*(){return Ss._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var b=this;return(0,o.Z)(function*(){const A=g,O=yield b.getSession(),K=yield xi(b.user,A._process(b.user.auth,O,_));return yield b.user._updateTokensIfNecessary(K),b.user.reload()})()}unenroll(g){var _=this;return(0,o.Z)(function*(){const b="string"==typeof g?g:g.uid,A=yield _.user.getIdToken(),O=yield xi(_.user,function Uo(v,g){return Ht(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Qt(v,g))}(_.user.auth,{idToken:A,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:K})=>K!==b),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const uu=new WeakMap,Ds="__sak";class cu{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ds,"1"),this.storage.removeItem(Ds),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ds=(()=>{class v extends cu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function tm(){const v=(0,L.z$)();return Wl(v)||ur(v)}()&&function yi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Js(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const A=this.storage.getItem(b),O=this.localCache[b];A!==O&&_(b,O,A)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((de,ve,Xe)=>{this.notifyListeners(de,Xe)});const A=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(A);if(_.newValue!==de)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!b)return}const O=()=>{const de=this.storage.getItem(A);!b&&this.localCache[A]===de||this.notifyListeners(A,de)},K=this.storage.getItem(A);!function sl(){return(0,L.w1)()&&10===document.documentMode}()||K===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,b){this.localCache[_]=b;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var A=()=>super._set,O=this;return(0,o.Z)(function*(){yield A().call(O,_,b),O.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,A=this;return(0,o.Z)(function*(){const O=yield b().call(A,_);return A.localCache[_]=JSON.stringify(O),O})()}_remove(_){var b=()=>super._remove,A=this;return(0,o.Z)(function*(){yield b().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),xs=(()=>{class v extends cu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return v.type="SESSION",v})();let Ki=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(O=>O.isListeningto(_));if(b)return b;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,o.Z)(function*(){const A=_,{eventId:O,eventType:K,data:de}=A.data,ve=b.handlersMap[K];if(!(null==ve?void 0:ve.size))return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:K});const Xe=Array.from(ve).map(function(){var ht=(0,o.Z)(function*(Yn){return Yn(A.origin,de)});return function(Yn){return ht.apply(this,arguments)}}()),mt=yield function Ca(v){return Promise.all(v.map(function(){var g=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return g.apply(this,arguments)}}()))}(Xe);A.ports[0].postMessage({status:"done",eventId:O,eventType:K,response:mt})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ho(v="",g=10){let _="";for(let b=0;b<g;b++)_+=Math.floor(10*Math.random());return v+_}class jo{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,b=50){var A=this;return(0,o.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let K,de;return new Promise((ve,Xe)=>{const mt=Ho("",20);O.port1.start();const ht=setTimeout(()=>{Xe(new Error("unsupported_event"))},b);de={messageChannel:O,onMessage(Yn){const rn=Yn;if(rn.data.eventId===mt)switch(rn.data.status){case"ack":clearTimeout(ht),K=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),ve(rn.data.response);break;default:clearTimeout(ht),clearTimeout(K),Xe(new Error("invalid_response"))}}},A.handlers.add(de),O.port1.addEventListener("message",de.onMessage),A.target.postMessage({eventType:g,eventId:mt,data:_},[O.port2])}).finally(()=>{de&&A.removeMessageHandler(de)})})()}}function dn(){return window}function Ea(){return void 0!==dn().WorkerGlobalScope&&"function"==typeof dn().importScripts}function zd(){return(zd=(0,o.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Ta="firebaseLocalStorageDb",hs="firebaseLocalStorage",Ft="fbase_key";class fs{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function bi(v,g){return v.transaction([hs],g?"readwrite":"readonly").objectStore(hs)}function hu(){const v=indexedDB.open(Ta,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(hs,{keyPath:Ft})}catch(A){_(A)}}),v.addEventListener("success",(0,o.Z)(function*(){const b=v.result;b.objectStoreNames.contains(hs)?g(b):(b.close(),yield function gl(){const v=indexedDB.deleteDatabase(Ta);return new fs(v).toPromise()}(),g(yield hu()))}))})}function Ia(v,g,_){return ml.apply(this,arguments)}function ml(){return(ml=(0,o.Z)(function*(v,g,_){const b=bi(v,!0).put({[Ft]:g,value:_});return new fs(b).toPromise()})).apply(this,arguments)}function lo(){return(lo=(0,o.Z)(function*(v,g){const _=bi(v,!1).get(g),b=yield new fs(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function fu(v,g){const _=bi(v,!0).delete(g);return new fs(_).toPromise()}const _l=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield hu()),_.db})()}_withRetries(_){var b=this;return(0,o.Z)(function*(){let A=0;for(;;)try{const O=yield b._openDb();return yield _(O)}catch(O){if(A++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return Ea()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=Ki._getInstance(function Ic(){return Ea()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,o.Z)(function*(A,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(A,O){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,o.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var b,A;if(_.activeServiceWorker=yield function pl(){return zd.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new jo(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,o.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Bf(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield hu();return yield Ia(_,Ds,"1"),yield fu(_,Ds),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,o.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var A=this;return(0,o.Z)(function*(){return A._withPendingWrite((0,o.Z)(function*(){return yield A._withRetries(O=>Ia(O,_,b)),A.localCache[_]=b,A.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,o.Z)(function*(){const A=yield b._withRetries(O=>function Sc(v,g){return lo.apply(this,arguments)}(O,_));return b.localCache[_]=A,A})()}_remove(_){var b=this;return(0,o.Z)(function*(){return b._withPendingWrite((0,o.Z)(function*(){return yield b._withRetries(A=>fu(A,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const b=yield _._withRetries(K=>{const de=bi(K,!1).getAll();return new fs(de).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:K,value:de}of b)O.add(K),JSON.stringify(_.localCache[K])!==JSON.stringify(de)&&(_.notifyListeners(K,de),A.push(K));for(const K of Object.keys(_.localCache))_.localCache[K]&&!O.has(K)&&(_.notifyListeners(K,null),A.push(K));return A})()}notifyListeners(_,b){this.localCache[_]=b;const A=this.listeners[_];if(A)for(const O of Array.from(A))O(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function mu(v,g){return Ht(v,"POST","/v2/accounts/mfaSignIn:start",Qt(v,g))}function _u(){return(_u=(0,o.Z)(function*(v){return(yield Ht(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function yu(v){return new Promise((g,_)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=g,b.onerror=A=>{const O=Te("internal-error");O.customData=A,_(O)},b.type="text/javascript",b.charset="UTF-8",function yl(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(b)})}function As(v){return`__${v}${Math.floor(1e6*Math.random())}`}const vu=1e12;class Dc{constructor(g){this.auth=g,this.counter=vu,this._widgets=new Map}render(g,_){const b=this.counter;return this._widgets.set(b,new Da(g,this.auth.name,_||{})),this.counter++,b}reset(g){var _;const b=g||vu;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(g){var _;return(null===(_=this._widgets.get(g||vu))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,o.Z)(function*(){var b;return null===(b=_._widgets.get(g||vu))||void 0===b||b.execute(),""})()}}class Da{constructor(g,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;z(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qd(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<v;b++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wd=As("rcb"),Rn=new ln(3e4,6e4);class ov{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!dn().grecaptcha}load(g,_=""){return z(function sm(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(dn().grecaptcha):new Promise((b,A)=>{const O=dn().setTimeout(()=>{A(Te(g,"network-request-failed"))},Rn.get());dn()[Wd]=()=>{dn().clearTimeout(O),delete dn()[Wd];const de=dn().grecaptcha;if(!de)return void A(Te(g,"internal-error"));const ve=de.render;de.render=(Xe,mt)=>{const ht=ve(Xe,mt);return this.counter++,ht},this.hostLanguage=_,b(de)},yu(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Wd,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),A(Te(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!dn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Uf{load(g){return(0,o.Z)(function*(){return new Dc(g)})()}clearedOneInstance(){}}const Zd="recaptcha",om={theme:"light",type:"image"};class am{constructor(g,_=Object.assign({},om),b){this.parameters=_,this.type=Zd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pt(b),this.isInvisible="invisible"===this.parameters.size,z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;z(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Uf:new ov,this.validateStartingState()}verify(){var g=this;return(0,o.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(_)||new Promise(O=>{const K=de=>{!de||(g.tokenChangeListeners.delete(K),O(de))};g.tokenChangeListeners.add(K),g.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof g)g(_);else if("string"==typeof g){const b=dn()[g];"function"==typeof b&&b(_)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,o.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,o.Z)(function*(){z(gt()&&!Ea(),g.auth,"internal-error"),yield function wu(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function uo(v){return _u.apply(this,arguments)}(g.auth);z(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Kd{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=ha._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function zo(){return(zo=(0,o.Z)(function*(v,g,_){const b=pt(v),A=yield Fi(b,g,(0,L.m9)(_));return new Kd(A,O=>Dn(b,O))})).apply(this,arguments)}function xc(){return(xc=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);yield on(!1,b,"phone");const A=yield Fi(b.auth,g,(0,L.m9)(_));return new Kd(A,O=>wi(b,O))})).apply(this,arguments)}function Ci(){return(Ci=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v),A=yield Fi(b.auth,g,(0,L.m9)(_));return new Kd(A,O=>Ts(b,O))})).apply(this,arguments)}function Fi(v,g,_){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,o.Z)(function*(v,g,_){var b;const A=yield _.verify();try{let O;if(z("string"==typeof A,v,"argument-error"),z(_.type===Zd,v,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const K=O.session;if("phoneNumber"in O)return z("enroll"===K.type,v,"internal-error"),(yield jd(v,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{z("signin"===K.type,v,"internal-error");const de=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return z(de,v,"missing-multi-factor-info"),(yield mu(v,{mfaPendingCredential:K.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield Wg(v,{phoneNumber:O.phoneNumber,recaptchaToken:A});return K}}finally{_._reset()}})).apply(this,arguments)}function Kr(){return(Kr=(0,o.Z)(function*(v,g){yield ul((0,L.m9)(v),g)})).apply(this,arguments)}let Ms=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=pt(_)}verifyPhoneNumber(_,b){return Fi(this.auth,_,(0,L.m9)(b))}static credential(_,b){return ha._fromVerification(_,b)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:A}=_;return b&&A?ha._fromTokenResponse(b,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ps(v,g){return g?ne(g):(z(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class qo extends $r{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return no(g,this._buildIdpRequest())}_linkToIdToken(g,_){return no(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return no(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Hf(v){return vi(v.auth,new qo(v),v.bypassAuthState)}function Yd(v){const{auth:g,user:_}=v;return z(_,g,"internal-error"),Jl(_,new qo(v),v.bypassAuthState)}function Wo(v){return Li.apply(this,arguments)}function Li(){return(Li=(0,o.Z)(function*(v){const{auth:g,user:_}=v;return z(_,g,"internal-error"),ul(_,new qo(v),v.bypassAuthState)})).apply(this,arguments)}class bu{constructor(g,_,b,A,O=!1){this.auth=g,this.resolver=b,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,o.Z)(function*(b,A){g.pendingPromise={resolve:b,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(b,A){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,o.Z)(function*(){const{urlResponse:b,sessionId:A,postBody:O,tenantId:K,error:de,type:ve}=g;if(de)return void _.reject(de);const Xe={auth:_.auth,requestUri:b,sessionId:A,tenantId:K||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(ve)(Xe))}catch(mt){_.reject(mt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Hf;case"linkViaPopup":case"linkViaRedirect":return Wo;case"reauthViaPopup":case"reauthViaRedirect":return Yd;default:Ae(this.auth,"internal-error")}}resolve(g){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xa=new ln(2e3,1e4);function gs(){return(gs=(0,o.Z)(function*(v,g,_){const b=pt(v);je(v,g,Ri);const A=ps(b,_);return new Eu(b,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function Cu(){return(Cu=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);je(b.auth,g,Ri);const A=ps(b.auth,_);return new Eu(b.auth,"reauthViaPopup",g,A,b).executeNotNull()})).apply(this,arguments)}function ks(){return(ks=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);je(b.auth,g,Ri);const A=ps(b.auth,_);return new Eu(b.auth,"linkViaPopup",g,A,b).executeNotNull()})).apply(this,arguments)}let Eu=(()=>{class v extends bu{constructor(_,b,A,O,K){super(_,b,O,K),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const b=yield _.execute();return z(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,o.Z)(function*(){Y(1===_.filter.length,"Popup operations only handle one event");const b=Ho();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(Te(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,A;this.pollId=(null===(A=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,xa.get())};_()}}return v.currentPopupAction=null,v})();const fo=new Map;class Aa extends bu{constructor(g,_,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,o.Z)(function*(){let b=fo.get(_.auth._key());if(!b){try{const O=(yield function Tu(v,g){return ms.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;b=()=>Promise.resolve(O)}catch(A){b=()=>Promise.reject(A)}fo.set(_.auth._key(),b)}return _.bypassAuthState||fo.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,b=this;return(0,o.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(b,g);if("unknown"!==g.type){if(g.eventId){const A=yield b.auth._redirectUserForId(g.eventId);if(A)return b.user=A,_().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function ms(){return(ms=(0,o.Z)(function*(v,g){const _=U(g),b=R(v);if(!(yield b._isAvailable()))return!1;const A="true"===(yield b._get(_));return yield b._remove(_),A})).apply(this,arguments)}function Ma(v,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,o.Z)(function*(v,g){return R(v)._set(U(g),"true")})).apply(this,arguments)}function D(v,g){fo.set(v._key(),g)}function R(v){return ne(v._redirectPersistence)}function U(v){return Xn("pendingRedirect",v.config.apiKey,v.name)}function Oe(){return(Oe=(0,o.Z)(function*(v,g,_){const b=pt(v);je(v,g,Ri);const A=ps(b,_);return yield Ma(A,b),A._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function dt(){return(dt=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);je(b.auth,g,Ri);const A=ps(b.auth,_);yield Ma(A,b.auth);const O=yield kr(b);return A._openRedirect(b.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function ii(){return(ii=(0,o.Z)(function*(v,g,_){const b=(0,L.m9)(v);je(b.auth,g,Ri);const A=ps(b.auth,_);yield on(!1,b,g.providerId),yield Ma(A,b.auth);const O=yield kr(b);return A._openRedirect(b.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Ko(){return(Ko=(0,o.Z)(function*(v,g){return yield pt(v)._initializationPromise,Rs(v,g,!1)})).apply(this,arguments)}function Rs(v,g){return fr.apply(this,arguments)}function fr(){return(fr=(0,o.Z)(function*(v,g,_=!1){const b=pt(v),A=ps(b,g),K=yield new Aa(b,A,_).execute();return K&&!_&&(delete K.user._redirectEventId,yield b._persistUserIfCurrent(K.user),yield b._setRedirectUser(null,g)),K})).apply(this,arguments)}function kr(v){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,o.Z)(function*(v){const g=Ho(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class lm{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(_=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function kc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yi(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var b;if(g.error&&!Yi(g)){const A=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(Te(this.auth,A))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const b=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zf(g))}saveEventToCache(g){this.cachedEventUids.add(zf(g)),this.lastProcessedEventTime=Date.now()}}function zf(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Yi({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Iu(v){return Su.apply(this,arguments)}function Su(){return(Su=(0,o.Z)(function*(v,g={}){return Ht(v,"GET","/v1/projects",g)})).apply(this,arguments)}const av=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Du=/^https?/;function um(){return(um=(0,o.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Iu(v);for(const _ of g)try{if(jS(_))return}catch(b){}Ae(v,"unauthorized-domain")})).apply(this,arguments)}function jS(v){const g=Ve(),{protocol:_,hostname:b}=new URL(g);if(v.startsWith("chrome-extension://")){const K=new URL(v);return""===K.hostname&&""===b?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&K.hostname===b}if(!Du.test(_))return!1;if(av.test(v))return b===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(b)}const Oc=new ln(3e4,6e4);function cm(){const v=dn().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Qd=null;function Jd(v){return Qd=Qd||function tC(v){return new Promise((g,_)=>{var b,A,O;function K(){cm(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{cm(),_(Te(v,"network-request-failed"))},timeout:Oc.get()})}if(null===(A=null===(b=dn().gapi)||void 0===b?void 0:b.iframes)||void 0===A?void 0:A.Iframe)g(gapi.iframes.getContext());else{if(!(null===(O=dn().gapi)||void 0===O?void 0:O.load)){const de=As("iframefcb");return dn()[de]=()=>{gapi.load?K():_(Te(v,"network-request-failed"))},yu(`https://apis.google.com/js/api.js?onload=${de}`).catch(ve=>_(ve))}K()}}).catch(g=>{throw Qd=null,g})}(v),Qd}const Xd=new ln(5e3,15e3),xu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$f=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dm(v){const g=v.config;z(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?Fn(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:v.name,v:ue.SDK_VERSION},A=$f.get(v.config.apiHost);A&&(b.eid=A);const O=v._getFrameworks();return O.length&&(b.fw=O.join(",")),`${_}?${(0,L.xO)(b).slice(1)}`}function Au(){return Au=(0,o.Z)(function*(v){const g=yield Jd(v),_=dn().gapi;return z(_,v,"internal-error"),g.open({where:document.body,url:dm(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xu,dontclear:!0},b=>new Promise(function(){var A=(0,o.Z)(function*(O,K){yield b.restyle({setHideOnLeave:!1});const de=Te(v,"network-request-failed"),ve=dn().setTimeout(()=>{K(de)},Xd.get());function Xe(){dn().clearTimeout(ve),O(b)}b.ping(Xe).then(Xe,()=>{K(de)})});return function(O,K){return A.apply(this,arguments)}}()))}),Au.apply(this,arguments)}const qf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ra{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function po(v,g,_,b,A,O){z(v.config.authDomain,v,"auth-domain-config-required"),z(v.config.apiKey,v,"invalid-api-key");const K={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:b,v:ue.SDK_VERSION,eventId:A};if(g instanceof Ri){g.setDefaultLanguage(v.languageCode),K.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(K.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ve,Xe]of Object.entries(O||{}))K[ve]=Xe}if(g instanceof ko){const ve=g.getScopes().filter(Xe=>""!==Xe);ve.length>0&&(K.scopes=ve.join(","))}v.tenantId&&(K.tid=v.tenantId);const de=K;for(const ve of Object.keys(de))void 0===de[ve]&&delete de[ve];return`${function Fc({config:v}){return v.emulator?Fn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(de).slice(1)}`}const Kf="webStorageSupport";class Lc extends class rC{constructor(g){this.factorId=g}_process(g,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,b);case"signin":return this._finalizeSignIn(g,_.credential);default:return Ee("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Lc(g)}_finalizeEnroll(g,_,b){return function Xg(v,g){return Ht(v,"POST","/v2/accounts/mfaEnrollment:finalize",Qt(v,g))}(g,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function $d(v,g){return Ht(v,"POST","/v2/accounts/mfaSignIn:finalize",Qt(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gm=(()=>{class v{constructor(){}static assertion(_){return Lc._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Mu="@firebase/auth";class _m{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(b=>{var A;g((null===(A=b)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ku(){return window}function _s(){return(_s=(0,o.Z)(function*(v,g,_){var b;const{BuildInfo:A}=ku();Y(g.sessionId,"AuthEvent did not contain a session ID");const O=yield aC(g.sessionId),K={};return ur()?K.ibi=A.packageName:qi()?K.apn=A.packageName:Ae(v,"operation-not-supported-in-this-environment"),A.displayName&&(K.appDisplayName=A.displayName),K.sessionId=O,po(v,_,g.type,void 0,null!==(b=g.eventId)&&void 0!==b?b:void 0,K)})).apply(this,arguments)}function Ou(){return(Ou=(0,o.Z)(function*(v){const{BuildInfo:g}=ku(),_={};ur()?_.iosBundleId=g.packageName:qi()?_.androidPackageName=g.packageName:Ae(v,"operation-not-supported-in-this-environment"),yield Iu(v,_)})).apply(this,arguments)}function wm(){return(wm=(0,o.Z)(function*(v,g,_){const{cordova:b}=ku();let A=()=>{};try{yield new Promise((O,K)=>{let de=null;function ve(){var ht;O();const Yn=null===(ht=b.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof Yn&&Yn(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Xe(){de||(de=window.setTimeout(()=>{K(Te(v,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===(null==document?void 0:document.visibilityState)&&Xe()}g.addPassiveListener(ve),document.addEventListener("resume",Xe,!1),qi()&&document.addEventListener("visibilitychange",mt,!1),A=()=>{g.removePassiveListener(ve),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",mt,!1),de&&window.clearTimeout(de)}})}finally{A()}})).apply(this,arguments)}function aC(v){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,o.Z)(function*(v){const g=ih(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ih(v){if(Y(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let b=0;b<v.length;b++)_[b]=v.charCodeAt(b);return _}!function sC(v){(0,ue._registerComponent)(new ce.wA("auth",(g,{options:_})=>{const b=g.getProvider("app").getImmediate(),A=g.getProvider("heartbeat"),{apiKey:O,authDomain:K}=b.options;return((de,ve)=>{z(O&&!O.includes(":"),"invalid-api-key",{appName:de.name}),z(!(null==K?void 0:K.includes(":")),"argument-error",{appName:de.name});const Xe={apiKey:O,authDomain:K,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:da(v)},mt=new Ze(de,ve,Xe);return function le(v,g){const _=(null==g?void 0:g.persistence)||[],b=(Array.isArray(_)?_:[_]).map(ne);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(b,null==g?void 0:g.popupRedirectResolver)}(mt,_),mt})(b,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,b)=>{g.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new ce.wA("auth-internal",g=>{const _=pt(g.getProvider("auth").getImmediate());return new _m(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(Mu,"0.20.2",function uv(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ue.registerVersion)(Mu,"0.20.2","esm2017")}("Browser");class lC extends lm{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,o.Z)(function*(){yield g.initPromise})()}}function rh(v){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,o.Z)(function*(v){const g=yield sh()._get(vl(v));return g&&(yield sh()._remove(vl(v))),g})).apply(this,arguments)}function fv(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const b=Math.floor(Math.random()*g.length);v.push(g.charAt(b))}return v.join("")}function sh(){return ne(ds)}function vl(v){return Xn("authEvent",v.config.apiKey,v.name)}function Pu(v){if(!(null==v?void 0:v.includes("?")))return{};const[g,..._]=v.split("?");return(0,L.zd)(_.join("?"))}function oh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function Bc(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function Em(v=(0,L.z$)()){return!("file:"!==Bc()&&"ionic:"!==Bc()&&"capacitor:"!==Bc()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function np(){try{const v=self.localStorage,g=Ho();if(v)return v.setItem(g,"1"),v.removeItem(g),!function tp(v=(0,L.z$)()){return function Qi(){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ri(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch(v){return Uc()&&(0,L.hl)()}return!1}function Uc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ti(){return(function Cm(){return"http:"===Bc()||"https:"===Bc()}()||(0,L.ru)()||Em())&&!function yv(){return(0,L.b$)()||(0,L.UG)()}()&&np()&&!Uc()}function wl(){return Em()&&"undefined"!=typeof document}function ip(){return(ip=(0,o.Z)(function*(){return!!wl()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Ji={LOCAL:"local",NONE:"none",SESSION:"session"},Hc=z,uh="persistence";function ch(v){return rp.apply(this,arguments)}function rp(){return(rp=(0,o.Z)(function*(v){yield v._initializationPromise;const g=jc(),_=Xn(uh,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function jc(){var v;try{return(null===(v=function vv(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(g){return null}}const dh=z;class Yo{constructor(){this.browserResolver=ne(class iC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xs,this._completeRedirectFn=Rs,this._overrideRedirectResult=D}_openPopup(g,_,b,A){var O=this;return(0,o.Z)(function*(){var K;Y(null===(K=O.eventManagers[g._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const de=po(g,_,b,Ve(),A);return function Wf(v,g,_,b=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),K=Math.max((window.screen.availWidth-b)/2,0).toString();let de="";const ve=Object.assign(Object.assign({},qf),{width:b.toString(),height:A.toString(),top:O,left:K}),Xe=(0,L.z$)().toLowerCase();_&&(de=rl(Xe)?"_blank":_),il(Xe)&&(g=g||"http://localhost",ve.scrollbars="yes");const mt=Object.entries(ve).reduce((Yn,[rn,Lu])=>`${Yn}${rn}=${Lu},`,"");if(function Ao(v=(0,L.z$)()){var g;return ur(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Xe)&&"_self"!==de)return function Zf(v,g){const _=document.createElement("a");_.href=v,_.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(g||"",de),new Ra(null);const ht=window.open(g||"",de,mt);z(ht,v,"popup-blocked");try{ht.focus()}catch(Yn){}return new Ra(ht)}(g,de,Ho())})()}_openRedirect(g,_,b,A){var O=this;return(0,o.Z)(function*(){return yield O._originValidation(g),function Go(v){dn().location.href=v}(po(g,_,b,Ve(),A)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:A,promise:O}=this.eventManagers[_];return A?Promise.resolve(A):(Y(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(g);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(g){var _=this;return(0,o.Z)(function*(){const b=yield function nC(v){return Au.apply(this,arguments)}(g),A=new lm(g);return b.register("authEvent",O=>(z(null==O?void 0:O.authEvent,g,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:A},_.iframes[g._key()]=b,A})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Kf,{type:Kf},A=>{var O;const K=null===(O=null==A?void 0:A[0])||void 0===O?void 0:O[Kf];void 0!==K&&_(!!K),Ae(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Rc(v){return um.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Js()||Wl()||ur()}}),this.cordovaResolver=ne(class ep{constructor(){this._redirectPersistence=xs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Rs,this._overrideRedirectResult=D}_initialize(g){var _=this;return(0,o.Z)(function*(){const b=g._key();let A=_.eventManagers.get(b);return A||(A=new lC(g),_.eventManagers.set(b,A),_.attachCallbackListeners(g,A)),A})()}_openPopup(g){Ae(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,b,A){var O=this;return(0,o.Z)(function*(){!function oC(v){var g,_,b,A,O,K,de,ve,Xe,mt;const ht=ku();z("function"==typeof(null===(g=null==ht?void 0:ht.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),z(void 0!==(null===(_=null==ht?void 0:ht.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),z("function"==typeof(null===(O=null===(A=null===(b=null==ht?void 0:ht.cordova)||void 0===b?void 0:b.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(ve=null===(de=null===(K=null==ht?void 0:ht.cordova)||void 0===K?void 0:K.plugins)||void 0===de?void 0:de.browsertab)||void 0===ve?void 0:ve.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),z("function"==typeof(null===(mt=null===(Xe=null==ht?void 0:ht.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===mt?void 0:mt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const K=yield O._initialize(g);yield K.initialized(),K.resetRedirect(),function S(){fo.clear()}(),yield O._originValidation(g);const de=function dv(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:fv(),postBody:null,tenantId:v.tenantId,error:Te(v,"no-auth-event")}}(g,b,A);yield function bm(v,g){return sh()._set(vl(v),g)}(g,de);const ve=yield function ym(v,g,_){return _s.apply(this,arguments)}(g,de,_),Xe=yield function Qf(v){const{cordova:g}=ku();return new Promise(_=>{g.plugins.browsertab.isAvailable(b=>{let A=null;b?g.plugins.browsertab.openUrl(v):A=g.InAppBrowser.open(v,function Td(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(A)})})}(ve);return function vm(v,g,_){return wm.apply(this,arguments)}(g,K,Xe)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ru(v){return Ou.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:b,handleOpenURL:A,BuildInfo:O}=ku(),K=setTimeout((0,o.Z)(function*(){yield rh(g),_.onEvent(oh())}),500),de=function(){var mt=(0,o.Z)(function*(ht){clearTimeout(K);const Yn=yield rh(g);let rn=null;Yn&&(null==ht?void 0:ht.url)&&(rn=function hv(v,g){var _,b;const A=function Rr(v){const g=Pu(v),_=g.link?decodeURIComponent(g.link):void 0,b=Pu(_).link,A=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Pu(A).link||A||b||_||v}(g);if(A.includes("/__/auth/callback")){const O=Pu(A),K=O.firebaseError?function pv(v){try{return JSON.parse(v)}catch(g){return null}}(decodeURIComponent(O.firebaseError)):null,de=null===(b=null===(_=null==K?void 0:K.code)||void 0===_?void 0:_.split("auth/"))||void 0===b?void 0:b[1],ve=de?Te(de):null;return ve?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:ve,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(Yn,ht.url)),_.onEvent(rn||oh())});return function(Yn){return mt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,de);const ve=A,Xe=`${O.packageName.toLowerCase()}://`;ku().handleOpenURL=function(){var mt=(0,o.Z)(function*(ht){if(ht.toLowerCase().startsWith(Xe)&&de({url:ht}),"function"==typeof ve)try{ve(ht)}catch(Yn){console.error(Yn)}});return function(ht){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=xs,this._completeRedirectFn=Rs,this._overrideRedirectResult=D}_initialize(g){var _=this;return(0,o.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,b,A){var O=this;return(0,o.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,_,b,A)})()}_openRedirect(g,_,b,A){var O=this;return(0,o.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,_,b,A)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return wl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,o.Z)(function*(){if(g.underlyingResolver)return;const _=yield function Nu(){return ip.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function hh(v){return v.unwrap()}function Cv(v){return Im(v)}function Im(v){const{_tokenResponse:g}=v instanceof L.ZR?v.customData:v;if(!g)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Ms.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let b;switch(_){case"google.com":b=Od;break;case"facebook.com":b=fa;break;case"github.com":b=Nf;break;case"twitter.com":b=Pd;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:K,pendingToken:de,nonce:ve}=g;return O||K||A||de?de?_.startsWith("saml.")?Ro._create(_,de):Es._fromParams({providerId:_,signInMethod:_,pendingToken:de,idToken:A,accessToken:O}):new as(_).credential({idToken:A,accessToken:O,rawNonce:ve}):null}return v instanceof L.ZR?b.credentialFromError(v):b.credentialFromResult(v)}function Or(v,g){return g.catch(_=>{throw _ instanceof L.ZR&&function fh(v,g){var _;const b=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Sm(v,function ni(v,g){var _;const b=(0,L.m9)(v),A=g;return z(g.customData.operationType,b,"argument-error"),z(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),Bo._fromError(b,A)}(v,g));else if(b){const A=Im(g),O=g;A&&(O.credential=A,O.tenantId=b.tenantId||void 0,O.email=b.email||void 0,O.phoneNumber=b.phoneNumber||void 0)}}(v,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:Cv(_),additionalUserInfo:fi(_),user:Os.getOrCreate(A)}})}function sp(v,g){return op.apply(this,arguments)}function op(){return(op=(0,o.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:b=>Or(v,_.confirm(b))}})).apply(this,arguments)}class Sm{constructor(g,_){this.resolver=_,this.auth=function Tm(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Or(hh(this.auth),this.resolver.resolveSignIn(g))}}class Os{constructor(g){this._delegate=g,this.multiFactor=function em(v){const g=(0,L.m9)(v);return uu.has(g)||uu.set(g,ba._fromUser(g)),uu.get(g)}(g)}static getOrCreate(g){return Os.USER_MAP.has(g)||Os.USER_MAP.set(g,new Os(g)),Os.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,o.Z)(function*(){return Or(_.auth,wi(_._delegate,g))})()}linkWithPhoneNumber(g,_){var b=this;return(0,o.Z)(function*(){return sp(b.auth,function Zr(v,g,_){return xc.apply(this,arguments)}(b._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,o.Z)(function*(){return Or(_.auth,function Mc(v,g,_){return ks.apply(this,arguments)}(_._delegate,g,Yo))})()}linkWithRedirect(g){var _=this;return(0,o.Z)(function*(){return yield ch(pt(_.auth)),function Lt(v,g,_){return function Et(v,g,_){return ii.apply(this,arguments)}(v,g,_)}(_._delegate,g,Yo)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,o.Z)(function*(){return Or(_.auth,Ts(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return sp(this.auth,function Ac(v,g,_){return Ci.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return Or(this.auth,function Gf(v,g,_){return Cu.apply(this,arguments)}(this._delegate,g,Yo))}reauthenticateWithRedirect(g){var _=this;return(0,o.Z)(function*(){return yield ch(pt(_.auth)),function tt(v,g,_){return function ot(v,g,_){return dt.apply(this,arguments)}(v,g,_)}(_._delegate,g,Yo)})()}sendEmailVerification(g){return function Wr(v,g){return Cc.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,o.Z)(function*(){return yield function Ff(v,g){return gn.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Ld(v,g){return au((0,L.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function Vd(v,g){return au((0,L.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function $o(v,g){return Kr.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function su(v,g){return ou.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function iu(v,g,_){return ru.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Os.USER_MAP=new WeakMap;const Fu=z;let Dm=(()=>{class v{constructor(_,b){if(this.app=_,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;Fu(A,"invalid-api-key",{appName:_.name}),Fu(A,"invalid-api-key",{appName:_.name});const O="undefined"!=typeof window?Yo:void 0;this._delegate=b.initialize({options:{persistence:uC(A,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Fe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Os.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,b){!function dr(v,g,_){const b=pt(v);z(b._canInitEmulator,b,"emulator-config-failed"),z(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const A=!!(null==_?void 0:_.disableWarnings),O=ns(g),{host:K,port:de}=function zn(v){const g=ns(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(b);if(A){const O=A[1];return{host:O,port:is(b.substr(O.length+1))}}{const[O,K]=b.split(":");return{host:O,port:is(K)}}}(g);b.config.emulator={url:`${O}//${K}${null===de?"":`:${de}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:K,port:de,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function En(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,b)}applyActionCode(_){return function ya(v,g){return ke.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return jt(this._delegate,_)}confirmPasswordReset(_,b){return function eu(v,g,_){return yc.apply(this,arguments)}(this._delegate,_,b)}createUserWithEmailAndPassword(_,b){var A=this;return(0,o.Z)(function*(){return Or(A._delegate,function Fo(v,g,_){return Ar.apply(this,arguments)}(A._delegate,_,b))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function nu(v,g){return oo.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Fd(v,g){const _=Ql.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,o.Z)(function*(){Fu(Ti(),_._delegate,"operation-not-supported-in-this-environment");const b=yield function Kn(v,g){return Ko.apply(this,arguments)}(_._delegate,Yo);return b?Or(_._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function ah(v,g){pt(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,b,A){const{next:O,error:K,complete:de}=xm(_,b,A);return this._delegate.onAuthStateChanged(O,K,de)}onIdTokenChanged(_,b,A){const{next:O,error:K,complete:de}=xm(_,b,A);return this._delegate.onIdTokenChanged(O,K,de)}sendSignInLinkToEmail(_,b){return function wc(v,g,_){return bc.apply(this,arguments)}(this._delegate,_,b)}sendPasswordResetEmail(_,b){return function _c(v,g,_){return Xl.apply(this,arguments)}(this._delegate,_,b||void 0)}setPersistence(_){var b=this;return(0,o.Z)(function*(){let A;switch(function wv(v,g){Hc(Object.values(Ji).includes(g),v,"invalid-persistence-type"),(0,L.b$)()?Hc(g!==Ji.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Hc(g===Ji.NONE,v,"unsupported-persistence-type"):Uc()?Hc(g===Ji.NONE||g===Ji.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Hc(g===Ji.NONE||np(),v,"unsupported-persistence-type")}(b._delegate,_),_){case Ji.SESSION:A=xs;break;case Ji.LOCAL:A=(yield ne(_l)._isAvailable())?_l:ds;break;case Ji.NONE:A=It;break;default:return Ae("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Or(this._delegate,function Nd(v){return fc.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Or(this._delegate,Dn(this._delegate,_))}signInWithCustomToken(_){return Or(this._delegate,function _a(v,g){return wt.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,b){return Or(this._delegate,function vc(v,g,_){return Dn((0,L.m9)(v),Rd.credential(g,_))}(this._delegate,_,b))}signInWithEmailLink(_,b){return Or(this._delegate,function Qg(v,g,_){return Is.apply(this,arguments)}(this._delegate,_,b))}signInWithPhoneNumber(_,b){return sp(this._delegate,function Zn(v,g,_){return zo.apply(this,arguments)}(this._delegate,_,b))}signInWithPopup(_){var b=this;return(0,o.Z)(function*(){return Fu(Ti(),b._delegate,"operation-not-supported-in-this-environment"),Or(b._delegate,function jf(v,g,_){return gs.apply(this,arguments)}(b._delegate,_,Yo))})()}signInWithRedirect(_){var b=this;return(0,o.Z)(function*(){return Fu(Ti(),b._delegate,"operation-not-supported-in-this-environment"),yield ch(b._delegate),function J(v,g,_){return function oe(v,g,_){return Oe.apply(this,arguments)}(v,g,_)}(b._delegate,_,Yo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Sn(v,g){return tu.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ji,v})();function xm(v,g,_){let b=v;"function"!=typeof v&&({next:b,error:g,complete:_}=v);const A=b;return{next:K=>A(K&&Os.getOrCreate(K)),error:g,complete:_}}function uC(v,g){const _=function bv(v,g){const _=jc();if(!_)return[];const b=Xn(uh,v,g);switch(_.getItem(b)){case Ji.NONE:return[It];case Ji.LOCAL:return[_l,xs];case Ji.SESSION:return[xs];default:return[]}}(v,g);if("undefined"!=typeof self&&!_.includes(_l)&&_.push(_l),"undefined"!=typeof window)for(const b of[ds,xs])_.includes(b)||_.push(b);return _.includes(It)||_.push(It),_}class An{constructor(){this.providerId="phone",this._delegate=new Ms(hh(ee.Z.auth()))}static credential(g,_){return Ms.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}An.PHONE_SIGN_IN_METHOD=Ms.PHONE_SIGN_IN_METHOD,An.PROVIDER_ID=Ms.PROVIDER_ID;const bl=z;class bt{constructor(g,_,b=ee.Z.app()){var A;bl(null===(A=b.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new am(g,_,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Xi(v){v.INTERNAL.registerComponent(new ce.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),b=g.getProvider("auth");return new Dm(_,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Rd,FacebookAuthProvider:fa,GithubAuthProvider:Nf,GoogleAuthProvider:Od,OAuthProvider:as,SAMLAuthProvider:Zi,PhoneAuthProvider:An,PhoneMultiFactorGenerator:gm,RecaptchaVerifier:bt,TwitterAuthProvider:Pd,Auth:Dm,AuthCredential:$r,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.15")}(ee.Z)},8306:(Qe,be,N)=>{N.d(be,{y:()=>$});var o=N(930),ee=N(727),L=N(8822),ue=N(4671);var ce=N(2416),ae=N(576),pe=N(2806);let $=(()=>{class Re{constructor(He){He&&(this._subscribe=He)}lift(He){const ge=new Re;return ge.source=this,ge.operator=He,ge}subscribe(He,ge,De){const $e=function ze(Re){return Re&&Re instanceof o.Lv||function ie(Re){return Re&&(0,ae.m)(Re.next)&&(0,ae.m)(Re.error)&&(0,ae.m)(Re.complete)}(Re)&&(0,ee.Nn)(Re)}(He)?He:new o.Hp(He,ge,De);return(0,pe.x)(()=>{const{operator:Ye,source:Ae}=this;$e.add(Ye?Ye.call($e,Ae):Ae?this._subscribe($e):this._trySubscribe($e))}),$e}_trySubscribe(He){try{return this._subscribe(He)}catch(ge){He.error(ge)}}forEach(He,ge){return new(ge=G(ge))((De,$e)=>{const Ye=new o.Hp({next:Ae=>{try{He(Ae)}catch(Te){$e(Te),Ye.unsubscribe()}},error:$e,complete:De});this.subscribe(Ye)})}_subscribe(He){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(He)}[L.L](){return this}pipe(...He){return function _e(Re){return 0===Re.length?ue.y:1===Re.length?Re[0]:function(He){return Re.reduce((ge,De)=>De(ge),He)}}(He)(this)}toPromise(He){return new(He=G(He))((ge,De)=>{let $e;this.subscribe(Ye=>$e=Ye,Ye=>De(Ye),()=>ge($e))})}}return Re.create=Fe=>new Re(Fe),Re})();function G(Re){var Fe;return null!==(Fe=null!=Re?Re:ce.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(Qe,be,N)=>{N.d(be,{x:()=>ce});var o=N(8306),ee=N(727);const ue=(0,N(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=N(8737),_e=N(2806);let ce=(()=>{class pe extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ie=new ae(this,this);return ie.operator=G,ie}_throwIfClosed(){if(this.closed)throw new ue}next(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(G)}})}error(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ie}=this;for(;ie.length;)ie.shift().error(G)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ie,isStopped:ze,observers:Re}=this;return ie||ze?ee.Lc:(this.currentObservers=null,Re.push(G),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(Re,G)}))}_checkFinalizedStatuses(G){const{hasError:ie,thrownError:ze,isStopped:Re}=this;ie?G.error(ze):Re&&G.complete()}asObservable(){const G=new o.y;return G.source=this,G}}return pe.create=($,G)=>new ae($,G),pe})();class ae extends ce{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,ie;null===(ie=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ie||ie.call(G,$)}error($){var G,ie;null===(ie=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ie||ie.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,ie;return null!==(ie=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==ie?ie:ee.Lc}}},930:(Qe,be,N)=>{N.d(be,{Hp:()=>He,Lv:()=>ie});var o=N(576),ee=N(727),L=N(2416),ue=N(7849),re=N(5032);const _e=pe("C",void 0,void 0);function pe(Ae,Te,Se){return{kind:Ae,value:Te,error:Se}}var $=N(3410),G=N(2806);class ie extends ee.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,ee.Nn)(Te)&&Te.add(this)):this.destination=Ye}static create(Te,Se,je){return new He(Te,Se,je)}next(Te){this.isStopped?$e(function ae(Ae){return pe("N",Ae,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?$e(function ce(Ae){return pe("E",void 0,Ae)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?$e(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Re(Ae,Te){return ze.call(Ae,Te)}class Fe{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Te)}catch(je){ge(je)}}error(Te){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Te)}catch(je){ge(je)}else ge(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(Se){ge(Se)}}}class He extends ie{constructor(Te,Se,je){let Ge;if(super(),(0,o.m)(Te)||!Te)Ge={next:null!=Te?Te:void 0,error:null!=Se?Se:void 0,complete:null!=je?je:void 0};else{let z;this&&L.v.useDeprecatedNextContext?(z=Object.create(Te),z.unsubscribe=()=>this.unsubscribe(),Ge={next:Te.next&&Re(Te.next,z),error:Te.error&&Re(Te.error,z),complete:Te.complete&&Re(Te.complete,z)}):Ge=Te}this.destination=new Fe(Ge)}}function ge(Ae){L.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ae):(0,ue.h)(Ae)}function $e(Ae,Te){const{onStoppedNotification:Se}=L.v;Se&&$.z.setTimeout(()=>Se(Ae,Te))}const Ye={closed:!0,next:re.Z,error:function De(Ae){throw Ae},complete:re.Z}},727:(Qe,be,N)=>{N.d(be,{Lc:()=>_e,w0:()=>re,Nn:()=>ce});var o=N(576);const L=(0,N(3888).d)(pe=>function(G){pe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ie,ze)=>`${ze+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ue=N(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Re of G)Re.remove(this);else G.remove(this);const{initialTeardown:ie}=this;if((0,o.m)(ie))try{ie()}catch(Re){$=Re instanceof L?Re.errors:[Re]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Re of ze)try{ae(Re)}catch(Fe){$=null!=$?$:[],Fe instanceof L?$=[...$,...Fe.errors]:$.push(Fe)}}if($)throw new L($)}}add($){var G;if($&&$!==this)if(this.closed)ae($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,ue.P)(G,$)}remove($){const{_finalizers:G}=this;G&&(0,ue.P)(G,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const _e=re.EMPTY;function ce(pe){return pe instanceof re||pe&&"closed"in pe&&(0,o.m)(pe.remove)&&(0,o.m)(pe.add)&&(0,o.m)(pe.unsubscribe)}function ae(pe){(0,o.m)(pe)?pe():pe.unsubscribe()}},2416:(Qe,be,N)=>{N.d(be,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Qe,be,N)=>{N.d(be,{E:()=>ee});const ee=new(N(8306).y)(re=>re.complete())},8996:(Qe,be,N)=>{N.d(be,{D:()=>Te});var o=N(8421),ee=N(5363),L=N(9468),_e=N(8306),ae=N(2202),pe=N(576),$=N(9672);function ie(Se,je){if(!Se)throw new Error("Iterable cannot be null");return new _e.y(Ge=>{(0,$.f)(Ge,je,()=>{const z=Se[Symbol.asyncIterator]();(0,$.f)(Ge,je,()=>{z.next().then(Ee=>{Ee.done?Ge.complete():Ge.next(Ee.value)})},0,!0)})})}var ze=N(3670),Re=N(8239),Fe=N(1144),He=N(6495),ge=N(2206),De=N(4532),$e=N(3260);function Te(Se,je){return je?function Ae(Se,je){if(null!=Se){if((0,ze.c)(Se))return function ue(Se,je){return(0,o.Xf)(Se).pipe((0,L.R)(je),(0,ee.Q)(je))}(Se,je);if((0,Fe.z)(Se))return function ce(Se,je){return new _e.y(Ge=>{let z=0;return je.schedule(function(){z===Se.length?Ge.complete():(Ge.next(Se[z++]),Ge.closed||this.schedule())})})}(Se,je);if((0,Re.t)(Se))return function re(Se,je){return(0,o.Xf)(Se).pipe((0,L.R)(je),(0,ee.Q)(je))}(Se,je);if((0,ge.D)(Se))return ie(Se,je);if((0,He.T)(Se))return function G(Se,je){return new _e.y(Ge=>{let z;return(0,$.f)(Ge,je,()=>{z=Se[ae.h](),(0,$.f)(Ge,je,()=>{let Ee,Y;try{({value:Ee,done:Y}=z.next())}catch(se){return void Ge.error(se)}Y?Ge.complete():Ge.next(Ee)},0,!0)}),()=>(0,pe.m)(null==z?void 0:z.return)&&z.return()})}(Se,je);if((0,$e.L)(Se))return function Ye(Se,je){return ie((0,$e.Q)(Se),je)}(Se,je)}throw(0,De.z)(Se)}(Se,je):(0,o.Xf)(Se)}},8421:(Qe,be,N)=>{N.d(be,{Xf:()=>ze});var o=N(655),ee=N(1144),L=N(8239),ue=N(8306),re=N(3670),_e=N(2206),ce=N(4532),ae=N(6495),pe=N(3260),$=N(576),G=N(7849),ie=N(8822);function ze(Ae){if(Ae instanceof ue.y)return Ae;if(null!=Ae){if((0,re.c)(Ae))return function Re(Ae){return new ue.y(Te=>{const Se=Ae[ie.L]();if((0,$.m)(Se.subscribe))return Se.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,ee.z)(Ae))return function Fe(Ae){return new ue.y(Te=>{for(let Se=0;Se<Ae.length&&!Te.closed;Se++)Te.next(Ae[Se]);Te.complete()})}(Ae);if((0,L.t)(Ae))return function He(Ae){return new ue.y(Te=>{Ae.then(Se=>{Te.closed||(Te.next(Se),Te.complete())},Se=>Te.error(Se)).then(null,G.h)})}(Ae);if((0,_e.D)(Ae))return De(Ae);if((0,ae.T)(Ae))return function ge(Ae){return new ue.y(Te=>{for(const Se of Ae)if(Te.next(Se),Te.closed)return;Te.complete()})}(Ae);if((0,pe.L)(Ae))return function $e(Ae){return De((0,pe.Q)(Ae))}(Ae)}throw(0,ce.z)(Ae)}function De(Ae){return new ue.y(Te=>{(function Ye(Ae,Te){var Se,je,Ge,z;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Se=(0,o.KL)(Ae);!(je=yield Se.next()).done;)if(Te.next(je.value),Te.closed)return}catch(Ee){Ge={error:Ee}}finally{try{je&&!je.done&&(z=Se.return)&&(yield z.call(Se))}finally{if(Ge)throw Ge.error}}Te.complete()})})(Ae,Te).catch(Se=>Te.error(Se))})}},6451:(Qe,be,N)=>{N.d(be,{T:()=>_e});var o=N(8189),ee=N(8421),L=N(515),ue=N(3269),re=N(8996);function _e(...ce){const ae=(0,ue.yG)(ce),pe=(0,ue._6)(ce,1/0),$=ce;return $.length?1===$.length?(0,ee.Xf)($[0]):(0,o.J)(pe)((0,re.D)($,ae)):L.E}},5403:(Qe,be,N)=>{N.d(be,{x:()=>ee});var o=N(930);function ee(ue,re,_e,ce,ae){return new L(ue,re,_e,ce,ae)}class L extends o.Lv{constructor(re,_e,ce,ae,pe,$){super(re),this.onFinalize=pe,this.shouldUnsubscribe=$,this._next=_e?function(G){try{_e(G)}catch(ie){re.error(ie)}}:super._next,this._error=ae?function(G){try{ae(G)}catch(ie){re.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(G){re.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Qe,be,N)=>{N.d(be,{U:()=>L});var o=N(4482),ee=N(5403);function L(ue,re){return(0,o.e)((_e,ce)=>{let ae=0;_e.subscribe((0,ee.x)(ce,pe=>{ce.next(ue.call(re,pe,ae++))}))})}},8189:(Qe,be,N)=>{N.d(be,{J:()=>L});var o=N(5577),ee=N(4671);function L(ue=1/0){return(0,o.z)(ee.y,ue)}},5577:(Qe,be,N)=>{N.d(be,{z:()=>ae});var o=N(4004),ee=N(8421),L=N(4482),ue=N(9672),re=N(5403),ce=N(576);function ae(pe,$,G=1/0){return(0,ce.m)($)?ae((ie,ze)=>(0,o.U)((Re,Fe)=>$(ie,Re,ze,Fe))((0,ee.Xf)(pe(ie,ze))),G):("number"==typeof $&&(G=$),(0,L.e)((ie,ze)=>function _e(pe,$,G,ie,ze,Re,Fe,He){const ge=[];let De=0,$e=0,Ye=!1;const Ae=()=>{Ye&&!ge.length&&!De&&$.complete()},Te=je=>De<ie?Se(je):ge.push(je),Se=je=>{Re&&$.next(je),De++;let Ge=!1;(0,ee.Xf)(G(je,$e++)).subscribe((0,re.x)($,z=>{null==ze||ze(z),Re?Te(z):$.next(z)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(De--;ge.length&&De<ie;){const z=ge.shift();Fe?(0,ue.f)($,Fe,()=>Se(z)):Se(z)}Ae()}catch(z){$.error(z)}}))};return pe.subscribe((0,re.x)($,Te,()=>{Ye=!0,Ae()})),()=>{null==He||He()}}(ie,ze,pe,G)))}},5363:(Qe,be,N)=>{N.d(be,{Q:()=>ue});var o=N(9672),ee=N(4482),L=N(5403);function ue(re,_e=0){return(0,ee.e)((ce,ae)=>{ce.subscribe((0,L.x)(ae,pe=>(0,o.f)(ae,re,()=>ae.next(pe),_e),()=>(0,o.f)(ae,re,()=>ae.complete(),_e),pe=>(0,o.f)(ae,re,()=>ae.error(pe),_e)))})}},3099:(Qe,be,N)=>{N.d(be,{B:()=>_e});var o=N(8996),ee=N(5698),L=N(7579),ue=N(930),re=N(4482);function _e(ae={}){const{connector:pe=(()=>new L.x),resetOnError:$=!0,resetOnComplete:G=!0,resetOnRefCountZero:ie=!0}=ae;return ze=>{let Re=null,Fe=null,He=null,ge=0,De=!1,$e=!1;const Ye=()=>{null==Fe||Fe.unsubscribe(),Fe=null},Ae=()=>{Ye(),Re=He=null,De=$e=!1},Te=()=>{const Se=Re;Ae(),null==Se||Se.unsubscribe()};return(0,re.e)((Se,je)=>{ge++,!$e&&!De&&Ye();const Ge=He=null!=He?He:pe();je.add(()=>{ge--,0===ge&&!$e&&!De&&(Fe=ce(Te,ie))}),Ge.subscribe(je),Re||(Re=new ue.Hp({next:z=>Ge.next(z),error:z=>{$e=!0,Ye(),Fe=ce(Ae,$,z),Ge.error(z)},complete:()=>{De=!0,Ye(),Fe=ce(Ae,G),Ge.complete()}}),(0,o.D)(Se).subscribe(Re))})(ze)}}function ce(ae,pe,...$){return!0===pe?(ae(),null):!1===pe?null:pe(...$).pipe((0,ee.q)(1)).subscribe(()=>ae())}},9468:(Qe,be,N)=>{N.d(be,{R:()=>ee});var o=N(4482);function ee(L,ue=0){return(0,o.e)((re,_e)=>{_e.add(L.schedule(()=>re.subscribe(_e),ue))})}},5698:(Qe,be,N)=>{N.d(be,{q:()=>ue});var o=N(515),ee=N(4482),L=N(5403);function ue(re){return re<=0?()=>o.E:(0,ee.e)((_e,ce)=>{let ae=0;_e.subscribe((0,L.x)(ce,pe=>{++ae<=re&&(ce.next(pe),re<=ae&&ce.complete())}))})}},8505:(Qe,be,N)=>{N.d(be,{b:()=>re});var o=N(576),ee=N(4482),L=N(5403),ue=N(4671);function re(_e,ce,ae){const pe=(0,o.m)(_e)||ce||ae?{next:_e,error:ce,complete:ae}:_e;return pe?(0,ee.e)(($,G)=>{var ie;null===(ie=pe.subscribe)||void 0===ie||ie.call(pe);let ze=!0;$.subscribe((0,L.x)(G,Re=>{var Fe;null===(Fe=pe.next)||void 0===Fe||Fe.call(pe,Re),G.next(Re)},()=>{var Re;ze=!1,null===(Re=pe.complete)||void 0===Re||Re.call(pe),G.complete()},Re=>{var Fe;ze=!1,null===(Fe=pe.error)||void 0===Fe||Fe.call(pe,Re),G.error(Re)},()=>{var Re,Fe;ze&&(null===(Re=pe.unsubscribe)||void 0===Re||Re.call(pe)),null===(Fe=pe.finalize)||void 0===Fe||Fe.call(pe)}))}):ue.y}},4408:(Qe,be,N)=>{N.d(be,{o:()=>re});var o=N(727);class ee extends o.w0{constructor(ce,ae){super()}schedule(ce,ae=0){return this}}const L={setInterval(_e,ce,...ae){const{delegate:pe}=L;return(null==pe?void 0:pe.setInterval)?pe.setInterval(_e,ce,...ae):setInterval(_e,ce,...ae)},clearInterval(_e){const{delegate:ce}=L;return((null==ce?void 0:ce.clearInterval)||clearInterval)(_e)},delegate:void 0};var ue=N(8737);class re extends ee{constructor(ce,ae){super(ce,ae),this.scheduler=ce,this.work=ae,this.pending=!1}schedule(ce,ae=0){if(this.closed)return this;this.state=ce;const pe=this.id,$=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId($,pe,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId($,this.id,ae),this}requestAsyncId(ce,ae,pe=0){return L.setInterval(ce.flush.bind(ce,this),pe)}recycleAsyncId(ce,ae,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return ae;L.clearInterval(ae)}execute(ce,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ce,ae);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ae){let $,pe=!1;try{this.work(ce)}catch(G){pe=!0,$=G||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ce,scheduler:ae}=this,{actions:pe}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(pe,this),null!=ce&&(this.id=this.recycleAsyncId(ae,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(Qe,be,N)=>{N.d(be,{v:()=>L});var o=N(6063);class ee{constructor(re,_e=ee.now){this.schedulerActionCtor=re,this.now=_e}schedule(re,_e=0,ce){return new this.schedulerActionCtor(this,re).schedule(ce,_e)}}ee.now=o.l.now;class L extends ee{constructor(re,_e=ee.now){super(re,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:_e}=this;if(this._active)return void _e.push(re);let ce;this._active=!0;do{if(ce=re.execute(re.state,re.delay))break}while(re=_e.shift());if(this._active=!1,ce){for(;re=_e.shift();)re.unsubscribe();throw ce}}}},4986:(Qe,be,N)=>{N.d(be,{P:()=>ue,z:()=>L});var o=N(4408);const L=new(N(7565).v)(o.o),ue=L},6063:(Qe,be,N)=>{N.d(be,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(Qe,be,N)=>{N.d(be,{z:()=>o});const o={setTimeout(ee,L,...ue){const{delegate:re}=o;return(null==re?void 0:re.setTimeout)?re.setTimeout(ee,L,...ue):setTimeout(ee,L,...ue)},clearTimeout(ee){const{delegate:L}=o;return((null==L?void 0:L.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(Qe,be,N)=>{N.d(be,{h:()=>ee});const ee=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Qe,be,N)=>{N.d(be,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Qe,be,N)=>{N.d(be,{_6:()=>_e,jO:()=>ue,yG:()=>re});var o=N(576),ee=N(3532);function L(ce){return ce[ce.length-1]}function ue(ce){return(0,o.m)(L(ce))?ce.pop():void 0}function re(ce){return(0,ee.K)(L(ce))?ce.pop():void 0}function _e(ce,ae){return"number"==typeof L(ce)?ce.pop():ae}},8737:(Qe,be,N)=>{function o(ee,L){if(ee){const ue=ee.indexOf(L);0<=ue&&ee.splice(ue,1)}}N.d(be,{P:()=>o})},3888:(Qe,be,N)=>{function o(ee){const ue=ee(re=>{Error.call(re),re.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}N.d(be,{d:()=>o})},2806:(Qe,be,N)=>{N.d(be,{O:()=>ue,x:()=>L});var o=N(2416);let ee=null;function L(re){if(o.v.useDeprecatedSynchronousErrorHandling){const _e=!ee;if(_e&&(ee={errorThrown:!1,error:null}),re(),_e){const{errorThrown:ce,error:ae}=ee;if(ee=null,ce)throw ae}}else re()}function ue(re){o.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(Qe,be,N)=>{function o(ee,L,ue,re=0,_e=!1){const ce=L.schedule(function(){ue(),_e?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(ce),!_e)return ce}N.d(be,{f:()=>o})},4671:(Qe,be,N)=>{function o(ee){return ee}N.d(be,{y:()=>o})},1144:(Qe,be,N)=>{N.d(be,{z:()=>o});const o=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Qe,be,N)=>{N.d(be,{D:()=>ee});var o=N(576);function ee(L){return Symbol.asyncIterator&&(0,o.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(Qe,be,N)=>{function o(ee){return"function"==typeof ee}N.d(be,{m:()=>o})},3670:(Qe,be,N)=>{N.d(be,{c:()=>L});var o=N(8822),ee=N(576);function L(ue){return(0,ee.m)(ue[o.L])}},6495:(Qe,be,N)=>{N.d(be,{T:()=>L});var o=N(2202),ee=N(576);function L(ue){return(0,ee.m)(null==ue?void 0:ue[o.h])}},8239:(Qe,be,N)=>{N.d(be,{t:()=>ee});var o=N(576);function ee(L){return(0,o.m)(null==L?void 0:L.then)}},3260:(Qe,be,N)=>{N.d(be,{L:()=>ue,Q:()=>L});var o=N(655),ee=N(576);function L(re){return(0,o.FC)(this,arguments,function*(){const ce=re.getReader();try{for(;;){const{value:ae,done:pe}=yield(0,o.qq)(ce.read());if(pe)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(ae)}}finally{ce.releaseLock()}})}function ue(re){return(0,ee.m)(null==re?void 0:re.getReader)}},3532:(Qe,be,N)=>{N.d(be,{K:()=>ee});var o=N(576);function ee(L){return L&&(0,o.m)(L.schedule)}},4482:(Qe,be,N)=>{N.d(be,{A:()=>ee,e:()=>L});var o=N(576);function ee(ue){return(0,o.m)(null==ue?void 0:ue.lift)}function L(ue){return re=>{if(ee(re))return re.lift(function(_e){try{return ue(_e,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Qe,be,N)=>{function o(){}N.d(be,{Z:()=>o})},7849:(Qe,be,N)=>{N.d(be,{h:()=>L});var o=N(2416),ee=N(3410);function L(ue){ee.z.setTimeout(()=>{const{onUnhandledError:re}=o.v;if(!re)throw ue;re(ue)})}},4532:(Qe,be,N)=>{function o(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(be,{z:()=>o})},655:(Qe,be,N)=>{function ue(Y,se){var ne={};for(var ye in Y)Object.prototype.hasOwnProperty.call(Y,ye)&&se.indexOf(ye)<0&&(ne[ye]=Y[ye]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(ye=Object.getOwnPropertySymbols(Y);le<ye.length;le++)se.indexOf(ye[le])<0&&Object.prototype.propertyIsEnumerable.call(Y,ye[le])&&(ne[ye[le]]=Y[ye[le]])}return ne}function ae(Y,se,ne,ye){return new(ne||(ne=Promise))(function(Ve,gt){function $t(ln){try{Ke(ye.next(ln))}catch(Fn){gt(Fn)}}function Ut(ln){try{Ke(ye.throw(ln))}catch(Fn){gt(Fn)}}function Ke(ln){ln.done?Ve(ln.value):function le(Ve){return Ve instanceof ne?Ve:new ne(function(gt){gt(Ve)})}(ln.value).then($t,Ut)}Ke((ye=ye.apply(Y,se||[])).next())})}function ge(Y){return this instanceof ge?(this.v=Y,this):new ge(Y)}function De(Y,se,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ye=ne.apply(Y,se||[]),Ve=[];return le={},gt("next"),gt("throw"),gt("return"),le[Symbol.asyncIterator]=function(){return this},le;function gt(un){ye[un]&&(le[un]=function(nn){return new Promise(function(Gi,Qt){Ve.push([un,nn,Gi,Qt])>1||$t(un,nn)})})}function $t(un,nn){try{!function Ut(un){un.value instanceof ge?Promise.resolve(un.value.v).then(Ke,ln):Fn(Ve[0][2],un)}(ye[un](nn))}catch(Gi){Fn(Ve[0][3],Gi)}}function Ke(un){$t("next",un)}function ln(un){$t("throw",un)}function Fn(un,nn){un(nn),Ve.shift(),Ve.length&&$t(Ve[0][0],Ve[0][1])}}function Ye(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,se=Y[Symbol.asyncIterator];return se?se.call(Y):(Y=function ie(Y){var se="function"==typeof Symbol&&Symbol.iterator,ne=se&&Y[se],ye=0;if(ne)return ne.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ye>=Y.length&&(Y=void 0),{value:Y&&Y[ye++],done:!Y}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ne={},ye("next"),ye("throw"),ye("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function ye(Ve){ne[Ve]=Y[Ve]&&function(gt){return new Promise(function($t,Ut){!function le(Ve,gt,$t,Ut){Promise.resolve(Ut).then(function(Ke){Ve({value:Ke,done:$t})},gt)}($t,Ut,(gt=Y[Ve](gt)).done,gt.value)})}}}N.d(be,{FC:()=>De,KL:()=>Ye,_T:()=>ue,mG:()=>ae,qq:()=>ge})},5e3:(Qe,be,N)=>{N.d(be,{$8M:()=>yu,$Z:()=>wE,AFp:()=>cg,AaK:()=>ae,AsE:()=>A_,BQk:()=>xh,CHM:()=>No,CRH:()=>ST,CZH:()=>cd,CqO:()=>ww,DdM:()=>rd,EJc:()=>LT,EpF:()=>CE,F$t:()=>kp,F4k:()=>b_,FYo:()=>St,FiY:()=>kr,G48:()=>$x,Gf:()=>vb,GfV:()=>en,GkF:()=>Mp,Gpc:()=>G,HTZ:()=>lb,Hh0:()=>eg,Hsn:()=>Rp,JOm:()=>O,LFG:()=>ot,LSH:()=>oh,Lbi:()=>FT,MAs:()=>Nr,NdJ:()=>bw,OlP:()=>Rn,Oqu:()=>x_,PXZ:()=>Jr,Q6J:()=>_w,QGY:()=>vw,Qsj:()=>_T,R0b:()=>Eo,RDi:()=>pc,Rgc:()=>yn,SBq:()=>Ga,Sil:()=>dg,Suo:()=>od,TTD:()=>as,TgZ:()=>Sh,Tol:()=>kE,Udp:()=>kh,VKq:()=>X_,VLi:()=>Vx,W1O:()=>bb,WLB:()=>nc,X6Q:()=>zx,XFs:()=>vt,Xpm:()=>_t,Y36:()=>Qc,YKP:()=>Zh,YNc:()=>h_,Yjl:()=>rl,Yz7:()=>nn,ZZ4:()=>Ty,_Bn:()=>dT,_UZ:()=>yw,_Vd:()=>Z_,_c5:()=>Xx,_uU:()=>Lp,aQg:()=>Bl,c2e:()=>Px,cJS:()=>Qt,cg1:()=>zw,dDg:()=>Vb,deG:()=>rm,dqk:()=>Gt,eFA:()=>Ub,ekj:()=>Pp,f3M:()=>Lt,g9A:()=>NT,h0i:()=>za,hGG:()=>wg,hij:()=>Nh,iGM:()=>qa,ifc:()=>qt,ip1:()=>af,kEZ:()=>ey,kL8:()=>HE,l5B:()=>Yh,lG2:()=>Wl,n5z:()=>_u,oAB:()=>$i,oxw:()=>IE,q4F:()=>vT,qLn:()=>fh,qOj:()=>cw,qZA:()=>Ap,qbA:()=>ab,rFY:()=>ub,sBO:()=>nI,sIi:()=>Ep,s_b:()=>$a,soG:()=>dd,tBr:()=>fr,tb:()=>Nb,tp0:()=>ka,uIk:()=>cE,vHH:()=>Fe,vpe:()=>_n,wAp:()=>Tt,xp6:()=>er,ynx:()=>Dh,z2F:()=>jb,zSh:()=>Qv,zs3:()=>na});var o=N(7579),ee=N(727),L=N(8306),ue=N(6451),re=N(3099);function _e(a){for(let l in a)if(a[l]===_e)return l;throw Error("Could not find renamed property on target object.")}function ce(a,l){for(const c in l)l.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=l[c])}function ae(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ae).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const c=l.indexOf("\n");return-1===c?l:l.substring(0,c)}function pe(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const $=_e({__forward_ref__:_e});function G(a){return a.__forward_ref__=G,a.toString=function(){return ae(this())},a}function ie(a){return ze(a)?a():a}function ze(a){return"function"==typeof a&&a.hasOwnProperty($)&&a.__forward_ref__===G}class Fe extends Error{constructor(l,c){super(function He(a,l){return`NG0${Math.abs(a)}${l?": "+l:""}`}(l,c)),this.code=l}}function ge(a){return"string"==typeof a?a:null==a?"":String(a)}function De(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():ge(a)}function Te(a,l){const c=l?` in ${l}`:"";throw new Fe(-201,`No provider for ${De(a)} found${c}`)}function Ut(a,l){null==a&&function Ke(a,l,c,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${c} ${d} ${l} <=Actual]`))}(l,a,null,"!=")}function nn(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Qt(a){return{providers:a.providers||[],imports:a.imports||[]}}function Ht(a){return es(a,ts)||es(a,ar)}function es(a,l){return a.hasOwnProperty(l)?a[l]:null}function zi(a){return a&&(a.hasOwnProperty(Ys)||a.hasOwnProperty(zr))?a[Ys]:null}const ts=_e({\u0275prov:_e}),Ys=_e({\u0275inj:_e}),ar=_e({ngInjectableDef:_e}),zr=_e({ngInjectorDef:_e});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let Tr;function Ln(a){const l=Tr;return Tr=a,l}function Qs(a,l,c){const d=Ht(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&vt.Optional?null:void 0!==l?l:void Te(ae(a),"Injector")}function hi(a){return{toString:a}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),qt=(()=>{return(a=qt||(qt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",qt;var a})();const ct="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,xi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt=ct||"undefined"!=typeof global&&global||Ct||xi,Mi={},H=[],W=_e({\u0275cmp:_e}),Z=_e({\u0275dir:_e}),xe=_e({\u0275pipe:_e}),q=_e({\u0275mod:_e}),te=_e({\u0275fac:_e}),Ne=_e({__NG_ELEMENT_ID__:_e});let Je=0;function _t(a){return hi(()=>{const c={},d={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||H,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||qt.Emulated,id:"c",styles:a.styles||H,_:null,setInput:null,schemas:a.schemas||null,tView:null},f=a.directives,m=a.features,w=a.pipes;return d.id+=Je++,d.inputs=il(a.inputs,c),d.outputs=il(a.outputs),m&&m.forEach(C=>C(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Cn):null,d.pipeDefs=w?()=>("function"==typeof w?w():w).map(It):null,d})}function Cn(a){return ei(a)||function qi(a){return a[Z]||null}(a)}function It(a){return function Cs(a){return a[xe]||null}(a)}const Xn={};function $i(a){return hi(()=>{const l={type:a.type,bootstrap:a.bootstrap||H,declarations:a.declarations||H,imports:a.imports||H,exports:a.exports||H,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(Xn[a.id]=a.type),l})}function il(a,l){if(null==a)return Mi;const c={};for(const d in a)if(a.hasOwnProperty(d)){let f=a[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=d,l&&(l[f]=m)}return c}const Wl=_t;function rl(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function ei(a){return a[W]||null}function ti(a,l){const c=a[q]||null;if(!c&&!0===l)throw new Error(`Type ${ae(a)} does not have '\u0275mod' property.`);return c}function Wi(a){return Array.isArray(a)&&"object"==typeof a[1]}function rs(a){return Array.isArray(a)&&!0===a[1]}function Yl(a){return 0!=(8&a.flags)}function Id(a){return 2==(2&a.flags)}function ss(a){return 1==(1&a.flags)}function os(a){return null!==a.template}function Dr(a){return 0!=(512&a[2])}function Ri(a,l){return a.hasOwnProperty(te)?a[te]:null}class ko{constructor(l,c,d){this.previousValue=l,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function as(){return fa}function fa(a){return a.type.prototype.ngOnChanges&&(a.setInput=Nf),Od}function Od(){const a=Ro(this),l=null==a?void 0:a.current;if(l){const c=a.previous;if(c===Mi)a.previous=l;else for(let d in l)c[d]=l[d];a.current=null,this.ngOnChanges(l)}}function Nf(a,l,c,d){const f=Ro(a)||function pa(a,l){return a[Oi]=l}(a,{previous:Mi,current:null}),m=f.current||(f.current={}),w=f.previous,C=this.declaredInputs[c],T=w[C];m[C]=new ko(T&&T.currentValue,l,w===Mi),a[d]=l}as.ngInherit=!0;const Oi="__ngSimpleChanges__";function Ro(a){return a[Oi]||null}let ma;function pc(a){ma=a}function gn(a){return!!a.listen}const ul={createRenderer:(a,l)=>function ls(){return void 0!==ma?ma:"undefined"!=typeof document?document:void 0}()};function on(a){for(;Array.isArray(a);)a=a[0];return a}function ro(a,l){return on(l[a])}function vi(a,l){return on(l[a.index])}function Dn(a,l){return a.data[l]}function wi(a,l){const c=l[a];return Wi(c)?c:c[0]}function Po(a){return 4==(4&a[2])}function Ts(a){return 128==(128&a[2])}function qr(a,l){return null==l?null:a[l]}function cs(a){a[18]=0}function _a(a,l){a[5]+=l;let c=a,d=a[3];for(;null!==d&&(1===l&&1===c[5]||-1===l&&0===c[5]);)d[5]+=l,c=d,d=d[3]}const wt={lFrame:wa(null),bindingsEnabled:!0};function eu(){return wt.bindingsEnabled}function ke(){return wt.lFrame.lView}function jt(){return wt.lFrame.tView}function No(a){return wt.lFrame.contextLView=a,a[8]}function Sn(){let a=tu();for(;null!==a&&64===a.type;)a=a.parent;return a}function tu(){return wt.lFrame.currentTNode}function Ar(a,l){const c=wt.lFrame;c.currentTNode=a,c.isParent=l}function vc(){return wt.lFrame.isParent}function wc(){wt.lFrame.isParent=!1}function Ni(){const a=wt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function oo(){return wt.lFrame.bindingIndex++}function Wr(a){const l=wt.lFrame,c=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,c}function ru(a,l){const c=wt.lFrame;c.bindingIndex=c.bindingRootIndex=a,va(l)}function va(a){wt.lFrame.currentDirectiveIndex=a}function ou(){return wt.lFrame.currentQueryIndex}function Ld(a){wt.lFrame.currentQueryIndex=a}function Vd(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function au(a,l,c){if(c&vt.SkipSelf){let f=l,m=a;for(;!(f=f.parent,null!==f||c&vt.Host||(f=Vd(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;l=f,a=m}const d=wt.lFrame=Bd();return d.currentTNode=l,d.lView=a,!0}function Lo(a){const l=Bd(),c=a[1];wt.lFrame=l,l.currentTNode=c.firstChild,l.lView=a,l.tView=c,l.contextLView=a,l.bindingIndex=c.bindingStartIndex,l.inI18n=!1}function Bd(){const a=wt.lFrame,l=null===a?null:a.child;return null===l?wa(a):l}function wa(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function Ud(){const a=wt.lFrame;return wt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const lu=Ud;function hr(){const a=Ud();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function fi(){return wt.lFrame.selectedIndex}function Vo(a){wt.lFrame.selectedIndex=a}function qn(){const a=wt.lFrame;return Dn(a.tView,a.selectedIndex)}function fl(a,l){for(let c=l.directiveStart,d=l.directiveEnd;c<d;c++){const m=a.data[c].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:C,ngAfterViewInit:T,ngAfterViewChecked:x,ngOnDestroy:k}=m;w&&(a.contentHooks||(a.contentHooks=[])).push(-c,w),C&&((a.contentHooks||(a.contentHooks=[])).push(c,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(c,C)),T&&(a.viewHooks||(a.viewHooks=[])).push(-c,T),x&&((a.viewHooks||(a.viewHooks=[])).push(c,x),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(c,x)),null!=k&&(a.destroyHooks||(a.destroyHooks=[])).push(c,k)}}function Ss(a,l,c){jd(a,l,3,c)}function Bo(a,l,c,d){(3&a[2])===c&&jd(a,l,c,d)}function ni(a,l){let c=a[2];(3&c)===l&&(c&=2047,c+=1,a[2]=c)}function jd(a,l,c,d){const m=null!=d?d:-1,w=l.length-1;let C=0;for(let T=void 0!==d?65535&a[18]:0;T<w;T++)if("number"==typeof l[T+1]){if(C=l[T],null!=d&&C>=d)break}else l[T]<0&&(a[18]+=65536),(C<m||-1==m)&&(Xg(a,c,l,T),a[18]=(4294901760&a[18])+T+2),T++}function Xg(a,l,c,d){const f=c[d]<0,m=c[d+1],C=a[f?-c[d]:c[d]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class ba{constructor(l,c,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function ds(a,l,c){const d=gn(a);let f=0;for(;f<c.length;){const m=c[f];if("number"==typeof m){if(0!==m)break;f++;const w=c[f++],C=c[f++],T=c[f++];d?a.setAttribute(l,C,T,w):l.setAttributeNS(w,C,T)}else{const w=m,C=c[++f];xs(w)?d&&a.setProperty(l,w,C):d?a.setAttribute(l,w,C):l.setAttribute(w,C),f++}}return f}function ao(a){return 3===a||4===a||6===a}function xs(a){return 64===a.charCodeAt(0)}function Ca(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let c=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?c=f:0===c||Ki(a,c,f,null,-1===c||2===c?l[++d]:null)}}return a}function Ki(a,l,c,d,f){let m=0,w=a.length;if(-1===l)w=-1;else for(;m<a.length;){const C=a[m++];if("number"==typeof C){if(C===l){w=-1;break}if(C>l){w=m-1;break}}}for(;m<a.length;){const C=a[m];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==f&&(a[m+1]=f));if(d===a[m+1])return void(a[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==w&&(a.splice(w,0,l),m=w+1),a.splice(m++,0,c),null!==d&&a.splice(m++,0,d),null!==f&&a.splice(m++,0,f)}function Ho(a){return-1!==a}function jo(a){return 32767&a}function Go(a,l){let c=function dn(a){return a>>16}(a),d=l;for(;c>0;)d=d[15],c--;return d}let Ea=!0;function pl(a){const l=Ea;return Ea=a,l}let Ta=0;function hs(a,l){const c=fs(a,l);if(-1!==c)return c;const d=l[1];d.firstCreatePass&&(a.injectorIndex=l.length,Ft(d.data,a),Ft(l,null),Ft(d.blueprint,null));const f=bi(a,l),m=a.injectorIndex;if(Ho(f)){const w=jo(f),C=Go(f,l),T=C[1].data;for(let x=0;x<8;x++)l[m+x]=C[w+x]|T[w+x]}return l[m+8]=f,m}function Ft(a,l){a.push(0,0,0,0,0,0,0,0,l)}function fs(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function bi(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let c=0,d=null,f=l;for(;null!==f;){const m=f[1],w=m.type;if(d=2===w?m.declTNode:1===w?f[6]:null,null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function gl(a,l,c){!function du(a,l,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Ne)&&(d=c[Ne]),null==d&&(d=c[Ne]=Ta++);const f=255&d;l.data[a+(f>>5)]|=1<<f}(a,l,c)}function Ia(a,l,c){if(c&vt.Optional)return a;Te(l,"NodeInjector")}function ml(a,l,c,d){if(c&vt.Optional&&void 0===d&&(d=null),0==(c&(vt.Self|vt.Host))){const f=a[9],m=Ln(void 0);try{return f?f.get(l,d,c&vt.Optional):Qs(l,d,c&vt.Optional)}finally{Ln(m)}}return Ia(d,l,c)}function Sc(a,l,c,d=vt.Default,f){if(null!==a){const m=function _l(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Ne)?a[Ne]:void 0;return"number"==typeof l?l>=0?255&l:fu:l}(c);if("function"==typeof m){if(!au(l,a,d))return d&vt.Host?Ia(f,c,d):ml(l,c,d,f);try{const w=m(d);if(null!=w||d&vt.Optional)return w;Te(c)}finally{lu()}}else if("number"==typeof m){let w=null,C=fs(a,l),T=-1,x=d&vt.Host?l[16][6]:null;for((-1===C||d&vt.SkipSelf)&&(T=-1===C?bi(a,l):l[C+8],-1!==T&&$d(d,!1)?(w=l[1],C=jo(T),l=Go(T,l)):C=-1);-1!==C;){const k=l[1];if(mu(m,C,k.data)){const V=im(C,l,c,w,d,x);if(V!==lo)return V}T=l[C+8],-1!==T&&$d(d,l[1].data[C+8]===x)&&mu(m,C,l)?(w=k,C=jo(T),l=Go(T,l)):C=-1}}}return ml(l,c,d,f)}const lo={};function fu(){return new uo(Sn(),ke())}function im(a,l,c,d,f,m){const w=l[1],C=w.data[a+8],k=pu(C,w,c,null==d?Id(C)&&Ea:d!=w&&0!=(3&C.type),f&vt.Host&&m===C);return null!==k?gu(l,w,k,C):lo}function pu(a,l,c,d,f){const m=a.providerIndexes,w=l.data,C=1048575&m,T=a.directiveStart,k=m>>20,j=f?C+k:a.directiveEnd;for(let X=d?C:C+k;X<j;X++){const Ce=w[X];if(X<T&&c===Ce||X>=T&&Ce.type===c)return X}if(f){const X=w[T];if(X&&os(X)&&X.type===c)return T}return null}function gu(a,l,c,d){let f=a[c];const m=l.data;if(function uu(a){return a instanceof ba}(f)){const w=f;w.resolving&&function $e(a,l){const c=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${a}${c}`)}(De(m[c]));const C=pl(w.canSeeViewProviders);w.resolving=!0;const T=w.injectImpl?Ln(w.injectImpl):null;au(a,d,vt.Default);try{f=a[c]=w.factory(void 0,m,a,d),l.firstCreatePass&&c>=d.directiveStart&&function sv(a,l,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=l.type.prototype;if(d){const w=fa(l);(c.preOrderHooks||(c.preOrderHooks=[])).push(a,w),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,w)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-a,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(a,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a,m))}(c,m[c],l)}finally{null!==T&&Ln(T),pl(C),w.resolving=!1,lu()}}return f}function mu(a,l,c){return!!(c[l+(a>>5)]&1<<a)}function $d(a,l){return!(a&vt.Self||a&vt.Host&&l)}class uo{constructor(l,c){this._tNode=l,this._lView=c}get(l,c,d){return Sc(this._tNode,this._lView,l,d,c)}}function _u(a){return hi(()=>{const l=a.prototype.constructor,c=l[te]||yl(l),d=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==d;){const m=f[te]||yl(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function yl(a){return ze(a)?()=>{const l=yl(ie(a));return l&&l()}:Ri(a)}function yu(a){return function hu(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const c=a.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const m=c[f];if(ao(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(m===l)return c[f+1];f+=2}}}return null}(Sn(),a)}const Sa="__parameters__";function Da(a,l,c){return hi(()=>{const d=function Dc(a){return function(...c){if(a){const d=a(...c);for(const f in d)this[f]=d[f]}}}(l);function f(...m){if(this instanceof f)return d.apply(this,m),this;const w=new f(...m);return C.annotation=w,C;function C(T,x,k){const V=T.hasOwnProperty(Sa)?T[Sa]:Object.defineProperty(T,Sa,{value:[]})[Sa];for(;V.length<=k;)V.push(null);return(V[k]=V[k]||[]).push(w),T}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class Rn{constructor(l,c){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=nn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rm=new Rn("AnalyzeForEntryComponents");function Ci(a,l){void 0===l&&(l=a);for(let c=0;c<a.length;c++){let d=a[c];Array.isArray(d)?(l===a&&(l=a.slice(0,c)),Ci(d,l)):l!==a&&l.push(d)}return l}function Fi(a,l){a.forEach(c=>Array.isArray(c)?Fi(c,l):l(c))}function Ei(a,l,c){l>=a.length?a.push(c):a.splice(l,0,c)}function $o(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Kr(a,l){const c=[];for(let d=0;d<a;d++)c.push(l);return c}function Li(a,l,c){let d=xa(a,l);return d>=0?a[1|d]=c:(d=~d,function qo(a,l,c,d){let f=a.length;if(f==l)a.push(c,d);else if(1===f)a.push(d,a[0]),a[0]=c;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=c,a[l+1]=d}}(a,d,l,c)),d}function bu(a,l){const c=xa(a,l);if(c>=0)return a[1|c]}function xa(a,l){return function gs(a,l,c){let d=0,f=a.length>>c;for(;f!==d;){const m=d+(f-d>>1),w=a[m<<c];if(l===w)return m<<c;w>l?f=m:d=m+1}return~(f<<c)}(a,l,1)}const ms={},Ma="__NG_DI_FLAG__",Zo="ngTempTokenPath",D=/\n/gm,U="__source",J=_e({provide:String,useValue:_e});let oe;function Oe(a){const l=oe;return oe=a,l}function tt(a,l=vt.Default){if(void 0===oe)throw new Fe(203,"");return null===oe?Qs(a,void 0,l):oe.get(a,l&vt.Optional?null:void 0,l)}function ot(a,l=vt.Default){return(function kn(){return Tr}()||tt)(ie(a),l)}const Lt=ot;function Et(a){const l=[];for(let c=0;c<a.length;c++){const d=ie(a[c]);if(Array.isArray(d)){if(0===d.length)throw new Fe(900,"");let f,m=vt.Default;for(let w=0;w<d.length;w++){const C=d[w],T=Kn(C);"number"==typeof T?-1===T?f=C.token:m|=T:f=C}l.push(ot(f,m))}else l.push(ot(d))}return l}function ii(a,l){return a[Ma]=l,a.prototype[Ma]=l,a}function Kn(a){return a[Ma]}const fr=ii(Da("Inject",a=>({token:a})),-1),kr=ii(Da("Optional"),8),ka=ii(Da("SkipSelf"),4);class pm{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function po(a){return a instanceof pm?a.changingThisBreaksApplicationSecurity:a}const sC=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ku=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var xn=(()=>((xn=xn||{})[xn.NONE=0]="NONE",xn[xn.HTML=1]="HTML",xn[xn.STYLE=2]="STYLE",xn[xn.SCRIPT=3]="SCRIPT",xn[xn.URL=4]="URL",xn[xn.RESOURCE_URL=5]="RESOURCE_URL",xn))();function oh(a){const l=function Qi(){const a=ke();return a&&a[12]}();return l?l.sanitize(xn.URL,a)||"":function Fc(a,l){const c=function Kf(a){return a instanceof pm&&a.getTypeName()||null}(a);if(null!=c&&c!==l){if("ResourceURL"===c&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===l}(a,"URL")?po(a):function nh(a){return(a=String(a)).match(sC)||a.match(ku)?a:"unsafe:"+a}(ge(a))}const Uc="__ngContext__";function Ti(a,l){a[Uc]=l}function Nu(a){const l=function wl(a){return a[Uc]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function hh(a){return a.ngOriginalError}function Cv(a,...l){a.error(...l)}class fh{constructor(){this._console=console}handleError(l){const c=this._findOriginalError(l),d=function Tm(a){return a&&a.ngErrorLogger||Cv}(l);d(this._console,"ERROR",l),c&&d(this._console,"ORIGINAL ERROR",c)}_findOriginalError(l){let c=l&&hh(l);for(;c&&hh(c);)c=hh(c);return c||null}}const An=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Gt))();function v(a){return a instanceof Function?a():a}var O=(()=>((O=O||{})[O.Important=1]="Important",O[O.DashCase=2]="DashCase",O))();function de(a,l){return undefined(a,l)}function mt(a){const l=a[3];return rs(l)?l[3]:l}function rn(a){return ap(a[13])}function Lu(a){return ap(a[4])}function ap(a){for(;null!==a&&!rs(a);)a=a[4];return a}function Oa(a,l,c,d,f){if(null!=d){let m,w=!1;rs(d)?m=d:Wi(d)&&(w=!0,d=d[0]);const C=on(d);0===a&&null!==c?null==f?Qo(l,c,C):Ps(l,c,C,f||null,!0):1===a&&null!==c?Ps(l,c,C,f||null,!0):2===a?function gh(a,l,c){const d=Bu(a,l);d&&function mr(a,l,c,d){gn(a)?a.removeChild(l,c,d):l.removeChild(c)}(a,d,l,c)}(l,C,w):3===a&&l.destroyNode(C),null!=m&&function zS(a,l,c,d,f){const m=c[7];m!==on(c)&&Oa(l,a,d,m,f);for(let C=10;C<c.length;C++){const T=c[C];dp(T[1],T,a,l,d,m)}}(l,a,m,c,f)}}function El(a,l,c){if(gn(a))return a.createElement(l,c);{const d=null!==c?function fc(a){const l=a.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(c):null;return null===d?a.createElement(l):a.createElementNS(d,l)}}function up(a,l){const c=a[9],d=c.indexOf(l),f=l[3];1024&l[2]&&(l[2]&=-1025,_a(f,-1)),c.splice(d,1)}function Vi(a,l){if(a.length<=10)return;const c=10+l,d=a[c];if(d){const f=d[17];null!==f&&f!==a&&up(f,d),l>0&&(a[c-1][4]=d[4]);const m=$o(a,10+l);!function Vu(a,l){dp(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const w=m[19];null!==w&&w.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Ev(a,l){if(!(256&l[2])){const c=l[11];gn(c)&&c.destroyNode&&dp(a,l,c,3,null,null),function go(a){let l=a[13];if(!l)return Tv(a[1],a);for(;l;){let c=null;if(Wi(l))c=l[13];else{const d=l[10];d&&(c=d)}if(!c){for(;l&&!l[4]&&l!==a;)Wi(l)&&Tv(l[1],l),l=l[3];null===l&&(l=a),Wi(l)&&Tv(l[1],l),c=l&&l[4]}l=c}}(l)}}function Tv(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function Iv(a,l){let c;if(null!=a&&null!=(c=a.destroyHooks))for(let d=0;d<c.length;d+=2){const f=l[c[d]];if(!(f instanceof ba)){const m=c[d+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const C=f[m[w]],T=m[w+1];try{T.call(C)}finally{}}else try{m.call(f)}finally{}}}}(a,l),function gr(a,l){const c=a.cleanup,d=l[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const w=c[m+1],C="function"==typeof w?w(l):on(l[w]),T=d[f=c[m+2]],x=c[m+3];"boolean"==typeof x?C.removeEventListener(c[m],T,x):x>=0?d[f=x]():d[f=-x].unsubscribe(),m+=2}else{const w=d[f=c[m+1]];c[m].call(w)}if(null!==d){for(let m=f+1;m<d.length;m++)d[m]();l[7]=null}}(a,l),1===l[1].type&&gn(l[11])&&l[11].destroy();const c=l[17];if(null!==c&&rs(l[3])){c!==l[3]&&up(c,l);const d=l[19];null!==d&&d.detachView(a)}}}function Gc(a,l,c){return function cC(a,l,c){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return c[0];if(2&d.flags){const f=a.data[d.directiveStart].encapsulation;if(f===qt.None||f===qt.Emulated)return null}return vi(d,c)}(a,l.parent,c)}function Ps(a,l,c,d,f){gn(a)?a.insertBefore(l,c,d,f):l.insertBefore(c,d,f)}function Qo(a,l,c){gn(a)?a.appendChild(l,c):l.appendChild(c)}function Tl(a,l,c,d,f){null!==d?Ps(a,l,c,d,f):Qo(a,l,c)}function Bu(a,l){return gn(a)?a.parentNode(l):l.parentNode}function Dv(a,l,c){return xv(a,l,c)}let xv=function dC(a,l,c){return 40&a.type?vi(a,c):null};function Pr(a,l,c,d){const f=Gc(a,d,l),m=l[11],C=Dv(d.parent||l[6],d,l);if(null!=f)if(Array.isArray(c))for(let T=0;T<c.length;T++)Tl(m,f,c[T],C,!1);else Tl(m,f,c,C,!1)}function Om(a,l){if(null!==l){const c=l.type;if(3&c)return vi(l,a);if(4&c)return cp(-1,a[l.index]);if(8&c){const d=l.child;if(null!==d)return Om(a,d);{const f=a[l.index];return rs(f)?cp(-1,f):on(f)}}if(32&c)return de(l,a)()||on(a[l.index]);{const d=Pa(a,l);return null!==d?Array.isArray(d)?d[0]:Om(mt(a[16]),d):Om(a,l.next)}}return null}function Pa(a,l){return null!==l?a[16][6].projection[l.projection]:null}function cp(a,l){const c=10+a+1;if(c<l.length){const d=l[c],f=d[1].firstChild;if(null!==f)return Om(d,f)}return l[7]}function Pm(a,l,c,d,f,m,w){for(;null!=c;){const C=d[c.index],T=c.type;if(w&&0===l&&(C&&Ti(on(C),d),c.flags|=4),64!=(64&c.flags))if(8&T)Pm(a,l,c.child,d,f,m,!1),Oa(l,a,f,C,m);else if(32&T){const x=de(c,d);let k;for(;k=x();)Oa(l,a,f,k,m);Oa(l,a,f,C,m)}else 16&T?hC(a,l,d,c,f,m):Oa(l,a,f,C,m);c=w?c.projectionNext:c.next}}function dp(a,l,c,d,f,m){Pm(c,d,a.firstChild,l,f,m,!1)}function hC(a,l,c,d,f,m){const w=c[16],T=w[6].projection[d.projection];if(Array.isArray(T))for(let x=0;x<T.length;x++)Oa(l,a,f,T[x],m);else Pm(a,l,T,w[3],f,m,!0)}function fC(a,l,c){gn(a)?a.setAttribute(l,"style",c):l.style.cssText=c}function Nm(a,l,c){gn(a)?""===c?a.removeAttribute(l,"class"):a.setAttribute(l,"class",c):l.className=c}function Mv(a,l,c){let d=a.length;for(;;){const f=a.indexOf(l,c);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const m=l.length;if(f+m===d||a.charCodeAt(f+m)<=32)return f}c=f+1}}const pC="ng-template";function qS(a,l,c){let d=0;for(;d<a.length;){let f=a[d++];if(c&&"class"===f){if(f=a[d],-1!==Mv(f.toLowerCase(),l,0))return!0}else if(1===f){for(;d<a.length&&"string"==typeof(f=a[d++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function gC(a){return 4===a.type&&a.value!==pC}function mC(a,l,c){return l===(4!==a.type||c?a.value:pC)}function zt(a,l,c){let d=4;const f=a.attrs||[],m=function WS(a){for(let l=0;l<a.length;l++)if(ao(a[l]))return l;return a.length}(f);let w=!1;for(let C=0;C<l.length;C++){const T=l[C];if("number"!=typeof T){if(!w)if(4&d){if(d=2|1&d,""!==T&&!mC(a,T,c)||""===T&&1===l.length){if(Jo(d))return!1;w=!0}}else{const x=8&d?T:l[++C];if(8&d&&null!==a.attrs){if(!qS(a.attrs,x,c)){if(Jo(d))return!1;w=!0}continue}const V=mh(8&d?"class":T,f,gC(a),c);if(-1===V){if(Jo(d))return!1;w=!0;continue}if(""!==x){let j;j=V>m?"":f[V+1].toLowerCase();const X=8&d?j:null;if(X&&-1!==Mv(X,x,0)||2&d&&x!==j){if(Jo(d))return!1;w=!0}}}}else{if(!w&&!Jo(d)&&!Jo(T))return!1;if(w&&Jo(T))continue;w=!1,d=T|1&d}}return Jo(d)||w}function Jo(a){return 0==(1&a)}function mh(a,l,c,d){if(null===l)return-1;let f=0;if(d||!c){let m=!1;for(;f<l.length;){const w=l[f];if(w===a)return f;if(3===w||6===w)m=!0;else{if(1===w||2===w){let C=l[++f];for(;"string"==typeof C;)C=l[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=m?1:2}return-1}return function ZS(a,l){let c=a.indexOf(4);if(c>-1)for(c++;c<a.length;){const d=a[c];if("number"==typeof d)return-1;if(d===l)return c;c++}return-1}(l,a)}function kv(a,l,c=!1){for(let d=0;d<l.length;d++)if(zt(a,l[d],c))return!0;return!1}function KS(a,l){e:for(let c=0;c<l.length;c++){const d=l[c];if(a.length===d.length){for(let f=0;f<a.length;f++)if(a[f]!==d[f])continue e;return!0}}return!1}function Xo(a,l){return a?":not("+l.trim()+")":l}function _C(a){let l=a[0],c=1,d=2,f="",m=!1;for(;c<a.length;){let w=a[c];if("string"==typeof w)if(2&d){const C=a[++c];f+="["+w+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+w:4&d&&(f+=" "+w);else""!==f&&!Jo(w)&&(l+=Xo(m,f),f=""),d=w,m=m||!Jo(d);c++}return""!==f&&(l+=Xo(m,f)),l}const Vt={};function er(a){ea(jt(),ke(),fi()+a,!1)}function ea(a,l,c,d){if(!d)if(3==(3&l[2])){const m=a.preOrderCheckHooks;null!==m&&Ss(l,m,c)}else{const m=a.preOrderHooks;null!==m&&Bo(l,m,0,c)}Vo(c)}function Fm(a,l){return a<<17|l<<2}function mo(a){return a>>17&32767}function Lm(a){return 2|a}function Il(a){return(131068&a)>>2}function Vm(a,l){return-131069&a|l<<2}function _h(a){return 1|a}function MC(a,l){const c=a.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],m=c[d+1];if(-1!==m){const w=a.data[m];Ld(f),w.contentQueries(2,l[m],m)}}}function gp(a,l,c,d,f,m,w,C,T,x){const k=l.blueprint.slice();return k[0]=f,k[2]=140|d,cs(k),k[3]=k[15]=a,k[8]=c,k[10]=w||a&&a[10],k[11]=C||a&&a[11],k[12]=T||a&&a[12]||null,k[9]=x||a&&a[9]||null,k[6]=m,k[16]=2==l.type?a[16]:k,k}function vh(a,l,c,d,f){let m=a.data[l];if(null===m)m=function wh(a,l,c,d,f){const m=tu(),w=vc(),T=a.data[l]=function LC(a,l,c,d,f,m){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,c,l,d,f);return null===a.firstChild&&(a.firstChild=T),null!==m&&(w?null==m.child&&null!==T.parent&&(m.child=T):null===m.next&&(m.next=T)),T}(a,l,c,d,f),function Cc(){return wt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=d,m.attrs=f;const w=function Fo(){const a=wt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return Ar(m,!0),m}function Fa(a,l,c,d){if(0===c)return-1;const f=l.length;for(let m=0;m<c;m++)l.push(d),a.blueprint.push(d),a.data.push(null);return f}function zc(a,l,c){Lo(l);try{const d=a.viewQuery;null!==d&&Kv(1,d,c);const f=a.template;null!==f&&RC(a,l,f,1,c),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&MC(a,l),a.staticViewQueries&&Kv(2,a.viewQuery,c);const m=a.components;null!==m&&function eD(a,l){for(let c=0;c<l.length;c++)t_(a,l[c])}(l,m)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{l[2]&=-5,hr()}}function $c(a,l,c,d){const f=l[2];if(256!=(256&f)){Lo(l);try{cs(l),function nu(a){return wt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==c&&RC(a,l,c,2,d);const w=3==(3&f);if(w){const x=a.preOrderCheckHooks;null!==x&&Ss(l,x,null)}else{const x=a.preOrderHooks;null!==x&&Bo(l,x,0,null),ni(l,0)}if(function Xm(a){for(let l=rn(a);null!==l;l=Lu(l)){if(!l[2])continue;const c=l[9];for(let d=0;d<c.length;d++){const f=c[d],m=f[3];0==(1024&f[2])&&_a(m,1),f[2]|=1024}}}(l),function uD(a){for(let l=rn(a);null!==l;l=Lu(l))for(let c=10;c<l.length;c++){const d=l[c],f=d[1];Ts(d)&&$c(f,d,f.template,d[8])}}(l),null!==a.contentQueries&&MC(a,l),w){const x=a.contentCheckHooks;null!==x&&Ss(l,x)}else{const x=a.contentHooks;null!==x&&Bo(l,x,1),ni(l,1)}!function Hv(a,l){const c=a.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)Vo(~f);else{const m=f,w=c[++d],C=c[++d];ru(w,m),C(2,l[m])}}}finally{Vo(-1)}}(a,l);const C=a.components;null!==C&&function pp(a,l){for(let c=0;c<l.length;c++)zC(a,l[c])}(l,C);const T=a.viewQuery;if(null!==T&&Kv(2,T,d),w){const x=a.viewCheckHooks;null!==x&&Ss(l,x)}else{const x=a.viewHooks;null!==x&&Bo(l,x,2),ni(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-73,1024&l[2]&&(l[2]&=-1025,_a(l[3],-1))}finally{hr()}}}function kC(a,l,c,d){const f=l[10],w=Po(l);try{!w&&f.begin&&f.begin(),w&&zc(a,l,d),$c(a,l,c,d)}finally{!w&&f.end&&f.end()}}function RC(a,l,c,d,f){const m=fi(),w=2&d;try{Vo(-1),w&&l.length>20&&ea(a,l,20,!1),c(d,f)}finally{Vo(m)}}function Km(a,l,c){if(Yl(l)){const f=l.directiveEnd;for(let m=l.directiveStart;m<f;m++){const w=a.data[m];w.contentQueries&&w.contentQueries(1,c[m],m)}}}function jv(a,l,c){!eu()||(function _p(a,l,c,d){const f=c.directiveStart,m=c.directiveEnd;a.firstCreatePass||hs(c,l),Ti(d,l);const w=c.initialInputs;for(let C=f;C<m;C++){const T=a.data[C],x=os(T);x&&jC(l,c,T);const k=gu(l,a,C,c);Ti(k,l),null!==w&&Jm(0,C-f,k,T,0,w),x&&(wi(c.index,l)[8]=k)}}(a,l,c,vi(c,l)),128==(128&c.flags)&&function $v(a,l,c){const d=c.directiveStart,f=c.directiveEnd,w=c.index,C=function Ec(){return wt.lFrame.currentDirectiveIndex}();try{Vo(w);for(let T=d;T<f;T++){const x=a.data[T],k=l[T];va(T),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&UC(x,k)}}finally{Vo(-1),va(C)}}(a,l,c))}function Gv(a,l,c=vi){const d=l.localNames;if(null!==d){let f=l.index+1;for(let m=0;m<d.length;m+=2){const w=d[m+1],C=-1===w?c(l,a):a[w];a[f++]=C}}}function OC(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=mp(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function mp(a,l,c,d,f,m,w,C,T,x){const k=20+d,V=k+f,j=function Ym(a,l){const c=[];for(let d=0;d<l;d++)c.push(d<a?null:Vt);return c}(k,V),X="function"==typeof x?x():x;return j[1]={type:a,blueprint:j,template:c,queries:null,viewQuery:C,declTNode:l,data:j.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:T,consts:X,incompleteFirstPass:!1}}function zv(a,l,c,d){const f=ZC(l);null===c?f.push(d):(f.push(c),a.firstCreatePass&&KC(a).push(d,f.length-1))}function VC(a,l,c){for(let d in a)if(a.hasOwnProperty(d)){const f=a[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(l,f):c[d]=[l,f]}return c}function qc(a,l,c,d){let f=!1;if(eu()){const m=function HC(a,l,c){const d=a.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const w=d[m];kv(c,w.selectors,!1)&&(f||(f=[]),gl(hs(c,l),a,w.type),os(w)?(qv(a,c),f.unshift(w)):f.push(w))}return f}(a,l,c),w=null===d?null:{"":-1};if(null!==m){f=!0,Qm(c,a.data.length,m.length);for(let k=0;k<m.length;k++){const V=m[k];V.providersResolver&&V.providersResolver(V)}let C=!1,T=!1,x=Fa(a,l,m.length,null);for(let k=0;k<m.length;k++){const V=m[k];c.mergedAttrs=Ca(c.mergedAttrs,V.hostAttrs),Fs(a,c,l,x,V),aD(x,V,w),null!==V.contentQueries&&(c.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(c.flags|=128);const j=V.type.prototype;!C&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(c.index),C=!0),!T&&(j.ngOnChanges||j.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c.index),T=!0),x++}!function tD(a,l){const d=l.directiveEnd,f=a.data,m=l.attrs,w=[];let C=null,T=null;for(let x=l.directiveStart;x<d;x++){const k=f[x],V=k.inputs,j=null===m||gC(l)?null:lD(V,m);w.push(j),C=VC(V,x,C),T=VC(k.outputs,x,T)}null!==C&&(C.hasOwnProperty("class")&&(l.flags|=16),C.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=w,l.inputs=C,l.outputs=T}(a,c)}w&&function oD(a,l,c){if(l){const d=a.localNames=[];for(let f=0;f<l.length;f+=2){const m=c[l[f+1]];if(null==m)throw new Fe(-301,!1);d.push(l[f],m)}}}(c,d,w)}return c.mergedAttrs=Ca(c.mergedAttrs,c.attrs),f}function Ch(a,l,c,d,f,m){const w=m.hostBindings;if(w){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const T=~l.index;(function sD(a){let l=a.length;for(;l>0;){const c=a[--l];if("number"==typeof c&&c<0)return c}return 0})(C)!=T&&C.push(T),C.push(d,f,w)}}function UC(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function qv(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function aD(a,l,c){if(c){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)c[l.exportAs[d]]=a;os(l)&&(c[""]=a)}}function Qm(a,l,c){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+c,a.providerIndexes=l}function Fs(a,l,c,d,f){a.data[d]=f;const m=f.factory||(f.factory=Ri(f.type)),w=new ba(m,os(f),null);a.blueprint[d]=w,c[d]=w,Ch(a,l,0,d,Fa(a,c,f.hostVars,Vt),f)}function jC(a,l,c){const d=vi(l,a),f=OC(c),m=a[10],w=zu(a,gp(a,f,null,c.onPush?64:16,d,l,m,m.createRenderer(d,c),null,null));a[l.index]=w}function ta(a,l,c,d,f,m){const w=vi(a,l);!function Eh(a,l,c,d,f,m,w){if(null==m)gn(a)?a.removeAttribute(l,f,c):l.removeAttribute(f);else{const C=null==w?ge(m):w(m,d||"",f);gn(a)?a.setAttribute(l,f,C,c):c?l.setAttributeNS(c,f,C):l.setAttribute(f,C)}}(l[11],w,m,a.value,c,d,f)}function Jm(a,l,c,d,f,m){const w=m[l];if(null!==w){const C=d.setInput;for(let T=0;T<w.length;){const x=w[T++],k=w[T++],V=w[T++];null!==C?d.setInput(c,V,x,k):c[k]=V}}}function lD(a,l){let c=null,d=0;for(;d<l.length;){const f=l[d];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,a[f],l[d+1])),d+=2}else d+=2;else d+=4}return c}function GC(a,l,c,d){return new Array(a,!0,!1,l,null,0,d,c,null,null)}function zC(a,l){const c=wi(l,a);if(Ts(c)){const d=c[1];80&c[2]?$c(d,c,d.template,c[8]):c[5]>0&&e_(c)}}function e_(a){for(let d=rn(a);null!==d;d=Lu(d))for(let f=10;f<d.length;f++){const m=d[f];if(1024&m[2]){const w=m[1];$c(w,m,w.template,m[8])}else m[5]>0&&e_(m)}const c=a[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=wi(c[d],a);Ts(f)&&f[5]>0&&e_(f)}}function t_(a,l){const c=wi(l,a),d=c[1];(function $C(a,l){for(let c=l.length;c<a.blueprint.length;c++)l.push(a.blueprint[c])})(d,c),zc(d,c,c[8])}function zu(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function n_(a){for(;a;){a[2]|=64;const l=mt(a);if(Dr(a)&&!l)return a;a=l}return null}function qC(a){!function Wv(a){for(let l=0;l<a.components.length;l++){const c=a.components[l],d=Nu(c),f=d[1];kC(f,d,f.template,c)}}(a[8])}function Kv(a,l,c){Ld(0),l(a,c)}const i_=(()=>Promise.resolve(null))();function ZC(a){return a[7]||(a[7]=[])}function KC(a){return a.cleanup||(a.cleanup=[])}function YC(a,l){const c=a[9],d=c?c.get(fh,null):null;d&&d.handleError(l)}function Th(a,l,c,d,f){for(let m=0;m<c.length;){const w=c[m++],C=c[m++],T=l[w],x=a.data[w];null!==x.setInput?x.setInput(T,f,d,C):T[C]=f}}function Dl(a,l,c){const d=ro(l,a);!function Cl(a,l,c){gn(a)?a.setValue(l,c):l.textContent=c}(a[11],d,c)}function r_(a,l,c){let d=c?a.styles:null,f=c?a.classes:null,m=0;if(null!==l)for(let w=0;w<l.length;w++){const C=l[w];"number"==typeof C?m=C:1==m?f=pe(f,C):2==m&&(d=pe(d,C+": "+l[++w]+";"))}c?a.styles=d:a.stylesWithoutHost=d,c?a.classes=f:a.classesWithoutHost=f}const Yv=new Rn("INJECTOR",-1);class QC{get(l,c=ms){if(c===ms){const d=new Error(`NullInjectorError: No provider for ${ae(l)}!`);throw d.name="NullInjectorError",d}return c}}const Qv=new Rn("Set Injector scope."),wp={},fD={};let Jv;function JC(){return void 0===Jv&&(Jv=new QC),Jv}function Xv(a,l=null,c=null,d){const f=XC(a,l,c,d);return f._resolveInjectorDefTypes(),f}function XC(a,l=null,c=null,d){return new pD(a,c,l||JC(),d)}class pD{constructor(l,c,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];c&&Fi(c,C=>this.processProvider(C,l,c)),Fi([l],C=>this.processInjectorType(C,[],m)),this.records.set(Yv,bp(void 0,this));const w=this.records.get(Qv);this.scope=null!=w?w.value:null,this.source=f||("object"==typeof l?null:ae(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,c=ms,d=vt.Default){this.assertNotDestroyed();const f=Oe(this),m=Ln(void 0);try{if(!(d&vt.SkipSelf)){let C=this.records.get(l);if(void 0===C){const T=function wD(a){return"function"==typeof a||"object"==typeof a&&a instanceof Rn}(l)&&Ht(l);C=T&&this.injectableDefInScope(T)?bp(ew(l),wp):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(d&vt.Self?JC():this.parent).get(l,c=d&vt.Optional&&c===ms?null:c)}catch(w){if("NullInjectorError"===w.name){if((w[Zo]=w[Zo]||[]).unshift(ae(l)),f)throw w;return function Ko(a,l,c,d){const f=a[Zo];throw l[U]&&f.unshift(l[U]),a.message=function Rs(a,l,c,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let f=ae(l);if(Array.isArray(l))f=l.map(ae).join(" -> ");else if("object"==typeof l){let m=[];for(let w in l)if(l.hasOwnProperty(w)){let C=l[w];m.push(w+":"+("string"==typeof C?JSON.stringify(C):ae(C)))}f=`{${m.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${a.replace(D,"\n  ")}`}("\n"+a.message,f,c,d),a.ngTokenPath=f,a[Zo]=null,a}(w,l,"R3InjectorError",this.source)}throw w}finally{Ln(m),Oe(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((d,f)=>l.push(ae(f))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(l,c,d){if(!(l=ie(l)))return!1;let f=zi(l);const m=null==f&&l.ngModule||void 0,w=void 0===m?l:m,C=-1!==d.indexOf(w);if(void 0!==m&&(f=zi(m)),null==f)return!1;if(null!=f.imports&&!C){let k;d.push(w);try{Fi(f.imports,V=>{this.processInjectorType(V,c,d)&&(void 0===k&&(k=[]),k.push(V))})}finally{}if(void 0!==k)for(let V=0;V<k.length;V++){const{ngModule:j,providers:X}=k[V];Fi(X,Ce=>this.processProvider(Ce,j,X||H))}}this.injectorDefTypes.add(w);const T=Ri(w)||(()=>new w);this.records.set(w,bp(T,wp));const x=f.providers;if(null!=x&&!C){const k=l;Fi(x,V=>this.processProvider(V,k,x))}return void 0!==m&&void 0!==l.providers}processProvider(l,c,d){let f=Wc(l=ie(l))?l:ie(l&&l.provide);const m=function mD(a,l,c){return nw(a)?bp(void 0,a.useValue):bp(tw(a),wp)}(l);if(Wc(l)||!0!==l.multi)this.records.get(f);else{let w=this.records.get(f);w||(w=bp(void 0,wp,!0),w.factory=()=>Et(w.multi),this.records.set(f,w)),f=l,w.multi.push(l)}this.records.set(f,m)}hydrate(l,c){return c.value===wp&&(c.value=fD,c.value=c.factory()),"object"==typeof c.value&&c.value&&function vD(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(l){if(!l.providedIn)return!1;const c=ie(l.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function ew(a){const l=Ht(a),c=null!==l?l.factory:Ri(a);if(null!==c)return c;if(a instanceof Rn)throw new Fe(204,!1);if(a instanceof Function)return function gD(a){const l=a.length;if(l>0)throw Kr(l,"?"),new Fe(204,!1);const c=function Er(a){const l=a&&(a[ts]||a[ar]);if(l){const c=function Di(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),l}return null}(a);return null!==c?()=>c.factory(a):()=>new a}(a);throw new Fe(204,!1)}function tw(a,l,c){let d;if(Wc(a)){const f=ie(a);return Ri(f)||ew(f)}if(nw(a))d=()=>ie(a.useValue);else if(function tE(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...Et(a.deps||[]));else if(function eE(a){return!(!a||!a.useExisting)}(a))d=()=>ot(ie(a.useExisting));else{const f=ie(a&&(a.useClass||a.provide));if(!function yD(a){return!!a.deps}(a))return Ri(f)||ew(f);d=()=>new f(...Et(a.deps))}return d}function bp(a,l,c=!1){return{factory:a,value:l,multi:c?[]:void 0}}function nw(a){return null!==a&&"object"==typeof a&&J in a}function Wc(a){return"function"==typeof a}let na=(()=>{class a{static create(c,d){var f;if(Array.isArray(c))return Xv({name:""},d,c,"");{const m=null!==(f=c.name)&&void 0!==f?f:"";return Xv({name:m},c.parent,c.providers,m)}}}return a.THROW_IF_NOT_FOUND=ms,a.NULL=new QC,a.\u0275prov=nn({token:a,providedIn:"any",factory:()=>ot(Yv)}),a.__NG_ELEMENT_ID__=-1,a})();function _R(a,l){fl(Nu(a)[1],Sn())}function cw(a){let l=function uw(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),c=!0;const d=[a];for(;l;){let f;if(os(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Fe(903,"");f=l.\u0275dir}if(f){if(c){d.push(f);const w=a;w.inputs=l_(a.inputs),w.declaredInputs=l_(a.declaredInputs),w.outputs=l_(a.outputs);const C=f.hostBindings;C&&MD(a,C);const T=f.viewQuery,x=f.contentQueries;if(T&&xD(a,T),x&&AD(a,x),ce(a.inputs,f.inputs),ce(a.declaredInputs,f.declaredInputs),ce(a.outputs,f.outputs),os(f)&&f.data.animation){const k=a.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let w=0;w<m.length;w++){const C=m[w];C&&C.ngInherit&&C(a),C===cw&&(c=!1)}}l=Object.getPrototypeOf(l)}!function DD(a){let l=0,c=null;for(let d=a.length-1;d>=0;d--){const f=a[d];f.hostVars=l+=f.hostVars,f.hostAttrs=Ca(f.hostAttrs,c=Ca(c,f.hostAttrs))}}(d)}function l_(a){return a===Mi?{}:a===H?[]:a}function xD(a,l){const c=a.viewQuery;a.viewQuery=c?(d,f)=>{l(d,f),c(d,f)}:l}function AD(a,l){const c=a.contentQueries;a.contentQueries=c?(d,f,m)=>{l(d,f,m),c(d,f,m)}:l}function MD(a,l){const c=a.hostBindings;a.hostBindings=c?(d,f)=>{l(d,f),c(d,f)}:l}let u_=null;function $u(){if(!u_){const a=Gt.Symbol;if(a&&a.iterator)u_=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<l.length;++c){const d=l[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(u_=d)}}}return u_}function Ep(a){return!!uE(a)&&(Array.isArray(a)||!(a instanceof Map)&&$u()in a)}function uE(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function La(a,l,c){return a[l]=c}function at(a,l){return a[l]}function _r(a,l,c){return!Object.is(a[l],c)&&(a[l]=c,!0)}function Va(a,l,c,d){const f=_r(a,l,c);return _r(a,l+1,d)||f}function c_(a,l,c,d,f){const m=Va(a,l,c,d);return _r(a,l+2,f)||m}function Un(a,l,c,d,f,m){const w=Va(a,l,c,d);return Va(a,l+2,f,m)||w}function cE(a,l,c,d){const f=ke();return _r(f,oo(),l)&&(jt(),ta(qn(),f,a,l,c,d)),cE}function yr(a,l,c,d,f,m){const C=Va(a,function Mr(){return wt.lFrame.bindingIndex}(),c,f);return Wr(2),C?l+ge(c)+d+ge(f)+m:Vt}function h_(a,l,c,d,f,m,w,C){const T=ke(),x=jt(),k=a+20,V=x.firstCreatePass?function d_(a,l,c,d,f,m,w,C,T){const x=l.consts,k=vh(l,a,4,w||null,qr(x,C));qc(l,c,k,qr(x,T)),fl(l,k);const V=k.tViews=mp(2,k,d,f,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,x);return null!==l.queries&&(l.queries.template(l,k),V.queries=l.queries.embeddedTView(k)),k}(k,x,T,l,c,d,f,m,w):x.data[k];Ar(V,!1);const j=T[11].createComment("");Pr(x,T,j,V),Ti(j,T),zu(T,T[k]=GC(j,T,j,V)),ss(V)&&jv(x,T,V),null!=w&&Gv(T,V,C)}function Nr(a){return function us(a,l){return a[l]}(function Fd(){return wt.lFrame.contextLView}(),20+a)}function Qc(a,l=vt.Default){const c=ke();return null===c?ot(a,l):Sc(Sn(),c,ie(a),l)}function wE(){throw new Error("invalid")}function _w(a,l,c){const d=ke();return _r(d,oo(),l)&&function Qr(a,l,c,d,f,m,w,C){const T=vi(l,c);let k,x=l.inputs;!C&&null!=x&&(k=x[d])?(Th(a,c,k,d,f),Id(l)&&function Gu(a,l){const c=wi(l,a);16&c[2]||(c[2]|=64)}(c,l.index)):3&l.type&&(d=function nD(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),f=null!=w?w(f,l.value||"",d):f,gn(m)?m.setProperty(T,d,f):xs(d)||(T.setProperty?T.setProperty(d,f):T[d]=f))}(jt(),qn(),d,a,l,d[11],c,!1),_w}function Yu(a,l,c,d,f){const w=f?"class":"style";Th(a,c,l.inputs[w],w,d)}function Sh(a,l,c,d){const f=ke(),m=jt(),w=20+a,C=f[11],T=f[w]=El(C,l,function Jg(){return wt.lFrame.currentNamespace}()),x=m.firstCreatePass?function bE(a,l,c,d,f,m,w){const C=l.consts,x=vh(l,a,2,f,qr(C,m));return qc(l,c,x,qr(C,w)),null!==x.attrs&&r_(x,x.attrs,!1),null!==x.mergedAttrs&&r_(x,x.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,x),x}(w,m,f,0,l,c,d):m.data[w];Ar(x,!0);const k=x.mergedAttrs;null!==k&&ds(C,T,k);const V=x.classes;null!==V&&Nm(C,T,V);const j=x.styles;return null!==j&&fC(C,T,j),64!=(64&x.flags)&&Pr(m,f,T,x),0===function hl(){return wt.lFrame.elementDepthCount}()&&Ti(T,f),function _c(){wt.lFrame.elementDepthCount++}(),ss(x)&&(jv(m,f,x),Km(m,x,f)),null!==d&&Gv(f,x),Sh}function Ap(){let a=Sn();vc()?wc():(a=a.parent,Ar(a,!1));const l=a;!function Xl(){wt.lFrame.elementDepthCount--}();const c=jt();return c.firstCreatePass&&(fl(c,a),Yl(a)&&c.queries.elementEnd(a)),null!=l.classesWithoutHost&&function tm(a){return 0!=(16&a.flags)}(l)&&Yu(c,l,ke(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Gd(a){return 0!=(32&a.flags)}(l)&&Yu(c,l,ke(),l.stylesWithoutHost,!1),Ap}function yw(a,l,c,d){return Sh(a,l,c,d),Ap(),yw}function Dh(a,l,c){const d=ke(),f=jt(),m=a+20,w=f.firstCreatePass?function w_(a,l,c,d,f){const m=l.consts,w=qr(m,d),C=vh(l,a,8,"ng-container",w);return null!==w&&r_(C,w,!0),qc(l,c,C,qr(m,f)),null!==l.queries&&l.queries.elementStart(l,C),C}(m,f,d,l,c):f.data[m];Ar(w,!0);const C=d[m]=d[11].createComment("");return Pr(f,d,C,w),Ti(C,d),ss(w)&&(jv(f,d,w),Km(f,w,d)),null!=c&&Gv(d,w),Dh}function xh(){let a=Sn();const l=jt();return vc()?wc():(a=a.parent,Ar(a,!1)),l.firstCreatePass&&(fl(l,a),Yl(a)&&l.queries.elementEnd(a)),xh}function Mp(a,l,c){return Dh(a,l,c),xh(),Mp}function CE(){return ke()}function vw(a){return!!a&&"function"==typeof a.then}function b_(a){return!!a&&"function"==typeof a.subscribe}const ww=b_;function bw(a,l,c,d){const f=ke(),m=jt(),w=Sn();return function Ah(a,l,c,d,f,m,w,C){const T=ss(d),k=a.firstCreatePass&&KC(a),V=l[8],j=ZC(l);let X=!0;if(3&d.type||C){const Ue=vi(d,l),rt=C?C(Ue):Ue,Me=j.length,yt=C?Zt=>C(on(Zt[d.index])):d.index;if(gn(c)){let Zt=null;if(!C&&T&&(Zt=function Vr(a,l,c,d){const f=a.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const w=f[m];if(w===c&&f[m+1]===d){const C=l[7],T=f[m+2];return C.length>T?C[T]:null}"string"==typeof w&&(m+=2)}return null}(a,l,f,d.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=m,Zt.__ngLastListenerFn__=m,X=!1;else{m=Jc(d,l,V,m,!1);const vn=c.listen(rt,f,m);j.push(m,vn),k&&k.push(f,yt,Me,Me+1)}}else m=Jc(d,l,V,m,!0),rt.addEventListener(f,m,w),j.push(m),k&&k.push(f,yt,Me,w)}else m=Jc(d,l,V,m,!1);const Ce=d.outputs;let Le;if(X&&null!==Ce&&(Le=Ce[f])){const Ue=Le.length;if(Ue)for(let rt=0;rt<Ue;rt+=2){const Hs=l[Le[rt]][Le[rt+1]].subscribe(m),Ya=j.length;j.push(m,Hs),k&&k.push(f,d.index,Ya,-(Ya+1))}}}(m,f,f[11],w,a,l,!!c,d),bw}function TE(a,l,c,d){try{return!1!==c(d)}catch(f){return YC(a,f),!1}}function Jc(a,l,c,d,f){return function m(w){if(w===Function)return d;const C=2&a.flags?wi(a.index,l):l;0==(32&l[2])&&n_(C);let T=TE(l,0,d,w),x=m.__ngNextListenerFn__;for(;x;)T=TE(l,0,x,w)&&T,x=x.__ngNextListenerFn__;return f&&!1===T&&(w.preventDefault(),w.returnValue=!1),T}}function IE(a=1){return function Lf(a){return(wt.lFrame.contextLView=function Tc(a,l){for(;a>0;)l=l[15],a--;return l}(a,wt.lFrame.contextLView))[8]}(a)}function qD(a,l){let c=null;const d=function Rv(a){const l=a.attrs;if(null!=l){const c=l.indexOf(5);if(0==(1&c))return l[c+1]}return null}(a);for(let f=0;f<l.length;f++){const m=l[f];if("*"!==m){if(null===d?kv(a,m,!0):KS(d,m))return f}else c=f}return c}function kp(a){const l=ke()[16][6];if(!l.projection){const d=l.projection=Kr(a?a.length:1,null),f=d.slice();let m=l.child;for(;null!==m;){const w=a?qD(m,a):0;null!==w&&(f[w]?f[w].projectionNext=m:d[w]=m,f[w]=m),m=m.next}}}function Rp(a,l=0,c){const d=ke(),f=jt(),m=vh(f,20+a,16,null,c||null);null===m.projection&&(m.projection=l),wc(),64!=(64&m.flags)&&function GS(a,l,c){hC(l[11],0,l,c,Gc(a,c,l),Dv(c.parent||l[6],c,l))}(f,d,m)}function S_(a,l,c,d,f){const m=a[c+1],w=null===l;let C=d?mo(m):Il(m),T=!1;for(;0!==C&&(!1===T||w);){const k=a[C+1];Dw(a[C],l)&&(T=!0,a[C+1]=d?_h(k):Lm(k)),C=d?mo(k):Il(k)}T&&(a[c+1]=d?Lm(m):_h(m))}function Dw(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&xa(a,l)>=0}const Jt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nr(a){return a.substring(Jt.key,Jt.keyEnd)}function DE(a,l){const c=Jt.textEnd;return c===l?-1:(l=Jt.keyEnd=function Mw(a,l,c){for(;l<c&&a.charCodeAt(l)>32;)l++;return l}(a,Jt.key=l,c),Mh(a,l,c))}function Mh(a,l,c){for(;l<c&&a.charCodeAt(l)<=32;)l++;return l}function kh(a,l,c){return bo(a,l,c,!1),kh}function Pp(a,l){return bo(a,l,null,!0),Pp}function kE(a){!function Co(a,l,c,d){const f=jt(),m=Wr(2);f.firstUpdatePass&&Np(f,null,m,d);const w=ke();if(c!==Vt&&_r(w,m,c)){const C=f.data[fi()];if(Ph(C,d)&&!Pw(f,m)){let T=d?C.classesWithoutHost:C.stylesWithoutHost;null!==T&&(c=pe(T,c||"")),Yu(f,C,w,c,d)}else!function OE(a,l,c,d,f,m,w,C){f===Vt&&(f=H);let T=0,x=0,k=0<f.length?f[0]:null,V=0<m.length?m[0]:null;for(;null!==k||null!==V;){const j=T<f.length?f[T+1]:void 0,X=x<m.length?m[x+1]:void 0;let Le,Ce=null;k===V?(T+=2,x+=2,j!==X&&(Ce=V,Le=X)):null===V||null!==k&&k<V?(T+=2,Ce=k):(x+=2,Ce=V,Le=X),null!==Ce&&Oh(a,l,c,d,Ce,Le,w,C),k=T<f.length?f[T]:null,V=x<m.length?m[x]:null}}(f,C,w,w[11],w[m+1],w[m+1]=function RE(a,l,c){if(null==c||""===c)return H;const d=[],f=po(c);if(Array.isArray(f))for(let m=0;m<f.length;m++)a(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&a(d,m,f[m]);else"string"==typeof f&&l(d,f);return d}(a,l,c),d,m)}}(Li,ys,a,!0)}function ys(a,l){for(let c=function xw(a){return function xE(a){Jt.key=0,Jt.keyEnd=0,Jt.value=0,Jt.valueEnd=0,Jt.textEnd=a.length}(a),DE(a,Mh(a,0,Jt.textEnd))}(l);c>=0;c=DE(l,c))Li(a,nr(l),!0)}function bo(a,l,c,d){const f=ke(),m=jt(),w=Wr(2);m.firstUpdatePass&&Np(m,a,w,d),l!==Vt&&_r(f,w,l)&&Oh(m,m.data[fi()],f,f[11],a,f[w+1]=function PE(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ae(po(a)))),a}(l,c),d,w)}function Pw(a,l){return l>=a.expandoStartIndex}function Np(a,l,c,d){const f=a.data;if(null===f[c+1]){const m=f[fi()],w=Pw(a,c);Ph(m,d)&&null===l&&!w&&(l=!1),l=function YD(a,l,c,d){const f=function su(a){const l=wt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}(a);let m=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(c=ra(c=Nw(null,a,l,c,d),l.attrs,d),m=null);else{const w=l.directiveStylingLast;if(-1===w||a[w]!==f)if(c=Nw(f,a,l,c,d),null===m){let T=function QD(a,l,c){const d=c?l.classBindings:l.styleBindings;if(0!==Il(d))return a[mo(d)]}(a,l,d);void 0!==T&&Array.isArray(T)&&(T=Nw(null,a,l,T[1],d),T=ra(T,l.attrs,d),function Rh(a,l,c,d){a[mo(c?l.classBindings:l.styleBindings)]=d}(a,l,d,T))}else m=function JD(a,l,c){let d;const f=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<f;m++)d=ra(d,a[m].hostAttrs,c);return ra(d,l.attrs,c)}(a,l,d)}return void 0!==m&&(d?l.residualClasses=m:l.residualStyles=m),c}(f,m,l,d),function ZD(a,l,c,d,f,m){let w=m?l.classBindings:l.styleBindings,C=mo(w),T=Il(w);a[d]=c;let k,x=!1;if(Array.isArray(c)){const V=c;k=V[1],(null===k||xa(V,k)>0)&&(x=!0)}else k=c;if(f)if(0!==T){const j=mo(a[C+1]);a[d+1]=Fm(j,C),0!==j&&(a[j+1]=Vm(a[j+1],d)),a[C+1]=function YS(a,l){return 131071&a|l<<17}(a[C+1],d)}else a[d+1]=Fm(C,0),0!==C&&(a[C+1]=Vm(a[C+1],d)),C=d;else a[d+1]=Fm(T,0),0===C?C=d:a[T+1]=Vm(a[T+1],d),T=d;x&&(a[d+1]=Lm(a[d+1])),S_(a,k,d,!0),S_(a,k,d,!1),function Sw(a,l,c,d,f){const m=f?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&xa(m,l)>=0&&(c[d+1]=_h(c[d+1]))}(l,k,a,d,m),w=Fm(C,T),m?l.classBindings=w:l.styleBindings=w}(f,m,l,c,w,d)}}function Nw(a,l,c,d,f){let m=null;const w=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<w&&(m=l[C],d=ra(d,m.hostAttrs,f),m!==a);)C++;return null!==a&&(c.directiveStylingLast=C),d}function ra(a,l,c){const d=c?1:2;let f=-1;if(null!==l)for(let m=0;m<l.length;m++){const w=l[m];"number"==typeof w?f=w:f===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Li(a,w,!!c||l[++m]))}return void 0===a?null:a}function Oh(a,l,c,d,f,m,w,C){if(!(3&l.type))return;const T=a.data,x=T[C+1];ir(function Pv(a){return 1==(1&a)}(x)?Fw(T,l,c,f,Il(x),w):void 0)||(ir(m)||function Ov(a){return 2==(2&a)}(x)&&(m=Fw(T,null,c,f,C,w)),function $S(a,l,c,d,f){const m=gn(a);if(l)f?m?a.addClass(c,d):c.classList.add(d):m?a.removeClass(c,d):c.classList.remove(d);else{let w=-1===d.indexOf("-")?void 0:O.DashCase;if(null==f)m?a.removeStyle(c,d,w):c.style.removeProperty(d);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),w|=O.Important),m?a.setStyle(c,d,f,w):c.style.setProperty(d,f,C?"important":"")}}}(d,w,ro(fi(),c),f,m))}function Fw(a,l,c,d,f,m){const w=null===l;let C;for(;f>0;){const T=a[f],x=Array.isArray(T),k=x?T[1]:T,V=null===k;let j=c[f+1];j===Vt&&(j=V?H:void 0);let X=V?bu(j,d):k===d?j:void 0;if(x&&!ir(X)&&(X=bu(T,d)),ir(X)&&(C=X,w))return C;const Ce=a[f+1];f=w?mo(Ce):Il(Ce)}if(null!==l){let T=m?l.residualClasses:l.residualStyles;null!=T&&(C=bu(T,d))}return C}function ir(a){return void 0!==a}function Ph(a,l){return 0!=(a.flags&(l?16:32))}function Lp(a,l=""){const c=ke(),d=jt(),f=a+20,m=d.firstCreatePass?vh(d,f,1,l,null):d.data[f],w=c[f]=function pr(a,l){return gn(a)?a.createText(l):a.createTextNode(l)}(c[11],l);Pr(d,c,w,m),Ar(m,!1)}function x_(a){return Nh("",a,""),x_}function Nh(a,l,c){const d=ke(),f=function Ba(a,l,c,d){return _r(a,oo(),c)?l+ge(c)+d:Vt}(d,a,l,c);return f!==Vt&&Dl(d,fi(),f),Nh}function A_(a,l,c,d,f){const m=ke(),w=yr(m,a,l,c,d,f);return w!==Vt&&Dl(m,fi(),w),A_}const Ha=void 0;var ix=["en",[["a","p"],["AM","PM"],Ha],[["AM","PM"],Ha,Ha],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ha,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ha,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ha,"{1} 'at' {0}",Ha],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function nx(a){const c=Math.floor(Math.abs(a)),d=a.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let ja={};function zw(a){const l=function zp(a){return a.toLowerCase().replace(/_/g,"-")}(a);let c=jE(l);if(c)return c;const d=l.split("-")[0];if(c=jE(d),c)return c;if("en"===d)return ix;throw new Error(`Missing locale data for the locale "${a}".`)}function HE(a){return zw(a)[Tt.PluralCase]}function jE(a){return a in ja||(ja[a]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[a]),ja[a]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const $p="en-US";let $E=$p;function sb(a,l,c,d,f){if(a=ie(a),Array.isArray(a))for(let m=0;m<a.length;m++)sb(a[m],l,c,d,f);else{const m=jt(),w=ke();let C=Wc(a)?a:ie(a.provide),T=tw(a);const x=Sn(),k=1048575&x.providerIndexes,V=x.directiveStart,j=x.providerIndexes>>20;if(Wc(a)||!a.multi){const X=new ba(T,f,Qc),Ce=Pe(C,l,f?k:k+j,V);-1===Ce?(gl(hs(x,w),m,C),We(m,a,l.length),l.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(X),w.push(X)):(c[Ce]=X,w[Ce]=X)}else{const X=Pe(C,l,k+j,V),Ce=Pe(C,l,k,k+j),Le=X>=0&&c[X],Ue=Ce>=0&&c[Ce];if(f&&!Ue||!f&&!Le){gl(hs(x,w),m,C);const rt=function vx(a,l,c,d,f){const m=new ba(a,c,Qc);return m.multi=[],m.index=l,m.componentProviders=0,he(m,f,d&&!c),m}(f?cT:rr,c.length,f,d,T);!f&&Ue&&(c[Ce].providerFactory=rt),We(m,a,l.length,0),l.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(rt),w.push(rt)}else We(m,a,X>-1?X:Ce,he(c[f?Ce:X],T,!f&&d));!f&&d&&Ue&&c[Ce].componentProviders++}}}function We(a,l,c,d){const f=Wc(l),m=function _D(a){return!!a.useClass}(l);if(f||m){const T=(m?ie(l.useClass):l).prototype.ngOnDestroy;if(T){const x=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const k=x.indexOf(c);-1===k?x.push(c,[d,T]):x[k+1].push(d,T)}else x.push(c,T)}}}function he(a,l,c){return c&&a.componentProviders++,a.multi.push(l)-1}function Pe(a,l,c,d){for(let f=c;f<d;f++)if(l[f]===a)return f;return-1}function rr(a,l,c,d){return ob(this.multi,[])}function cT(a,l,c,d){const f=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,C=gu(c,c[1],this.providerFactory.index,d);m=C.slice(0,w),ob(f,m);for(let T=w;T<C.length;T++)m.push(C[T])}else m=[],ob(f,m);return m}function ob(a,l){for(let c=0;c<a.length;c++)l.push((0,a[c])());return l}function dT(a,l=[]){return c=>{c.providersResolver=(d,f)=>function kt(a,l,c){const d=jt();if(d.firstCreatePass){const f=os(a);sb(c,d.data,d.blueprint,f,!0),sb(l,d.data,d.blueprint,f,!1)}}(d,f?f(a):a,l)}}class hT{}class Vs{resolveComponentFactory(l){throw function fT(a){const l=Error(`No component factory found for ${ae(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Z_=(()=>{class a{}return a.NULL=new Vs,a})();function gT(){return Rt(Sn(),ke())}function Rt(a,l){return new Ga(vi(a,l))}let Ga=(()=>{class a{constructor(c){this.nativeElement=c}}return a.__NG_ELEMENT_ID__=gT,a})();function mT(a){return a instanceof Ga?a.nativeElement:a}class St{}let _T=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function yT(){const a=ke(),c=wi(Sn().index,a);return function td(a){return a[11]}(Wi(c)?c:a)}(),a})(),Qp=(()=>{class a{}return a.\u0275prov=nn({token:a,providedIn:"root",factory:()=>null}),a})();class en{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const vT=new en("13.3.10"),pi={};function Ol(a,l,c,d,f=!1){for(;null!==c;){const m=l[c.index];if(null!==m&&d.push(on(m)),rs(m))for(let C=10;C<m.length;C++){const T=m[C],x=T[1].firstChild;null!==x&&Ol(T[1],T,x,d)}const w=c.type;if(8&w)Ol(a,l,c.child,d);else if(32&w){const C=de(c,l);let T;for(;T=C();)d.push(T)}else if(16&w){const C=Pa(l,c);if(Array.isArray(C))d.push(...C);else{const T=mt(l[16]);Ol(T[1],T,C,d,!0)}}c=f?c.projectionNext:c.next}return d}class Jp{constructor(l,c){this._lView=l,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,c=l[1];return Ol(c,l,c.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(rs(l)){const c=l[8],d=c?c.indexOf(this):-1;d>-1&&(Vi(l,d),$o(c,d))}this._attachedToViewContainer=!1}Ev(this._lView[1],this._lView)}onDestroy(l){zv(this._lView[1],this._lView,null,l)}markForCheck(){n_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Zv(a,l,c){const d=l[10];d.begin&&d.begin();try{$c(a,l,a.template,c)}catch(f){throw YC(l,f),f}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lp(a,l){dp(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=l}}class Bi extends Jp{constructor(l){super(l),this._view=l}detectChanges(){qC(this._view)}checkNoChanges(){}get context(){return null}}class wT extends Z_{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const c=ei(l);return new Xp(c,this.ngModule)}}function Pl(a){const l=[];for(let c in a)a.hasOwnProperty(c)&&l.push({propName:a[c],templateName:c});return l}class Xp extends hT{constructor(l,c){super(),this.componentDef=l,this.ngModule=c,this.componentType=l.type,this.selector=function yC(a){return a.map(_C).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return Pl(this.componentDef.inputs)}get outputs(){return Pl(this.componentDef.outputs)}create(l,c,d,f){const m=(f=f||this.ngModule)?function nd(a,l){return{get:(c,d,f)=>{const m=a.get(c,pi,f);return m!==pi||d===pi?m:l.get(c,d,f)}}}(l,f.injector):l,w=m.get(St,ul),C=m.get(Qp,null),T=w.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",k=d?function FC(a,l,c){if(gn(a))return a.selectRootElement(l,c===qt.ShadowDom);let d="string"==typeof l?a.querySelector(l):l;return d.textContent="",d}(T,d,this.componentDef.encapsulation):El(w.createRenderer(null,this.componentDef),x,function li(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(x)),V=this.componentDef.onPush?576:528,j=function a_(a,l){return{components:[],scheduler:a||An,clean:i_,playerHandler:l||null,flags:0}}(),X=mp(0,null,null,1,0,null,null,null,null,null),Ce=gp(null,X,j,V,null,null,w,T,C,m);let Le,Ue;Lo(Ce);try{const rt=function aw(a,l,c,d,f,m){const w=c[1];c[20]=a;const T=vh(w,20,2,"#host",null),x=T.mergedAttrs=l.hostAttrs;null!==x&&(r_(T,x,!0),null!==a&&(ds(f,a,x),null!==T.classes&&Nm(f,a,T.classes),null!==T.styles&&fC(f,a,T.styles)));const k=d.createRenderer(a,l),V=gp(c,OC(l),null,l.onPush?64:16,c[20],T,d,k,m||null,null);return w.firstCreatePass&&(gl(hs(T,c),w,l.type),qv(w,T),Qm(T,c.length,1)),zu(c,V),c[20]=V}(k,this.componentDef,Ce,w,T);if(k)if(d)ds(T,k,["ng-version",vT.full]);else{const{attrs:Me,classes:yt}=function vC(a){const l=[],c=[];let d=1,f=2;for(;d<a.length;){let m=a[d];if("string"==typeof m)2===f?""!==m&&l.push(m,a[++d]):8===f&&c.push(m);else{if(!Jo(f))break;f=m}d++}return{attrs:l,classes:c}}(this.componentDef.selectors[0]);Me&&ds(T,k,Me),yt&&yt.length>0&&Nm(T,k,yt.join(" "))}if(Ue=Dn(X,20),void 0!==c){const Me=Ue.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const Zt=c[yt];Me.push(null!=Zt?Array.from(Zt):null)}}Le=function lw(a,l,c,d,f){const m=c[1],w=function rD(a,l,c){const d=Sn();a.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Fs(a,d,l,Fa(a,l,1,null),c));const f=gu(l,a,d.directiveStart,d);Ti(f,l);const m=vi(d,l);return m&&Ti(m,l),f}(m,c,l);if(d.components.push(w),a[8]=w,f&&f.forEach(T=>T(w,l)),l.contentQueries){const T=Sn();l.contentQueries(1,w,T.directiveStart)}const C=Sn();return!m.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(Vo(C.index),Ch(c[1],C,0,C.directiveStart,C.directiveEnd,l),UC(l,w)),w}(rt,this.componentDef,Ce,j,[_R]),zc(X,Ce,null)}finally{hr()}return new bx(this.componentType,Le,Rt(Ue,Ce),Ce,Ue)}}class bx extends class wx{}{constructor(l,c,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new Bi(f),this.componentType=l}get injector(){return new uo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class za{}class Zh{}const id=new Map;class Ll extends za{constructor(l,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wT(this);const d=ti(l);this._bootstrapComponents=v(d.bootstrap),this._r3Injector=XC(l,c,[{provide:za,useValue:this},{provide:Z_,useValue:this.componentFactoryResolver}],ae(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,c=na.THROW_IF_NOT_FOUND,d=vt.Default){return l===na||l===za||l===Yv?this:this._r3Injector.get(l,c,d)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class J_ extends Zh{constructor(l){super(),this.moduleType=l,null!==ti(l)&&function Y_(a){const l=new Set;!function c(d){const f=ti(d,!0),m=f.id;null!==m&&(function Fl(a,l,c){if(l&&l!==c)throw new Error(`Duplicate module registered for ${a} - ${ae(l)} vs ${ae(l.name)}`)}(m,id.get(m),d),id.set(m,d));const w=v(f.imports);for(const C of w)l.has(C)||(l.add(C),c(C))}(a)}(l)}create(l){return new Ll(this.moduleType,l)}}function rd(a,l,c){const d=Ni()+a,f=ke();return f[d]===Vt?La(f,d,c?l.call(c):l()):at(f,d)}function X_(a,l,c,d){return function CT(a,l,c,d,f,m){const w=l+c;return _r(a,w,f)?La(a,w+1,m?d.call(m,f):d(f)):ng(a,w+1)}(ke(),Ni(),a,l,c,d)}function nc(a,l,c,d,f){return function cb(a,l,c,d,f,m,w){const C=l+c;return Va(a,C,f,m)?La(a,C+2,w?d.call(w,f,m):d(f,m)):ng(a,C+2)}(ke(),Ni(),a,l,c,d,f)}function ey(a,l,c,d,f,m){return function db(a,l,c,d,f,m,w,C){const T=l+c;return c_(a,T,f,m,w)?La(a,T+3,C?d.call(C,f,m,w):d(f,m,w)):ng(a,T+3)}(ke(),Ni(),a,l,c,d,f,m)}function Yh(a,l,c,d,f,m,w){return function wr(a,l,c,d,f,m,w,C,T){const x=l+c;return Un(a,x,f,m,w,C)?La(a,x+4,T?d.call(T,f,m,w,C):d(f,m,w,C)):ng(a,x+4)}(ke(),Ni(),a,l,c,d,f,m,w)}function ab(a,l,c,d,f,m,w,C){const T=Ni()+a,x=ke(),k=Un(x,T,c,d,f,m);return _r(x,T+4,w)||k?La(x,T+5,C?l.call(C,c,d,f,m,w):l(c,d,f,m,w)):at(x,T+5)}function lb(a,l,c,d,f,m,w,C,T){const x=Ni()+a,k=ke(),V=Un(k,x,c,d,f,m);return Va(k,x+4,w,C)||V?La(k,x+6,T?l.call(T,c,d,f,m,w,C):l(c,d,f,m,w,C)):at(k,x+6)}function eg(a,l,c,d,f,m,w,C,T,x){const k=Ni()+a,V=ke();let j=Un(V,k,c,d,f,m);return c_(V,k+4,w,C,T)||j?La(V,k+7,x?l.call(x,c,d,f,m,w,C,T):l(c,d,f,m,w,C,T)):at(V,k+7)}function ub(a,l,c,d){return function hb(a,l,c,d,f,m){let w=l+c,C=!1;for(let T=0;T<f.length;T++)_r(a,w++,f[T])&&(C=!0);return C?La(a,w,d.apply(m,f)):ng(a,w)}(ke(),Ni(),a,l,c,d)}function ng(a,l){const c=a[l];return c===Vt?void 0:c}function iy(a){return l=>{setTimeout(a,void 0,l)}}const _n=class oa extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,c,d){var f,m,w;let C=l,T=c||(()=>null),x=d;if(l&&"object"==typeof l){const V=l;C=null===(f=V.next)||void 0===f?void 0:f.bind(V),T=null===(m=V.error)||void 0===m?void 0:m.bind(V),x=null===(w=V.complete)||void 0===w?void 0:w.bind(V)}this.__isAsync&&(T=iy(T),C&&(C=iy(C)),x&&(x=iy(x)));const k=super.subscribe({next:C,error:T,complete:x});return l instanceof ee.w0&&l.add(k),k}};function ry(){return this._results[$u()]()}class Ui{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=$u(),d=Ui.prototype;d[c]||(d[c]=ry)}get changes(){return this._changes||(this._changes=new _n)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,c){return this._results.reduce(l,c)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,c){const d=this;d.dirty=!1;const f=Ci(l);(this._changesDetected=!function Ac(a,l,c){if(a.length!==l.length)return!1;for(let d=0;d<a.length;d++){let f=a[d],m=l[d];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let yn=(()=>{class a{}return a.__NG_ELEMENT_ID__=Cx,a})();const TT=yn,Qh=class extends TT{constructor(l,c,d){super(),this._declarationLView=l,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(l){const c=this._declarationTContainer.tViews,d=gp(this._declarationLView,c,l,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(c)),zc(c,d,l),new Jp(d)}};function Cx(){return sg(Sn(),ke())}function sg(a,l){return 4&a.type?new Qh(l,a,Rt(a,l)):null}let $a=(()=>{class a{}return a.__NG_ELEMENT_ID__=Ex,a})();function Ex(){return pb(Sn(),ke())}const og=$a,ag=class extends og{constructor(l,c,d){super(),this._lContainer=l,this._hostTNode=c,this._hostLView=d}get element(){return Rt(this._hostTNode,this._hostLView)}get injector(){return new uo(this._hostTNode,this._hostLView)}get parentInjector(){const l=bi(this._hostTNode,this._hostLView);if(Ho(l)){const c=Go(l,this._hostLView),d=jo(l);return new uo(c[1].data[d+8],c)}return new uo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const c=lg(this._lContainer);return null!==c&&c[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,c,d){const f=l.createEmbeddedView(c||{});return this.insert(f,d),f}createComponent(l,c,d,f,m){const w=l&&!function Zr(a){return"function"==typeof a}(l);let C;if(w)C=c;else{const V=c||{};C=V.index,d=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const T=w?l:new Xp(ei(l)),x=d||this.parentInjector;if(!m&&null==T.ngModule){const j=(w?x:this.parentInjector).get(za,null);j&&(m=j)}const k=T.create(x,f,void 0,m);return this.insert(k.hostView,C),k}insert(l,c){const d=l._lView,f=d[1];if(function dl(a){return rs(a[3])}(d)){const k=this.indexOf(l);if(-1!==k)this.detach(k);else{const V=d[3],j=new ag(V,V[6],V[3]);j.detach(j.indexOf(l))}}const m=this._adjustIndex(c),w=this._lContainer;!function Rm(a,l,c,d){const f=10+d,m=c.length;d>0&&(c[f-1][4]=l),d<m-10?(l[4]=c[f],Ei(c,10+d,l)):(c.push(l),l[4]=null),l[3]=c;const w=l[17];null!==w&&c!==w&&function ph(a,l){const c=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===c?a[9]=[l]:c.push(l)}(w,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=128}(f,d,w,m);const C=cp(m,w),T=d[11],x=Bu(T,w[7]);return null!==x&&function km(a,l,c,d,f,m){d[0]=f,d[6]=l,dp(a,d,c,1,f,m)}(f,w[6],T,d,x,C),l.attachToViewContainerRef(),Ei(sy(w),m,l),l}move(l,c){return this.insert(l,c)}indexOf(l){const c=lg(this._lContainer);return null!==c?c.indexOf(l):-1}remove(l){const c=this._adjustIndex(l,-1),d=Vi(this._lContainer,c);d&&($o(sy(this._lContainer),c),Ev(d[1],d))}detach(l){const c=this._adjustIndex(l,-1),d=Vi(this._lContainer,c);return d&&null!=$o(sy(this._lContainer),c)?new Jp(d):null}_adjustIndex(l,c=0){return null==l?this.length+c:l}};function lg(a){return a[8]}function sy(a){return a[8]||(a[8]=[])}function pb(a,l){let c;const d=l[a.index];if(rs(d))c=d;else{let f;if(8&a.type)f=on(d);else{const m=l[11];f=m.createComment("");const w=vi(a,l);Ps(m,Bu(m,w),f,function Sv(a,l){return gn(a)?a.nextSibling(l):l.nextSibling}(m,w),!1)}l[a.index]=c=GC(d,l,f,a),zu(l,c)}return new ag(c,a,l)}class gb{constructor(l){this.queryList=l,this.matches=null}clone(){return new gb(this.queryList)}setDirty(){this.queryList.setDirty()}}class oy{constructor(l=[]){this.queries=l}createEmbeddedView(l){const c=l.queries;if(null!==c){const d=null!==l.contentQueries?l.contentQueries[0]:c.length,f=[];for(let m=0;m<d;m++){const w=c.getByIndex(m);f.push(this.queries[w.indexInDeclarationView].clone())}return new oy(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let c=0;c<this.queries.length;c++)null!==Bs(l,c).matches&&this.queries[c].setDirty()}}class IT{constructor(l,c,d=null){this.predicate=l,this.flags=c,this.read=d}}class mb{constructor(l=[]){this.queries=l}elementStart(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,c)}elementEnd(l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(l)}embeddedTView(l){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,m=this.getByIndex(d).embeddedTView(l,f);m&&(m.indexInDeclarationView=d,null!==c?c.push(m):c=[m])}return null!==c?new mb(c):null}template(l,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,c)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class _b{constructor(l,c=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(l,c){this.isApplyingToNode(c)&&this.matchTNode(l,c)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,c){this.elementStart(l,c)}embeddedTView(l,c){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,c),new _b(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(l,c,Ix(c,m)),this.matchTNodeWithReadOption(l,c,pu(c,l,m,!1,!1))}else d===yn?4&c.type&&this.matchTNodeWithReadOption(l,c,-1):this.matchTNodeWithReadOption(l,c,pu(c,l,d,!1,!1))}matchTNodeWithReadOption(l,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Ga||f===$a||f===yn&&4&c.type)this.addMatch(c.index,-2);else{const m=pu(c,l,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,d)}}addMatch(l,c){null===this.matches?this.matches=[l,c]:this.matches.push(l,c)}}function Ix(a,l){const c=a.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===l)return c[d+1];return null}function Jh(a,l,c,d){return-1===c?function ic(a,l){return 11&a.type?Rt(a,l):4&a.type?sg(a,l):null}(l,a):-2===c?function Sx(a,l,c){return c===Ga?Rt(l,a):c===yn?sg(l,a):c===$a?pb(l,a):void 0}(a,l,d):gu(a,a[1],c,l)}function yb(a,l,c,d){const f=l[19].queries[d];if(null===f.matches){const m=a.data,w=c.matches,C=[];for(let T=0;T<w.length;T+=2){const x=w[T];C.push(x<0?null:Jh(l,m[x],w[T+1],c.metadata.read))}f.matches=C}return f.matches}function ay(a,l,c,d){const f=a.queries.getByIndex(c),m=f.matches;if(null!==m){const w=yb(a,l,f,c);for(let C=0;C<m.length;C+=2){const T=m[C];if(T>0)d.push(w[C/2]);else{const x=m[C+1],k=l[-T];for(let V=10;V<k.length;V++){const j=k[V];j[17]===j[3]&&ay(j[1],j,x,d)}if(null!==k[9]){const V=k[9];for(let j=0;j<V.length;j++){const X=V[j];ay(X[1],X,x,d)}}}}}return d}function qa(a){const l=ke(),c=jt(),d=ou();Ld(d+1);const f=Bs(c,d);if(a.dirty&&Po(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const m=f.crossesNgTemplate?ay(c,l,d,[]):yb(c,l,f,d);a.reset(m,mT),a.notifyOnChanges()}return!0}return!1}function vb(a,l,c){const d=jt();d.firstCreatePass&&(uy(d,new IT(a,l,c),-1),2==(2&l)&&(d.staticViewQueries=!0)),ly(d,ke(),l)}function od(a,l,c,d){const f=jt();if(f.firstCreatePass){const m=Sn();uy(f,new IT(l,c,d),m.index),function Xh(a,l){const c=a.contentQueries||(a.contentQueries=[]);l!==(c.length?c[c.length-1]:-1)&&c.push(a.queries.length-1,l)}(f,a),2==(2&c)&&(f.staticContentQueries=!0)}ly(f,ke(),c)}function ST(){return function wb(a,l){return a[19].queries[l].queryList}(ke(),ou())}function ly(a,l,c){const d=new Ui(4==(4&c));zv(a,l,d,d.destroy),null===l[19]&&(l[19]=new oy),l[19].queries.push(new gb(d))}function uy(a,l,c){null===a.queries&&(a.queries=new mb),a.queries.track(new _b(l,c))}function Bs(a,l){return a.queries.getByIndex(l)}function bb(a,l){return sg(a,l)}function _y(...a){}const af=new Rn("Application Initializer");let cd=(()=>{class a{constructor(c){this.appInits=c,this.resolve=_y,this.reject=_y,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(vw(m))c.push(m);else if(ww(m)){const w=new Promise((C,T)=>{m.subscribe({complete:C,error:T})});c.push(w)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return a.\u0275fac=function(c){return new(c||a)(ot(af,8))},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const cg=new Rn("AppId",{providedIn:"root",factory:function Pb(){return`${yy()}${yy()}${yy()}`}});function yy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NT=new Rn("Platform Initializer"),FT=new Rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Nb=new Rn("appBootstrapListener");let Px=(()=>{class a{log(c){console.log(c)}warn(c){console.warn(c)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const dd=new Rn("LocaleId",{providedIn:"root",factory:()=>Lt(dd,vt.Optional|vt.SkipSelf)||function Nx(){return"undefined"!=typeof $localize&&$localize.locale||$p}()}),LT=new Rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class BT{constructor(l,c){this.ngModuleFactory=l,this.componentFactories=c}}let dg=(()=>{class a{compileModuleSync(c){return new J_(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=v(ti(c).declarations).reduce((w,C)=>{const T=ei(C);return T&&w.push(new Xp(T)),w},[]);return new BT(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const HT=(()=>Promise.resolve(0))();function hd(a){"undefined"==typeof Zone?HT.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Eo{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function jT(){let a=Gt.requestAnimationFrame,l=Gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function hg(a){const l=()=>{!function Fx(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Gt,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,fg(a),a.isCheckStableRunning=!0,Fb(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),fg(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,m,w,C)=>{try{return zT(a),c.invokeTask(f,m,w,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),Lb(a)}},onInvoke:(c,d,f,m,w,C,T)=>{try{return zT(a),c.invoke(f,m,w,C,T)}finally{a.shouldCoalesceRunChangeDetection&&l(),Lb(a)}},onHasTask:(c,d,f,m)=>{c.hasTask(f,m),d===f&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,fg(a),Fb(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,d,f,m)=>(c.handleError(f,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Eo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Eo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,c,d){return this._inner.run(l,c,d)}runTask(l,c,d,f){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+f,l,GT,_y,_y);try{return m.runTask(w,c,d)}finally{m.cancelTask(w)}}runGuarded(l,c,d){return this._inner.runGuarded(l,c,d)}runOutsideAngular(l){return this._outer.run(l)}}const GT={};function Fb(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function fg(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function zT(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Lb(a){a._nesting--,Fb(a)}class $T{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(l,c,d){return l.apply(c,d)}runGuarded(l,c,d){return l.apply(c,d)}runOutsideAngular(l){return l()}runTask(l,c,d,f){return l.apply(c,d)}}let Vb=(()=>{class a{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Eo.assertNotInAngularZone(),hd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hd(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,f){return[]}}return a.\u0275fac=function(c){return new(c||a)(ot(Eo))},a.\u0275prov=nn({token:a,factory:a.\u0275fac}),a})(),Lx=(()=>{class a{constructor(){this._applications=new Map,Bb.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Bb.findTestabilityInTree(this,c,d)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();class qT{addToWindow(l){}findTestabilityInTree(l,c,d){return null}}function Vx(a){Bb=a}let Bb=new qT,To=null;const fd=new Rn("AllowMultipleToken"),WT=new Rn("PlatformOnDestroy");class Jr{constructor(l,c){this.name=l,this.token=c}}function Ub(a,l,c=[]){const d=`Platform: ${l}`,f=new Rn(d);return(m=[])=>{let w=vy();if(!w||w.injector.get(fd,!1)){const C=[...c,...m,{provide:f,useValue:!0}];a?a(C):function Ux(a){if(To&&!To.get(fd,!1))throw new Fe(400,"");To=a;const l=a.get(YT),c=a.get(NT,null);c&&c.forEach(d=>d())}(function KT(a=[],l){return na.create({name:l,providers:[{provide:Qv,useValue:"platform"},{provide:WT,useValue:()=>To=null},...a]})}(C,d))}return function Ka(a){const l=vy();if(!l)throw new Fe(401,"");return l}()}}function vy(){var a;return null!==(a=null==To?void 0:To.get(YT))&&void 0!==a?a:null}let YT=(()=>{class a{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const C=function Hx(a,l){let c;return c="noop"===a?new $T:("zone.js"===a?void 0:a)||new Eo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),T=[{provide:Eo,useValue:C}];return C.run(()=>{const x=na.create({providers:T,parent:this.injector,name:c.moduleType.name}),k=c.create(x),V=k.injector.get(fh,null);if(!V)throw new Fe(402,"");return C.runOutsideAngular(()=>{const j=C.onError.subscribe({next:X=>{V.handleError(X)}});k.onDestroy(()=>{Gb(this._modules,k),j.unsubscribe()})}),function jx(a,l,c){try{const d=c();return vw(d)?d.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>a.handleError(d)),d}}(V,C,()=>{const j=k.injector.get(cd);return j.runInitializers(),j.donePromise.then(()=>(function qE(a){Ut(a,"Expected localeId to be defined"),"string"==typeof a&&($E=a.toLowerCase().replace(/_/g,"-"))}(k.injector.get(dd,$p)||$p),this._moduleDoBootstrap(k),k))})})}bootstrapModule(c,d=[]){const f=QT({},d);return function Bx(a,l,c){const d=new J_(c);return Promise.resolve(d)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(jb);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Fe(403,"");c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(WT,null);null==c||c(),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(c){return new(c||a)(ot(na))},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function QT(a,l){return Array.isArray(l)?l.reduce(QT,a):Object.assign(Object.assign({},a),l)}let jb=(()=>{class a{constructor(c,d,f,m){this._zone=c,this._injector=d,this._exceptionHandler=f,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new L.y(T=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Eo.assertNotInAngularZone(),hd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Eo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{x.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ue.T)(w,C.pipe((0,re.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new Fe(405,"");let f;f=c instanceof hT?c:this._injector.get(Z_).resolveComponentFactory(c),this.componentTypes.push(f.componentType);const m=function ZT(a){return a.isBoundToModule}(f)?void 0:this._injector.get(za),C=f.create(na.NULL,[],d||f.selector,m),T=C.location.nativeElement,x=C.injector.get(Vb,null),k=x&&C.injector.get(Lx);return x&&k&&k.registerApplication(T,x),C.onDestroy(()=>{this.detachView(C.hostView),Gb(this.components,C),k&&k.unregisterApplication(T)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;Gb(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(Nb,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(c){return new(c||a)(ot(Eo),ot(na),ot(fh),ot(cd))},a.\u0275prov=nn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Gb(a,l){const c=a.indexOf(l);c>-1&&a.splice(c,1)}let XT=!0,eI=!1;function zx(){return eI=!0,XT}function $x(){if(eI)throw new Error("Cannot enable prod mode after platform setup.");XT=!1}let nI=(()=>{class a{}return a.__NG_ELEMENT_ID__=qx,a})();function qx(a){return function iI(a,l,c){if(Id(a)&&!c){const d=wi(a.index,l);return new Jp(d,d)}return 47&a.type?new Jp(l[16],l):null}(Sn(),ke(),16==(16&a))}class yg{constructor(){}supports(l){return Ep(l)}create(l){return new _d(l)}}const md=(a,l)=>l;class _d{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||md}forEachItem(l){let c;for(c=this._itHead;null!==c;c=c._next)l(c)}forEachOperation(l){let c=this._itHead,d=this._removalsHead,f=0,m=null;for(;c||d;){const w=!d||c&&c.currentIndex<Cy(d,f,m)?c:d,C=Cy(w,f,m),T=w.currentIndex;if(w===d)f--,d=d._nextRemoved;else if(c=c._next,null==w.previousIndex)f++;else{m||(m=[]);const x=C-f,k=T-f;if(x!=k){for(let j=0;j<x;j++){const X=j<m.length?m[j]:m[j]=0,Ce=X+j;k<=Ce&&Ce<x&&(m[j]=X+1)}m[w.previousIndex]=k-x}}C!==T&&l(w,C,T)}}forEachPreviousItem(l){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachMovedItem(l){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}forEachIdentityChange(l){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)l(c)}diff(l){if(null==l&&(l=[]),!Ep(l))throw new Fe(900,"");return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,m,w,c=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)m=l[C],w=this._trackByFn(C,m),null!==c&&Object.is(c.trackById,w)?(d&&(c=this._verifyReinsertion(c,m,w,C)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,w,C),d=!0),c=c._next}else f=0,function PD(a,l){if(Array.isArray(a))for(let c=0;c<a.length;c++)l(a[c]);else{const c=a[$u()]();let d;for(;!(d=c.next()).done;)l(d.value)}}(l,C=>{w=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,w)?(d&&(c=this._verifyReinsertion(c,C,w,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,w,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,c,d,f){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._reinsertAfter(l,m,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,c)||this._addIdentityChange(l,c),this._moveAfter(l,m,f)):l=this._addAfter(new uf(c,d),m,f),l}_verifyReinsertion(l,c,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?l=this._reinsertAfter(m,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const c=l._next;this._addToRemovals(this._unlink(l)),l=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,m=l._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(l,c,d),this._addToMoves(l,d),l}_moveAfter(l,c,d){return this._unlink(l),this._insertAfter(l,c,d),this._addToMoves(l,d),l}_addAfter(l,c,d){return this._insertAfter(l,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,c,d){const f=null===c?this._itHead:c._next;return l._next=f,l._prev=c,null===f?this._itTail=l:f._prev=l,null===c?this._itHead=l:c._next=l,null===this._linkedRecords&&(this._linkedRecords=new qb),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const c=l._prev,d=l._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,l}_addToMoves(l,c){return l.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qb),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,c){return l.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class uf{constructor(l,c){this.item=l,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vg{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const c=l._prevDup,d=l._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class qb{constructor(){this.map=new Map}put(l){const c=l.trackById;let d=this.map.get(c);d||(d=new vg,this.map.set(c,d)),d.add(l)}get(l,c){const f=this.map.get(l);return f?f.get(l,c):null}remove(l){const c=l.trackById;return this.map.get(c).remove(l)&&this.map.delete(c),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cy(a,l,c){const d=a.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+l+f}class Ey{constructor(){}supports(l){return l instanceof Map||uE(l)}create(){return new sI}}class sI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let c;for(c=this._mapHead;null!==c;c=c._next)l(c)}forEachPreviousItem(l){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)l(c)}forEachChangedItem(l){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)l(c)}forEachAddedItem(l){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)l(c)}forEachRemovedItem(l){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)l(c)}diff(l){if(l){if(!(l instanceof Map||uE(l)))throw new Fe(900,"")}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,c){if(l){const d=l._prev;return c._next=l,c._prev=d,l._prev=c,d&&(d._next=c),l===this._mapHead&&(this._mapHead=c),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(l,c){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,c);const m=f._prev,w=f._next;return m&&(m._next=w),w&&(w._prev=m),f._next=null,f._prev=null,f}const d=new Qx(l);return this._records.set(l,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,c){Object.is(c,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=c,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,c){l instanceof Map?l.forEach(c):Object.keys(l).forEach(d=>c(l[d],d))}}class Qx{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wb(){return new Ty([new yg])}let Ty=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||Wb()),deps:[[a,new ka,new kr]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new Fe(901,"")}}return a.\u0275prov=nn({token:a,providedIn:"root",factory:Wb}),a})();function cf(){return new Bl([new Ey])}let Bl=(()=>{class a{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new a(c)}static extend(c){return{provide:a,useFactory:d=>a.create(c,d||cf()),deps:[[a,new ka,new kr]]}}find(c){const d=this.factories.find(m=>m.supports(c));if(d)return d;throw new Fe(901,"")}}return a.\u0275prov=nn({token:a,providedIn:"root",factory:cf}),a})();const Xx=Ub(null,"core",[]);let wg=(()=>{class a{constructor(c){}}return a.\u0275fac=function(c){return new(c||a)(ot(jb))},a.\u0275mod=$i({type:a}),a.\u0275inj=Qt({}),a})()},3942:(Qe,be,N)=>{N.d(be,{Z:()=>Fe});var o=N(2090),ee=N(4859),L=N(9681),ue=N(1877);class re{constructor(ge,De){this._delegate=ge,this.firebase=De,(0,L._addComponent)(ge,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ge,De=L._DEFAULT_ENTRY_NAME){var $e;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(ge);return!Ye.isInitialized()&&"EXPLICIT"===(null===($e=Ye.getComponent())||void 0===$e?void 0:$e.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:De})}_removeServiceInstance(ge,De=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(De)}_addComponent(ge){(0,L._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,L._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const He=function ae(He){const ge={},De={__esModule:!0,initializeApp:function Ae(Ge,z={}){const Ee=L.initializeApp(Ge,z);if((0,o.r3)(ge,Ee.name))return ge[Ee.name];const Y=new He(Ee,De);return ge[Ee.name]=Y,Y},app:Ye,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Se(Ge){const z=Ge.name,Ee=z.replace("-compat","");if(L._registerComponent(Ge)&&"PUBLIC"===Ge.type){const Y=(se=Ye())=>{if("function"!=typeof se[Ee])throw ce.create("invalid-app-argument",{appName:z});return se[Ee]()};void 0!==Ge.serviceProps&&(0,o.ZB)(Y,Ge.serviceProps),De[Ee]=Y,He.prototype[Ee]=function(...se){return this._getService.bind(this,z).apply(this,Ge.multipleInstances?se:[])}}return"PUBLIC"===Ge.type?De[Ee]:null},removeApp:function $e(Ge){delete ge[Ge]},useAsService:function je(Ge,z){return"serverAuth"===z?null:z},modularAPIs:L}};function Ye(Ge){if(!(0,o.r3)(ge,Ge=Ge||L._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:Ge});return ge[Ge]}return De.default=De,Object.defineProperty(De,"apps",{get:function Te(){return Object.keys(ge).map(Ge=>ge[Ge])}}),Ye.App=He,De}(re);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ge(De){(0,o.ZB)(He,De)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),He}(),G=new ue.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=$;!function Re(He){(0,L.registerVersion)("@firebase/app-compat","0.1.26",He)}()},9681:(Qe,be,N)=>{N.r(be),N.d(be,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>ts,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>un,_addOrOverwriteComponent:()=>nn,_apps:()=>ln,_clearComponents:()=>es,_components:()=>Fn,_getProvider:()=>Qt,_registerComponent:()=>Gi,_removeServiceInstance:()=>Ht,deleteApp:()=>vt,getApp:()=>ar,getApps:()=>zr,initializeApp:()=>Ys,onLog:()=>Ln,registerVersion:()=>kn,setLogLevel:()=>Qs});var o=N(5861),ee=N(4859),L=N(1877),ue=N(2090),re=N(8766);class _e{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function ce(q){const te=q.getComponent();return"VERSION"===(null==te?void 0:te.type)}(Ne)){const Je=Ne.getImmediate();return`${Je.library}/${Je.version}`}return null}).filter(Ne=>Ne).join(" ")}}const ae="@firebase/app",$=new L.Yd("@firebase/app"),Ut="[DEFAULT]",Ke={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,Fn=new Map;function un(q,te){try{q.container.addComponent(te)}catch(Ne){$.debug(`Component ${te.name} failed to register with FirebaseApp ${q.name}`,Ne)}}function nn(q,te){q.container.addOrOverwriteComponent(te)}function Gi(q){const te=q.name;if(Fn.has(te))return $.debug(`There were multiple attempts to register component ${te}.`),!1;Fn.set(te,q);for(const Ne of ln.values())un(Ne,q);return!0}function Qt(q,te){const Ne=q.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),q.container.getProvider(te)}function Ht(q,te,Ne=Ut){Qt(q,te).clearInstance(Ne)}function es(){Fn.clear()}const Di=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class zi{constructor(te,Ne,Je){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=Je,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}const ts="9.8.2";function Ys(q,te={}){"object"!=typeof te&&(te={name:te});const Ne=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},te),Je=Ne.name;if("string"!=typeof Je||!Je)throw Di.create("bad-app-name",{appName:String(Je)});const _t=ln.get(Je);if(_t){if((0,ue.vZ)(q,_t.options)&&(0,ue.vZ)(Ne,_t.config))return _t;throw Di.create("duplicate-app",{appName:Je})}const xt=new ee.H0(Je);for(const It of Fn.values())xt.addComponent(It);const Cn=new zi(q,Ne,xt);return ln.set(Je,Cn),Cn}function ar(q=Ut){const te=ln.get(q);if(!te)throw Di.create("no-app",{appName:q});return te}function zr(){return Array.from(ln.values())}function vt(q){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,o.Z)(function*(q){const te=q.name;ln.has(te)&&(ln.delete(te),yield Promise.all(q.container.getProviders().map(Ne=>Ne.delete())),q.isDeleted=!0)})).apply(this,arguments)}function kn(q,te,Ne){var Je;let _t=null!==(Je=Ke[q])&&void 0!==Je?Je:q;Ne&&(_t+=`-${Ne}`);const xt=_t.match(/\s|\//),Cn=te.match(/\s|\//);if(xt||Cn){const It=[`Unable to register library "${_t}" with version "${te}":`];return xt&&It.push(`library name "${_t}" contains illegal characters (whitespace or "/")`),xt&&Cn&&It.push("and"),Cn&&It.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void $.warn(It.join(" "))}Gi(new ee.wA(`${_t}-version`,()=>({library:_t,version:te}),"VERSION"))}function Ln(q,te){if(null!==q&&"function"!=typeof q)throw Di.create("invalid-log-argument");(0,L.Am)(q,te)}function Qs(q){(0,L.Ub)(q)}const Vn="firebase-heartbeat-store";let Ir=null;function Do(){return Ir||(Ir=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(q,te)=>{0===te&&q.createObjectStore(Vn)}}).catch(q=>{throw Di.create("storage-open",{originalErrorMessage:q.message})})),Ir}function ct(){return(ct=(0,o.Z)(function*(q){try{return(yield Do()).transaction(Vn).objectStore(Vn).get(Sr(q))}catch(te){throw Di.create("storage-get",{originalErrorMessage:te.message})}})).apply(this,arguments)}function Ct(q,te){return xi.apply(this,arguments)}function xi(){return(xi=(0,o.Z)(function*(q,te){try{const Je=(yield Do()).transaction(Vn,"readwrite");return yield Je.objectStore(Vn).put(te,Sr(q)),Je.done}catch(Ne){throw Di.create("storage-set",{originalErrorMessage:Ne.message})}})).apply(this,arguments)}function Sr(q){return`${q.name}!${q.options.appId}`}class Ai{constructor(te){this.container=te,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new W(Ne),this._heartbeatsCachePromise=this._storage.read().then(Je=>(this._heartbeatsCache=Je,Je))}triggerHeartbeat(){var te=this;return(0,o.Z)(function*(){const Je=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_t=Mi();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==_t&&!te._heartbeatsCache.heartbeats.some(xt=>xt.date===_t))return te._heartbeatsCache.heartbeats.push({date:_t,agent:Je}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(xt=>{const Cn=new Date(xt.date).valueOf();return Date.now()-Cn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,o.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Ne=Mi(),{heartbeatsToSend:Je,unsentEntries:_t}=function H(q,te=1024){const Ne=[];let Je=q.slice();for(const _t of q){const xt=Ne.find(Cn=>Cn.agent===_t.agent);if(xt){if(xt.dates.push(_t.date),Z(Ne)>te){xt.dates.pop();break}}else if(Ne.push({agent:_t.agent,dates:[_t.date]}),Z(Ne)>te){Ne.pop();break}Je=Je.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:Je}}(te._heartbeatsCache.heartbeats),xt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Je}));return te._heartbeatsCache.lastSentHeartbeatDate=Ne,_t.length>0?(te._heartbeatsCache.heartbeats=_t,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),xt})()}}function Mi(){return(new Date).toISOString().substring(0,10)}class W{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,o.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function qt(q){return ct.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Ne=this;return(0,o.Z)(function*(){var Je;if(yield Ne._canUseIndexedDBPromise){const xt=yield Ne.read();return Ct(Ne.app,{lastSentHeartbeatDate:null!==(Je=te.lastSentHeartbeatDate)&&void 0!==Je?Je:xt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Ne=this;return(0,o.Z)(function*(){var Je;if(yield Ne._canUseIndexedDBPromise){const xt=yield Ne.read();return Ct(Ne.app,{lastSentHeartbeatDate:null!==(Je=te.lastSentHeartbeatDate)&&void 0!==Je?Je:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...te.heartbeats]})}})()}}function Z(q){return(0,ue.L)(JSON.stringify({version:2,heartbeats:q})).length}!function xe(q){Gi(new ee.wA("platform-logger",te=>new _e(te),"PRIVATE")),Gi(new ee.wA("heartbeat",te=>new Ai(te),"PRIVATE")),kn(ae,"0.7.25",q),kn(ae,"0.7.25","esm2017"),kn("fire-js","")}("")},4859:(Qe,be,N)=>{N.d(be,{H0:()=>ae,wA:()=>L,zt:()=>re});var o=N(5861),ee=N(2090);class L{constructor($,G,ie){this.name=$,this.instanceFactory=G,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class re{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const ie=new ee.BH;if(this.instancesDeferred.set(G,ie),this.isInitialized(G)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:G});ze&&ie.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const ie=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),ze=null!==(G=null==$?void 0:$.optional)&&void 0!==G&&G;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Re){if(ze)return null;throw Re}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ce(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(G){}for(const[G,ie]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(G);try{const Re=this.getOrInitializeService({instanceIdentifier:ze});ie.resolve(Re)}catch(Re){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,o.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...G.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,ie=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:ie,options:G});for(const[Re,Fe]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Re)&&Fe.resolve(ze);return ze}onInit($,G){var ie;const ze=this.normalizeInstanceIdentifier(G),Re=null!==(ie=this.onInitCallbacks.get(ze))&&void 0!==ie?ie:new Set;Re.add($),this.onInitCallbacks.set(ze,Re);const Fe=this.instances.get(ze);return Fe&&$(Fe,ze),()=>{Re.delete($)}}invokeOnInitCallbacks($,G){const ie=this.onInitCallbacks.get(G);if(ie)for(const ze of ie)try{ze($,G)}catch(Re){}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let ie=this.instances.get($);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===ue?void 0:pe),options:G}),this.instances.set($,ie),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(ie,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ie)}catch(ze){}var pe;return ie||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new re($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(Qe,be,N)=>{N.d(be,{Am:()=>pe,Ub:()=>ae,Yd:()=>ce,in:()=>ee});const o=[];var ee=(()=>{return($=ee||(ee={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",ee;var $})();const L={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ue=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},_e=($,G,...ie)=>{if(G<$.logLevel)return;const ze=(new Date).toISOString(),Re=re[G];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Re](`[${ze}]  ${$.name}:`,...ie)};class ce{constructor(G){this.name=G,this._logLevel=ue,this._logHandler=_e,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ee))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...G),this._logHandler(this,ee.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...G),this._logHandler(this,ee.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...G),this._logHandler(this,ee.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...G),this._logHandler(this,ee.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...G),this._logHandler(this,ee.ERROR,...G)}}function ae($){o.forEach(G=>{G.setLogLevel($)})}function pe($,G){for(const ie of o){let ze=null;G&&G.level&&(ze=L[G.level]),ie.userLogHandler=null===$?null:(Re,Fe,...He)=>{const ge=He.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch($e){return null}}).filter(De=>De).join(" ");Fe>=(null!=ze?ze:Re.logLevel)&&$({level:ee[Fe].toLowerCase(),message:ge,args:He,type:Re.name})}}}},8766:(Qe,be,N)=>{N.d(be,{Lj:()=>Ae,X3:()=>Ye});var o=N(5861);let L,ue;const ce=new WeakMap,ae=new WeakMap,pe=new WeakMap,$=new WeakMap,G=new WeakMap;let Re={get(z,Ee,Y){if(z instanceof IDBTransaction){if("done"===Ee)return ae.get(z);if("objectStoreNames"===Ee)return z.objectStoreNames||pe.get(z);if("store"===Ee)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return De(z[Ee])},set:(z,Ee,Y)=>(z[Ee]=Y,!0),has:(z,Ee)=>z instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in z};function ge(z){return"function"==typeof z?function He(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...Ee){return z.apply($e(this),Ee),De(ce.get(this))}:function(...Ee){return De(z.apply($e(this),Ee))}:function(Ee,...Y){const se=z.call($e(this),Ee,...Y);return pe.set(se,Ee.sort?Ee.sort():[Ee]),De(se)}}(z):(z instanceof IDBTransaction&&function ze(z){if(ae.has(z))return;const Ee=new Promise((Y,se)=>{const ne=()=>{z.removeEventListener("complete",ye),z.removeEventListener("error",le),z.removeEventListener("abort",le)},ye=()=>{Y(),ne()},le=()=>{se(z.error||new DOMException("AbortError","AbortError")),ne()};z.addEventListener("complete",ye),z.addEventListener("error",le),z.addEventListener("abort",le)});ae.set(z,Ee)}(z),((z,Ee)=>Ee.some(Y=>z instanceof Y))(z,function re(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,Re):z)}function De(z){if(z instanceof IDBRequest)return function ie(z){const Ee=new Promise((Y,se)=>{const ne=()=>{z.removeEventListener("success",ye),z.removeEventListener("error",le)},ye=()=>{Y(De(z.result)),ne()},le=()=>{se(z.error),ne()};z.addEventListener("success",ye),z.addEventListener("error",le)});return Ee.then(Y=>{Y instanceof IDBCursor&&ce.set(Y,z)}).catch(()=>{}),G.set(Ee,z),Ee}(z);if($.has(z))return $.get(z);const Ee=ge(z);return Ee!==z&&($.set(z,Ee),G.set(Ee,z)),Ee}const $e=z=>G.get(z);function Ye(z,Ee,{blocked:Y,upgrade:se,blocking:ne,terminated:ye}={}){const le=indexedDB.open(z,Ee),Ve=De(le);return se&&le.addEventListener("upgradeneeded",gt=>{se(De(le.result),gt.oldVersion,gt.newVersion,De(le.transaction))}),Y&&le.addEventListener("blocked",()=>Y()),Ve.then(gt=>{ye&&gt.addEventListener("close",()=>ye()),ne&&gt.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Ve}function Ae(z,{blocked:Ee}={}){const Y=indexedDB.deleteDatabase(z);return Ee&&Y.addEventListener("blocked",()=>Ee()),De(Y).then(()=>{})}const Te=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],je=new Map;function Ge(z,Ee){if(!(z instanceof IDBDatabase)||Ee in z||"string"!=typeof Ee)return;if(je.get(Ee))return je.get(Ee);const Y=Ee.replace(/FromIndex$/,""),se=Ee!==Y,ne=Se.includes(Y);if(!(Y in(se?IDBIndex:IDBObjectStore).prototype)||!ne&&!Te.includes(Y))return;const ye=function(){var le=(0,o.Z)(function*(Ve,...gt){const $t=this.transaction(Ve,ne?"readwrite":"readonly");let Ut=$t.store;return se&&(Ut=Ut.index(gt.shift())),(yield Promise.all([Ut[Y](...gt),ne&&$t.done]))[0]});return function(gt){return le.apply(this,arguments)}}();return je.set(Ee,ye),ye}!function Fe(z){Re=z(Re)}(z=>aV(oV({},z),{get:(Ee,Y,se)=>Ge(Ee,Y)||z.get(Ee,Y,se),has:(Ee,Y)=>!!Ge(Ee,Y)||z.has(Ee,Y)}))},5861:(Qe,be,N)=>{function o(L,ue,re,_e,ce,ae,pe){try{var $=L[ae](pe),G=$.value}catch(ie){return void re(ie)}$.done?ue(G):Promise.resolve(G).then(_e,ce)}function ee(L){return function(){var ue=this,re=arguments;return new Promise(function(_e,ce){var ae=L.apply(ue,re);function pe(G){o(ae,_e,ce,pe,$,"next",G)}function $(G){o(ae,_e,ce,pe,$,"throw",G)}pe(void 0)})}}N.d(be,{Z:()=>ee})}},Qe=>{Qe(Qe.s=2758)}]);